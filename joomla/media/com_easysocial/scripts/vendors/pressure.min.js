!function(){var a=function(a){var c=this,d=function(){!function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof d?c.exports=b():a.Pressure=b()}(this,function(){"use strict";function c(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function d(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)
}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},b=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b
}}(),f={set:function(a,b,c){m(a,b,c)},config:function(a){l.set(a)},map:function(){return o.apply(null,arguments)}},g=function(){function a(b,c,d){e(this,a),this.routeEvents(b,c,d),this.preventSelect(b,d)}return b(a,[{key:"routeEvents",value:function(a,b,c){var d=l.get("only",c);this.adapter=!r||"pointer"!==d&&null!==d?!q||"touch"!==d&&null!==d?!p||"mouse"!==d&&null!==d?new h(a,b).bindUnsupportedEvent():new i(a,b,c).bindEvents():new j(a,b,c).bindEvents():new k(a,b,c).bindEvents()}},{key:"preventSelect",value:function(a,b){l.get("preventSelect",b)&&(a.style.webkitTouchCallout="none",a.style.webkitUserSelect="none",a.style.khtmlUserSelect="none",a.style.MozUserSelect="none",a.style.msUserSelect="none",a.style.userSelect="none")
}}]),a}(),h=function(){function a(b,c,d){e(this,a),this.el=b,this.block=c,this.options=d,this.pressed=!1,this.deepPressed=!1,this.nativeSupport=!1,this.runningPolyfill=!1,this.runKey=Math.random()}return b(a,[{key:"setPressed",value:function(a){this.pressed=a}},{key:"setDeepPressed",value:function(a){this.deepPressed=a}},{key:"isPressed",value:function(){return this.pressed}},{key:"isDeepPressed",value:function(){return this.deepPressed}},{key:"add",value:function(a,b){this.el.addEventListener(a,b,!1)}},{key:"runClosure",value:function(a){a in this.block&&this.block[a].apply(this.el,Array.prototype.slice.call(arguments,1))
}},{key:"fail",value:function(a,b){l.get("polyfill",this.options)?this.runKey===b&&this.runPolyfill(a):this.runClosure("unsupported",a)}},{key:"bindUnsupportedEvent",value:function(){var a=this;this.add(q?"touchstart":"mousedown",function(b){return a.runClosure("unsupported",b)})}},{key:"_startPress",value:function(a){this.isPressed()===!1&&(this.runningPolyfill=!1,this.setPressed(!0),this.runClosure("start",a))}},{key:"_startDeepPress",value:function(a){this.isPressed()&&this.isDeepPressed()===!1&&(this.setDeepPressed(!0),this.runClosure("startDeepPress",a))
}},{key:"_changePress",value:function(a,b){this.nativeSupport=!0,this.runClosure("change",a,b)}},{key:"_endDeepPress",value:function(){this.isPressed()&&this.isDeepPressed()&&(this.setDeepPressed(!1),this.runClosure("endDeepPress"))}},{key:"_endPress",value:function(){this.runningPolyfill===!1?(this.isPressed()&&(this._endDeepPress(),this.setPressed(!1),this.runClosure("end")),this.runKey=Math.random(),this.nativeSupport=!1):this.setPressed(!1)}},{key:"deepPress",value:function(a,b){a>=.5?this._startDeepPress(b):this._endDeepPress()
}},{key:"runPolyfill",value:function(a){this.increment=0===l.get("polyfillSpeedUp",this.options)?1:10/l.get("polyfillSpeedUp",this.options),this.decrement=0===l.get("polyfillSpeedDown",this.options)?1:10/l.get("polyfillSpeedDown",this.options),this.setPressed(!0),this.runClosure("start",a),this.runningPolyfill===!1&&this.loopPolyfillForce(0,a)}},{key:"loopPolyfillForce",value:function(a,b){this.nativeSupport===!1&&(this.isPressed()?(this.runningPolyfill=!0,a=a+this.increment>1?1:a+this.increment,this.runClosure("change",a,b),this.deepPress(a,b),setTimeout(this.loopPolyfillForce.bind(this,a,b),10)):(a=a-this.decrement<0?0:a-this.decrement,.5>a&&this.isDeepPressed()&&(this.setDeepPressed(!1),this.runClosure("endDeepPress")),0===a?(this.runningPolyfill=!1,this.setPressed(!0),this._endPress()):(this.runClosure("change",a,b),this.deepPress(a,b),setTimeout(this.loopPolyfillForce.bind(this,a,b),10))))
}}]),a}(),i=function(a){function f(a,b,d){return e(this,f),c(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,a,b,d))}return d(f,a),b(f,[{key:"bindEvents",value:function(){this.add("webkitmouseforcewillbegin",this._startPress.bind(this)),this.add("mousedown",this.support.bind(this)),this.add("webkitmouseforcechanged",this.change.bind(this)),this.add("webkitmouseforcedown",this._startDeepPress.bind(this)),this.add("webkitmouseforceup",this._endDeepPress.bind(this)),this.add("mouseleave",this._endPress.bind(this)),this.add("mouseup",this._endPress.bind(this))
}},{key:"support",value:function(a){this.isPressed()===!1&&this.fail(a,this.runKey)}},{key:"change",value:function(a){this.isPressed()&&a.webkitForce>0&&this._changePress(this.normalizeForce(a.webkitForce),a)}},{key:"normalizeForce",value:function(a){return this.reachOne(o(a,1,3,0,1))}},{key:"reachOne",value:function(a){return a>.995?1:a}}]),f}(h),j=function(a){function f(a,b,d){return e(this,f),c(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,a,b,d))}return d(f,a),b(f,[{key:"bindEvents",value:function(){t?(this.add("touchforcechange",this.start.bind(this)),this.add("touchstart",this.support.bind(this,0)),this.add("touchend",this._endPress.bind(this))):(this.add("touchstart",this.startLegacy.bind(this)),this.add("touchend",this._endPress.bind(this)))
}},{key:"start",value:function(a){a.touches.length>0&&(this._startPress(a),this.touch=this.selectTouch(a),this.touch&&this._changePress(this.touch.force,a))}},{key:"support",value:function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.runKey;this.isPressed()===!1&&(6>=a?(a++,setTimeout(this.support.bind(this,a,b,c),10)):this.fail(b,c))}},{key:"startLegacy",value:function(a){this.initialForce=a.touches[0].force,this.supportLegacy(0,a,this.runKey,this.initialForce)}},{key:"supportLegacy",value:function(a,b,c,d){d!==this.initialForce?(this._startPress(b),this.loopForce(b)):6>=a?(a++,setTimeout(this.supportLegacy.bind(this,a,b,c,d),10)):this.fail(b,c)
}},{key:"loopForce",value:function(a){this.isPressed()&&(this.touch=this.selectTouch(a),setTimeout(this.loopForce.bind(this,a),10),this._changePress(this.touch.force,a))}},{key:"selectTouch",value:function(a){if(1===a.touches.length)return this.returnTouch(a.touches[0],a);for(var b=0;b<a.touches.length;b++)if(a.touches[b].target===this.el||this.el.contains(a.touches[b].target))return this.returnTouch(a.touches[b],a)}},{key:"returnTouch",value:function(a,b){return this.deepPress(a.force,b),a}}]),f}(h),k=function(a){function f(a,b,d){return e(this,f),c(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,a,b,d))
}return d(f,a),b(f,[{key:"bindEvents",value:function(){this.add("pointerdown",this.support.bind(this)),this.add("pointermove",this.change.bind(this)),this.add("pointerup",this._endPress.bind(this)),this.add("pointerleave",this._endPress.bind(this))}},{key:"support",value:function(a){this.isPressed()===!1&&(0===a.pressure||.5===a.pressure?this.fail(a,this.runKey):(this._startPress(a),this._changePress(a.pressure,a)))}},{key:"change",value:function(a){this.isPressed()&&a.pressure>0&&.5!==a.pressure&&(this._changePress(a.pressure,a),this.deepPress(a.pressure,a))
}}]),f}(h),l={polyfill:!0,polyfillSpeedUp:1e3,polyfillSpeedDown:0,preventSelect:!0,only:null,get:function(a,b){return b.hasOwnProperty(a)?b[a]:this[a]},set:function(a){for(var b in a)a.hasOwnProperty(b)&&this.hasOwnProperty(b)&&"get"!=b&&"set"!=b&&(this[b]=a[b])}},m=function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"==typeof a||a instanceof String)for(var d=document.querySelectorAll(a),e=0;e<d.length;e++)new g(d[e],b,c);else if(n(a))new g(a,b,c);else for(var e=0;e<a.length;e++)new g(a[e],b,c)
},n=function(b){return"object"===("undefined"==typeof HTMLElement?"undefined":a(HTMLElement))?b instanceof HTMLElement:b&&"object"===("undefined"==typeof b?"undefined":a(b))&&null!==b&&1===b.nodeType&&"string"==typeof b.nodeName},o=function(a,b,c,d,e){return(a-b)*(e-d)/(c-b)+d},p=!1,q=!1,r=!1,s=!1,t=!1;if("undefined"!=typeof window){if("undefined"!=typeof Touch)try{(Touch.prototype.hasOwnProperty("force")||"force"in new Touch)&&(s=!0)}catch(u){}q="ontouchstart"in window.document&&s,p="onmousemove"in window.document&&!q,r="onpointermove"in window.document,t="ontouchforcechange"in window.document
}return f})};d(),c.resolveWith(d)};FD40.module("pressure",a)}();