function createSafeFragment(a){var b=nodeNames.split("|"),c=a.createDocumentFragment();if(c.createElement)for(;b.length;)c.createElement(b.pop());return c}function fixDefaultChecked(a){rcheckableType.test(a.type)&&(a.defaultChecked=a.checked)}function getAll(a,b){var c,d,e=0,f=typeof a.getElementsByTagName!==strundefined?a.getElementsByTagName(b||"*"):typeof a.querySelectorAll!==strundefined?a.querySelectorAll(b||"*"):void 0;if(!f)for(f=[],c=a.childNodes||a;null!=(d=c[e]);e++)!b||jQuery.nodeName(d,b)?f.push(d):jQuery.merge(f,getAll(d,b));
return void 0===b||b&&jQuery.nodeName(a,b)?jQuery.merge([a],f):f}function setGlobalEval(a,b){for(var c,d=0;null!=(c=a[d]);d++)jQuery._data(c,"globalEval",!b||jQuery._data(b[d],"globalEval"))}!function(a){var c,d,b=function(a){var b=[],c=1,d=0,a=a,e=function(){b.push([this,arguments]),c||e.execute()};return e.execute=function(){if(!d){d=1,c=0;for(var e;e=b.shift();)a.apply(e[0],e[1]);d=0}},e.lock=function(){c=0},e},e={},f=0,g=[],h=window[a]={setup:function(a){d=a,h.init()},jquery:function(a){c||(c=a,h.init())
},init:function(){f||c&&d&&(h.$=c.initialize(d),h.plugin.execute(),f=1)},plugin:b(function(a,b){b.apply(h,[c])}),module:b(function(a,b){c.module(a,b)}),installer:function(a,b,c){if(g[a]||(g[a]=[]),!b)return g[a];var d=e[a];return d.registered?d.install(b,c):(g[a].push([b,c]),void 0)},component:function(a,b){if(!a)return e;if(!b)return e[a];if("function"==typeof b){var d=b;return d.registered=!0,e[a]=d}var g=[],h=function(a,b,c){return{method:a,context:this,args:c}},i=function(a,b,c){return function(){return(c||g).push(h(a,this,arguments)),b
}},j=function(a,b,c){for(var d=0;d<b.length;d++){var e=b[d];a[e]=i(e,a,c)}return a},k=function(a,b){return function(){var c=[h(a,this,arguments)];return g.push(c),j({},b,c)}};g.execute=function(){for(var b=e[a],c=0;c<g.length;c++){var d=g[c];if("[object Array]"===Object.prototype.toString.call(d))for(var f=d,h=b,i=0;i<f.length;i++)h=h[f[i].method].apply(h,f[i].args);else b[d.method].apply(b,d.args)}};var d=j(function(){d.run.apply(this.arguments)},["run","ready","template","dialog"]);return d.className=a,d.options=b,d.queue=g,d.module=k("module",["done","always","fail","progress"]),d.require=k("require",["library","script","stylesheet","language","template","app","view","done","always","fail","progress"]),window[a]=e[a]=d,f&&c.Component.register(d),d
}}}("FD40"),FD40.setup({environment:window.es.environment,source:"local",mode:"production"==window.es.environment?"compressed":"uncompressed",path:window.es.rootUrl+"/media/com_easysocial/scripts/vendors",cdn:"",extension:".js",cdnPath:"",rootPath:window.es.rootUrl,basePath:window.es.rootUrl,indexUrl:window.es.rootUrl+"/index.php",token:window.es.token,joomla:{appendTitle:window.es.appendTitle,sitename:window.es.siteName},locale:{lang:window.es.locale}}),FD40.component("EasySocial",{environment:window.es.environment,source:"local",mode:"production"==window.es.environment?"compressed":"uncompressed",mode:"compressed",baseUrl:window.es.baseUrl,version:"2.0",momentLang:window.es.momentLang,ajaxUrl:window.es.ajaxUrl}),!function(a){var b,c=" ",d="width",e="height",f="replace",g="classList",h="className",i="parentNode",j="fit-width",k="fit-height",l="fit-both",m="fit-small",n=j+c+k+c+l+c+m,o=function(a,b){return a.getAttribute("data-"+b)
},p=function(a,b){return a["natural"+b[0].toUpperCase()+b.slice(1)]},q=function(a,b){return parseInt(o(a,b)||p(a,b)||a[b])},r=function(a,b){a[g]?a[g].add(b):a[h]+=c+b},s=function(a,b){a[h]=a[h][f](new RegExp("\\b("+b[f](/\s+/g,"|")+")\\b","g"),c)[f](/\s+/g,c)[f](/^\s+|\s+$/g,"")},t=function(a,b,c){a.style[b]=c+"px"},u=function(a,b,c,f,g,h,v,x,y,z){return!o(a,d)&&0===p(a,d)&&(a._retry||(a._retry=0))<=25?setTimeout(function(){a._retry++,u(a)},200):(b=a[i],c=b[i],f=c[i],g=o(b,"mode"),h=o(b,"threshold"),v=q(a,d),x=q(a,e),y=b.offsetWidth,z=b.offsetHeight,s(f,n),r(f,h>v&&h>x?function(){return t(a,d,v),t(a,e,x),m
}():"cover"==g?function(b,c,d){return 1>y||1>z?(w.push(a),l):(b=y/z,c=y/v,d=z/x,1>b?z>x*c?k:j:b>1?y>v*d?j:k:1==b?1>=v/x?j:k:void 0)}():function(){return w.push(a),a.style.maxHeight="none",t(a,"maxHeight",b.offsetHeight),l}()),a.removeAttribute("onload"),void 0)},v=function(a,b){for(b=w,w=[];a=b.shift();)a[i]&&u(a)},w=[],x=function(){clearTimeout(b),b=setTimeout(v,500)},y=a.ESImageList||[];for(a.ESImage=u,a.ESImageRefresh=v,a.addEventListener?a.addEventListener("resize",x,!1):a.attachEvent("resize",x);y.length;)u(y.shift())
}(window),jQuery.version="4.0",jQuery.long_version="4.0.37";var support={};!function(){function h(){var a,b,c,h;b=document.getElementsByTagName("body")[0],b&&b.style&&(a=document.createElement("div"),c=document.createElement("div"),c.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",b.appendChild(c).appendChild(a),a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",d=e=!1,g=!0,window.getComputedStyle&&(d="1%"!==(window.getComputedStyle(a,null)||{}).top,e="4px"===(window.getComputedStyle(a,null)||{width:"4px"}).width,h=a.appendChild(document.createElement("div")),h.style.cssText=a.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",h.style.marginRight=h.style.width="0",a.style.width="1px",g=!parseFloat((window.getComputedStyle(h,null)||{}).marginRight),a.removeChild(h)),a.innerHTML="<table><tr><td></td><td>t</td></tr></table>",h=a.getElementsByTagName("td"),h[0].style.cssText="margin:0;border:0;padding:0;display:none",f=0===h[0].offsetHeight,f&&(h[0].style.display="",h[1].style.display="none",f=0===h[0].offsetHeight),b.removeChild(c))
}var a,b,c,d,e,f,g;a=document.createElement("div"),a.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",c=a.getElementsByTagName("a")[0],b=c&&c.style,b&&(b.cssText="float:left;opacity:.5",support.opacity="0.5"===b.opacity,support.cssFloat=!!b.cssFloat,a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",support.clearCloneStyle="content-box"===a.style.backgroundClip,support.boxSizing=""===b.boxSizing||""===b.MozBoxSizing||""===b.WebkitBoxSizing,jQuery.extend(support,{reliableHiddenOffsets:function(){return null==f&&h(),f
},boxSizingReliable:function(){return null==e&&h(),e},pixelPosition:function(){return null==d&&h(),d},reliableMarginRight:function(){return null==g&&h(),g}}))}();var strundefined="undefined",rcheckableType=/^(?:checkbox|radio)$/i,nodeNames="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",rinlinejQuery=/ jQuery\d+="(?:null|\d+)"/g,rnoshimcache=new RegExp("<(?:"+nodeNames+")[\\s/>]","i"),rleadingWhitespace=/^\s+/,rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rtagName=/<([\w:]+)/,rtbody=/<tbody/i,rhtml=/<|&#?\w+;/,rnoInnerhtml=/<(?:script|style|link)/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptType=/^$|\/(?:java|ecma)script/i,rscriptTypeMasked=/^true\/(.*)/,rcleanScript=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]},safeFragment=createSafeFragment(document),fragmentDiv=safeFragment.appendChild(document.createElement("div"));
wrapMap.optgroup=wrapMap.option,wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead,wrapMap.th=wrapMap.td,jQuery.uid=function(a,b){return(a?a:"")+Math.random().toString().replace(".","")+(b?b:"")},jQuery.globalNamespace=jQuery.uid("Komento"),window[jQuery.globalNamespace]=jQuery,jQuery.run=function(a){return jQuery.isFunction(a)?a(jQuery):null},jQuery.initialize=function(a){jQuery.initialized||(jQuery.buildFragment=function(a,b,c,d){for(var e,f,g,h,i,j,k,l=a.length,m=createSafeFragment(b),n=[],o=0;l>o;o++)if(f=a[o],f||0===f)if("object"===jQuery.type(f))jQuery.merge(n,f.nodeType?[f]:f);
else if(rhtml.test(f)){for(h=h||m.appendChild(b.createElement("div")),i=(rtagName.exec(f)||["",""])[1].toLowerCase(),k=wrapMap[i]||wrapMap._default,h.innerHTML=k[1]+f.replace(rxhtmlTag,"<$1></$2>")+k[2],e=k[0];e--;)h=h.lastChild;if(!support.leadingWhitespace&&rleadingWhitespace.test(f)&&n.push(b.createTextNode(rleadingWhitespace.exec(f)[0])),!support.tbody)for(f="table"!==i||rtbody.test(f)?"<table>"!==k[1]||rtbody.test(f)?0:h:h.firstChild,e=f&&f.childNodes.length;e--;)jQuery.nodeName(j=f.childNodes[e],"tbody")&&!j.childNodes.length&&f.removeChild(j);
for(jQuery.merge(n,h.childNodes),h.textContent="";h.firstChild;)h.removeChild(h.firstChild);h=m.lastChild}else n.push(b.createTextNode(f));for(h&&m.removeChild(h),support.appendChecked||jQuery.grep(getAll(n,"input"),fixDefaultChecked),o=0;f=n[o++];)if((!d||-1===jQuery.inArray(f,d))&&(g=jQuery.contains(f.ownerDocument,f),h=getAll(m.appendChild(f),"script"),g&&setGlobalEval(h),c))for(e=0;f=h[e++];)rscriptType.test(f.type||"")&&c.push(f);return h=null,m},jQuery.extend(jQuery,a),"development"==jQuery.environment&&(window.F=jQuery),jQuery.initialized=!0,FD40.module.execute())
},FD40.jquery(jQuery),"function"==typeof define&&define.amd&&define("jquery",[],function(){return jQuery}),FD40.plugin("lodash",function(a){function P(a,b,c){for(var d=(c||0)-1,e=a?a.length:0;++d<e;)if(a[d]===b)return d;return-1}function Q(a,b){var c=typeof b;if(a=a.cache,"boolean"==c||null==b)return a[b]?0:-1;"number"!=c&&"string"!=c&&(c="object");var d="number"==c?b:f+b;return a=(a=a[c])&&a[d],"object"==c?a&&P(a,b)>-1?0:-1:a?0:-1}function R(a){var b=this.cache,c=typeof a;if("boolean"==c||null==a)b[a]=!0;else{"number"!=c&&"string"!=c&&(c="object");
var d="number"==c?a:f+a,e=b[c]||(b[c]={});"object"==c?(e[d]||(e[d]=[])).push(a):e[d]=!0}}function S(a){return a.charCodeAt(0)}function T(a,b){for(var c=a.criteria,d=b.criteria,e=-1,f=c.length;++e<f;){var g=c[e],h=d[e];if(g!==h){if(g>h||"undefined"==typeof g)return 1;if(h>g||"undefined"==typeof h)return-1}}return a.index-b.index}function U(a){var b=-1,c=a.length,d=a[0],e=a[c/2|0],f=a[c-1];if(d&&"object"==typeof d&&e&&"object"==typeof e&&f&&"object"==typeof f)return!1;var g=X();g["false"]=g["null"]=g["true"]=g.undefined=!1;
var h=X();for(h.array=a,h.cache=g,h.push=R;++b<c;)h.push(a[b]);return h}function V(a){return"\\"+J[a]}function W(){return c.pop()||[]}function X(){return d.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,value:null}}function Y(a){a.length=0,c.length<h&&c.push(a)}function Z(a){var b=a.cache;b&&Z(b),a.array=a.cache=a.criteria=a.object=a.number=a.string=a.value=null,d.length<h&&d.push(a)}function $(a,b,c){b||(b=0),"undefined"==typeof c&&(c=a?a.length:0);
for(var d=-1,e=c-b||0,f=Array(0>e?0:e);++d<e;)f[d]=a[b+d];return f}function _(a){function Cb(a){return a&&"object"==typeof a&&!Zb(a)&&mb.call(a,"__wrapped__")?a:new Db(a)}function Db(a,b){this.__chain__=!!b,this.__wrapped__=a}function Fb(a){function e(){if(c){var a=$(c);nb.apply(a,arguments)}if(this instanceof e){var f=Hb(b.prototype),g=b.apply(f,a||arguments);return zc(g)?g:f}return b.apply(d,a||arguments)}var b=a[0],c=a[2],d=a[4];return Vb(e,a),e}function Gb(a,b,c,d,e){if(c){var f=c(a);if("undefined"!=typeof f)return f
}var g=zc(a);if(!g)return a;var h=fb.call(a);if(!F[h])return a;var i=Bb[h];switch(h){case y:case z:return new i(+a);case B:case E:return new i(a);case D:return f=i(a.source,n.exec(a)),f.lastIndex=a.lastIndex,f}var j=Zb(a);if(b){var k=!d;d||(d=W()),e||(e=W());for(var l=d.length;l--;)if(d[l]==a)return e[l];f=j?i(a.length):{}}else f=j?$(a):ec({},a);return j&&(mb.call(a,"index")&&(f.index=a.index),mb.call(a,"input")&&(f.input=a.input)),b?(d.push(a),e.push(f),(j?Vc:nc)(a,function(a,g){f[g]=Gb(a,b,c,d,e)}),k&&(Y(d),Y(e)),f):f
}function Hb(a){return zc(a)?sb(a):{}}function Ib(a,b,c){if("function"!=typeof a)return $d;if("undefined"==typeof b||!("prototype"in a))return a;var d=a.__bindData__;if("undefined"==typeof d&&(Eb.funcNames&&(d=!a.name),d=d||!Eb.funcDecomp,!d)){var e=kb.call(a);Eb.funcNames||(d=!o.test(e)),d||(d=s.test(e),Vb(a,d))}if(d===!1||d!==!0&&1&d[1])return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)
}}return Jd(a,b)}function Jb(a){function m(){var a=h?f:this;if(d){var n=$(d);nb.apply(n,arguments)}if((e||j)&&(n||(n=$(arguments)),e&&nb.apply(n,e),j&&n.length<g))return c|=16,Jb([b,k?c:-4&c,n,null,f,g]);if(n||(n=arguments),i&&(b=a[l]),this instanceof m){a=Hb(b.prototype);var o=b.apply(a,n);return zc(o)?o:a}return b.apply(a,n)}var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=1&c,i=2&c,j=4&c,k=8&c,l=b;return Vb(m,a),m}function Kb(a,b){var c=-1,d=Tb(),e=a?a.length:0,f=e>=g&&d===P,h=[];if(f){var i=U(b);i?(d=Q,b=i):f=!1
}for(;++c<e;){var j=a[c];d(b,j)<0&&h.push(j)}return f&&Z(b),h}function Lb(a,b,c,d){for(var e=(d||0)-1,f=a?a.length:0,g=[];++e<f;){var h=a[e];if(h&&"object"==typeof h&&"number"==typeof h.length&&(Zb(h)||Yb(h))){b||(h=Lb(h,b,c));var i=-1,j=h.length,k=g.length;for(g.length+=j;++i<j;)g[k++]=h[i]}else c||g.push(h)}return g}function Mb(a,b,c,d,e,f){if(c){var g=c(a,b);if("undefined"!=typeof g)return!!g}if(a===b)return 0!==a||1/a==1/b;var h=typeof a,i=typeof b;if(!(a!==a||a&&I[h]||b&&I[i]))return!1;if(null==a||null==b)return a===b;
var j=fb.call(a),k=fb.call(b);if(j==w&&(j=C),k==w&&(k=C),j!=k)return!1;switch(j){case y:case z:return+a==+b;case B:return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case D:case E:return a==R(b)}var l=j==x;if(!l){var m=mb.call(a,"__wrapped__"),n=mb.call(b,"__wrapped__");if(m||n)return Mb(m?a.__wrapped__:a,n?b.__wrapped__:b,c,d,e,f);if(j!=C)return!1;var o=a.constructor,p=b.constructor;if(o!=p&&!(yc(o)&&o instanceof o&&yc(p)&&p instanceof p)&&"constructor"in a&&"constructor"in b)return!1}var q=!e;e||(e=W()),f||(f=W());for(var r=e.length;r--;)if(e[r]==a)return f[r]==b;
var s=0;if(g=!0,e.push(a),f.push(b),l){if(r=a.length,s=b.length,g=s==r,g||d)for(;s--;){var t=r,u=b[s];if(d)for(;t--&&!(g=Mb(a[t],u,c,d,e,f)););else if(!(g=Mb(a[s],u,c,d,e,f)))break}}else lc(b,function(b,h,i){return mb.call(i,h)?(s++,g=mb.call(a,h)&&Mb(a[h],b,c,d,e,f)):void 0}),g&&!d&&lc(a,function(a,b,c){return mb.call(c,b)?g=--s>-1:void 0});return e.pop(),f.pop(),q&&(Y(e),Y(f)),g}function Nb(a,b,c,d,e){(Zb(b)?Vc:nc)(b,function(b,f){var g,h,i=b,j=a[f];if(b&&((h=Zb(b))||Dc(b))){for(var k=d.length;k--;)if(g=d[k]==b){j=e[k];
break}if(!g){var l;c&&(i=c(j,b),(l="undefined"!=typeof i)&&(j=i)),l||(j=h?Zb(j)?j:[]:Dc(j)?j:{}),d.push(b),e.push(j),l||Nb(j,b,c,d,e)}}else c&&(i=c(j,b),"undefined"==typeof i&&(i=b)),"undefined"!=typeof i&&(j=i);a[f]=j})}function Ob(a,b){return a+jb(Ab()*(b-a+1))}function Pb(a,b,c){var d=-1,e=Tb(),f=a?a.length:0,h=[],i=!b&&f>=g&&e===P,j=c||i?W():h;if(i){var k=U(j);e=Q,j=k}for(;++d<f;){var l=a[d],m=c?c(l,d,a):l;(b?!d||j[j.length-1]!==m:e(j,m)<0)&&((c||i)&&j.push(m),h.push(l))}return i?(Y(j.array),Z(j)):c&&Y(j),h
}function Qb(a){return function(b,c,d){var e={};c=Cb.createCallback(c,d,3);var f=-1,g=b?b.length:0;if("number"==typeof g)for(;++f<g;){var h=b[f];a(e,h,c(h,f,b),b)}else nc(b,function(b,d,f){a(e,b,c(b,d,f),f)});return e}}function Rb(a,b,c,d,e,f){var g=1&b,h=2&b,i=4&b,k=16&b,l=32&b;if(!h&&!yc(a))throw new bb;k&&!c.length&&(b&=-17,k=c=!1),l&&!d.length&&(b&=-33,l=d=!1);var m=a&&a.__bindData__;if(m&&m!==!0)return m=$(m),m[2]&&(m[2]=$(m[2])),m[3]&&(m[3]=$(m[3])),!g||1&m[1]||(m[4]=e),!g&&1&m[1]&&(b|=8),!i||4&m[1]||(m[5]=f),k&&nb.apply(m[2]||(m[2]=[]),c),l&&qb.apply(m[3]||(m[3]=[]),d),m[1]|=b,Rb.apply(null,m);
var n=1==b||17===b?Fb:Jb;return n([a,b,c,d,e,f])}function Sb(a){return ac[a]}function Tb(){var a=(a=Cb.indexOf)===sd?P:a;return a}function Ub(a){return"function"==typeof a&&gb.test(a)}function Wb(a){var b,c;return a&&fb.call(a)==C&&(b=a.constructor,!yc(b)||b instanceof b)?(lc(a,function(a,b){c=b}),"undefined"==typeof c||mb.call(a,c)):!1}function Xb(a){return bc[a]}function Yb(a){return a&&"object"==typeof a&&"number"==typeof a.length&&fb.call(a)==w||!1}function fc(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c=b,b=!1),Gb(a,b,"function"==typeof c&&Ib(c,d,1))
}function gc(a,b,c){return Gb(a,!0,"function"==typeof b&&Ib(b,c,1))}function hc(a,b){var c=Hb(a);return b?ec(c,b):c}function jc(a,b,c){var d;return b=Cb.createCallback(b,c,3),nc(a,function(a,c,e){return b(a,c,e)?(d=c,!1):void 0}),d}function kc(a,b,c){var d;return b=Cb.createCallback(b,c,3),oc(a,function(a,c,e){return b(a,c,e)?(d=c,!1):void 0}),d}function mc(a,b,c){var d=[];lc(a,function(a,b){d.push(b,a)});var e=d.length;for(b=Ib(b,c,3);e--&&b(d[e--],d[e],a)!==!1;);return a}function oc(a,b,c){var d=_b(a),e=d.length;
for(b=Ib(b,c,3);e--;){var f=d[e];if(b(a[f],f,a)===!1)break}return a}function pc(a){var b=[];return lc(a,function(a,c){yc(a)&&b.push(c)}),b.sort()}function qc(a,b){return a?mb.call(a,b):!1}function rc(a){for(var b=-1,c=_b(a),d=c.length,e={};++b<d;){var f=c[b];e[a[f]]=f}return e}function sc(a){return a===!0||a===!1||a&&"object"==typeof a&&fb.call(a)==y||!1}function tc(a){return a&&"object"==typeof a&&fb.call(a)==z||!1}function uc(a){return a&&1===a.nodeType||!1}function vc(a){var b=!0;if(!a)return b;var c=fb.call(a),d=a.length;
return c==x||c==E||c==w||c==C&&"number"==typeof d&&yc(a.splice)?!d:(nc(a,function(){return b=!1}),b)}function wc(a,b,c,d){return Mb(a,b,"function"==typeof c&&Ib(c,d,2))}function xc(a){return ub(a)&&!vb(parseFloat(a))}function yc(a){return"function"==typeof a}function zc(a){return!(!a||!I[typeof a])}function Ac(a){return Cc(a)&&a!=+a}function Bc(a){return null===a}function Cc(a){return"number"==typeof a||a&&"object"==typeof a&&fb.call(a)==B||!1}function Ec(a){return a&&"object"==typeof a&&fb.call(a)==D||!1}function Fc(a){return"string"==typeof a||a&&"object"==typeof a&&fb.call(a)==E||!1
}function Gc(a){return"undefined"==typeof a}function Hc(a,b,c){var d={};return b=Cb.createCallback(b,c,3),nc(a,function(a,c,e){d[c]=b(a,c,e)}),d}function Ic(a){var b=arguments,c=2;if(!zc(a))return a;if("number"!=typeof b[2]&&(c=b.length),c>3&&"function"==typeof b[c-2])var d=Ib(b[--c-1],b[c--],2);else c>2&&"function"==typeof b[c-1]&&(d=b[--c]);for(var e=$(arguments,1,c),f=-1,g=W(),h=W();++f<c;)Nb(a,e[f],d,g,h);return Y(g),Y(h),a}function Jc(a,b,c){var d={};if("function"!=typeof b){var e=[];lc(a,function(a,b){e.push(b)
}),e=Kb(e,Lb(arguments,!0,!1,1));for(var f=-1,g=e.length;++f<g;){var h=e[f];d[h]=a[h]}}else b=Cb.createCallback(b,c,3),lc(a,function(a,c,e){b(a,c,e)||(d[c]=a)});return d}function Kc(a){for(var b=-1,d=_b(a),e=d.length,f=c(e);++b<e;){var g=d[b];f[b]=[g,a[g]]}return f}function Lc(a,b,c){var d={};if("function"!=typeof b)for(var e=-1,f=Lb(arguments,!0,!1,1),g=zc(a)?f.length:0;++e<g;){var h=f[e];h in a&&(d[h]=a[h])}else b=Cb.createCallback(b,c,3),lc(a,function(a,c,e){b(a,c,e)&&(d[c]=a)});return d}function Mc(a,b,c,d){var e=Zb(a);
if(null==c)if(e)c=[];else{var f=a&&a.constructor,g=f&&f.prototype;c=Hb(g)}return b&&(b=Cb.createCallback(b,d,4),(e?Vc:nc)(a,function(a,d,e){return b(c,a,d,e)})),c}function Nc(a){for(var b=-1,d=_b(a),e=d.length,f=c(e);++b<e;)f[b]=a[d[b]];return f}function Oc(a){for(var b=arguments,d=-1,e=Lb(b,!0,!1,1),f=b[2]&&b[2][b[1]]===a?1:e.length,g=c(f);++d<f;)g[d]=a[e[d]];return g}function Pc(a,b,c){var d=-1,e=Tb(),f=a?a.length:0,g=!1;return c=(0>c?xb(0,f+c):c)||0,Zb(a)?g=e(a,b,c)>-1:"number"==typeof f?g=(Fc(a)?a.indexOf(b,c):e(a,b,c))>-1:nc(a,function(a){return++d>=c?!(g=a===b):void 0
}),g}function Rc(a,b,c){var d=!0;b=Cb.createCallback(b,c,3);var e=-1,f=a?a.length:0;if("number"==typeof f)for(;++e<f&&(d=!!b(a[e],e,a)););else nc(a,function(a,c,e){return d=!!b(a,c,e)});return d}function Sc(a,b,c){var d=[];b=Cb.createCallback(b,c,3);var e=-1,f=a?a.length:0;if("number"==typeof f)for(;++e<f;){var g=a[e];b(g,e,a)&&d.push(g)}else nc(a,function(a,c,e){b(a,c,e)&&d.push(a)});return d}function Tc(a,b,c){b=Cb.createCallback(b,c,3);var d=-1,e=a?a.length:0;if("number"!=typeof e){var g;return nc(a,function(a,c,d){return b(a,c,d)?(g=a,!1):void 0
}),g}for(;++d<e;){var f=a[d];if(b(f,d,a))return f}}function Uc(a,b,c){var d;return b=Cb.createCallback(b,c,3),Wc(a,function(a,c,e){return b(a,c,e)?(d=a,!1):void 0}),d}function Vc(a,b,c){var d=-1,e=a?a.length:0;if(b=b&&"undefined"==typeof c?b:Ib(b,c,3),"number"==typeof e)for(;++d<e&&b(a[d],d,a)!==!1;);else nc(a,b);return a}function Wc(a,b,c){var d=a?a.length:0;if(b=b&&"undefined"==typeof c?b:Ib(b,c,3),"number"==typeof d)for(;d--&&b(a[d],d,a)!==!1;);else{var e=_b(a);d=e.length,nc(a,function(a,c,f){return c=e?e[--d]:--d,b(f[c],c,f)
})}return a}function Zc(a,b){var d=$(arguments,2),e=-1,f="function"==typeof b,g=a?a.length:0,h=c("number"==typeof g?g:0);return Vc(a,function(a){h[++e]=(f?b:a[b]).apply(a,d)}),h}function $c(a,b,d){var e=-1,f=a?a.length:0;if(b=Cb.createCallback(b,d,3),"number"==typeof f)for(var g=c(f);++e<f;)g[e]=b(a[e],e,a);else g=[],nc(a,function(a,c,d){g[++e]=b(a,c,d)});return g}function _c(a,b,c){var d=-1/0,e=d;if("function"!=typeof b&&c&&c[b]===a&&(b=null),null==b&&Zb(a))for(var f=-1,g=a.length;++f<g;){var h=a[f];h>e&&(e=h)
}else b=null==b&&Fc(a)?S:Cb.createCallback(b,c,3),Vc(a,function(a,c,f){var g=b(a,c,f);g>d&&(d=g,e=a)});return e}function ad(a,b,c){var d=1/0,e=d;if("function"!=typeof b&&c&&c[b]===a&&(b=null),null==b&&Zb(a))for(var f=-1,g=a.length;++f<g;){var h=a[f];e>h&&(e=h)}else b=null==b&&Fc(a)?S:Cb.createCallback(b,c,3),Vc(a,function(a,c,f){var g=b(a,c,f);d>g&&(d=g,e=a)});return e}function cd(a,b,c,d){if(!a)return c;var e=arguments.length<3;b=Cb.createCallback(b,d,4);var f=-1,g=a.length;if("number"==typeof g)for(e&&(c=a[++f]);++f<g;)c=b(c,a[f],f,a);
else nc(a,function(a,d,f){c=e?(e=!1,a):b(c,a,d,f)});return c}function dd(a,b,c,d){var e=arguments.length<3;return b=Cb.createCallback(b,d,4),Wc(a,function(a,d,f){c=e?(e=!1,a):b(c,a,d,f)}),c}function ed(a,b,c){return b=Cb.createCallback(b,c,3),Sc(a,function(a,c,d){return!b(a,c,d)})}function fd(a,c,d){if(a&&"number"!=typeof a.length&&(a=Nc(a)),null==c||d)return a?a[Ob(0,a.length-1)]:b;var e=gd(a);return e.length=yb(xb(0,c),e.length),e}function gd(a){var b=-1,d=a?a.length:0,e=c("number"==typeof d?d:0);return Vc(a,function(a){var c=Ob(0,++b);
e[b]=e[c],e[c]=a}),e}function hd(a){var b=a?a.length:0;return"number"==typeof b?b:_b(a).length}function id(a,b,c){var d;b=Cb.createCallback(b,c,3);var e=-1,f=a?a.length:0;if("number"==typeof f)for(;++e<f&&!(d=b(a[e],e,a)););else nc(a,function(a,c,e){return!(d=b(a,c,e))});return!!d}function jd(a,b,d){var e=-1,f=Zb(b),g=a?a.length:0,h=c("number"==typeof g?g:0);for(f||(b=Cb.createCallback(b,d,3)),Vc(a,function(a,c,d){var g=h[++e]=X();f?g.criteria=$c(b,function(b){return a[b]}):(g.criteria=W())[0]=b(a,c,d),g.index=e,g.value=a
}),g=h.length,h.sort(T);g--;){var i=h[g];h[g]=i.value,f||Y(i.criteria),Z(i)}return h}function kd(a){return a&&"number"==typeof a.length?$(a):Nc(a)}function md(a){for(var b=-1,c=a?a.length:0,d=[];++b<c;){var e=a[b];e&&d.push(e)}return d}function nd(a){return Kb(a,Lb(arguments,!0,!0,1))}function od(a,b,c){var d=-1,e=a?a.length:0;for(b=Cb.createCallback(b,c,3);++d<e;)if(b(a[d],d,a))return d;return-1}function pd(a,b,c){var d=a?a.length:0;for(b=Cb.createCallback(b,c,3);d--;)if(b(a[d],d,a))return d;return-1}function qd(a,c,d){var e=0,f=a?a.length:0;
if("number"!=typeof c&&null!=c){var g=-1;for(c=Cb.createCallback(c,d,3);++g<f&&c(a[g],g,a);)e++}else if(e=c,null==e||d)return a?a[0]:b;return $(a,0,yb(xb(0,e),f))}function rd(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c="function"!=typeof b&&d&&d[b]===a?null:b,b=!1),null!=c&&(a=$c(a,c,d)),Lb(a,b)}function sd(a,b,c){if("number"==typeof c){var d=a?a.length:0;c=0>c?xb(0,d+c):c||0}else if(c){var e=Bd(a,b);return a[e]===b?e:-1}return P(a,b,c)}function td(a,b,c){var d=0,e=a?a.length:0;if("number"!=typeof b&&null!=b){var f=e;
for(b=Cb.createCallback(b,c,3);f--&&b(a[f],f,a);)d++}else d=null==b||c?1:b||d;return $(a,0,yb(xb(0,e-d),e))}function ud(){for(var a=[],b=-1,c=arguments.length,d=W(),e=Tb(),f=e===P,h=W();++b<c;){var i=arguments[b];(Zb(i)||Yb(i))&&(a.push(i),d.push(f&&i.length>=g&&U(b?a[b]:h)))}var j=a[0],k=-1,l=j?j.length:0,m=[];a:for(;++k<l;){var n=d[0];if(i=j[k],(n?Q(n,i):e(h,i))<0){for(b=c,(n||h).push(i);--b;)if(n=d[b],(n?Q(n,i):e(a[b],i))<0)continue a;m.push(i)}}for(;c--;)n=d[c],n&&Z(n);return Y(d),Y(h),m}function vd(a,c,d){var e=0,f=a?a.length:0;
if("number"!=typeof c&&null!=c){var g=f;for(c=Cb.createCallback(c,d,3);g--&&c(a[g],g,a);)e++}else if(e=c,null==e||d)return a?a[f-1]:b;return $(a,xb(0,f-e))}function wd(a,b,c){var d=a?a.length:0;for("number"==typeof c&&(d=(0>c?xb(0,d+c):yb(c,d-1))+1);d--;)if(a[d]===b)return d;return-1}function xd(a){for(var b=arguments,c=0,d=b.length,e=a?a.length:0;++c<d;)for(var f=-1,g=b[c];++f<e;)a[f]===g&&(pb.call(a,f--,1),e--);return a}function yd(a,b,d){a=+a||0,d="number"==typeof d?d:+d||1,null==b&&(b=a,a=0);for(var e=-1,f=xb(0,hb((b-a)/(d||1))),g=c(f);++e<f;)g[e]=a,a+=d;
return g}function zd(a,b,c){var d=-1,e=a?a.length:0,f=[];for(b=Cb.createCallback(b,c,3);++d<e;){var g=a[d];b(g,d,a)&&(f.push(g),pb.call(a,d--,1),e--)}return f}function Ad(a,b,c){if("number"!=typeof b&&null!=b){var d=0,e=-1,f=a?a.length:0;for(b=Cb.createCallback(b,c,3);++e<f&&b(a[e],e,a);)d++}else d=null==b||c?1:xb(0,b);return $(a,d)}function Bd(a,b,c,d){var e=0,f=a?a.length:e;for(c=c?Cb.createCallback(c,d,1):$d,b=c(b);f>e;){var g=e+f>>>1;c(a[g])<b?e=g+1:f=g}return e}function Cd(){return Pb(Lb(arguments,!0,!0))
}function Dd(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c="function"!=typeof b&&d&&d[b]===a?null:b,b=!1),null!=c&&(c=Cb.createCallback(c,d,3)),Pb(a,b,c)}function Ed(a){return Kb(a,$(arguments,1))}function Fd(){for(var a=-1,b=arguments.length;++a<b;){var c=arguments[a];if(Zb(c)||Yb(c))var d=d?Pb(Kb(d,c).concat(Kb(c,d))):c}return d||[]}function Gd(){for(var a=arguments.length>1?arguments:arguments[0],b=-1,d=a?_c(bd(a,"length")):0,e=c(0>d?0:d);++b<d;)e[b]=bd(a,b);return e}function Hd(a,b){var c=-1,d=a?a.length:0,e={};
for(b||!d||Zb(a[0])||(b=[]);++c<d;){var f=a[c];b?e[f]=b[c]:f&&(e[f[0]]=f[1])}return e}function Id(a,b){if(!yc(b))throw new bb;return function(){return--a<1?b.apply(this,arguments):void 0}}function Jd(a,b){return arguments.length>2?Rb(a,17,$(arguments,2),null,b):Rb(a,1,null,null,b)}function Kd(a){for(var b=arguments.length>1?Lb(arguments,!0,!1,1):pc(a),c=-1,d=b.length;++c<d;){var e=b[c];a[e]=Rb(a[e],1,null,null,a)}return a}function Ld(a,b){return arguments.length>2?Rb(b,19,$(arguments,2),null,a):Rb(b,3,null,null,a)
}function Md(){for(var a=arguments,b=a.length;b--;)if(!yc(a[b]))throw new bb;return function(){for(var b=arguments,c=a.length;c--;)b=[a[c].apply(this,b)];return b[0]}}function Nd(a,b){return b="number"==typeof b?b:+b||a.length,Rb(a,4,null,null,null,b)}function Od(a,c,d){var e,f,g,h,i,j,k,l=0,m=!1,n=!0;if(!yc(a))throw new bb;if(c=xb(0,c)||0,d===!0){var o=!0;n=!1}else zc(d)&&(o=d.leading,m="maxWait"in d&&(xb(c,d.maxWait)||0),n="trailing"in d?d.trailing:n);var p=function(){var d=c-(ce()-h);if(0>=d){f&&ib(f);var m=k;
f=j=k=b,m&&(l=ce(),g=a.apply(i,e),j||f||(e=i=null))}else j=ob(p,d)},q=function(){j&&ib(j),f=j=k=b,(n||m!==c)&&(l=ce(),g=a.apply(i,e),j||f||(e=i=null))};return function(){if(e=arguments,h=ce(),i=this,k=n&&(j||!o),m===!1)var b=o&&!j;else{f||o||(l=h);var d=m-(h-l),r=0>=d;r?(f&&(f=ib(f)),l=h,g=a.apply(i,e)):f||(f=ob(q,d))}return r&&j?j=ib(j):j||c===m||(j=ob(p,c)),b&&(r=!0,g=a.apply(i,e)),!r||j||f||(e=i=null),g}}function Pd(a){if(!yc(a))throw new bb;var c=$(arguments,1);return ob(function(){a.apply(b,c)},1)}function Qd(a,c){if(!yc(a))throw new bb;
var d=$(arguments,2);return ob(function(){a.apply(b,d)},c)}function Rd(a,b){if(!yc(a))throw new bb;var c=function(){var d=c.cache,e=b?b.apply(this,arguments):f+arguments[0];return mb.call(d,e)?d[e]:d[e]=a.apply(this,arguments)};return c.cache={},c.reset=function(){var a=c.cache,d=b?b.apply(this,arguments):f+arguments[0];mb.call(a,d)&&delete a[d]},c}function Sd(a){var b,c;if(!yc(a))throw new bb;return function(){return b?c:(b=!0,c=a.apply(this,arguments),a=null,c)}}function Td(a){return Rb(a,16,$(arguments,1))
}function Ud(a){return Rb(a,32,null,$(arguments,1))}function Vd(a,b,c){var d=!0,e=!0;if(!yc(a))throw new bb;return c===!1?d=!1:zc(c)&&(d="leading"in c?c.leading:d,e="trailing"in c?c.trailing:e),G.leading=d,G.maxWait=b,G.trailing=e,Od(a,b,G)}function Wd(a,b){return Rb(b,16,[a])}function Xd(a){return function(){return a}}function Yd(a,b,c){var d=typeof a;if(null==a||"function"==d)return Ib(a,b,c);if("object"!=d)return ee(a);var e=_b(a),f=e[0],g=a[f];return 1!=e.length||g!==g||zc(g)?function(b){for(var c=e.length,d=!1;c--&&(d=Mb(b[e[c]],a[e[c]],null,!0)););return d
}:function(a){var b=a[f];return g===b&&(0!==g||1/g==1/b)}}function Zd(a){return null==a?"":R(a).replace(dc,Sb)}function $d(a){return a}function _d(a,b,c){var d=!0,e=b&&pc(b);b&&(c||e.length)||(null==c&&(c=b),f=Db,b=a,a=Cb,e=pc(b)),c===!1?d=!1:zc(c)&&"chain"in c&&(d=c.chain);var f=a,g=yc(f);Vc(e,function(c){var e=a[c]=b[c];g&&(f.prototype[c]=function(){var b=this.__chain__,c=this.__wrapped__,g=[c];nb.apply(g,arguments);var h=e.apply(a,g);if(d||b){if(c===h&&zc(h))return this;h=new f(h),h.__chain__=b}return h})
})}function ae(){return a._=eb,this}function be(){}function ee(a){return function(b){return b[a]}}function fe(a,b,c){var d=null==a,e=null==b;if(null==c&&("boolean"==typeof a&&e?(c=a,a=1):e||"boolean"!=typeof b||(c=b,e=!0)),d&&e&&(b=1),a=+a||0,e?(b=a,a=0):b=+b||0,c||a%1||b%1){var f=Ab();return yb(a+f*(b-a+parseFloat("1e-"+((f+"").length-1))),b)}return Ob(a,b)}function ge(a,b){if(a){var c=a[b];return yc(c)?a[b]():c}}function he(a,c,d){var e=Cb.templateSettings;a=R(a||""),d=ic({},d,e);var i,f=ic({},d.imports,e.imports),g=_b(f),h=Nc(f),n=0,o=d.interpolate||r,q="__p += '",s=O((d.escape||r).source+"|"+o.source+"|"+(o===p?m:r).source+"|"+(d.evaluate||r).source+"|$","g");
a.replace(s,function(b,c,d,e,f,g){return d||(d=e),q+=a.slice(n,g).replace(t,V),c&&(q+="' +\n__e("+c+") +\n'"),f&&(i=!0,q+="';\n"+f+";\n__p += '"),d&&(q+="' +\n((__t = ("+d+")) == null ? '' : __t) +\n'"),n=g+b.length,b}),q+="';\n";var u=d.variable,w=u;w||(u="obj",q="with ("+u+") {\n"+q+"\n}\n"),q=(i?q.replace(j,""):q).replace(k,"$1").replace(l,"$1;"),q="function("+u+") {\n"+(w?"":u+" || ("+u+" = {});\n")+"var __t, __p = '', __e = _.escape"+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+q+"return __p\n}";
var x="\n/*\n//# sourceURL="+(d.sourceURL||"/lodash/template/source["+v++ +"]")+"\n*/";try{var y=J(g,"return "+q+x).apply(b,h)}catch(z){throw z.source=q,z}return c?y(c):(y.source=q,y)}function ie(a,b,d){a=(a=+a)>-1?a:0;var e=-1,f=c(a);for(b=Ib(b,d,1);++e<a;)f[e]=b(e);return f}function je(a){return null==a?"":R(a).replace(cc,Xb)}function ke(a){var b=++e;return R(null==a?"":a)+b}function le(a){return a=new Db(a),a.__chain__=!0,a}function me(a,b){return b(a),a}function ne(){return this.__chain__=!0,this}function oe(){return R(this.__wrapped__)
}function pe(){return this.__wrapped__}a=a?ab.defaults(K.Object(),a,ab.pick(K,u)):K;var c=a.Array,d=a.Boolean,h=a.Date,J=a.Function,L=a.Math,M=a.Number,N=a.Object,O=a.RegExp,R=a.String,bb=a.TypeError,cb=[],db=N.prototype,eb=a._,fb=db.toString,gb=O("^"+R(fb).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),hb=L.ceil,ib=a.clearTimeout,jb=L.floor,kb=J.prototype.toString,lb=Ub(lb=N.getPrototypeOf)&&lb,mb=db.hasOwnProperty,nb=cb.push,ob=a.setTimeout,pb=cb.splice,qb=cb.unshift,rb=function(){try{var a={},b=Ub(b=N.defineProperty)&&b,c=b(a,a,a)&&b
}catch(d){}return c}(),sb=Ub(sb=N.create)&&sb,tb=Ub(tb=c.isArray)&&tb,ub=a.isFinite,vb=a.isNaN,wb=Ub(wb=N.keys)&&wb,xb=L.max,yb=L.min,zb=a.parseInt,Ab=L.random,Bb={};Bb[x]=c,Bb[y]=d,Bb[z]=h,Bb[A]=J,Bb[C]=N,Bb[B]=M,Bb[D]=O,Bb[E]=R,Db.prototype=Cb.prototype;var Eb=Cb.support={};Eb.funcDecomp=!Ub(a.WinRTError)&&s.test(_),Eb.funcNames="string"==typeof J.name,Cb.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:p,variable:"",imports:{_:Cb}},sb||(Hb=function(){function b(){}return function(c){if(zc(c)){b.prototype=c;
var d=new b;b.prototype=null}return d||a.Object()}}());var Vb=rb?function(a,b){H.value=b,rb(a,"__bindData__",H)}:be,Zb=tb||function(a){return a&&"object"==typeof a&&"number"==typeof a.length&&fb.call(a)==x||!1},$b=function(a){var b,c=a,d=[];if(!c)return d;if(!I[typeof a])return d;for(b in c)mb.call(c,b)&&d.push(b);return d},_b=wb?function(a){return zc(a)?wb(a):[]}:$b,ac={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},bc=rc(ac),cc=O("("+_b(bc).join("|")+")","g"),dc=O("["+_b(ac).join("")+"]","g"),ec=function(a,b,c){var d,e=a,f=e;
if(!e)return f;var g=arguments,h=0,i="number"==typeof c?2:g.length;if(i>3&&"function"==typeof g[i-2])var j=Ib(g[--i-1],g[i--],2);else i>2&&"function"==typeof g[i-1]&&(j=g[--i]);for(;++h<i;)if(e=g[h],e&&I[typeof e])for(var k=-1,l=I[typeof e]&&_b(e),m=l?l.length:0;++k<m;)d=l[k],f[d]=j?j(f[d],e[d]):e[d];return f},ic=function(a,b,c){var d,e=a,f=e;if(!e)return f;for(var g=arguments,h=0,i="number"==typeof c?2:g.length;++h<i;)if(e=g[h],e&&I[typeof e])for(var j=-1,k=I[typeof e]&&_b(e),l=k?k.length:0;++j<l;)d=k[j],"undefined"==typeof f[d]&&(f[d]=e[d]);
return f},lc=function(a,b,c){var d,e=a,f=e;if(!e)return f;if(!I[typeof e])return f;b=b&&"undefined"==typeof c?b:Ib(b,c,3);for(d in e)if(b(e[d],d,a)===!1)return f;return f},nc=function(a,b,c){var d,e=a,f=e;if(!e)return f;if(!I[typeof e])return f;b=b&&"undefined"==typeof c?b:Ib(b,c,3);for(var g=-1,h=I[typeof e]&&_b(e),i=h?h.length:0;++g<i;)if(d=h[g],b(e[d],d,a)===!1)return f;return f},Dc=lb?function(a){if(!a||fb.call(a)!=C)return!1;var b=a.valueOf,c=Ub(b)&&(c=lb(b))&&lb(c);return c?a==c||lb(a)==c:Wb(a)}:Wb,Qc=Qb(function(a,b,c){mb.call(a,c)?a[c]++:a[c]=1
}),Xc=Qb(function(a,b,c){(mb.call(a,c)?a[c]:a[c]=[]).push(b)}),Yc=Qb(function(a,b,c){a[c]=b}),bd=$c,ld=Sc,ce=Ub(ce=h.now)&&ce||function(){return(new h).getTime()},de=8==zb(i+"08")?zb:function(a,b){return zb(Fc(a)?a.replace(q,""):a,b||0)};return Cb.after=Id,Cb.assign=ec,Cb.at=Oc,Cb.bind=Jd,Cb.bindAll=Kd,Cb.bindKey=Ld,Cb.chain=le,Cb.compact=md,Cb.compose=Md,Cb.constant=Xd,Cb.countBy=Qc,Cb.create=hc,Cb.createCallback=Yd,Cb.curry=Nd,Cb.debounce=Od,Cb.defaults=ic,Cb.defer=Pd,Cb.delay=Qd,Cb.difference=nd,Cb.filter=Sc,Cb.flatten=rd,Cb.forEach=Vc,Cb.forEachRight=Wc,Cb.forIn=lc,Cb.forInRight=mc,Cb.forOwn=nc,Cb.forOwnRight=oc,Cb.functions=pc,Cb.groupBy=Xc,Cb.indexBy=Yc,Cb.initial=td,Cb.intersection=ud,Cb.invert=rc,Cb.invoke=Zc,Cb.keys=_b,Cb.map=$c,Cb.mapValues=Hc,Cb.max=_c,Cb.memoize=Rd,Cb.merge=Ic,Cb.min=ad,Cb.omit=Jc,Cb.once=Sd,Cb.pairs=Kc,Cb.partial=Td,Cb.partialRight=Ud,Cb.pick=Lc,Cb.pluck=bd,Cb.property=ee,Cb.pull=xd,Cb.range=yd,Cb.reject=ed,Cb.remove=zd,Cb.rest=Ad,Cb.shuffle=gd,Cb.sortBy=jd,Cb.tap=me,Cb.throttle=Vd,Cb.times=ie,Cb.toArray=kd,Cb.transform=Mc,Cb.union=Cd,Cb.uniq=Dd,Cb.values=Nc,Cb.where=ld,Cb.without=Ed,Cb.wrap=Wd,Cb.xor=Fd,Cb.zip=Gd,Cb.zipObject=Hd,Cb.collect=$c,Cb.drop=Ad,Cb.each=Vc,Cb.eachRight=Wc,Cb.extend=ec,Cb.methods=pc,Cb.object=Hd,Cb.select=Sc,Cb.tail=Ad,Cb.unique=Dd,Cb.unzip=Gd,_d(Cb),Cb.clone=fc,Cb.cloneDeep=gc,Cb.contains=Pc,Cb.escape=Zd,Cb.every=Rc,Cb.find=Tc,Cb.findIndex=od,Cb.findKey=jc,Cb.findLast=Uc,Cb.findLastIndex=pd,Cb.findLastKey=kc,Cb.has=qc,Cb.identity=$d,Cb.indexOf=sd,Cb.isArguments=Yb,Cb.isArray=Zb,Cb.isBoolean=sc,Cb.isDate=tc,Cb.isElement=uc,Cb.isEmpty=vc,Cb.isEqual=wc,Cb.isFinite=xc,Cb.isFunction=yc,Cb.isNaN=Ac,Cb.isNull=Bc,Cb.isNumber=Cc,Cb.isObject=zc,Cb.isPlainObject=Dc,Cb.isRegExp=Ec,Cb.isString=Fc,Cb.isUndefined=Gc,Cb.lastIndexOf=wd,Cb.mixin=_d,Cb.noConflict=ae,Cb.noop=be,Cb.now=ce,Cb.parseInt=de,Cb.random=fe,Cb.reduce=cd,Cb.reduceRight=dd,Cb.result=ge,Cb.runInContext=_,Cb.size=hd,Cb.some=id,Cb.sortedIndex=Bd,Cb.template=he,Cb.unescape=je,Cb.uniqueId=ke,Cb.all=Rc,Cb.any=id,Cb.detect=Tc,Cb.findWhere=Tc,Cb.foldl=cd,Cb.foldr=dd,Cb.include=Pc,Cb.inject=cd,_d(function(){var a={};
return nc(Cb,function(b,c){Cb.prototype[c]||(a[c]=b)}),a}(),!1),Cb.first=qd,Cb.last=vd,Cb.sample=fd,Cb.take=qd,Cb.head=qd,nc(Cb,function(a,b){var c="sample"!==b;Cb.prototype[b]||(Cb.prototype[b]=function(b,d){var e=this.__chain__,f=a(this.__wrapped__,b,d);return e||null!=b&&(!d||c&&"function"==typeof b)?new Db(f,e):f})}),Cb.VERSION="2.4.1",Cb.prototype.chain=ne,Cb.prototype.toString=oe,Cb.prototype.value=pe,Cb.prototype.valueOf=pe,Vc(["join","pop","shift"],function(a){var b=cb[a];Cb.prototype[a]=function(){var a=this.__chain__,c=b.apply(this.__wrapped__,arguments);
return a?new Db(c,a):c}}),Vc(["push","reverse","sort","unshift"],function(a){var b=cb[a];Cb.prototype[a]=function(){return b.apply(this.__wrapped__,arguments),this}}),Vc(["concat","slice","splice"],function(a){var b=cb[a];Cb.prototype[a]=function(){return new Db(b.apply(this.__wrapped__,arguments),this.__chain__)}}),Cb}var b,c=[],d=[],e=0,f=+new Date+"",g=75,h=40,i=" 	\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000",j=/\b__p \+= '';/g,k=/\b(__p \+=) '' \+/g,l=/(__e\(.*?\)|\b__t\)) \+\n'';/g,m=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,n=/\w*$/,o=/^\s*function[ \n\r\t]+\w/,p=/<%=([\s\S]+?)%>/g,q=RegExp("^["+i+"]*0+(?=.$)"),r=/($^)/,s=/\bthis\b/,t=/['\n\r\t\u2028\u2029\\]/g,u=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],v=0,w="[object Arguments]",x="[object Array]",y="[object Boolean]",z="[object Date]",A="[object Function]",B="[object Number]",C="[object Object]",D="[object RegExp]",E="[object String]",F={};
F[A]=!1,F[w]=F[x]=F[y]=F[z]=F[B]=F[C]=F[D]=F[E]=!0;var G={leading:!1,maxWait:0,trailing:!1},H={configurable:!1,enumerable:!1,value:null,writable:!1},I={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},J={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},K=I[typeof window]&&window||this,L=I[typeof exports]&&exports&&!exports.nodeType&&exports,M=I[typeof module]&&module&&!module.nodeType&&module,O=(M&&M.exports===L&&L,I[typeof global]&&global);!O||O.global!==O&&O.window!==O||(K=O);
var ab=a._=_();a.each(ab,function(b,c){Object.hasOwnProperty.call(ab,b)&&!/VERSION/.test(name)&&(a[b]||(a[b]=c))})}),FD40.plugin("bootstrap3",function(a){var b=a;void 0==window["Foundry/Bootstrap"]&&(window["Foundry/Bootstrap"]={version:"3.0.3",foundry:b}),+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]}
}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one(a.support.transition.end,function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b()})}(b),+function(a){"use strict";var b='[data-bs-dismiss="alert"]',c=function(c){a(c).on("click",b,this.close)};c.prototype.close=function(b){function f(){e.trigger("closed.bs.alert").remove()}var c=a(this),d=c.attr("data-target");d||(d=c.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,""));
var e=a(d);b&&b.preventDefault(),e.length||(e=c.hasClass("alert")?c:c.parent()),e.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(e.removeClass("in"),a.support.transition&&e.hasClass("fade")?e.one(a.support.transition.end,f).emulateTransitionEnd(150):f())};var d=a.fn.alert;a.fn.alert=function(b){return this.each(function(){var d=a(this),e=d.data("bs.alert");e||d.data("bs.alert",e=new c(this)),"string"==typeof b&&e[b].call(d)})},a.fn.alert.Constructor=c,a.fn.alert.noConflict=function(){return a.fn.alert=d,this
},a(document).on("click.bs.alert.data-api",b,c.prototype.close)}(b),+function(a){"use strict";var b=function(c,d){this.$element=a(c),this.options=a.extend({},b.DEFAULTS,d)};b.DEFAULTS={loadingText:"loading..."},b.prototype.setState=function(a){var b="disabled",c=this.$element,d=c.is("input")?"val":"html",e=c.data();a+="Text",e.resetText||c.data("resetText",c[d]()),c[d](e[a]||this.options[a]),setTimeout(function(){"loadingText"==a?c.addClass(b).attr(b,b):c.removeClass(b).removeAttr(b)},0)},b.prototype.toggle=function(){var a=this.$element.closest('[data-bs-toggle="buttons"]'),b=!0;
if(a.length){var c=this.$element.find("input");"radio"===c.prop("type")&&(c.prop("checked")&&this.$element.hasClass("active")?b=!1:a.find(".active").removeClass("active")),b&&c.prop("checked",!this.$element.hasClass("active")).trigger("change")}b&&this.$element.toggleClass("active")};var c=a.fn.button;a.fn.button=function(c){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof c&&c;e||d.data("bs.button",e=new b(this,f)),"toggle"==c?e.toggle():c&&e.setState(c)})},a.fn.button.Constructor=b,a.fn.button.noConflict=function(){return a.fn.button=c,this
},a(document).on("click.bs.button.data-api","[data-bs-toggle^=button]",function(b){var c=a(b.target);c.hasClass("btn")||(c=c.closest(".btn")),c.button("toggle"),b.preventDefault()})}(b),+function(a){"use strict";var b=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter",a.proxy(this.pause,this)).on("mouseleave",a.proxy(this.cycle,this))
};b.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},b.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},b.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},b.prototype.to=function(b){var c=this,d=this.getActiveIndex();return b>this.$items.length-1||0>b?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){c.to(b)
}):d==b?this.pause().cycle():this.slide(b>d?"next":"prev",a(this.$items[b]))},b.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition.end&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},b.prototype.next=function(){return this.sliding?void 0:this.slide("next")},b.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},b.prototype.slide=function(b,c){var d=this.$element.find(".item.active"),e=c||d[b](),f=this.interval,g="next"==b?"left":"right",h="next"==b?"first":"last",i=this;
if(!e.length){if(!this.options.wrap)return;e=this.$element.find(".item")[h]()}this.sliding=!0,f&&this.pause();var j=a.Event("slide.bs.carousel",{relatedTarget:e[0],direction:g});if(!e.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid.bs.carousel",function(){var b=a(i.$indicators.children()[i.getActiveIndex()]);b&&b.addClass("active")})),a.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(j),j.isDefaultPrevented())return;
e.addClass(b),e[0].offsetWidth,d.addClass(g),e.addClass(g),d.one(a.support.transition.end,function(){e.removeClass([b,g].join(" ")).addClass("active"),d.removeClass(["active",g].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger("slid.bs.carousel")},0)}).emulateTransitionEnd(600)}else{if(this.$element.trigger(j),j.isDefaultPrevented())return;d.removeClass("active"),e.addClass("active"),this.sliding=!1,this.$element.trigger("slid.bs.carousel")}return f&&this.cycle(),this}};var c=a.fn.carousel;a.fn.carousel=function(c){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},b.DEFAULTS,d.data(),"object"==typeof c&&c),g="string"==typeof c?c:f.slide;
e||d.data("bs.carousel",e=new b(this,f)),"number"==typeof c?e.to(c):g?e[g]():f.interval&&e.pause().cycle()})},a.fn.carousel.Constructor=b,a.fn.carousel.noConflict=function(){return a.fn.carousel=c,this},a(document).on("click.bs.carousel.data-api","[data-bs-slide], [data-bs-slide-to]",function(b){var d,c=a(this),e=a(c.attr("data-target")||(d=c.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,"")),f=a.extend({},e.data(),c.data()),g=c.attr("data-bs-slide-to");g&&(f.interval=!1),e.carousel(f),(g=c.attr("data-bs-slide-to"))&&e.data("bs.carousel").to(g),b.preventDefault()
}),a(window).on("load",function(){a('[data-bs-ride="carousel"]').each(function(){var b=a(this);b.carousel(b.data())})})}(b),+function(a){"use strict";var b=function(c,d){this.$element=a(c),this.options=a.extend({},b.DEFAULTS,d),this.transitioning=null,this.options.parent&&(this.$parent=a(this.options.parent)),this.options.toggle&&this.toggle()};b.DEFAULTS={toggle:!0},b.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},b.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b=a.Event("show.bs.collapse");
if(this.$element.triggerHandler(b),!b.isDefaultPrevented()){var c=this.$parent&&this.$parent.find("> .panel > .in");if(c&&c.length){var d=c.data("bs.collapse");if(d&&d.transitioning)return;c.collapse("hide"),d||c.data("bs.collapse",null)}var e=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[e](0),this.transitioning=1;var f=function(){this.$element.removeClass("collapsing").addClass("in")[e]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return f.call(this);
var g=a.camelCase(["scroll",e].join("-"));this.$element.one(a.support.transition.end,a.proxy(f,this)).emulateTransitionEnd(350)[e](this.$element[0][g])}}},b.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.triggerHandler(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var d=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")
};return a.support.transition?(this.$element[c](0).one(a.support.transition.end,a.proxy(d,this)).emulateTransitionEnd(350),void 0):d.call(this)}}},b.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var c=a.fn.collapse;a.fn.collapse=function(c){return this.each(function(){var d=a(this),e=d.data("bs.collapse"),f=a.extend({},b.DEFAULTS,d.data(),"object"==typeof c&&c);e||d.data("bs.collapse",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.collapse.Constructor=b,a.fn.collapse.noConflict=function(){return a.fn.collapse=c,this
},a(document).on("click.bs.collapse.data-api","[data-bs-toggle=collapse]",function(b){var d,c=a(this),e=c.attr("data-target")||b.preventDefault()||(d=c.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""),f=a(e),g=f.data("bs.collapse"),h=g?"toggle":c.data(),i=c.attr("data-parent"),j=i&&a(i);g&&g.transitioning||(j&&j.find('[data-bs-toggle=collapse][data-parent="'+i+'"]').not(c).addClass("collapsed"),c[f.hasClass("in")?"addClass":"removeClass"]("collapsed")),f.collapse(h)})}(b),+function(a){"use strict";function e(b){var c=b.attr("data-target");
c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(document).find(c);return d&&d.length?d:b.parent()}function f(d){d&&3===d.which||(a(b).remove(),a(c).each(function(){var b=a(this),c=e(b);c.hasClass("open")&&(d&&"click"==d.type&&/input|textarea/i.test(d.target.tagName)&&a.contains(c[0],d.target)||(c.triggerHandler(d=a.Event("hide.bs.dropdown")),d.isDefaultPrevented()||(b.attr("aria-expanded","false"),c.removeClass("open").trigger("hidden.bs.dropdown"))))}))}function g(b){return this.each(function(){var c=a(this),e=c.data("bs.dropdown");
e||c.data("bs.dropdown",e=new d(this)),"string"==typeof b&&e[b].call(c)})}var b=".dropdown-backdrop",c='[data-bs-toggle="dropdown"]',d=function(b){a(b).on("click.bs.dropdown",this.toggle)};d.VERSION="3.4.0",d.prototype.toggle=function(b){var c=a(this);if(!c.is(".disabled, :disabled")){var d=e(c),g=d.hasClass("open");if(f(),!g){if("ontouchstart"in document.documentElement&&!d.closest(".navbar-nav").length){var h=a(this);setTimeout(function(){a(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(h).on("click",f)
},4)}var i={relatedTarget:this};if(d.trigger(b=a.Event("show.bs.dropdown",i)),b.isDefaultPrevented())return;setTimeout(function(){c.trigger("focus").attr("aria-expanded","true"),d.toggleClass("open").trigger(a.Event("shown.bs.dropdown",i))},4)}}},d.prototype.keydown=function(b){if(/(38|40|27|32)/.test(b.which)&&!/input|textarea/i.test(b.target.tagName)){var d=a(this);if(b.preventDefault(),b.stopPropagation(),!d.is(".disabled, :disabled")){var f=e(d),g=f.hasClass("open");if(!g&&27!=b.which||g&&27==b.which)return 27==b.which&&f.find(c).trigger("focus"),d.trigger("click");
var h=" li:not(.disabled):visible a",i=f.find(".dropdown-menu"+h);if(i.length){var j=i.index(b.target);38==b.which&&j>0&&j--,40==b.which&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger("focus")}}}};var h=a.fn.dropdown;a.fn.dropdown=g,a.fn.dropdown.Constructor=d,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this},a(document).on("click.bs.dropdown.data-api",f).on("click.bs.dropdown.data-api",".dropdown_ form, .dropdown-static",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",c,d.prototype.toggle).on("keydown.bs.dropdown.data-api",c+", [role=menu]",d.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",d.prototype.keydown)
}(b),+function(a){"use strict";var b=function(b,c){this.options=c,this.$element=a(b),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.load(this.options.remote)};b.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},b.prototype.toggle=function(a){return this[this.isShown?"hide":"show"](a)},b.prototype.show=function(b){var c=this,d=a.Event("show.bs.modal",{relatedTarget:b});this.$element.triggerHandler(d),this.isShown||d.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.modal",'[data-bs-dismiss="modal"]',a.proxy(this.hide,this)),this.backdrop(function(){var d=a.support.transition&&c.$element.hasClass("fade");
c.$element.parent().length||c.$element.appendTo(document.body),c.$element.show(),d&&c.$element[0].offsetWidth,c.$element.addClass("in").attr("aria-hidden",!1),c.enforceFocus();var e=a.Event("shown.bs.modal",{relatedTarget:b});d?c.$element.find(".modal-dialog").one(a.support.transition.end,function(){c.$element.focus().trigger(e)}).emulateTransitionEnd(300):c.$element.focus().trigger(e)}))},b.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.triggerHandler(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one(a.support.transition.end,a.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())
},b.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.focus()},this))},b.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},b.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.removeBackdrop(),a.$element.trigger("hidden.bs.modal")
})},b.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},b.prototype.backdrop=function(b){var d=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var e=a.support.transition&&d;if(this.$backdrop=a('<div class="modal-backdrop '+d+'" />').appendTo(document.body),this.$element.on("click.dismiss.modal",a.proxy(function(a){a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))
},this)),e&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;e?this.$backdrop.one(a.support.transition.end,b).emulateTransitionEnd(150):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,b).emulateTransitionEnd(150):b()):b&&b()};var c=a.fn.modal;a.fn.modal=function(c,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},b.DEFAULTS,e.data(),"object"==typeof c&&c);
f||e.data("bs.modal",f=new b(this,g)),"string"==typeof c?f[c](d):g.show&&f.show(d)})},a.fn.modal.Constructor=b,a.fn.modal.noConflict=function(){return a.fn.modal=c,this},a(document).on("click.bs.modal.data-api",'[data-bs-toggle="modal"]',function(b){var c=a(this),d=c.attr("href"),e=a(c.attr("data-target")||d&&d.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("modal")?"toggle":a.extend({remote:!/#/.test(d)&&d},e.data(),c.data());b.preventDefault(),e.modal(f,this).one("hide",function(){c.is(":visible")&&c.focus()})}),a(document).on("show.bs.modal",".modal.bs",function(){a(document.body).addClass("modal-open")
}).on("hidden.bs.modal",".modal.bs",function(){a(document.body).removeClass("modal-open")})}(b),+function(a){"use strict";var b=function(a,b){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",a,b)};b.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},b.prototype.init=function(b,c,d){this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d);
for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focus",i="hover"==g?"mouseleave":"blur";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()
},b.prototype.getDefaults=function(){return b.DEFAULTS},b.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},b.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},b.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);
return clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show),void 0):c.show()},b.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide),void 0):c.hide()
},b.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.triggerHandler(b),b.isDefaultPrevented())return;var c=this.tip();this.setContent(),this.options.animation&&c.addClass("fade");var d="function"==typeof this.options.placement?this.options.placement.call(this,c[0],this.$element[0]):this.options.placement,e=/\s?auto?\s?/i,f=e.test(d);f&&(d=d.replace(e,"")||"top"),c.detach().css({top:0,left:0,display:"block"}).addClass(d.split("-")[0]),this.options.container?c.appendTo(this.options.container):c.insertAfter(this.$element);
var g=this.getPosition(),h=c[0].offsetWidth,i=c[0].offsetHeight;if(f){var j=this.$element.parent(),k=d,l=document.documentElement.scrollTop||document.body.scrollTop,m="body"==this.options.container?window.innerWidth:j.outerWidth(),n="body"==this.options.container?window.innerHeight:j.outerHeight(),o="body"==this.options.container?0:j.offset().left;d="bottom"==d&&g.top+g.height+i-l>n?"top":"top"==d&&g.top-l-i<0?"bottom":"right"==d&&g.right+h>m?"left":"left"==d&&g.left-h<o?"right":d,c.removeClass(k).addClass(d)
}var p=this.getCalculatedOffset(d,g,h,i);this.applyPlacement(p,d),this.$element.trigger("shown.bs."+this.type)}},b.prototype.applyPlacement=function(b,c){var d,e=this.tip(),f=e[0].offsetWidth,g=e[0].offsetHeight,h=parseInt(e.css("margin-top"),10),i=parseInt(e.css("margin-left"),10);isNaN(h)&&(h=0),isNaN(i)&&(i=0),b.top=b.top+h,b.left=b.left+i,e.offset(b).addClass("in"),window.es.mobile&&"popover"==this.type&&a("body").css("cursor","pointer");var j=e[0].offsetWidth,k=e[0].offsetHeight;if("top"==c&&k!=g&&(d=!0,b.top=b.top+g-k),0===["top","bottom"].indexOf(c.split("-")[0])){var l=0;
b.left<0&&(l=-2*b.left,b.left=0,e.offset(b),j=e[0].offsetWidth,k=e[0].offsetHeight),this.replaceArrow(l-f+j,j,"left")}0===["left","right"].indexOf(c.split("-")[0])&&this.replaceArrow(k-g,k,"top"),d&&e.offset(b)},b.prototype.replaceArrow=function(a,b,c){this.arrow().css(c,a?50*(1-a/b)+"%":"")},b.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},b.prototype.hide=function(){function e(){"in"!=b.hoverState&&c.detach()
}var b=this,c=this.tip(),d=a.Event("hide.bs."+this.type);return this.$element.triggerHandler(d),d.isDefaultPrevented()?void 0:(c.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?c.one(a.support.transition.end,e).emulateTransitionEnd(150):e(),window.es.mobile&&"popover"==this.type&&a("body").css("cursor",""),this.$element.trigger("hidden.bs."+this.type),this)},b.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")
},b.prototype.hasContent=function(){return this.getTitle()},b.prototype.getPosition=function(){var b=this.$element[0];return a.extend({},"function"==typeof b.getBoundingClientRect?b.getBoundingClientRect():{width:b.offsetWidth,height:b.offsetHeight},this.$element.offset())},b.prototype.getCalculatedOffset=function(a,b,c,d){return"left-top"==a?{top:b.top,left:b.left-c}:"left-bottom"==a?{top:b.top+b.height-d,left:b.left-c}:"right-top"==a?{top:b.top,left:b.left+b.width}:"right-bottom"==a?{top:b.top+b.height-d,left:b.left+b.width}:"top-left"==a?{top:b.top-d,left:b.left}:"top-right"==a?{top:b.top-d,left:b.left+b.width-c}:"bottom-left"==a?{top:b.top+b.height,left:b.left}:"bottom-right"==a?{top:b.top+b.height,left:b.left+b.width-c}:"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}
},b.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},b.prototype.tip=function(){return this.$tip=this.$tip||a(this.options.template)},b.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},b.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},b.prototype.enable=function(){this.enabled=!0},b.prototype.disable=function(){this.enabled=!1
},b.prototype.toggleEnabled=function(){this.enabled=!this.enabled},b.prototype.toggle=function(b){var c=b?a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;c.tip().hasClass("in")?c.leave(c):c.enter(c)},b.prototype.destroy=function(){this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var c=a.fn.tooltip;a.fn.tooltip=function(c){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof c&&c;e||d.data("bs.tooltip",e=new b(this,f)),"string"==typeof c&&e[c]()
})},a.fn.tooltip.Constructor=b,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=c,this}}(b),+function(a){"use strict";var b=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");b.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div id="es" class="o-popover--es"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),b.prototype.constructor=b,b.prototype.getDefaults=function(){return b.DEFAULTS
},b.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content")[this.options.html?"html":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},b.prototype.hasContent=function(){return this.getTitle()||this.getContent()},b.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)
},b.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},b.prototype.tip=function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip};var c=a.fn.popover;a.fn.popover=function(c){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof c&&c;e||d.data("bs.popover",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.popover.Constructor=b,a.fn.popover.noConflict=function(){return a.fn.popover=c,this},a.fn.popoverES=function(c){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof c&&c;
e||d.data("bs.popover",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.popoverES.Constructor=b}(b),+function(a){"use strict";function b(c,d){var e,f=a.proxy(this.process,this);this.$element=a(c).is("body")?a(window):a(c),this.$body=a("body"),this.$scrollElement=this.$element.on("scroll.bs.scroll-spy.data-api",f),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||(e=a(c).attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.offsets=a([]),this.targets=a([]),this.activeTarget=null,this.refresh(),this.process()
}b.DEFAULTS={offset:10},b.prototype.refresh=function(){var b=this.$element[0]==window?"offset":"position";this.offsets=a([]),this.targets=a([]);{var c=this;this.$body.find(this.selector).map(function(){var d=a(this),e=d.data("target")||d.attr("href"),f=/^#\w/.test(e)&&a(e);return f&&f.length&&[[f[b]().top+(!a.isWindow(c.$scrollElement.get(0))&&c.$scrollElement.scrollTop()),e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){c.offsets.push(this[0]),c.targets.push(this[1])})}},b.prototype.process=function(){var g,a=this.$scrollElement.scrollTop()+this.options.offset,b=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,c=b-this.$scrollElement.height(),d=this.offsets,e=this.targets,f=this.activeTarget;
if(a>=c)return f!=(g=e.last()[0])&&this.activate(g);for(g=d.length;g--;)f!=e[g]&&a>=d[g]&&(!d[g+1]||a<=d[g+1])&&this.activate(e[g])},b.prototype.activate=function(b){this.activeTarget=b,a(this.selector).parents(".active").removeClass("active");var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate.bs.scrollspy")};var c=a.fn.scrollspy;a.fn.scrollspy=function(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;
e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=c,this},a(window).on("load",function(){a('[data-bs-spy="scroll"]').each(function(){var b=a(this);b.scrollspy(b.data())})})}(b),+function(a){"use strict";var b=function(b){this.element=a(b)};b.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a")[0],f=a.Event("show.bs.tab",{relatedTarget:e});
if(b.triggerHandler(f),!f.isDefaultPrevented()){var g=a(d);this.activate(b.parent("li"),c),this.activate(g,g.parent(),function(){b.trigger({type:"shown.bs.tab",relatedTarget:e})})}}},b.prototype.activate=function(b,c,d){function g(){e.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),b.addClass("active"),f?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active"),d&&d()}var e=c.find("> .active"),f=d&&a.support.transition&&e.hasClass("fade");
f?e.one(a.support.transition.end,g).emulateTransitionEnd(150):g(),e.removeClass("in")};var c=a.fn.tab;a.fn.tab=function(c){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new b(this)),"string"==typeof c&&e[c]()})},a.fn.tab.Constructor=b,a.fn.tab.noConflict=function(){return a.fn.tab=c,this},a(document).on("click.bs.tab.data-api",'[data-bs-toggle="tab"], [data-bs-toggle="pill"]',function(b){b.preventDefault(),a(this).tab("show")})}(b),+function(a){"use strict";var b=function(c,d){this.options=a.extend({},b.DEFAULTS,d),this.$window=a(window).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(c),this.affixed=this.unpin=null,this.checkPosition()
};b.RESET="affix affix-top affix-bottom",b.DEFAULTS={offset:0},b.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},b.prototype.checkPosition=function(){if(this.$element.is(":visible")){var c=a(document).height(),d=this.$window.scrollTop(),e=this.$element.offset(),f=this.options.offset,g=f.top,h=f.bottom;"object"!=typeof f&&(h=g=f),"function"==typeof g&&(g=f.top()),"function"==typeof h&&(h=f.bottom());var i=null!=this.unpin&&d+this.unpin<=e.top?!1:null!=h&&e.top+this.$element.height()>=c-h?"bottom":null!=g&&g>=d?"top":!1;
this.affixed!==i&&(this.unpin&&this.$element.css("top",""),this.affixed=i,this.unpin="bottom"==i?e.top-d:null,this.$element.removeClass(b.RESET).addClass("affix"+(i?"-"+i:"")),"bottom"==i&&this.$element.offset({top:document.body.offsetHeight-h-this.$element.height()}))}};var c=a.fn.affix;a.fn.affix=function(c){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof c&&c;e||d.data("bs.affix",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.affix.Constructor=b,a.fn.affix.noConflict=function(){return a.fn.affix=c,this
},a(window).on("load",function(){a('[data-bs-spy="affix"]').each(function(){var b=a(this),c=b.data();c.offset=c.offset||{},c.offsetBottom&&(c.offset.bottom=c.offsetBottom),c.offsetTop&&(c.offset.top=c.offsetTop),b.affix(c)})})}(b),!function(a){var b=function(b,c){if(this.$element=a(b),this.$note=a('<div class="alert"></div>'),this.options=a.extend(!0,a.fn.notify.defaults,c),this.options.transition?"fade"==this.options.transition?this.$note.addClass("in").addClass(this.options.transition):this.$note.addClass(this.options.transition):this.$note.addClass("fade").addClass("in"),this.options.type?this.$note.addClass("alert-"+this.options.type):this.$note.addClass("alert-success"),this.options.message||""===this.$element.data("message")?"object"==typeof this.options.message&&(this.options.message.html?this.$note.html(this.options.message.html):this.options.message.text?this.$note.text(this.options.message.text):this.$note.html(this.options.message)):this.$note.html(this.$element.data("message")),this.options.closable)var d=a('<a class="close pull-right" href="javascript: void(0);">&times;</a>');
return a(d).on("click",a.proxy(onClose,this)),this.$note.prepend(d),this};onClose=function(){this.options.onClose(),a(this.$note).remove(),this.options.onClosed()},b.prototype.show=function(){this.options.fadeOut.enabled&&this.$note.delay(this.options.fadeOut.delay||3e3).fadeOut("slow",a.proxy(onClose,this)),this.$element.append(this.$note),this.$note.alert()},b.prototype.hide=function(){this.options.fadeOut.enabled?this.$note.delay(this.options.fadeOut.delay||3e3).fadeOut("slow",a.proxy(onClose,this)):onClose.call(this)
},a.fn.notify=function(a){return new b(this,a)},a.fn.notify.defaults={type:"success",closable:!0,transition:"fade",fadeOut:{enabled:!0,delay:3e3},message:null,onClose:function(){},onClosed:function(){}}}(a)}),FD40.plugin("utils",function(a){!function(){var b=function(a){this.items=a,this.start=0,this.end=a.length-1,this.node=null,this.stopped=!1};a.extend(b.prototype,{isLooping:function(){return this.stopped?!1:Math.abs(this.start-this.end)>1?(this.node=Math.floor((this.start+this.end)/2),!0):!1},flip:function(a){a?this.end=this.node-1:this.start=this.node+1
},stop:function(){this.stop=!0}}),a.Bloop=function(a){return new b(a)}}(),a.Chunk=function(b,c){a.isArray(b)&&(b=[]);var c=a.extend({},{size:256,every:1e3},c),d=a.extend(a.Deferred(),{size:c.size,every:c.every,from:0,to:b.length,process:function(a){return d.process.fn=a,d},chunkStart:function(a){return d.chunkStart.fn=a,d},chunkEnd:function(a){return d.chunkEnd.fn=a,d},start:function(){return d.stopped=!1,d.iterate(),d},iterate:function(){if(!d.stopped){var a=d.process.fn;if(a){d.to=from.size+d.size;var c=b.length;
d.to>c&&(d.to=c);var e={from:d.from,to:d.to};for(d.chunkStart.fn&&d.chunkStart.fn.call(d,e.from,e.to);d.from<d.to&&!d.stopped;)a.call(d,b[d.from]),d.from++;return d.chunkEnd.fn&&d.chunkEnd.fn.call(d,e.from,e.to),d.completed=d.from>=b.length-1,d.completed?d.resolveWith(d):d.nextIteration=setTimeout(d.iterate,d.every),d}}},pause:function(){return d.stopped=!0,clearTimeout(d.nextIteration),d},restart:function(){return"rejected"===d.state()?d:(d.from=0,d.start(),d)},stop:function(){return d.pause(),d.rejectWith(d,[d.from]),d
}});return d},function(b){var c=function(){this.lastId=0};c.prototype.queue=function(c){var d=this,e=a.uid();return d.lastId=e,function(){if(d.lastId===e){var a=arguments,a=b(c)?c.apply(this,a):a;return b(d.fn)?d.fn.apply(this,a):a}}},a.Enqueue=function(d){var e=new c;b(d)&&(e.fn=d);var f=a.proxy(e.queue,e);return f.reset=function(){e.lastId=0},f}}(a.isFunction),function(){var b={error:"error",warning:"warn",success:"log",info:"info"};a.Exception=function(c){var d=arguments,e=1==d.length,f=3==d.length;return c=a.isPlainObject(c)?c:{type:e?"error":d[0],message:e?d[0]:d[1]},f&&a.extend(c,d[2]),"development"==a.environment&&console[b[c.type]](c.message,c),c
}}(),a.IE=function(){var a=navigator.userAgent;if(a.match(/MSIE 9/))return 9;if(a.match(/MSIE 10/))return 10;if(a.match(/rv:11/i))return 11;for(var b,c=3,d=document.createElement("div"),e=d.getElementsByTagName("i");c++,d.innerHTML="<!--[if gt IE "+c+"]><i></i><![endif]-->",e[0];);return c>4?c:b}(),a.Task=function(b){var c=a.extend(a.Deferred(),{data:{},list:[],add:function(b){var d=a.extend(a.Deferred(),{name:b,item:d});return c.list.push(d),d},process:function(){return c._promise||(c._promise=a.when.apply(a,c.list).then(c.resolve,c.reject,c.progress)),c
}},b);return c},function(){var b=function(a){this.threads=[],this.threadCount=0,this.threadLimit=a.threadLimit||1,this.threadDelay=a.threadDelay||0};a.extend(b.prototype,{add:function(b,c){a.isFunction(b)&&(b.type=c||"normal","deferred"==c&&(b.deferred=a.Deferred().always(a.proxy(this.next,this))),this.threads.push(b),this.run())},addDeferred:function(a){return this.add(a,"deferred")},next:function(){this.threadCount--,this.run()},run:function(){var a=this;setTimeout(function(){if(!(a.threads.length<1)&&a.threadCount<a.threadLimit){a.threadCount++;
var b=a.threads.shift();try{b.call(b,b.deferred)}catch(c){console.error(c)}!b.deferred&&a.next()}},a.threadDelay)}}),a.Threads=function(a){return new b(a)}}(),a.callback=function(b,c){if(a.isFunction(b)){var d=a.uid("cb");return window[d]=function(){return c||delete window[d],b.apply(null,arguments)},d}if(a.isString(b))switch(b){case"destroy":var d=c;delete window[d]}},a.fn.checkList=function(b){var c={checkbox:".checkbox",masterCheckbox:".master-checkbox",check:function(){},uncheck:function(){},change:function(){}},b=a.extend({},c,b),d=this,e=d.find(b.checkbox),f=d.find(b.masterCheckbox),g=!1,h=function(){if(!g){var a=e.filter(":checked"),c=e.not(":checked");
a.length<1&&f.removeAttr("checked"),a.length==e.length&&f.prop("checked",!0),b.change.call(d,a,c)}};return e.checked(function(){b.check.apply(d),h()},function(){b.uncheck.apply(d),h()}),f.checked(function(){g=!0,e.checked(!0),g=!1,h()},function(){g=!0,e.checked(!1),g=!1,h()}),h(),this},a.fn.switchClass=function(b,c){var c=c||"-",d=b.split(c)[0]+c,e=d.length;return this.each(function(){var c=a(this),f=a.map((c.attr("class")||"").split(" "),function(a){return a.slice(0,e)==d||""==a?null:a});f.push(b),c.attr("class",f.join(" "))
})},a.fn.activateClass=function(b){return this.prevObject.removeClass(b),a(this).addClass(b)},function(){var b=function(a){var a=parseInt(a.indexOf("#")>-1?a.substring(1):a,16);return{r:a>>16,g:(65280&a)>>8,b:255&a}},c=function(a){return d(b(a))},d=function(a){var b={h:0,s:0,b:0},c=Math.min(a.r,a.g,a.b),d=Math.max(a.r,a.g,a.b),e=d-c;return b.b=d,b.s=0!=d?255*e/d:0,0!=b.s?(b.h=a.r==d?(a.g-a.b)/e:a.g==d?2+(a.b-a.r)/e:4+(a.r-a.g)/e,b.h*=60):b.h=360,b.h<0&&(b.h+=360),b.s*=100/255,b.b*=100/255,b},e=function(a){var b={},c=a.h,d=255*a.s/100,e=255*a.b/100;
if(0==d)b.r=b.g=b.b=e;else{var f=e,g=(255-d)*e/255,h=(f-g)*(c%60)/60;360==c&&(c=0),60>c?(b.r=f,b.b=g,b.g=g+h):120>c?(b.g=f,b.b=g,b.r=f-h):180>c?(b.g=f,b.r=g,b.b=g+h):240>c?(b.b=f,b.r=g,b.g=f-h):300>c?(b.b=f,b.g=g,b.r=g+h):360>c?(b.r=f,b.g=g,b.b=f-h):(b.r=0,b.g=0,b.b=0)}return{r:Math.round(b.r),g:Math.round(b.g),b:Math.round(b.b)}},f=function(b){var c=[b.r.toString(16),b.g.toString(16),b.b.toString(16)];return a.each(c,function(a,b){1==b.length&&(c[a]="0"+b)}),c.join("")},g=function(a){return f(e(a))},h=function(a){return{h:Math.min(360,Math.max(0,a.h)),s:Math.min(100,Math.max(0,a.s)),b:Math.min(100,Math.max(0,a.b))}
},i=function(a){return{r:Math.min(255,Math.max(0,a.r)),g:Math.min(255,Math.max(0,a.g)),b:Math.min(255,Math.max(0,a.b))}},j=function(a){var b=6-a.length;if(3==b)for(var d,c=a.split(""),a="";d=c.shift();)a+=d+d;else for(;b--;)a="0"+a;return a.replace(/[^A-Fa-f0-9]/g,"0"),a};a.extend(a,{hexToRgb:b,hexToHsb:c,rgbToHsb:d,hsbToRgb:e,rgbToHex:f,hsbToHex:g,fixHsb:h,fixRgb:i,fixHex:j})}(),a.fn.htmlData=function(b,c){var e,c=void 0===c?!0:c,d=new RegExp("^data-"+(b?b+"-":"")+"(.*)","i"),f={};return this.length<=0?{}:(a.each(this[0].attributes,function(a,b){if(b.specified&&(e=b.name.match(d))&&e[1])if(c){var a,h,g=e[1].split("-"),i=f;
for(max=g.length-1,a=0;max>=a;a++)h=g[a],a==max?i[h]=b.value:(!i[h]&&(i[h]={}),i=i[h])}else f[e[1]]=b.value}),f)},a.fn.defineData=function(a,b){return void 0===this.data(a)&&this.data(a,b),this},a.deletes=function(b,c){a.each(c,function(a,c){delete b[c]})},a.fn.disabled=function(a){return void 0===a?this.is(":disabled")||this.hasClass("disabled"):this.prop("disabled",!!a).toggleClass("disabled",!!a)},a.fn.enabled=function(a){return void 0===a?!this.disabled():this.disabled(!a)},a.distinct=function(b){var c=a.unique;
if(!(b.length<1)){if(b[0].nodeType)return c.apply(this,arguments);if("object"==typeof b[0]){var d=Math.random(),e=[];return a.each(b,function(a){b[a][d]||(e.push(b[a]),b[a][d]=!0)}),a.each(e,function(a){delete e[a][d]}),e}return a.grep(b,function(c,d){return a.inArray(c,b)===d})}},a.fn.tagName=function(){return(this[0]||{}).tagName},a.create=function(b){return a(document.createElement(b))},a.fn.editable=function(b){return a.isUndefined(b)?"true"===this.prop("contenteditable"):(this.prop("contenteditable",b),b===!1&&this.removeAttr("contenteditable"),this)
},a.download=function(b){return a("<iframe>").hide().appendTo("body").bind("load",function(){a(this).remove()}).attr("src",b)},a.ns=function(a,b){return a.split(" ").join(b+" ")+b},a.getPointerPosition=function(a){return a.type.match("touch")?{x:a.originalEvent.changedTouches[0].pageX,y:a.originalEvent.changedTouches[0].pageY}:{x:a.pageX,y:a.pageY}},function(){var b="___eventable",c=["on","off","fire"],d=function(a){return a.split(".")[0]},e=function(a){this.fnList={},this.events={},this.mode=a};a.extend(e.prototype,{createEvent:function(b){return this.events[b]=a.Callbacks(this.mode)
},on:function(b,c){if(!b||!a.isFunction(c))return this;var e=this.fnList;(e[b]||(e[b]=[])).push(c);var f=d(b);return(this.events[f]||this.createEvent(f)).add(c),this},off:function(b){if(!b)return this;var c=d(b),e=this.events[c];if(!e)return this;var f=function(b){a.each(b,function(a,b){e.remove(b)})};return c!==b?a.each(this.fnList,function(a,b){a.indexOf(c)>-1&&f(b)}):f(this.fnList[b]),this},fire:function(b){var c=this.events[b];if(c)return c.fire.apply(c,a.makeArray(arguments).slice(1)),this},destroy:function(){for(name in this.events)this.events[name].disable()
}}),a.eventable=function(d,f){var g=d[b];return g&&"destroy"===f?(g.destroy(),a.deletes(d,c),delete d[b]):(g=d[b]=new e(f),d.on=a.proxy(g.on,g),d.off=a.proxy(g.off,g),d.fire=a.proxy(g.fire,g),d)}}(),a.fn.checkList=function(b){var c={checkbox:".checkbox",masterCheckbox:".master-checkbox",check:function(){},uncheck:function(){},change:function(){}},b=a.extend({},c,b),d=this,e=d.find(b.checkbox),f=d.find(b.masterCheckbox),g=!1,h=function(){if(!g){var a=e.filter(":checked"),c=e.not(":checked");a.length<1&&f.removeAttr("checked"),a.length==e.length&&f.prop("checked",!0),b.change.call(d,a,c)
}};return e.checked(function(){b.check.apply(d),h()},function(){b.uncheck.apply(d),h()}),f.checked(function(){g=!0,e.checked(!0),g=!1,h()},function(){g=!0,e.checked(!1),g=!1,h()}),h(),this},a.fn.checked=function(b,c){return arguments.length<1?this.is(":checked"):(this.each(function(){var e=a(this);return"boolean"==typeof b?(e.attr("checked",b).trigger("change"),void 0):((e.is("input[type=checkbox]")||e.is("input[type=radio]"))&&e.off("change.checked").on("change.checked",function(){try{return e.is(":checked")?b.apply(e):c.apply(e)
}catch(a){}}),void 0)}),this)},a.fn.locate=function(b){var c="data";return a.each(this[0].attributes,function(a,b){return b.specified&&"$"===b.value?(c=b.name,!1):void 0}),this.find("["+c+"-"+b.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()+"]")},function(){var b=["overflow","overflow-x","overflow-y"];a.fn.noscroll=function(c){return void 0===c&&(c=!0),this.each(function(){var d=a(this),e=d.data("noscroll");!e&&c&&(e={},a.each(b,function(a,b){e[b]=d.css(b)}),d.data("noscroll",e)),c?a.each(b,function(a,b){d.css(b,"hidden")
}):e&&d.css(e)})}}(),a.fn.visible=function(b){var c=a(this),d=a(window);if(!(c.length<1)){var e=d.scrollTop(),f=e+d.height(),g=c.offset().top,h=g+c.height(),i=b===!0?h:g,j=b===!0?g:h;return f>=j&&i>=e}},a.fn.where=a.fn.filterBy=function(a,b,c){var c=c||"=",d="[data-"+a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()+c+"'"+b+"']";return this.filter(d)},a.fn.checked=function(b,c){return arguments.length<1?this.is(":checked"):(this.each(function(){var e=a(this);return"boolean"==typeof b?(e.attr("checked",b).trigger("change"),void 0):((e.is("input[type=checkbox]")||e.is("input[type=radio]"))&&e.off("change.checked").on("change.checked",function(){try{return e.is(":checked")?b.apply(e):c.apply(e)
}catch(a){}}),void 0)}),this)},a.fn.selectAll=function(){return this.each(function(){this.select()})},a.fn.unselect=function(){return this.each(function(){var a=this,b=a.value;a.value+=" ",a.value=b})},a.fn.toObject=a.fn.serializeObject=function(){var b={};return a.each(a(this).serializeArray(),function(c,d){b.hasOwnProperty(d.name)?(a.isArray(b[d.name])||(b[d.name]=[b[d.name]]),b[d.name].push(d.value)):b[d.name]=d.value}),b},a.fn.toJSON=a.fn.serializeJSON=function(){return JSON.stringify(a(this).serializeObject())
},a.sanitizeHTML=function(b){return a(a.parseHTML(b,document,!0)).toHTML()},a.toHTML=function(b){return a("<div>").html(b).html()},a.fn.toHTML=function(){return a.toHTML(this.clone())},a.toXHTML=function(a,b){var c=a.innerHTML?String(a.innerHTML):a,d=c.match(/(<.+[^>])/g);if(d)for(var e=0;e<d.length;e+=1){var f,g=d[e],h=/\=[a-zA-Z\.\:\[\]_\(\)\&\$\%#\@\!0-9\/]+[?\s+|?>]/g;if(d[e]=d[e].replace(/([<|<\/].+?\w+).+[^>]/,function(a){return a}),f=d[e].match(h))for(var i=0,j=f.length;j>i;){var k=/(\=)([a-zA-Z\.\:\[\]_\(\)\&\$\%#\@\!0-9\/]+)?([\s+|?>])/g,l=function(){var a=Array.prototype.slice.call(arguments);
return'="'+(b?a[2]:a[2].toLowerCase())+'"'+a[3]};d[e]=d[e].replace(f[i],f[i].replace(k,l)),i+=1}c=c.replace(g,d[e])}return c},a.fn.xhtml=function(){return a.IE?a.toXHTML(this[0]):this.html()},a.buildHTML=function(b,c){if(b instanceof a)return b;var d=document;if(window.CloudFlare){var e=a.buildHTML.iframe;if(!e||!e.contentDocument){var e=a.buildHTML.iframe=document.createElement("iframe");e.style.display="none",document.body.appendChild(e)}d=e.contentDocument}var b=a.trim(b),f=[],g=a.buildFragment([b],d,f),h=a.merge([],g.childNodes);
if(!c&&f.length>0){var i=d.createElement("script");i.text="try{"+a.callback(function(){a(f).remove()})+"();}catch(e){}";for(var k,l,j=h.length-1;(k=h[j--])&&("SCRIPT"===k.nodeName?l=h.push(i):1===k.nodeType&&(l=k.appendChild(i)),!l););l||h.push(i),f.push(i)}return a(h)},a.intersects=function(b,c){return a.isArray(c)&&(c={top:c.y,left:c.x,bottom:c.y,right:c.x}),c.left<=b.right&&b.left<=c.right&&c.top<=b.bottom&&b.top<=c.bottom},a.fn.intersectsWith=function(b,c,d,e){var f=this.offset(),g={top:f.top,left:f.left,bottom:f.top+(sourceHeight=this.height()),right:f.left+(sourceWidth=this.width()),width:sourceWidth,height:sourceHeight},h={top:b,left:c,bottom:b+(e||(e=0)),right:c+(d||(d=0)),width:d,height:e};
return a.intersects(g,h)?{reference:g,subject:h}:!1},a.isDeferred=function(b){return b&&a.isFunction(b.always)},a.isNumeric=function(a){return!isNaN(parseFloat(a))&&isFinite(a)},a.rotateNumber=function(a,b,c,d){return void 0===d&&(d=0),a+=d,b>a?a+=c+1:a>c&&(a-=c+1),a},a.regExpEscape=function(a){return a.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},a.remap=function(b,c,d){return a.each(d,function(a,d){b[d]=c[d]}),obj},function(){var b=a.Ajax=function(c){c.autostart=!1;var d=a.ajax(c);
return"function"==typeof d.send&&b.queue.addDeferred(function(a){d.send(),setTimeout(a.resolve,b.interval)}),d};b.queue=a.Threads({threadLimit:1}),b.interval=1200,b.interval=0}(),function(){a.fn.addTransitoryClass=function(a,b){var c=this.addClass(a);return setTimeout(function(){c.removeClass(a)},b||1),this};var b=function(a,b,c){var d=this;return setTimeout(function(){d[a+"Class"](b)},c||50),this};a.fn.addClassAfter=function(a,c){return b.call(this,"add",a,c)},a.fn.removeClassAfter=function(a,c){return b.call(this,"remove",a,c)
};var c=function(a,b,c,d){var e=a?"-in":"-out";return this.addTransitoryClass(b.replace(/ /g,e+" ")+e,c||1e3)[(a?"add":"remove")+"ClassAfter"](b),d&&setTimeout(d,c),this};a.fn.addTransitionClass=function(a,b,d){return c.call(this,!0,a,b,d)},a.fn.removeTransitionClass=function(a,b,d){return c.call(this,!1,a,b,d)}}(),a.trimSeparators=function(b,c,d){var e=c;return b=b.replace(new RegExp("^["+e+"\\s]+|["+e+",\\s]+$","g"),"").replace(new RegExp(e+"["+e+"\\s]*"+e,"g"),e).replace(new RegExp("[\\s]+"+e,"g"),e).replace(new RegExp(e+"[\\s]+","g"),e),d&&(b=a.distinct(b.split(e)).join(e)),b
},a.uid=function(a,b){return(a?a:"")+Math.random().toString().replace(".","")+(b?b:"")}}),FD40.plugin("uri",function(a){a.isUrl=function(a){var b=/^(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;return b.test(a)};var b=function(a){"use strict";var b=function(a){var c,d,e,f,g,h,b=[];if("undefined"==typeof a||null===a||""===a)return b;for(0===a.indexOf("?")&&(a=a.substring(1)),d=a.toString().split(/[&;]/),c=0;c<d.length;c++)e=d[c],f=e.split("="),g=f[0],h=-1===e.indexOf("=")?null:null===f[1]?"":f[1],b.push([g,h]);
return b},c=b(a),d=function(){var b,d,a="";for(b=0;b<c.length;b++)d=c[b],a.length>0&&(a+="&"),a+=null===d[1]?d[0]:d.join("=");return a.length>0?"?"+a:a},e=function(a){return a=decodeURIComponent(a),a=a.replace("+"," ")},f=function(a){var b,d;for(d=0;d<c.length;d++)if(b=c[d],e(a)===e(b[0]))return b[1]},g=function(a){var d,f,b=[];for(d=0;d<c.length;d++)f=c[d],e(a)===e(f[0])&&b.push(f[1]);return b},h=function(a,b){var f,g,h,i,d=[];for(f=0;f<c.length;f++)g=c[f],h=e(g[0])===e(a),i=e(g[1])===e(b),(1===arguments.length&&!h||2===arguments.length&&!h&&!i)&&d.push(g);
return c=d,this},i=function(a,b,d){return 3===arguments.length&&-1!==d?(d=Math.min(d,c.length),c.splice(d,0,[a,b])):arguments.length>0&&c.push([a,b]),this},j=function(a,b,d){var g,j,f=-1;if(3===arguments.length){for(g=0;g<c.length;g++)if(j=c[g],e(j[0])===e(a)&&decodeURIComponent(j[1])===e(d)){f=g;break}h(a,d).addParam(a,b,f)}else{for(g=0;g<c.length;g++)if(j=c[g],e(j[0])===e(a)){f=g;break}h(a),i(a,b,f)}return this};return{getParamValue:f,getParamValues:g,deleteParam:h,addParam:i,replaceParam:j,toString:d}},c=function(a){"use strict";
var d=!1,e=/[-a-zA-Z0-9@:%_\+.~#?&\/\/=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)?/gi,f=function(a){for(var b={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},c=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],e={name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},f=b[d?"strict":"loose"].exec(a),g={},h=14;h--;)g[c[h]]=f[h]||"";
return g[e.name]={},g[c[12]].replace(e.parser,function(a,b,c){b&&(g[e.name][b]=c)}),g},g=f(a||""),h=new b(g.query),i=function(a){return"undefined"!=typeof a&&(g.protocol=a),g.protocol},j=null,k=function(a){return"undefined"!=typeof a&&(j=a),null===j?-1!==g.source.indexOf("//"):j},l=function(a){return"undefined"!=typeof a&&(g.userInfo=a),g.userInfo},m=function(a){return"undefined"!=typeof a&&(g.host=a),g.host},n=function(a){return"undefined"!=typeof a&&(g.port=a),g.port},o=function(a){return"undefined"!=typeof a&&(g.path=a),g.path
},p=function(a){return"undefined"!=typeof a&&(h=new b(a)),h},q=function(a){return"undefined"!=typeof a&&(g.anchor=a),g.anchor},r=function(a){return i(a),this},s=function(a){return k(a),this},t=function(a){return l(a),this},u=function(a){return m(a),this},v=function(a){return n(a),this},w=function(a){return o(a),this},x=function(a){return p(a),this},y=function(a){return q(a),this},z=function(a){return p().getParamValue(a)},A=function(a){return p().getParamValues(a)},B=function(a,b){return 2===arguments.length?p().deleteParam(a,b):p().deleteParam(a),this
},C=function(a,b,c){return 3===arguments.length?p().addParam(a,b,c):p().addParam(a,b),this},D=function(a,b,c){return 3===arguments.length?p().replaceParam(a,b,c):p().replaceParam(a,b),this},E=function(a){if(void 0===a)return g.path;if("/"==a.substring(0,1))return g.path=a;var b=g.path.split("/"),c=a.split("/");""===b.slice(-1)[0]&&b.pop();for(var d;d=c.shift();)switch(d){case"..":b.length>1&&b.pop();break;case".":break;default:b.push(d)}return g.path=b.join("/"),this},F=function(){var a="",b=function(a){return null!==a&&""!==a
};return b(i())?(a+=i(),i().indexOf(":")!==i().length-1&&(a+=":"),a+="//"):k()&&b(m())&&(a+="//"),b(l())&&b(m())&&(a+=l(),l().indexOf("@")!==l().length-1&&(a+="@")),b(m())&&(a+=m(),b(n())&&(a+=":"+n())),b(o())?a+=o():b(m())&&(b(p().toString())||b(q()))&&(a+="/"),b(p().toString())&&(0!==p().toString().indexOf("?")&&(a+="?"),a+=p().toString()),b(q())&&(0!==q().indexOf("#")&&(a+="#"),a+=q()),a},G=function(b){var c=a.match(e)||[];return void 0===b?c:c[b]||""},H=function(){return new c(F())};return{protocol:i,hasAuthorityPrefix:k,userInfo:l,host:m,port:n,path:o,query:p,anchor:q,setProtocol:r,setHasAuthorityPrefix:s,setUserInfo:t,setHost:u,setPort:v,setPath:w,setQuery:x,setAnchor:y,getQueryParamValue:z,getQueryParamValues:A,deleteQueryParam:B,addQueryParam:C,replaceQueryParam:D,extract:G,toPath:E,toString:F,clone:H}
};a.uri=function(a){return new c(a)}}),FD40.plugin("mvc",function($){!function(){var d,a={undHash:/_|-/,colons:/::/,words:/([A-Z]+)([A-Z][a-z])/g,lowUp:/([a-z\d])([A-Z])/g,dash:/([a-z\d])([A-Z])/g,replacer:/\{([^\}]+)\}/g,dot:/\./},b=function(a,b,c){return void 0!==a[b]?a[b]:c&&(a[b]={})},c=function(a){var b=typeof a;return a&&("function"==b||"object"==b)},e=$.String=$.extend($.String||{},{getObject:d=function(d,e,f){var i,j,k,g=d?d.split(a.dot):[],h=g.length,l=0;if(e=$.isArray(e)?e:[e||window],0==h)return e[0];
for(;i=e[l++];){for(k=0;h-1>k&&c(i);k++)i=b(i,g[k],f);if(c(i)&&(j=b(i,g[k],f),void 0!==j))return f===!1&&delete i[g[k]],j}},capitalize:function(a){return a.charAt(0).toUpperCase()+a.substr(1)},camelize:function(a){return a=e.classize(a),a.charAt(0).toLowerCase()+a.substr(1)},classize:function(b,c){for(var d=b.split(a.undHash),f=0;f<d.length;f++)d[f]=e.capitalize(d[f]);return d.join(c||"")},niceName:function(a){return e.classize(a," ")},underscore:function(b){return b.replace(a.colons,"/").replace(a.words,"$1_$2").replace(a.lowUp,"$1_$2").replace(a.dash,"_").toLowerCase()
},sub:function(b,c,e){var f=[];return f.push(b.replace(a.replacer,function(a,b){var g=d(a,c,"boolean"==typeof e?!e:e)||d(b,c,"boolean"==typeof e?!e:e),h=typeof g;return"object"!==h&&"function"!==h||null===h?""+g:(f.push(g),"")})),f.length<=1?f[0]:f},_regs:a});$.extend($,e)}(),function(){$.String.rsplit=function(a,b){for(var e,f,c=b.exec(a),d=[];null!==c;)e=c.index,f=b.lastIndex,0!==e&&(d.push(a.substring(0,e)),a=a.slice(e)),d.push(c[0]),a=a.slice(c[0].length),c=b.exec(a);return""!==a&&d.push(a),d}}(),function(){var a=/^\d+$/,b=/([^\[\]]+)|(\[\])/g,c=/\+/g,d=/([^?#]*)(#.*)?$/;
$.String=$.extend($.String||{},{deparam:function(e){if(!e||!d.test(e))return{};for(var h,f={},g=e.split("&"),i=0;i<g.length;i++){h=f;var j=g[i].split("=");2!=j.length&&(j=[j[0],j.slice(1).join("=")]);for(var k=decodeURIComponent(j[0].replace(c," ")),l=decodeURIComponent(j[1].replace(c," ")),m=k.match(b),n=0;n<m.length-1;n++){var o=m[n];h[o]||(h[o]=a.test(m[n+1])||"[]"==m[n+1]?[]:{}),h=h[o]}lastPart=m[m.length-1],"[]"==lastPart?h.push(l):h[lastPart]=l}return f}})}(),function(){var a=$.cleanData;$.cleanData=function(b){for(var d,c=0;void 0!==(d=b[c]);c++)$(d).triggerHandler("destroyed");
a(b)}}(),function(){var a=$.fn._closest=$.fn.closest;$.fn.closest=function(b,c){if(b instanceof $||$.isElement(b))return a.call(this,arguments);var e,f,h,j,j,d={},k=!0,l=b;if("string"==typeof b&&(l=[b]),$.each(l,function(a,c){if(0==c.indexOf(">")){if(-1!=c.indexOf(" "))throw" closest does not work with > followed by spaces!";d[l[a]=c.substr(1)]=c,"string"==typeof b&&(b=c.substr(1)),k=!1}}),e=a.call(this,b,c),k)return e;for(h=0;h<e.length;)f=e[h],j=f.selector,void 0===d[j]||(f.selector=d[j],d[j]=!1,"string"==typeof f.selector&&f.elem.parentNode===c)?h++:e.splice(h,1);
return e}}(),function(){$.cookie=function(a,b,c){if("undefined"==typeof b){var i=null;if(document.cookie&&""!=document.cookie)for(var j=document.cookie.split(";"),k=0;k<j.length;k++){var l=jQuery.trim(j[k]);if(l.substring(0,a.length+1)==a+"="){i=decodeURIComponent(l.substring(a.length+1));break}}if(jQuery.evalJSON&&i&&i.match(/^\s*\{/))try{i=jQuery.evalJSON(i)}catch(m){}return i}c=c||{},null===b&&(b="",c.expires=-1),"object"==typeof b&&jQuery.toJSON&&(b=jQuery.toJSON(b));var d="";if(c.expires&&("number"==typeof c.expires||c.expires.toUTCString)){var e;
"number"==typeof c.expires?(e=new Date,e.setTime(e.getTime()+24*c.expires*60*60*1e3)):e=c.expires,d="; expires="+e.toUTCString()}var f=c.path?"; path="+c.path:"",g=c.domain?"; domain="+c.domain:"",h=c.secure?"; secure":"";document.cookie=[a,"=",encodeURIComponent(b),d,f,g,h].join("")}}(),function(){var a=!1,b=$.makeArray,c=$.isFunction,d=$.isArray,e=$.extend,f=$.String.getObject,g=function(a,c){return a.concat(b(c))},h=/xyz/.test(function(){})?/\b_super\b/:/.*/,i=function(a,b,d){d=d||a;for(var e in a)d[e]=c(a[e])&&c(b[e])&&h.test(a[e])?function(a,c){return function(){var e,d=this._super;
return this._super=b[a],e=c.apply(this,arguments),this._super=d,e}}(e,a[e]):a[e]},j="prototype";clss=$.Class=function(){arguments.length&&clss.extend.apply(clss,arguments)},e(clss,{proxy:function(a){var e,c=b(arguments);return a=c.shift(),d(a)||(a=[a]),e=this,function(){for(var f,j,b=g(c,arguments),h=a.length,i=0;h>i;i++)j=a[i],j&&(f="string"==typeof j,f&&e._set_called&&(e.called=j),b=(f?e[j]:j).apply(e,b||[]),h-1>i&&(b=!d(b)||b._use_call?[b]:b));return b}},newInstance:function(){var b,a=this.rawInstance();return a.setup&&(b=a.setup.apply(a,arguments)),a.init&&a.init.apply(a,d(b)?b:arguments),a
},setup:function(a){return this.defaults=e(!0,{},a.defaults,this.defaults),arguments},rawInstance:function(){a=!0;var b=new this;return a=!1,b},extend:function(b,c,d){function p(){return a?void 0:this.constructor!==p&&arguments.length?arguments.callee.extend.apply(arguments.callee,arguments):this.Class.newInstance.apply(this.Class,arguments)}"string"!=typeof b&&(d=c,c=b,b=null),d||(d=c,c=null),d=d||{};var l,m,n,o,h=this,k=this[j];a=!0,o=new this,a=!1,i(d,k,o);for(l in this)this.hasOwnProperty(l)&&(p[l]=this[l]);
if(i(c,this,p),b){var q;c&&c.root&&(q=c.root,$.isString(q)&&(q=f(q,window,!0)));var r=b.split(/\./),m=r.pop(),s=f(r.join("."),q||window,!0),n=s;e(!0,p,s[m]),s[m]=p}e(p,{prototype:o,namespace:n,shortName:m,constructor:p,fullName:b}),p[j].Class=p[j].constructor=p;var t=p.setup.apply(p,g([h],arguments));return p.init&&p.init.apply(p,t||g([h],arguments)),p}}),clss.callback=clss[j].callback=clss[j].proxy=clss.proxy}(),function(){var w,a=function(a,b,c,e){var f,g=a.bind&&a.unbind?a:$(d(a)?[a]:a);return 0===b.indexOf(">")&&(b=b.substr(1),f=function(b){b.target===a&&c.apply(this,arguments)
}),e?g.bind(b,e,f||c):g.bind(b,f||c),function(){g.unbind(b,f||c),a=b=c=f=null}},b=$.makeArray,c=$.isArray,d=$.isFunction,e=$.isString,f=$.extend,g=$.String,h=$.each,i=g.getObject,j="prototype",k="constructor",l=Array[j].slice,m=function(a,b,c,e,f){0===b.indexOf(">")&&(b=(a.data("directSelector")+" "||"")+b);var g=a.delegate&&a.undelegate?a:$(d(a)?[a]:a);return f?g.delegate(b,c,f,e):g.delegate(b,c,e),function(){g.undelegate(b,c,e),g=a=c=e=b=null}},n=function(b,c,d,e,f){return e?m(b,e,c,d,f):a(b,c,d,f)},o=function(a,b){var e="string"==typeof b?a[b]:b;
return c(e)&&d(e[1])&&(e=e[1]),function(){return a.called=b,e.apply(a,[this.nodeName?$(this):this].concat(l.call(arguments,0)))}},p=/\./g,q=/_?controllers?/gi,r=function(a){return g.underscore(a.replace($.globalNamespace+".","").replace(p,"_").replace(q,""))},s=/^\S(.*)\s(.*)/,t=/\{([^\}]+)\}/g,u=/\{([^\.]+[\.][^\.]+)\}/g,v=/^(?:(.*?)\s)?([\w\.\:>]+)$/,x=function(a,b){return $.data(a,"controllers",b)},y=$.globalNamespace+".Controller";$.Controller=function(a){var e,c=b(arguments),d={root:y};return c.length>2?(d=$.extend(d,c[1]),e=c[2]):e=c[1],d.namespace&&(a=d.namespace+"."+a),$.Controller.Class(a,d,e)
};var z=y+".Class";$.Class(z,{setup:function(a,f){if(this._super.apply(this,arguments),this.shortName&&this.fullName!=z){for(var g=this.elements||[],h=0,i=this.defaults;element=g[h++];){var k=element.indexOf("{"),l=element.indexOf("}"),n=(element.length,element.slice(0,k)),o=element.slice(l+1),p=element.slice(k+1,l).split("|"),q=0,s=n.match(/^\^(\S*)\s(.*)/),t="";for(s&&(t=s[1]+"-",n=s[2]);f=p[q++];){var u="{"+$.camelize(t+f)+"}";!$.has(i,u)&&(i[u]=n+f+o)}}this._fullName=r(this.fullName),this._shortName=r(this.shortName);
var w,v=this;if(e(this.pluginName)){var A=this._fullName,B=this.pluginName;$.fn[B]||($.fn[B]=function(a){var c=b(arguments);if($.isString(a)&&"controller"===a){var d=x(this[0]),e=d&&d[A];return e}return this.each(function(){var b=x(this),d=b&&b[A];if(d){if($.isString(a)){var e=d[a];return $.isFunction(e)&&e.apply(d,c.slice(1)),void 0}d.update.apply(d,c)}else v.newInstance.apply(v,[this].concat(c))})})}var C=b(arguments),D=this[j],E=C[C.length>3?3:2];d(E)&&(this.protoFactory=E,D=this.protoFactory.call(this,null)),this.actions={};
for(w in D)if("constructor"!=w&&this._isAction(w)){var F=D[w],G=d(F)||c(F)&&d(F[1]);if(!G)continue;this.actions[w]=this._action(w)}$.module("$:/Controllers/"+this.fullName).resolve(this)}},hookup:function(a){return new this(a)},_isAction:function(a){return s.test(a)?!0:$.inArray(a,this.listensTo)>-1||$.event.special[a]||A[a]},_action:function(a,b){if(t.lastIndex=0,!b&&t.test(a))return null;a=a.replace("{self} ","");var d=a;if(b){var e=!1;if(u.test(a)){var f,h="";d=a.replace(u,function(a,c){var d=c.split(".");
return f=b["{"+d[0]+"}"]||{},$.isControllerInstance(f)&&(h=(f[d[1]]||{}).selector),h}).match(v),e=!!h,d=[f.element].concat(d||[])}e||(d=g.sub(a,[b,window]))}var i=c(d),j=(i?d[1]:d).match(v),k=j[2],l=A[k]||w;return{processor:l,parts:j,delegate:i?d[0]:void 0}},processors:{},listensTo:[],defaults:{},hostname:"parent"},{setup:function(a,c){var d=this,g=d[k],i=d[j],l=g._fullName;d.instanceId=$.uid(l+"_");var m=d.options=f(!0,{},g.defaults,g.defaultOptions,c),n=d.element=$(a);if(g.protoFactory&&(i=g.protoFactory.apply(g,[d,m,n]),f(!0,d,i)),(x(a)||x(a,{}))[l]=d,!n.data("directSelector")){var o=$.uid("DS");
n.addClass(o).data("directSelector","."+o)}d.selectors={};for(var p in m)if(p.match(/^\{.+\}$/)){var q=p.replace(/^\{|\}$/g,""),r=m[p];if(e(r)){var s=d[q];d[q]=d.selectors[q]=function(a,b,c){b=/^(\.|\#)$/.test(b)?b+c:b;var d=function(c){var e=(d.baseElement||a.element).find(b);return $.isString(c)&&(e=e.filter(c)),$.isPlainObject(c)&&$.each(c,function(a,b){e=e.filterBy(a,b)}),e};return d.selector=b,d.css=function(){var a=d.cssRule;if(!a){var c=n.data("directSelector"),e=$.map(b.split(","),function(a){return c+" "+a
});a=d.cssRule=$.cssRule(e),a.important=!0}return arguments.length?a.css.apply(a,arguments):a},d.inside=function(a){return $(a).find(b)},d.of=function(a){return $(a).parents(b).eq(0)},d.under=function(a){var b=[];return d().each(function(){$(this).parents().filter(a).length&&b.push(this)}),$(b)},$.isPlainObject(s)&&$.extend(d,s),d}(d,r,q)}else d[q]=r}var t=m.view,u=d.view;d.view=function(){return u.apply(this,arguments)},h(t||{},function(a){d.view[a]=function(c){var e=b(arguments);return $.isBoolean(c)?e=e.slice(1):c=!1,d.view.apply(d,[c,a].concat(e))
}}),$.extend(d,m.controller),d.pluginInstances={},d.called="init",d._bind();var v=d.init||$.noop;return d.init=function(){return d.init=v,result=v.apply(d,arguments),d.trigger("init."+g.fullName.toLowerCase(),[d]),result},[n,m].concat(b(arguments).slice(2))},on:function(a){var c=b(arguments),d=this.element,f=c.length;return 2==f?this._binder(d,a,c[1]):3==f&&e(c[1])?this._binder(d,a,c[2],c[1]):this._binder(c[1],a,c[2])},_bind:function(){var a=this,b=a[k],c=b.actions,d=a._bindings=[],e=a.element;h(c||{},function(f){if(c.hasOwnProperty(f)){var h=b.actions[f]||b._action(f,a.options);
$.isControllerInstance(h.delegate)&&(h.delegate=h.delegate.element),d.push(h.processor(h.delegate||e,h.parts[2],h.parts[1],f,a))}});var f=o(this,"destroy");return e.bind("destroyed",f),d.push(function(a){$(a).unbind("destroyed",f)}),d.length},_binder:function(a,b,c,d){return"string"==typeof c&&(c=o(this,c)),this._bindings.push(n(a,b,c,d)),this._bindings.length},_unbind:function(){var a=this.element[0];h(this._bindings,function(b,c){c(a)}),this._bindings=[]},trigger:function(a){var b=this.element;if(b){var c=$.Event(a);
return b.trigger.apply(b,[c].concat($.makeArray(arguments).slice(1))),c}},delegate:function(a,b,c,d){return"string"==typeof a&&(d=c,c=b,b=a,a=this.element),this._binder(a,c,d,b)},update:function(a){f(this.options,a),this._unbind(),this._bind()},destroy:function(){if(!this._destroyed){var a=this[k]._fullName;for(pname in this.pluginInstances)this.removePlugin(pname);this._destroyed=!0,this.element.removeClass(a),this._unbind(),delete this._actions,delete this.element.data("controllers")[a],$(this).triggerHandler("destroyed"),this.element=$()
}},find:function(a){return this.element.find(a)},view:function(){var c,a=b(arguments),d=a,e=!1,f=this[k].component||$,g="",h=this.options.view||{};return"boolean"==typeof a[0]&&(e=a[0],d=a.slice(1)),c=d[0]=h[d[0]],void 0==c?e?"":$(""):(g=f.View.apply(f,d),e?g:$($.parseHTML($.trim(g))))},getPlugin:function(a){return this.pluginInstances[a]},addSubscriber:function(a){var b=$.isArray(a)?a:[a||{}],c=this,d=this.Class.hostname,e={};return e["{"+d+"}"]=c,$.map(b,function(a){return $.isControllerInstance(a)?a.options[d]===this?a:(a[d]=c,a.update(e)):!1
}),b},addPlugin:function(a,b,c){if(a){(!b&&!c||$.isPlainObject(b))&&(c=b,b=[this.Class.root,this.Class.fullName,$.String.capitalize(a)].join(".")),$.isString(b)&&(b=$.getController(b));var e=$.isControllerInstance(b);if(d(b)||e){var f=this.Class.pluginExtendsInstance?this.options[a]:(this.options.plugin||{})[a];c=$.extend(!0,{element:this.element},c,f);var g=e?"instance":$.isController(b)?"controller":"function";this.trigger("addPlugin",[a,b,c,g]);var h=this.Class.hostname;c["{"+h+"}"]=this;var i;switch(g){case"instance":i=b,b.update(c),b[h]=this;
break;case"controller":i=c.element.addController(b,c);break;case"function":i=b(this,c)}if(i){if(this.pluginInstances[a]=i,this.Class.pluginExtendsInstance&&(this[a]=i),"function"!==g){var j={};j["{"+a+"}"]=i,this.update(j)}return this.trigger("registerPlugin",[a,i,c,g]),i}}}},removePlugin:function(a){var b=this.getPlugin(a);if(b)return this.trigger("removePlugin",[a,b]),delete this.pluginInstances[a],$.isFunction(b.destroy)?b.destroy():null},invokePlugin:function(a,b,c){var d=this.getPlugin(a);if(d&&$.isFunction(d[b]))return this.trigger("invokePlugin",[a,d,c]),d[b].apply(this,c)
},getMessageGroup:function(){var a=$.isFunction(this.messageGroup)?this.messageGroup():this.element.find("[data-message-group]");return a.length<1&&(a=$("<div data-message-group></div>").prependTo(this.element)),a},setMessage:function(a,b){var c={type:"warning",message:"",parent:this.getMessageGroup(),element:$('<div class="o-alert o-alert--dismissible"><button type="button" class="o-alert__close" data-bs-dismiss="alert">\xd7</button></div>')},d={},e=$.isDeferred(a);d=$.isPlainObject(a)&&!e?a:{message:a,type:b||"warning"};
var f=$.extend({},c,d),g=f.element;if($.isDeferred(a)){var h=arguments.callee,i=this;a.done(function(a,b){f.message=a,f.type=b||"warning",h.call(i,f),g.show()})}else g.addClass("o-alert--"+f.type).append(f.message),$("html").has(g).length<1&&g.appendTo(f.parent);return g},clearMessage:function(){this.getMessageGroup().empty()},_set_called:!0});var A=$.Controller.Class.processors,w=function(a,b,e,f,g){var i,h=g[f];return c(h)&&d(h[1])&&(i=h[0]),n(a,b,o(g,f),e,i)};h("change click contextmenu dblclick keydown keyup keypress mousedown mousemove mouseout mouseover mouseup reset resize scroll select submit focusin focusout mouseenter mouseleave".split(" "),function(a,b){A[b]=w
});var B=function(a){return a.replace("$.Controller",y)},C=function(a){return e(a)&&(a=B(a),a=i(a)||i(y+"."+a)),D(a)?a:void 0},D=function(a){return d(a)&&a.hasOwnProperty("_fullName")},E=function(a){return $.map(a,function(a){return c(a)?E(a):C(a)})};$.getController=C,$.isController=function(a){return!!C(a)},$.isControllerInstance=function(a){return a&&a[k]&&D(a[k])},$.isControllerOf=function(a,b){if(!b)return!1;c(b)||(b=[b]);for(var d=0;d<b.length;d++){var e=C(b[d]);if(a instanceof e)return!0}return!1},$.fn.extend({controllers:function(){var a=E(b(arguments)),c=[];
return this.each(function(){var b=$.data(this,"controllers");h(b||{},function(d,e){b.hasOwnProperty(d)&&(!a.length||$.isControllerOf(e,a))&&c.push(e)})}),c},controller:function(a,b){return void 0===b?this.controllers(a)[0]:(this.addController.apply(this,arguments),this)},hasController:function(a){var b=(C(a)||{})._fullName||(e(a)?r(B(a)):"");return b?($(this).data("controllers")||{}).hasOwnProperty(b):!1},addController:function(a,b,c){var e=C(a);if(e){var f=[];return this.each(function(){if(1===this.nodeType&&"SCRIPT"!=this.nodeName){var g=$(this).controller(a);
if(g)return f.push(g),void 0;var h=new e(this,b);d(c)&&c.apply(h,[$(this),h]),f.push(h)}}),f.length>1?f:f[0]}},removeController:function(a){return this.each(function(){for(var b=$(this).controllers(a);b.length;)b.shift().destroy()}),this},addControllerWhenAvailable:function(a){var b=this,c=arguments,d=$.Deferred();return $.isController(a)&&(a=a.fullName),e(a)?($.module("$:/Controllers/"+a).pipe(function(){var a=b.addController.apply(b,c);d.resolveWith(a,[b,a])},d.reject,d.fail),d):d.reject()},implement:function(){return this.addController.apply(this,arguments),this
}}),function(){for(var c,a=["is","find"],b={};c=a.shift();)b[c]=$.fn[c],$.fn[c]=function(a){return function(c){return b[a].apply(this,(c||{}).hasOwnProperty("of")?[c.selector]:arguments)}}(c)}()}(),function(){var a=function(a){return a.replace(/^\/\//,"").replace(/[\/\.]/g,"_")},b=$.makeArray,c=1,d=$.View=function(a,c,d,e){"function"==typeof d&&(e=d,d=void 0);var j=h(c);if(j.length){var k=$.Deferred();return j.push(f(a,!0)),$.when.apply($,j).then(function(a){var j,f=b(arguments),h=f.pop()[0];if(g(c))c=i(a);else for(var l in c)g(c[l])&&(c[l]=i(f.shift()));
j=h(c,d),k.resolve(j),e&&e(j)}),k.promise()}var l,m="function"==typeof e,k=f(a,m);return m?(l=k,k.done(function(a){e(a(c,d))})):k.done(function(a){l=a(c,d)}),l},e=function(a,b){if(!a.match(/[^\s]/))throw"$.View ERROR: There is no template or an empty template at "+b},f=function(a,b){return $.ajax({url:a,dataType:"view",async:b})},g=function(a){return a&&$.isFunction(a.always)},h=function(a){var b=[];if(g(a))return[a];for(var c in a)g(a[c])&&b.push(a[c]);return b},i=function(a){return $.isArray(a)&&3===a.length&&"success"===a[1]?a[0]:a
};$.ajaxTransport("view",function(b,c){var h,i,j,k,f=c.url,g=f.match(/\.[\w\d]+$/),l=function(a){var b=h.renderer(j,a);return d.cache&&(d.cached[j]=b),{view:b}};if((i=document.getElementById(f))&&(g="."+i.type.match(/\/(x\-)?(.+)/)[2]),g||(g=d.ext,f+=d.ext),j=a(f),f.match(/^\/\//)){var m=f.substr(2);f="undefined"==typeof steal?f="/"+m:steal.root.mapJoin(m)+""}h=d.types[g];var n=$.template()[c.url];return{send:function(a,b){return n?(h=d.types["."+n.type],b(200,"success",l(n.content))):d.cached[j]?b(200,"success",{view:d.cached[j]}):(i?b(200,"success",l(i.innerHTML)):k=$.ajax({async:c.async,url:f,dataType:"text",error:function(){e("",f),b(404)
},success:function(a){e(a,f),b(200,"success",l(a))}}),void 0)},abort:function(){k&&k.abort()}}}),$.extend(d,{hookups:{},hookup:function(a){var b=++c;return d.hookups[b]=a,b},cached:{},cache:!0,register:function(b){this.types["."+b.suffix]=b,window.steal&&steal.type(b.suffix+" view js",function(b,c){var f=d.types["."+b.type],g=a(b.rootSrc+"");b.text=f.script(g,b.text),c()})},types:{},ext:".ejs",registerScript:function(a,b,c){return"$.View.preload('"+b+"',"+d.types["."+a].script(b,c)+");"},preload:function(a,b){d.cached[a]=function(a,c){return b.call(a,a,c)
}}}),window.steal&&steal.type("view js",function(b,c){var f=d.types["."+b.type],g=a(b.rootSrc+"");b.text="steal('"+(f.plugin||"jquery/view/"+b.type)+"').then(function($){$.View.preload('"+g+"',"+b.text+");\n})",c()});var j,k,l,m,n,o,p,r={val:!0,text:!0};j=function(a){var c=$.fn[a];$.fn[a]=function(){var f,h,j,e=b(arguments),i=this;if(g(e[0]))return e[0].done(function(a){k.call(i,[a],c)}),this;if(l(e)){if(f=o(e))return h=e[f],e[f]=function(a){k.call(i,[a],c),h.call(i,a)},d.apply(d,e),this;if(j=d.apply(d,e),g(j))return j.done(function(a){k.call(i,[a],c)
}),this;e=[j]}return r[a]?c.apply(this,e):k.call(this,e,c)}},k=function(a,b){var c,f;for(var g in d.hookups)break;return g&&a[0]&&m(a[0])&&(f=d.hookups,d.hookups={},a[0]=$(a[0])),c=b.apply(this,a),f&&p(a[0],f),c},l=function(a){var b=typeof a[1];return"string"==typeof a[0]&&("object"==b||"function"==b)&&!n(a[1])},n=function(a){return a.nodeType||a.jquery},m=function(a){return n(a)?!0:"string"==typeof a?(a=$.trim(a),"<"===a.substr(0,1)&&">"===a.substr(a.length-1,1)&&a.length>=3):!1},o=function(a){return"function"==typeof a[3]?3:"function"==typeof a[2]&&2
},p=function(a,b){var c,e,g,h,f=0;for(a=a.filter(function(){return 3!=this.nodeType}),c=a.add("[data-view-id]",a),e=c.length;e>f;f++)c[f].getAttribute&&(g=c[f].getAttribute("data-view-id"))&&(h=b[g])&&(h(c[f],g),delete b[g],c[f].removeAttribute("data-view-id"));$.extend(d.hookups,b)},$.fn.hookup=function(){var a=d.hookups;return d.hookups={},p(this,a),this},$.each(["prepend","append","after","before","text","html","replaceWith","val"],function(a,b){j(b)})}(),function(){var myEval=function(script){eval(script)
},rSplit=$.String.rsplit,extend=$.extend,isArray=$.isArray,returnReg=/\r\n/g,retReg=/\r/g,newReg=/\n/g,nReg=/\n/,slashReg=/\\/g,quoteReg=/"/g,singleQuoteReg=/'/g,tabReg=/\t/g,leftBracket=/\{/g,rightBracket=/\}/g,quickFunc=/\s*\(([\$\w]+)\)\s*->([^\n]*)/,clean=function(a){return a.replace(slashReg,"\\\\").replace(newReg,"\\n").replace(quoteReg,'\\"').replace(tabReg,"\\t")},escapeHTML=function(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(quoteReg,"&#34;").replace(singleQuoteReg,"&#39;")
},$View=$.View,bracketNum=function(a){var b=a.match(leftBracket),c=a.match(rightBracket);return(b?b.length:0)-(c?c.length:0)},EJS=function(a){if(this.constructor!=EJS){var b=new EJS(a);return function(a,c){return b.render(a,c)}}return"function"==typeof a?(this.template={fn:a},void 0):(extend(this,EJS.options,a),this.template=compile(this.text,this.type,this.name),void 0)};$&&($.EJS=EJS),EJS.prototype.render=function(a,b){a=a||{},this._extra_helpers=b;var c=new EJS.Helpers(a,b||{});return this.template.fn.call(a,a,c)
},extend(EJS,{text:function(a){if("string"==typeof a)return a;if(null===a||void 0===a)return"";var b=a.hookup&&function(b,c){a.hookup.call(a,b,c)}||"function"==typeof a&&a||isArray(a)&&function(b,c){for(var d=0;d<a.length;d++)a[d].hookup?a[d].hookup(b,c):a[d](b,c)};return b?"data-view-id='"+$View.hookup(b)+"'":a.toString?a.toString():""},clean:function(a){return"string"==typeof a?escapeHTML(a):"number"==typeof a?a:EJS.text(a)},options:{type:"[",ext:".ejs"}});var scan=function(a,b,c){for(var d=rSplit(b,nReg),e=0;e<d.length;e++)scanline(a,d[e],c)
},scanline=function(a,b,c){a.lines++;for(var e,d=rSplit(b,a.splitter),f=0;f<d.length;f++)e=d[f],null!==e&&c(e,a)},makeScanner=function(a,b){var c={};return extend(c,{left:a+"%",right:"%"+b,dLeft:a+"%%",dRight:"%%"+b,eeLeft:a+"%==",eLeft:a+"%=",cmnt:a+"%#",cleanLeft:a+"%~",scan:scan,lines:0}),c.splitter=new RegExp("("+[c.dLeft,c.dRight,c.eeLeft,c.eLeft,c.cmnt,c.left,c.right+"\n",c.right,"\n"].join(")|(").replace(/\[/g,"\\[").replace(/\]/g,"\\]")+")"),c},compile=function(a,b){a=a.replace(returnReg,"\n").replace(retReg,"\n"),b=b||"[";
var d="___v1ew.push(",e=d,f="var ___v1ew = [];",g="return ___v1ew.join('')",h=new EJS.Buffer([f],[]),i="",j=function(a){h.push(d,'"',clean(a),'");')},k=null,l=function(){i=""},m="));",n=[];scan(makeScanner(b,"["===b?"]":">"),a||"",function(a,b){var c;if(null===k)switch(a){case"\n":i+="\n",j(i),h.cr(),l();break;case b.left:case b.eLeft:case b.eeLeft:case b.cmnt:k=a,i.length>0&&j(i),l();break;case b.dLeft:i+=b.left;break;default:i+=a}else switch(a){case b.right:switch(k){case b.left:c=bracketNum(i);var d=n.length&&-1==c?n.pop():";";
d===m&&h.push(g),h.push(i,d),1===c&&n.push(";");break;case b.eLeft:if(c=bracketNum(i),c&&n.push(m),quickFunc.test(i)){var o=i.match(quickFunc);i="function(__){var "+o[1]+"=$(__);"+o[2]+"}"}h.push(e,$.globalNamespace+".EJS.clean(",i,c?f:m);break;case b.eeLeft:c=bracketNum(i),c&&n.push(m),h.push(e,$.globalNamespace+".EJS.text(",i,c?f:m)}k=null,l();break;case b.dRight:i+=b.right;break;default:i+=a}}),i.length>0&&h.push(d,'"',clean(i)+'");');var o=h.close(),p={out:"try { with(_VIEW) { with (_CONTEXT) {"+o+" "+g+"}}}catch(e){e.lineNumber=null;throw e;}"};
return myEval.call(p,"this.fn = (function(_CONTEXT,_VIEW){ var $ = "+$.globalNamespace+";"+p.out+"});"),p};EJS.Buffer=function(a,b){this.line=[],this.script=[],this.post=b,this.push.apply(this,a)},EJS.Buffer.prototype={push:function(){this.line.push.apply(this.line,arguments)},cr:function(){this.script.push(this.line.join(""),"\n"),this.line=[]},close:function(){return this.line.length>0&&(this.script.push(this.line.join("")),this.line=[]),this.post.length&&this.push.apply(this,this.post),this.script.push(";"),this.script.join("")
}},EJS.Helpers=function(a,b){this._data=a,this._extras=b,extend(this,b)},EJS.Helpers.prototype={plugin:function(){var b=$.makeArray(arguments),c=b.shift();return function(a){var d=$(a);d[c].apply(d,b)}},view:function(a,b,c){return c=c||this._extras,b=b||this._data,$View(a,b,c)}},$View.register({suffix:"ejs",script:function(a,b){return $.globalNamespace+".EJS(function(_CONTEXT,_VIEW) { "+new EJS({text:b,name:a}).template.out+" })"},renderer:function(a,b){return EJS({text:b,name:a})}})}(),function(){var a=$.isArray,b=function(a){return"object"==typeof a&&null!==a&&a
},c=$.makeArray,d=$.each,e=function(b,c,d){return b instanceof $.Observe?f([b],d._namespace):b=a(b)?new $.Observe.List(b):new $.Observe(b),b.bind("change"+d._namespace,function(a){var f=$.makeArray(arguments),a=f.shift();f[0]="*"===c?d.indexOf(b)+"."+f[0]:c+"."+f[0],$.event.trigger(a,f,d)}),b},f=function(a,b){for(var c,d=0;d<a.length;d++)c=a[d],c&&c.unbind&&c.unbind("change"+b)},g=0,h=null,i=function(){return h?void 0:(h=[],!0)},j=function(a,b,c){return a._init?void 0:h?(h.push({t:a,ev:b,args:c}),void 0):$.event.trigger(b,c,a,!0)
},k=0,l=function(){var c,a=h.length,b=h.slice(0);h=null,k++;for(var d=0;a>d;d++)c=b[d],$.event.trigger({type:c.ev,batchNum:k},c.args,c.t)},m=function(a,c,d){return a.each(function(a,e){d[a]=b(e)&&"function"==typeof e[c]?e[c]():e}),d};$.Class($.globalNamespace+".Observe",{init:function(a){this._data={},this._namespace=".observe"+ ++g,this._init=!0,this.attrs(a),delete this._init},attr:function(a,b){return void 0===b?this._get(a):(this._set(a,b),this)},each:function(){return d.apply(null,[this.__get()].concat(c(arguments)))
},removeAttr:function(b){var c=a(b)?b:b.split("."),d=c.shift(),e=this._data[d];return c.length?e.removeAttr(c):(delete this._data[d],j(this,"change",[d,"remove",void 0,e]),e)},_get:function(b){var c=a(b)?b:(""+b).split("."),d=this.__get(c.shift());return c.length?d?d._get(c):void 0:d},__get:function(a){return a?this._data[a]:this._data},_set:function(c,d){var g=a(c)?c:(""+c).split("."),h=g.shift(),i=this.__get(h);if(b(i)&&g.length)i._set(g,d);else{if(g.length)throw"jQuery.Observe: set a property on an object that does not exist";
if(d!==i){var k=this.__get().hasOwnProperty(h)?"set":"add";this.__set(h,b(d)?e(d,h,this):d),j(this,"change",[h,k,d,i]),i&&f([i],this._namespace)}}},__set:function(a,b){this._data[a]=b,a in this.constructor.prototype||(this[a]=b)},bind:function(){return $.fn.bind.apply($([this]),arguments),this},unbind:function(){return $.fn.unbind.apply($([this]),arguments),this},serialize:function(){return m(this,"serialize",{})},attrs:function(a,c){if(void 0===a)return m(this,"attrs",{});a=$.extend(!0,{},a);var d,e=i();for(d in this._data){var f=this._data[d],g=a[d];
void 0!==g?(b(f)&&b(g)?f.attrs(g,c):f!=g&&this._set(d,g),delete a[d]):c&&this.removeAttr(d)}for(var d in a)g=a[d],this._set(d,g);e&&l()}});var n=$.Observe($.globalNamespace+".Observe.List",{init:function(a,b){this.length=0,this._namespace=".list"+ ++g,this._init=!0,this.bind("change",this.proxy("_changes")),this.push.apply(this,c(a||[])),$.extend(this,b),this.comparator&&this.sort(),delete this._init},_changes:function(a,b,c,d,e){if(this.comparator&&/^\d+./.test(b)){var f=+/^\d+/.exec(b)[0],g=this[f],h=this.sortedIndex(g);
if(h!==f)return[].splice.call(this,f,1),[].splice.call(this,h,0,g),j(this,"move",[g,h,f]),a.stopImmediatePropagation(),j(this,"change",[b.replace(/^\d+/,h),c,d,e]),void 0}-1===b.indexOf(".")&&("add"===c?j(this,c,[d,+b]):"remove"===c&&j(this,c,[e,+b]))},sortedIndex:function(a){for(var d,b=a.attr(this.comparator),c=0,d=0;d<this.length;d++)if(a!==this[d]){if(b<=this[d].attr(this.comparator))return d+c}else c=-1;return d+c},__get:function(a){return a?this[a]:this},__set:function(a,b){this[a]=b},serialize:function(){return m(this,"serialize",[])
},splice:function(a,d){var h,g=c(arguments);for(h=2;h<g.length;h++){var i=g[h];b(i)&&(g[h]=e(i,"*",this))}void 0===d&&(d=g[1]=this.length-a);var k=[].splice.apply(this,g);return d>0&&(j(this,"change",[""+a,"remove",void 0,k]),f(k,this._namespace)),g.length>2&&j(this,"change",[""+a,"add",g.slice(2),k]),k},attrs:function(a,c){if(void 0===a)return m(this,"attrs",[]);a=a.slice(0);for(var d=Math.min(a.length,this.length),e=i(),f=0;d>f;f++){var g=this[f],h=a[f];b(g)&&b(h)?g.attrs(h,c):g!=h&&this._set(f,h)}a.length>this.length?this.push(a.slice(this.length)):a.length<this.length&&c&&this.splice(a.length),e&&l()
},sort:function(a,b){{var c=this.comparator,d=c?[function(a,b){return a=a[c],b=b[c],a===b?0:b>a?-1:1}]:[];[].sort.apply(this,d)}!b&&j(this,"reset")}}),o=function(a){return a[0]&&$.isArray(a[0])?a[0]:c(a)};d({push:"length",unshift:0},function(a,c){n.prototype[a]=function(){for(var d=o(arguments),f=c?this.length:0,g=0;g<d.length;g++){var h=d[g];b(h)&&(d[g]=e(h,"*",this))}if(1==d.length&&this.comparator){var i=this.sortedIndex(d[0]);return this.splice(i,0,d[0]),this.length}var k=[][a].apply(this,d);return this.comparator&&d.length>1?(this.sort(null,!0),j(this,"reset",[d])):j(this,"change",[""+f,"add",d,void 0]),k
}}),d({pop:"length",shift:0},function(a,b){n.prototype[a]=function(){var c=o(arguments),d=b&&this.length?this.length-1:0,e=[][a].apply(this,c);return j(this,"change",[""+d,"remove",void 0,[e]]),e&&e.unbind&&e.unbind("change"+this._namespace),e}}),n.prototype.indexOf=[].indexOf||function(a){return $.inArray(a,this)},$.O=function(b,c){return a(b)||b instanceof $.Observe.List?new $.Observe.List(b,c):new $.Observe(b,c)}}()}),FD40.plugin("joomla",function(a){var b={squeezebox:function(){return window.parent.SqueezeBox
}},c=a.Joomla=function(d,e){if(a.isFunction(e)){var f=e;return c.isJoomla15?window[d]=f:window.Joomla[d]=f,void 0}var d=b[d]||(c.isJoomla15?window[d]:window.Joomla[d]);return a.isFunction(d)?d.apply(window,e):void 0}}),FD40.plugin("module",function(a){var b=function(b){var c=this,d=a.Callbacks("once memory");a.extend(this,a.Deferred(),{name:b,status:"pending",ready:function(b){b===!0&&d.fire.call(c,a),a.isFunction(b)&&d.add(b)}}),c.then(function(){c.exports=this,c.status="resolved"},function(){c.status="rejected"
});var e=c.done;c.done=function(){c.required=!0;var b=c.factory;return b&&"ready"===c.status&&b.call(c,a),c.done=e,c.done.apply(this,arguments)}};a.module=function(){var c=function(b,d){var e;if("string"==typeof b){if(e=c.get(b),void 0===d)return e;if(a.isFunction(d))return"resolved"==e.status?e:(e.factory=d,e.status="ready",e.ready("true"),e.required&&(e.status="executing",d.call(e,a)),e)}if(a.isArray(b)){var f=a.map(b,function(b){var d=c.get(a.isString(b)?b:b.name);if(d)return"pending"===d.status&&(d.status="ready"),a.isPlainObject(b)?b:void 0
});a.each(f,function(a,b){c(b.name,b.factory)})}};return a.extend(c,{registry:{},get:function(b){return b?(a.isModule(b)&&(b=b.replace("module://","")),c.registry[b]||c.create(b)):void 0},create:function(a){return c.registry[a]=new b(a)},remove:function(a){delete c.registry[a]}}),c}(),a.isModule=function(c){return a.isString(c)?!!c.match("module://"):c&&c instanceof b}}),FD40.plugin("script",function(a){a.Script=function(b){var c=document.createElement("script");return c.text=a.isString(b)?b:a.callback(b)+"();",a(c)
},a.script=function(){{var b=function(a){if(void 0!==a){"string"==typeof a&&(a={url:a});var b=new c(a);return b}},c=function(b){var c=a.extend(this,b);c.manager=a.Deferred(),a.extend(c,c.manager.promise()),c.load()},d=document.getElementsByTagName("head")[0];document.getElementsByTagName("base")[0]}return a.extend(c.prototype,{timeout:7e3,retry:3,retryCount:1,type:"text/javascript",async:!1,charset:"UTF-8",verbose:!1,head:d,insert:function(){var a=this.node;this.head.appendChild(a)},remove:function(){var a=this.node;
setTimeout(function(){a.onload=a.onerror=a.onreadystatechange=null;try{d.removeChild(a)}catch(b){}},1e3)},load:function(){var c,b=this;b.endTime=void 0,b.startTime=new Date,b.node=c=document.createElement("script"),b.insert(),b._ready=a.proxy(b.ready,b),b._error=a.proxy(b.error,b),c.attachEvent&&!a.browser.opera?(c.attachEvent("onreadystatechange",b._ready),c.attachEvent("onerror",b._error)):(c.addEventListener("load",b._ready,!1),c.addEventListener("error",b._error,!1)),a(c).attr({type:b.type,async:b.async,charset:b.charset,src:b.url}),b.monitor()
},monitor:function(){var a=this;return a.retryCount>a.retry?(a._error(),void 0):(setTimeout(function(){"resolved"!==a.state()&&(a.verbose&&console.warn("$.script: Load timeout. [Retry: "+a.retryCount+"]",a),a.remove(),a.retryCount++,a.load())},a.timeout*a.retryCount),void 0)},ready:function(a){var b=this,c=b.node;("load"===a.type||/loaded|complete/.test(c.readyState))&&(b.complete.call(b,a),b.manager.resolve(b))},error:function(a){var b=this;b.verbose&&console.error("$.script: Unable to load ",b),b.complete.call(b,a),b.remove(),b.manager.reject(b)
},complete:function(){var c=this,d=c.node;c.endTime=new Date,d.detachEvent&&!a.browser.opera?(d.detachEvent("onreadystatechange",c._ready),d.detachEvent("onerror",c._error)):(d.removeEventListener("load",c._ready,!1),d.removeEventListener("error",c._error,!1))}}),b}()}),FD40.plugin("stylesheet",function(a){var b=document.getElementsByTagName("head")[0],c=document.styleSheets,d=document.createStyleSheet,e=31,f=31,g=4095;a.stylesheet=function(){var h=function(b,c){var d={};return a.extend(d,h.defaultOptions,a.isPlainObject(b)?b:{url:b,attr:c||{}}),void 0===d.url?h.create(d):h.load(d)
};return a.extend(h,{defaultOptions:{type:"text/css",rel:"stylesheet",media:"all",title:"",forceInject:!1,xhr:!1},setup:function(b){a.extend(h.defaultOptions,b)},availability:function(){var b={},c=a('link[rel*="stylesheet"]');return styles=a("style"),b.groups=e-c.length-styles.length,b.slots=b.groups*f,h.currentGroup&&(b.slots+=f-h.currentGroup.imports.length),b},get:function(a){for(var b=0;b<c.length;b++){var d=c[b];if((d.ownerNode||d.owningElement)==a)return d}},create:function(f){var g,h,i=c.length;if(d){if(i>=e)return;
g=document.createStyleSheet(),h=g.ownerNode||g.owningElement}else h=document.createElement("style"),b.appendChild(h);a.extend(h,{type:f.type,title:f.title,media:f.media,rel:f.rel});var j=f.content;return void 0!==j&&(d?g.cssText=j:h.appendChild(document.createTextNode(j))),h},nextAvailable:function(a){var b,e=c.length;if(e){var f;for(f=e;f--;0>f){b=c[f];{if(!(d&&(b.cssRules||b.rules).length>=g))break;b=void 0}}}return b.ownerNode||b.owningElement||(a?h():void 0)},load:function(b){if(a.browser.msie&&!b.forceInject)return h._import(b);
var c=a("<link>").attr({href:b.url,type:b.type,rel:b.rel,media:b.media}).appendTo("head");return c[0]},_import:function(a){var b;if(void 0===h.currentGroup){var c;try{c=document.createStyleSheet(),c.media="all",c.title="jquery_stylesheet"}catch(d){b=!0,a.verbose&&console.error("There is not enough slots left to create a new stylesheet group.")}if(b)return!1;h.currentGroup=c}try{h.currentGroup.addImport(a.url)}catch(d){b=!0,a.verbose&&console.info("Import slots exceeded. Creating a new stylesheet group.")}return b?(h.currentGroup=void 0,h._import(a)):!0
}}),h}(),function(){var b=function(b,c,d){a.extend(this,{id:a.uid(),style:d,selectors:[],preRule:"",rules:{},legacy:8===a.IE,important:!1}),b&&this.set(b,c)};a.extend(b.prototype,{set:function(b,c){return this.selectors=a.isString(b)?b.split(","):b,a.isString(c)?(this.preRule=c+"\n",this.rules={}):(this.preRule="",this.rules=c||this.rules),this.update(),this},cssText:function(){return this.selectors.join(",")+"{"+this.ruleText()+"}\n"},ruleText:function(){var b=this.important;return this.preRule+(this.legacy?"-rule-id:"+this.id+";":"")+a.map(this.rules,function(c,d){return a.isNumeric(c)&&!a.cssNumber[d]&&(c+="px"),b&&(c+=" !important"),d+":"+c
}).join(";")},update:function(){if(this.legacy)return this.updateLegacy();var a=this.cssText();return void 0===this.textNode?(this.textNode=document.createTextNode(a),this.style.appendChild(this.textNode)):this.textNode.nodeValue=a,this},updateLegacy:function(){this.removeLegacy();for(var b=a.stylesheet.get(this.style),c=this.selectors,d=this.ruleText(),e=0;e<c.length;e++)b.addRule(c[e],d);return this},remove:function(){return this.legacy?this.removeLegacy():(void 0!==this.textNode&&(this.style.removeChild(this.textNode),delete this.textNode),this)
},removeLegacy:function(){for(var b=a.stylesheet.get(this.style),c=b.rules,d=0;d<c.length;d++)null!==c[d].cssText.match(this.id)&&b.removeRule(d);return this},css:function(b,c){return a.isString(b)&&void 0===c?this.rules[b]:(a.isPlainObject(b)?a.extend(this.rules,b):this.rules[b]=c,this.update(),this)}});var c=a.cssRule=function(d,e,f){var f=f||c.style||a.stylesheet.nextAvailable(!0);if(f)return new b(d,e,f)};c.style=a.stylesheet()}(),function(){a.cssUrl=function(a){return'url("'+encodeURI(a)+'")'}}()}),FD40.plugin("template",function(a){a.template=function(){var b={content:"",type:"ejs"},c=function(d,e){if(void 0===d)return c.templates;
var f;return"string"==typeof e?(f=a.isPlainObject(e)?e:a.extend({},b,{name:d,content:e}),c.templates[d]=f,f):(f=c.templates[d]||{},f.content||"")};return a.extend(c,{templates:{},remove:function(a){delete c.templates[a]}}),c}()}),FD40.plugin("require",function(a){a.require=function(){var b=function(b){return a.uri(b).setAnchor("").setQuery("").toPath("../").toString()},c=function(a){var b=new e(a);return c.batches[b.id]=b,b};a.extend(c,{defaultOptions:{path:function(){var c=a.path||a("[require-path]").attr("require-path")||b(a("script:last").attr("src"))||b(window.location.href);
return/^(\/|\.)/.test(c)&&(c=a.uri(window.location.href).toPath(c).toString()),c}(),timeout:1e4,retry:3,verbose:"development"==a.environment},setup:function(b){a.extend(c.defaultOptions,b)},batches:{},status:function(b){return a.each(c.batches,function(c,d){var e={pending:0,resolved:0,rejected:0,ready:0,total:0},f=[];a.each(d.tasks,function(a,b){state=b.module&&"ready"==b.module.status?"ready":b.state(),e[state]++,e.total++,f.push({state:state,content:"["+state+"] "+b.name})});var g=d.id+": "+d.state()+" ["+e.resolved+"/"+e.total+"]";
b&&e[b]<1||(a.IE?(console.log('$.require.batches["'+d.id+'"]'),a.each(f,function(a,b){console.log(b.content)}),console.log("")):(console.groupCollapsed(g),console.log('$.require.batches["'+d.id+'"]',d),a.each(f,function(a,c){var d=c.state,e=c.content;if(!b||d==b)switch(d){case"pending":console.warn(e);break;case"rejected":console.error(e);break;default:console.info(e)}}),console.groupEnd(g)))}),"$.require.status(pending|resolved|rejected|ready);"},loaders:{},addLoader:function(a,b){c[a]=b,e.prototype[a]=function(){var a=this;
return a.autoFinalize(),b.apply(a,arguments),a},c.loaders[a]=c[a]=b},removeLoader:function(a){delete e.prototype[a],delete c[a]}});var d=0,e=function(b){var e=a.Callbacks("once memory"),f=!1,g=a.extend(this,{id:++d,tasks:[],options:a.extend({},c.defaultOptions,b),autoFinalizeDuration:300,finalized:!1,required:function(b){return b===!0&&(f=!0&&e.fire()),a.isFunction(b)&&e.add(b),f}});return g};return a.extend(e.prototype,{addTask:function(b){var c=this;a.isDeferred(b)&&(c.finalized||(c.tasks.push(b),b.batch=c))
},autoFinalize:function(){var a=this,b=a.autoFinalizeDuration;b!==!1&&(clearTimeout(a.autoFinalizeTimer),a.autoFinalizeTimer=setTimeout(function(){a.finalize()},b))},finalize:function(){var b=this;if(!b.finalized){b.finalized=!0;var c=b.manager=a.when.apply(null,b.tasks),d=c.promise(),e=a.Callbacks();a.extend(b,d,{progress:e.add,notify:e.fire,done:function(){return b.required(!0),b.done=d.done,b.done.apply(b,arguments)}});var f=b.options.verbose;c.progress(function(a,b){f&&"rejected"==a&&console.warn("Require: Task "+b.name+" failed to load.",b)
}).fail(function(){f&&console.warn("Require: Batch "+b.id+" failed.",b)}),setTimeout(function(){a.each(b.tasks,function(a,c){c.then(function(){b.notify("resolved",c)},function(){b.notify("rejected",c)},function(){b.notify("progress",c)})})},1)}},expand:function(b,c){var b=a.makeArray(b),d=c||{},e=[];return a.isPlainObject(b[0])?(d=a.extend(b[0],c),e=b.slice(1)):e=b,{options:d,names:e}}}),a.each(["done","fail","progress","always","then"],function(a,b){e.prototype[b]=function(){var a=this;return a.finalize(),a[b].apply(a,arguments)
}}),c}(),a.require.addLoader("script",function(){var b=a.uri(a.indexUrl).host(),c=a.uri(document.location.href).host();b!==c&&b.match("xn--")&&(a.support.cors=!0);var e=(document.createElement("script").async===!0||"MozAppearance"in document.documentElement.style||window.opera,function(){var d,f,b=this,c=a.makeArray(arguments);a.isPlainObject(c[0])?(d=c[0],f=c.slice(1)):f=c,d=a.extend({},e.defaultOptions,b.options,d,{batch:b});var g;a.each(f,function(a,c){var f=new e.task(c,d,g);b.addTask(f),d.serial&&void 0!==g?g.always(f.start):f.start(),g=f
})});return a.extend(e,{defaultOptions:{path:"",extension:"compressed"==a.mode?"min.js":"js",serial:!1,async:!1,xhr:!1},setup:function(){a.extend(e.defaultOptions,options)},scripts:{},task:function(b,c,d){var e=a.extend(this,a.Deferred());if(e.name=b,e.options=c,e.taskBefore=d,a.isArray(b)){e.name=b[0]+"@"+b[1],e.moduleName=b[0];var f=b[2];f||(e.defineModule=!0,a.module.registry[e.moduleName]&&console.warn("$.require.script: "+e.moduleName+" exists! Using existing module instead."),e.options.xhr=!0),b=b[1],e.module=a.module(e.moduleName)
}a.isUrl(b)?e.url=b:/^(\/|\.)/.test(b)?e.url=a.uri(e.options.path).toPath(b).toString():(e.url=a.uri(e.options.path).toPath("./"+b+"."+e.options.extension).toString(),e.module=a.module(b))}}),a.extend(e.task.prototype,{start:function(){var a=this,b=a.module;return b&&"pending"!==b.status?(a.waitForModule(),void 0):(a.load(),void 0)},waitForModule:function(){var a=this,b=a.module;b.then(a.resolve,a.reject,a.notify),a.batch.required(function(){b.done(a.resolve)})},load:function(){var b=this,c=b.taskBefore;b.script=e.scripts[b.url]||function(){var c=b.options.xhr?a.ajax({url:b.url,dataType:"text"}):a.script({url:b.url,type:"text/javascript",async:b.options.async,timeout:b.batch.options.timeout,retry:b.batch.options.retry,verbose:b.batch.options.verbose});
return e.scripts[b.url]=c}(),b.script.done(function(d){var e=function(){b.module?b.waitForModule():b.resolve()};return b.options.xhr&&(b.defineModule&&(b.module=a.module(b.moduleName,function(){var b=this;a.globalEval(d),b.resolveWith(d)})),!b.options.async||c)?(c.done(function(){a.globalEval(d),e()}),void 0):(e(),void 0)}).fail(function(){b.reject()})}}),e}()),a.require.addLoader("library",function(){var e,b=this,c=a.makeArray(arguments),d={};return a.isPlainObject(c[0])?(d=c[0],e=c.slice(1)):e=c,a.extend(d,{path:a.scriptPath}),b.script.apply(b,[d].concat(e))
}),a.require.addLoader("image",function(){var b=function(){var e,f,c=this,d=a.makeArray(arguments);a.isPlainObject(d[0])?(e=d[0],f=d.slice(1)):f=d,e=a.extend({},b.defaultOptions,c.options,e,{batch:c}),a.each(f,function(a,d){var f=new b.task(d,e),g=b.images[f.url];f=g||f,c.addTask(f),g||(b.images[f.url]=f,f.start())})};return a.extend(b,{defaultOptions:{path:""},setup:function(){a.extend(b.defaultOptions,options)},images:{},task:function(b,c){var d=a.extend(this,a.Deferred());d.name=b,d.options=c,d.url=a.isUrl(b)?b:/^(\/|\.)/.test(b)?a.uri(d.options.path).toPath(b).toString():a.uri(d.options.path).toPath("./"+b).toString(),d.options.url=d.url
}}),a.extend(b.task.prototype,{start:function(){var b=this;b.image=a(new Image).load(function(){b.resolve()}).error(function(){b.reject()}).attr("src",b.options.url)}}),b}())}),FD40.plugin("iframe-transport",function(a){a.ajaxPrefilter(function(a){return a.iframe?"iframe":void 0}),a.ajaxTransport("iframe",function(b){function k(){i&&j.replaceWith(function(a){return h.get(a)}),e.remove(),f.attr("src","javascript:false;").remove()}var e=null,f=null,g="iframe-"+a.now(),h=a(b.files).filter(":file:enabled"),i=h.length>0,j=null;
return b.dataTypes.shift(),e=a("<form enctype='multipart/form-data' method='post'></form>").hide().attr({action:b.url,target:g}),"string"==typeof b.data&&b.data.length>0&&a.error("data must not be serialized"),a.each(b.data||{},function(b,c){a.isPlainObject(c)&&(b=c.name,c=c.value),a.isArray(c)||(c=[c]),a.each(c,function(c,d){a("<input type='hidden' />").attr({name:b,value:d}).appendTo(e)})}),a("<input type='hidden' value='IFrame' name='X-Requested-With' />").appendTo(e),i&&(j=h.after(function(){return a(this).clone().prop("disabled",!0)
}).next(),h.appendTo(e)),{send:function(b,c){f=a("<iframe src='about:blank' name='"+g+"' id='"+g+"' style='display:none'></iframe>"),f.bind("load",function(){f.unbind("load").bind("load",function(){var a=this.contentWindow?this.contentWindow.document:this.contentDocument?this.contentDocument:this.document,b=a.documentElement?a.documentElement:a.body,d=b.getElementsByTagName("textarea")[0],e=d?d.getAttribute("data-type"):null,f=d?d.getAttribute("data-status"):200,g=d?d.getAttribute("data-statusText"):"OK",h={html:b.innerHTML,text:e?d.value:b?b.textContent||b.innerText:null};
k(),c(f,g,h,e?"Content-Type: "+e:null)}),e[0].submit()}),a("body").append(e,f)},abort:function(){null!==f&&(f.unbind("load").attr("src","javascript:false;"),k())}}})}),FD40.plugin("server",function($){var self=$.server=function(a){var b=$.Deferred(),c=$.extend(!0,{},self.defaultOptions,a,{success:function(){}}),d=b.xhr=$.Ajax(c).done(function(c){if("string"==typeof c)try{c=$.parseJSON(c)}catch(d){b.rejectWith(b,["Unable to parse Ajax commands.","error"])}if($.isArray(c)){var e=function(c){var d=c.type,e=self.parsers[d]||a[d];
return $.isFunction(e)?e.apply(b,c.data):void 0},c=$.map(c,function(a){return"notify"!=a.type?a:(e(a),void 0)});$.each(c,function(a,b){e(b)})}else b.rejectWith(b,["Invalid ajax commands.","error"]);"pending"===b.state()&&b.resolveWith(b)}).fail(function(a,c,d){b.rejectWith(b,[d,c])});return b.abort=d.abort,b};self.defaultOptions={type:"POST",data:{tmpl:"component",format:"ajax",no_html:1},cache:!1,contentType:"application/x-www-form-urlencoded",dataType:"json"},self.parsers={script:function(){var data=$.makeArray(arguments);
if("string"!=typeof data[0]){var chain=window,chainBroken=!1;$.each(data,function(a,b){"Foundry"===b.property&&(b.property=$.globalNamespace),"Foundry"===b.method&&(b.method=$.globalNamespace);try{switch(b.type){case"get":chain=chain[b.property];break;case"set":chain[b.property]=b.value,chainBroken=!0;break;case"call":chain=chain[b.method].apply(chain,b.args)}}catch(c){chainBroken=!0}})}else try{eval(data[0])}catch(err){}},resolve:function(){this.resolveWith(this,arguments)},reject:function(){this.rejectWith(this,arguments)
},notify:function(){this.notifyWith(this,arguments)},redirect:function(a){window.location=a}}}),FD40.plugin("component",function(a){var b=a.Component=function(a,c){return arguments.length<1?b.registry:arguments.length<2?b.registry[a]:b.register(a,c)};b.registry={},b.proxy=function(b,c,d){b[c]=a.isFunction(d)?a.proxy(d,b):d},b.register=function(c,d){var e;a.isFunction(c)&&(e=c,c=e.className,d=e.options);var f=b.registry[c]=window[c]=function(b){return a.isFunction(b)?b(a):component};if(a.each(b.prototype,function(a,c){b.proxy(f,a,c)
}),f.$=a,f.options=d,f.className=c,f.identifier="easysocial",f.componentName="com_easysocial",f.prefix=f.identifier+"/",f.version=d.version,f.safeVersion=f.version.replace(/\./g,""),f.environment=d.environment||a.environment,f.mode=d.mode||a.mode,f.debug="development"===f.environment,f.console=b.console(f),f.language=d.language||a.locale.lang||"en",f.baseUrl=d.baseUrl||a.indexUrl+"?option="+f.componentName,f.ajaxUrl=d.ajaxUrl||a.basePath+"/?option="+f.componentName,f.scriptPath=d.scriptPath||a.rootPath+"/media/"+f.componentName+"/scripts/",f.stylePath=d.stylePath||a.rootPath+"/media/"+f.componentName+"/styles/",f.templatePath=d.templatePath||d.scriptPath,f.languagePath=d.languagePath||f.ajaxUrl+"&tmpl=component&no_html=1&controller=lang&task=getLanguage",f.viewPath=d.viewPath||f.ajaxUrl+"&tmpl=component&no_html=1&controller=themes&task=getAjaxTemplate",f.optimizeResources=!0,f.resourcePath=d.resourcePath||f.ajaxUrl+"&tmpl=component&no_html=1&controller=foundry&task=getResource",f.resourceInterval=1200,f.scriptVersioning=d.scriptVersioning||!1,f.tasks=[],FD40.component(c,f),e){if(f.debug)e.queue.execute();
else{for(var g,h=FD40.installer(c);g=h.shift();)f.install.apply(f,g);a.when(f.install("definitions"),f.install("scripts"),f.install("resources")).done(function(){e.queue.execute()})}var i=f.storage=function(b,c){var d=f.prefix,b=d+b,e=arguments.length;return 1==e?a.Storage.get(b):2==e?b===!1?a.Storage.remove(d+c):a.Storage.set(b,c):i.getAll()};a.extend(f.storage,{getAll:function(){var b=f.prefix,c=b.length,d=a.Storage.getAll(),e={};for(key in d)key.substr(0,c)==b&&(e[key.substr(c)]=d[key]);return e},remove:function(b){a.Storage.remove(f.prefix+b)
},clear:function(){for(key in i.getAll())i.remove(key)}})}},b.extend=function(c,d){b.prototype[c]=d,a.each(b.registry,function(a,e){b.proxy(e,c,d)})},a.template("component/console",'<div id="[%== component.identifier %]-console" class="foundry-console" style="display: none; z-index: 999999;"><div class="console-header"><div class="console-title">[%= component.className %] [%= component.version %]</div><div class="console-remove-button">x</div></div><div class="console-log-item-group"></div><style type="text/css">.foundry-console{position:fixed;width:50%;height:50%;bottom:0;left:0;background:white;box-shadow: 0 0 5px 0;margin-left: 25px;}.console-log-item-group{width: 100%;height: 100%;overflow-y:scroll;}.console-header{position: absolute;background:red;color:white;font-weight:bold;top:-24px;left: 0;line-height:24px;width:100%}.console-remove-button{text-align:center;cursor: pointer;display:block;width: 24px;float:right}.console-remove-button:hover{color: yellow}.console-title{padding: 0 5px;float:left}.console-log-item{padding: 5px}.console-log-item + .console-log-item{border-top: 1px solid #ccc}</style></div>'),b.console=function(b){return function(b){var d,c=function(a){return arguments.length<1?c.toggle():c[a]&&c[a].apply(c,arguments)
};return c.selector="#"+b.identifier+"-console",c.init=function(){return d=a(c.selector),d.length<1&&(d=a(a.View("component/console",{component:b})).appendTo("body"),d.find(".console-remove-button").click(function(){d.hide()})),c.element=d,arguments.callee},c.methods={log:function(c,e,f){e=e||"info";var g=d.find(".console-log-item-group"),h=a(document.createElement("div")).addClass("console-log-item type-"+e).attr("data-code",f).html(c);g.append(h),g[0].scrollTop=g[0].scrollHeight,b.debug&&d.show()},toggle:function(){d.toggle()
},reset:function(){d.find(".console-log-item-group").empty()}},a.each(c.methods,function(a,b){c[a]=function(){return c.init(),b.apply(c,arguments)}}),c}(b)};var c=a(document),d=b.prototype;a.extend(d,{run:function(b){return a.isFunction(b)?b(a):this},ready:function(){return c.ready(function(){d.ready=d.run}),function(b){a.isFunction(b)&&c.ready(function(){b(a)})}}(),install:function(b,c){var d=this,e=d.tasks[b]||(d.tasks[b]=a.Deferred());if(!c)return e;var f=function(){return c(a,d),e.resolve()};return"definitions"==b?f():(a.when(d.install("definitions")).done(f),void 0)
},token:function(){var a=this;return a.token.value?a.token.value:a.token.value=window.es.token},template:function(b){var c=this;return void 0==b?a.grep(a.template(),function(a){return 0==a.indexOf(c.prefix)}):(arguments[0]=c.prefix+b,a.template.apply(null,arguments))},require:function(b){var c=this,b=b||{},d=a.require(b),e={};return a.each(["library","script","template","done"],function(a,b){e[b]=d[b]}),d.resource=function(b){if(a.isPlainObject(b)&&b.type&&b.name&&a.isDeferred(b.loader)){var f=c.resourceCollector;
f||(f=c.resourceCollector=a.Deferred(),a.extend(f,{name:a.uid("ResourceCollector"),manifest:[],loaderList:[],loaders:[],load:function(){if(delete c.resourceCollector,f.manifest.length<0)return f.resolve(),void 0;var b=0,d=function(){b++,a.Ajax({type:"POST",url:c.resourcePath,dataType:"json",data:{resource:f.manifest}}).done(function(d){return a.isArray(d)?(a.each(d,function(a,b){var c=b.content;f.loaders[b.id][void 0!==c?"resolve":"reject"](c)}),b>1&&c.debug&&console.info("Attempt to try and get resources again was successful!"),void 0):(f.reject("Server did not return a valid resource manifest."),void 0)
}).fail(function(){return b>2?(c.debug&&console.error("Unable to get resource again. Giving up!"),void 0):(c.debug&&console.warn("Unable to get resource. Trying again..."),d(),void 0)})};d(),a.when.apply(null,f.loaderList).done(f.resolve).fail(f.reject)}}),setTimeout(f.load,c.resourceCollectionInterval));var g=b.id=a.uid("Resource");return f.loaders[g]=b.loader,f.loaderList.push(b.loader),delete b.loader,f.manifest.push(b),d}},d.view=function(){var b=this,e=b.expand(arguments,{path:c.viewPath}),f={},g=e.options,h=a.map(e.names,function(e){var g=c.prefix+e,h=a.require.template.loaders[g];
if(!h)return h=a.require.template.loader(g),h.name=g,b.addTask(h),c.optimizeResources?(d.resource({type:"view",name:e,loader:h}),void 0):(f[e]=h,e)});return h.length>0&&a.Ajax({url:g.path,dataType:"json",data:{names:h}}).done(function(b){a.isArray(b)&&a.each(b,function(a,b){var c=b.content;f[b.name][void 0!==c?"resolve":"reject"](c)})}),d},d.library=function(){return e.script.apply(this,arguments),d},d.script=function(){var b=this,f=b.expand(arguments,{path:c.scriptPath}),g=a.map(f.names,function(b){if(a.isArray(b)||a.isUrl(b)||/^(\/|\.)/.test(b))return b;
var d=c.prefix+b,e=a.uri(f.options.path).toPath("./"+b+"."+(f.options.extension||"js")+(c.scriptVersioning?"?version="+c.safeVersion:"")).toString();return[[d,e,!0]]});return e.script.apply(d,[f.options].concat(g)),d},d.template=function(){var b=this,f=b.expand(arguments,{path:c.templatePath});return e.template.apply(d,[f.options].concat(a.map(f.names,function(a){return[[c.prefix+a,a]]}))),d},d.app=function(){var b=this,f=b.expand(arguments,{path:c.scriptPath});return names=a.map(f.names,function(b){if(a.isArray(b)||a.isUrl(b)||/^(\/|\.)/.test(b))return b;
var d=b.split("/"),e=a.rootPath+"/media/"+c.componentName+"/apps";4===d.length&&(e+="/"+d.shift()),e+="/"+d[0]+"/"+d[1]+"/scripts/"+d[2];var g=c.prefix+b,h=e+"."+(f.options.extension||"js")+(c.scriptVersioning?"?version="+c.safeVersion:"");return[[g,h,!0]]}),e.script.apply(d,[f.options].concat(names)),d},d.done=function(a){return e.done.call(d,function(){c.ready(a)})},d},module:function(b,c){var d=this;if(!a.isArray(b)){var e=d.prefix+b;return c?a.module.apply(null,[e,function(){var b=this;c.call(b,a)}]):a.module(e)
}}}),a.Component.extend("ajax",function(b,c,d){var e=this,f=new Date,g={url:e.ajaxUrl+"&_ts="+f.getTime(),data:a.extend(c,{option:e.componentName,namespace:b})};if(g=a.extend(!0,g,e.options.ajax),g.data[e.token()]=1,g.data.hasOwnProperty("args")&&(g.data.args=a.toJSON(g.data.args)),a.isPlainObject(d)){if(d.type){switch(d.type){case"jsonp":d.dataType="jsonp",d.crossDomain=!0,g.data.transport="jsonp";break;case"iframe":d.iframe=!0,d.processData=!1,d.files=g.data.files,delete g.data.files,g.data.transport="iframe"
}delete d.type}a.extend(g,d)}a.isFunction(d)&&(g.success=d);var h=a.server(g);return h.progress(function(a,b,c){e.debug&&"debug"==b&&e.console.log(a,b,c)}),h}),a.Component.extend("Controller",function(){var e,f,b=this,c=a.makeArray(arguments),d=c[0];return 1==c.length?a.String.getObject(d):(c.length>2?(e=c[1],f=c[2]):(e={},f=c[1]),a.extend(e,{root:b.className+".Controller",component:b}),a.Controller.apply(this,[d,e,f]))}),a.Component.extend("Model",function(){var e,f,b=this,c=a.makeArray(arguments),d=b.className+".Model."+c[0];
return 1==c.length?a.String.getObject(c[0]):(2==c.length&&(e={},f=c[1]),c.length>2&&(e=c[1],f=c[2]),a.extend(e,{component:b}),a.Model.apply(this,[d,e,f]))}),a.Component.extend("Model.List",function(){var e,f,b=this,c=a.makeArray(arguments),d=b.className+".Model.List."+c[0];return 1==c.length?a.String.getObject(c[0]):(2==c.length&&(e={},f=c[1]),c.length>2&&(e=c[1],f=c[2]),a.extend(e,{component:b}),a.Model.List.apply(this,[d,e,f]))}),a.Component.extend("View",function(){var c=this;return arguments.length<1?c.template():(arguments[0]=c.prefix+arguments[0],a.View.apply(this,arguments))
}),FD40.module.execute(),a.each(FD40.component(),function(b,c){c.registered||a.Component.register(c)})}),FD40.plugin("static",function($){$.module(["autosize.input","datetimepicker","dialog","expanding","gmaps","history","image","leaflet-providers","leaflet","markitup","mentions","mobile-events","moment","passwordstrength","placeholder","plupload","popbox","scrollTo","select2","sly","textboxlist","toast","ui/core","ui/mouse","ui/position","ui/resizable","ui/slider","ui/widget","wavesurfer"]),function(){var a=function(a){var b=this,d=function(){var b=function(c,d){var e=this;
e.input=a(c),e.options=a.extend(b.defaultOptions,d),e.mirror=a('<span style="position:absolute; top:-999px; left:0; white-space:pre;"/>'),a.each(["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent"],function(a,b){e.mirror[0].style[b]=e.input.css(b)}),a("body").append(e.mirror),e.input.bind("keydown keyup input",function(){e.update()}),e.update()};b.defaultOptions={space:30},b.validTypes=["text","password","search","url","tel","email"],b.prototype.update=function(){var a=this,b=a.input,c=a.mirror,d=b.val();
if(d||(d=b.attr("placeholder")),d!==c.text()){c.text(d);var e=c.width()+a.options.space;b.width(e)}},a.fn.autosizeInput=function(c){return this.each(function(){if("INPUT"==this.tagName&&a.inArray(this.type,b.validTypes)>-1){var d=a(this);d.data("autosizeInputInstance")||d.data("autosizeInputInstance",new b(this,c))}})},a(function(){a("input[data-autosize-input]").autosizeInput()})};d(),b.resolveWith(d)};FD40.module("autosize.input",a)}(),function(){var a=function(a){var b=this;a.require().script("moment").done(function(){var c=function(){var b=0,c=a.moment,d=function(d,e){var f={pickDate:!0,pickTime:!0,useMinutes:!0,useSeconds:!1,useCurrent:!0,minuteStepping:1,minDate:new c({y:1900}),maxDate:(new c).add(100,"y"),showToday:!0,collapse:!0,language:"en",defaultDate:"",disabledDates:!1,enabledDates:!1,icons:{},useStrict:!1,direction:"auto",sideBySide:!1,daysOfWeekDisabled:!1,component:"",dow:0},g={time:"far fa-clock",date:"fa fa-calendar",up:"fa fa-chevron-up",down:"fa fa-chevron-down"},h=this,j=function(){var n,i=!1;
if(h.options=a.extend({},f,e),h.options.icons=a.extend({},g,h.options.icons),h.element=a(d),l(),!h.options.pickTime&&!h.options.pickDate)throw new Error("Must choose at least one picker");if(h.id=b++,c.lang(h.options.language),h.date=c(),h.unset=!1,h.isInput=h.element.is("input"),h.component=!1,c()._lang._week.dow=h.options.dow,h.element.hasClass("input-group")&&(h.component=0==h.element.find(".datepickerbutton").size()?h.element.find("[class^='input-group-']"):h.element.find(".datepickerbutton")),h.format=h.options.format,n=c()._lang._longDateFormat,h.format||(h.format=h.options.pickDate?n.L:"",h.options.pickDate&&h.options.pickTime&&(h.format+=" "),h.format+=h.options.pickTime?n.LT:"",h.options.useSeconds&&(~n.LT.indexOf(" A")?h.format=h.format.split(" A")[0]+":ss A":h.format+=":ss")),h.use24hours=h.format.toLowerCase().indexOf("a")<1,h.component&&(i=h.component.find("span")),h.options.pickTime&&i&&i.addClass(h.options.icons.time),h.options.pickDate&&i&&(i.removeClass(h.options.icons.time),i.addClass(h.options.icons.date)),h.widget=a(O()).appendTo("body"),h.options.useSeconds&&!h.use24hours&&h.widget.width(300),h.minViewMode=h.options.minViewMode||0,"string"==typeof h.minViewMode)switch(h.minViewMode){case"months":h.minViewMode=1;
break;case"years":h.minViewMode=2;break;default:h.minViewMode=0}if(h.viewMode=h.options.viewMode||0,"string"==typeof h.viewMode)switch(h.viewMode){case"months":h.viewMode=1;break;case"years":h.viewMode=2;break;default:h.viewMode=0}if(h.options.disabledDates=M(h.options.disabledDates),h.options.enabledDates=M(h.options.enabledDates),h.startViewMode=h.viewMode,h.setMinDate(h.options.minDate),h.setMaxDate(h.options.maxDate),q(),r(),t(),u(),v(),p(),C(),D(),""!==h.options.defaultDate&&""==k().val()&&h.setValue(h.options.defaultDate),1!==h.options.minuteStepping){var o=h.options.minuteStepping;
h.date.minutes(Math.round(h.date.minutes()/o)*o%60).seconds(0)}},k=function(){return h.isInput?h.element:dateStr=h.element.find("input")},l=function(){var a;a=h.element.is("input")?h.element.data():h.element.data(),void 0!==a.dateFormat&&(h.options.format=a.dateFormat),void 0!==a.datePickdate&&(h.options.pickDate=a.datePickdate),void 0!==a.datePicktime&&(h.options.pickTime=a.datePicktime),void 0!==a.dateUseminutes&&(h.options.useMinutes=a.dateUseminutes),void 0!==a.dateUseseconds&&(h.options.useSeconds=a.dateUseseconds),void 0!==a.dateUsecurrent&&(h.options.useCurrent=a.dateUsecurrent),void 0!==a.dateMinutestepping&&(h.options.minuteStepping=a.dateMinutestepping),void 0!==a.dateMindate&&(h.options.minDate=a.dateMindate),void 0!==a.dateMaxdate&&(h.options.maxDate=a.dateMaxdate),void 0!==a.dateShowtoday&&(h.options.showToday=a.dateShowtoday),void 0!==a.dateCollapse&&(h.options.collapse=a.dateCollapse),void 0!==a.dateLanguage&&(h.options.language=a.dateLanguage),void 0!==a.dateDefaultdate&&(h.options.defaultDate=a.dateDefaultdate),void 0!==a.dateDisableddates&&(h.options.disabledDates=a.dateDisableddates),void 0!==a.dateEnableddates&&(h.options.enabledDates=a.dateEnableddates),void 0!==a.dateIcons&&(h.options.icons=a.dateIcons),void 0!==a.dateUsestrict&&(h.options.useStrict=a.dateUsestrict),void 0!==a.dateDirection&&(h.options.direction=a.dateDirection),void 0!==a.dateSidebyside&&(h.options.sideBySide=a.dateSidebyside)
},m=function(){var b="absolute",c=h.component?h.component.offset():h.element.offset(),d=a(window);h.width=h.component?h.component.outerWidth():h.element.outerWidth(),c.top=c.top+h.element.outerHeight();var e;"up"===h.options.direction?e="top":"bottom"===h.options.direction?e="bottom":"auto"===h.options.direction&&(e=c.top+h.widget.height()>d.height()+d.scrollTop()&&h.widget.height()+h.element.outerHeight()<c.top?"top":"bottom"),"top"===e?(c.top-=h.widget.height()+h.element.outerHeight()+15,h.widget.addClass("top").removeClass("bottom")):(c.top+=1,h.widget.addClass("bottom").removeClass("top")),void 0!==h.options.width&&h.widget.width(h.options.width),"left"===h.options.orientation&&(h.widget.addClass("left-oriented"),c.left=c.left-h.widget.width()+20),H()&&(b="fixed",c.top-=d.scrollTop(),c.left-=d.scrollLeft()),d.width()<c.left+h.widget.outerWidth()?(c.right=d.width()-c.left-h.width,c.left="auto",h.widget.addClass("pull-right")):(c.right="auto",h.widget.removeClass("pull-right")),h.widget.css({position:b,top:c.top,left:c.left,right:c.right})
},n=function(a,b){c(h.date).isSame(c(a))||(h.element.trigger({type:"dp.change",date:c(h.date),oldDate:c(a)}),"change"!==b&&h.element.change())},o=function(a){h.element.trigger({type:"dp.error",date:c(a)})},p=function(a){c.lang(h.options.language);var b=a;b||(b=k().val(),b&&(h.date=c(b,h.format,h.options.useStrict)),h.date||(h.date=c())),h.viewDate=c(h.date).startOf("month"),s(),w()},q=function(){c.lang(h.options.language);var b=a("<tr>"),d=c.weekdaysMin(),f=d.splice(c()._lang._week.dow);d=f.concat(d),a.each(d,function(a,c){b.append('<th class="dow">'+c+"</th>")
}),h.widget.find(".datepicker-days thead").append(b)},r=function(){c.lang(h.options.language);for(var a="",b=0,d=c.monthsShort();12>b;)a+='<span class="month">'+d[b++]+"</span>";h.widget.find(".datepicker-months td").append(a)},s=function(){c.lang(h.options.language);var j,k,l,n,o,p,q,r,s,b=h.viewDate.year(),d=h.viewDate.month(),e=h.options.minDate.year(),f=h.options.minDate.month(),g=h.options.maxDate.year(),i=h.options.maxDate.month(),m=[],t=c.months();for(h.widget.find(".datepicker-days").find(".disabled").removeClass("disabled"),h.widget.find(".datepicker-months").find(".disabled").removeClass("disabled"),h.widget.find(".datepicker-years").find(".disabled").removeClass("disabled"),h.widget.find(".datepicker-days th:eq(1)").text(t[d]+" "+b),k=c(h.viewDate).subtract("months",1),q=k.daysInMonth(),k.date(q).startOf("week"),(b==e&&f>=d||e>b)&&h.widget.find(".datepicker-days th:eq(0)").addClass("disabled"),(b==g&&d>=i||b>g)&&h.widget.find(".datepicker-days th:eq(2)").addClass("disabled"),l=c(k).add(42,"d");k.isBefore(l);){if(k.weekday()===c().startOf("week").weekday()&&(n=a("<tr>"),m.push(n)),o="",k.year()<b||k.year()==b&&k.month()<d?o+=" old":(k.year()>b||k.year()==b&&k.month()>d)&&(o+=" new"),k.isSame(c({y:h.date.year(),M:h.date.month(),d:h.date.date()}))&&(o+=" active"),(K(k)||!L(k))&&(o+=" disabled"),h.options.showToday===!0&&k.isSame(c(),"day")&&(o+=" today"),h.options.daysOfWeekDisabled)for(p in h.options.daysOfWeekDisabled)if(k.day()==h.options.daysOfWeekDisabled[p]){o+=" disabled";
break}n.append('<td class="day'+o+'">'+k.date()+"</td>"),j=k.date(),k.add(1,"d"),j==k.date()&&k.add(1,"d")}for(h.widget.find(".datepicker-days tbody").empty().append(m),s=h.date.year(),t=h.widget.find(".datepicker-months").find("th:eq(1)").text(b).end().find("span").removeClass("active"),s===b&&t.eq(h.date.month()).addClass("active"),e>s-1&&h.widget.find(".datepicker-months th:eq(0)").addClass("disabled"),s+1>g&&h.widget.find(".datepicker-months th:eq(2)").addClass("disabled"),p=0;12>p;p++)b==e&&f>p||e>b?a(t[p]).addClass("disabled"):(b==g&&p>i||b>g)&&a(t[p]).addClass("disabled");
for(m="",b=10*parseInt(b/10,10),r=h.widget.find(".datepicker-years").find("th:eq(1)").text(b+"-"+(b+9)).end().find("td"),h.widget.find(".datepicker-years").find("th").removeClass("disabled"),e>b&&h.widget.find(".datepicker-years").find("th:eq(0)").addClass("disabled"),b+9>g&&h.widget.find(".datepicker-years").find("th:eq(2)").addClass("disabled"),b-=1,p=-1;11>p;p++)m+='<span class="year'+(-1===p||10===p?" old":"")+(s===b?" active":"")+(e>b||b>g?" disabled":"")+'">'+b+"</span>",b+=1;r.html(m)},t=function(){c.lang(h.options.language);
var d,e,f,a=h.widget.find(".timepicker .timepicker-hours table"),b="";if(a.parent().hide(),h.use24hours)for(d=0,e=0;6>e;e+=1){for(b+="<tr>",f=0;4>f;f+=1)b+='<td class="hour">'+N(d.toString())+"</td>",d++;b+="</tr>"}else for(d=1,e=0;3>e;e+=1){for(b+="<tr>",f=0;4>f;f+=1)b+='<td class="hour">'+N(d.toString())+"</td>",d++;b+="</tr>"}a.html(b)},u=function(){var d,e,a=h.widget.find(".timepicker .timepicker-minutes table"),b="",c=0,f=h.options.minuteStepping;for(a.parent().hide(),1==f&&(f=5),d=0;d<Math.ceil(60/f/4);d++){for(b+="<tr>",e=0;4>e;e+=1)60>c?(b+='<td class="minute">'+N(c.toString())+"</td>",c+=f):b+="<td></td>";
b+="</tr>"}a.html(b)},v=function(){var d,e,a=h.widget.find(".timepicker .timepicker-seconds table"),b="",c=0;for(a.parent().hide(),d=0;3>d;d++){for(b+="<tr>",e=0;4>e;e+=1)b+='<td class="second">'+N(c.toString())+"</td>",c+=5;b+="</tr>"}a.html(b)},w=function(){if(h.date){var a=h.widget.find(".timepicker span[data-time-component]"),b=h.date.hours(),c="AM";h.use24hours||(b>=12&&(c="PM"),0===b?b=12:12!=b&&(b%=12),h.widget.find(".timepicker [data-action=togglePeriod]").text(c)),a.filter("[data-time-component=hours]").text(N(b)),a.filter("[data-time-component=minutes]").text(N(h.date.minutes())),a.filter("[data-time-component=seconds]").text(N(h.date.second()))
}},x=function(b){b.stopPropagation(),b.preventDefault(),h.unset=!1;var e,f,g,i,d=a(b.target).closest("span, td, th"),j=c(h.date);if(1===d.length&&!d.is(".disabled"))switch(d[0].nodeName.toLowerCase()){case"th":switch(d[0].className){case"switch":C(1);break;case"prev":case"next":g=P.modes[h.viewMode].navStep,"prev"===d[0].className&&(g=-1*g),h.viewDate.add(g,P.modes[h.viewMode].navFnc),s()}break;case"span":d.is(".month")?(e=d.parent().find("span").index(d),h.viewDate.month(e)):(f=parseInt(d.text(),10)||0,h.viewDate.year(f)),h.viewMode===h.minViewMode&&(h.date=c({y:h.viewDate.year(),M:h.viewDate.month(),d:h.viewDate.date(),h:h.date.hours(),m:h.date.minutes(),s:h.date.seconds()}),n(j,b.type),I()),C(-1),s();
break;case"td":d.is(".day")&&(i=parseInt(d.text(),10)||1,e=h.viewDate.month(),f=h.viewDate.year(),d.is(".old")?0===e?(e=11,f-=1):e-=1:d.is(".new")&&(11==e?(e=0,f+=1):e+=1),h.date=c({y:f,M:e,d:i,h:h.date.hours(),m:h.date.minutes(),s:h.date.seconds()}),h.viewDate=c({y:f,M:e,d:Math.min(28,i)}),s(),I(),n(j,b.type))}},y={incrementHours:function(){J("add","hours",1)},incrementMinutes:function(){J("add","minutes",h.options.minuteStepping)},incrementSeconds:function(){J("add","seconds",1)},decrementHours:function(){J("subtract","hours",1)
},decrementMinutes:function(){J("subtract","minutes",h.options.minuteStepping)},decrementSeconds:function(){J("subtract","seconds",1)},togglePeriod:function(){var a=h.date.hours();a>=12?a-=12:a+=12,h.date.hours(a)},showPicker:function(){h.widget.find(".timepicker > div:not(.timepicker-picker)").hide(),h.widget.find(".timepicker .timepicker-picker").show()},showHours:function(){h.widget.find(".timepicker .timepicker-picker").hide(),h.widget.find(".timepicker .timepicker-hours").show()},showMinutes:function(){h.widget.find(".timepicker .timepicker-picker").hide(),h.widget.find(".timepicker .timepicker-minutes").show()
},showSeconds:function(){h.widget.find(".timepicker .timepicker-picker").hide(),h.widget.find(".timepicker .timepicker-seconds").show()},selectHour:function(b){var c=h.widget.find(".timepicker [data-action=togglePeriod]").text(),d=parseInt(a(b.target).text(),10);"PM"==c&&(d+=12),h.date.hours(d),y.showPicker.call(h)},selectMinute:function(b){h.date.minutes(parseInt(a(b.target).text(),10)),y.showPicker.call(h)},selectSecond:function(b){h.date.seconds(parseInt(a(b.target).text(),10)),y.showPicker.call(h)}},z=function(b){var d=c(h.date),e=a(b.currentTarget).data("action"),f=y[e].apply(h,arguments);
return A(b),h.date||(h.date=c({y:1970})),I(),w(),n(d,b.type),f},A=function(a){a.stopPropagation(),a.preventDefault()},B=function(b){c.lang(h.options.language);var d=a(b.target),e=c(h.date),f=c(d.val(),h.format,h.options.useStrict);f.isValid()&&!K(f)&&L(f)?(p(),h.setValue(f),n(e,b.type),I()):(h.viewDate=e,n(e,b.type),o(f),h.unset=!0)},C=function(a){a&&(h.viewMode=Math.max(h.minViewMode,Math.min(2,h.viewMode+a)));P.modes[h.viewMode].clsName;h.widget.find(".datepicker > div").hide().filter(".datepicker-"+P.modes[h.viewMode].clsName).show()
},D=function(){var b,c,d,e,f;h.widget.on("click",".datepicker *",a.proxy(x,this)),h.widget.on("click","[data-action]",a.proxy(z,this)),h.widget.on("mousedown",a.proxy(A,this)),h.options.pickDate&&h.options.pickTime&&h.widget.on("click.togglePicker",".accordion-toggle",function(g){if(g.stopPropagation(),b=a(this),c=b.closest("ul"),d=c.find(".in"),e=c.find(".collapse:not(.in)"),d&&d.length){if(f=d.data("collapse"),f&&f.date-transitioning)return;d.collapse("hide"),e.collapse("show"),b.find("span").toggleClass(h.options.icons.time+" "+h.options.icons.date),h.element.find(".input-group-addon span").toggleClass(h.options.icons.time+" "+h.options.icons.date)
}}),h.isInput?h.element.on({focus:a.proxy(h.show,this),change:a.proxy(B,this),blur:a.proxy(h.hide,this)}):(h.element.on({change:a.proxy(B,this)},"input"),h.component?h.component.on("click",a.proxy(h.show,this)):h.element.on("click",a.proxy(h.show,this)))},E=function(){a(window).on("resize.datetimepicker"+h.id,a.proxy(m,this)),h.isInput||a(document).on("mousedown.datetimepicker"+h.id,a.proxy(h.hide,this))},F=function(){h.widget.off("click",".datepicker *",h.click),h.widget.off("click","[data-action]"),h.widget.off("mousedown",h.stopEvent),h.options.pickDate&&h.options.pickTime&&h.widget.off("click.togglePicker"),h.isInput?h.element.off({focus:h.show,change:h.change}):(h.element.off({change:h.change},"input"),h.component?h.component.off("click",h.show):h.element.off("click",h.show))
},G=function(){a(window).off("resize.datetimepicker"+h.id),h.isInput||a(document).off("mousedown.datetimepicker"+h.id)},H=function(){if(h.element){var d,b=h.element.parents(),c=!1;for(d=0;d<b.length;d++)if("fixed"==a(b[d]).css("position")){c=!0;break}return c}return!1},I=function(){c.lang(h.options.language);var a="";h.unset||(a=c(h.date).format(h.format)),k().val(a),h.element.data("date",a),h.options.pickTime||h.hide()},J=function(a,b,d){c.lang(h.options.language);var e;return"add"==a?(e=c(h.date),23==e.hours()&&e.add(d,b),e.add(d,b)):e=c(h.date).subtract(d,b),K(c(e.subtract(d,b)))||K(e)?(o(e.format(h.format)),void 0):("add"==a?h.date.add(d,b):h.date.subtract(d,b),h.unset=!1,void 0)
},K=function(a){return c.lang(h.options.language),a.isAfter(h.options.maxDate)||a.isBefore(h.options.minDate)?!0:h.options.disabledDates===!1?!1:h.options.disabledDates[c(a).format("YYYY-MM-DD")]===!0},L=function(a){return c.lang(h.options.language),h.options.enabledDates===!1?!0:h.options.enabledDates[c(a).format("YYYY-MM-DD")]===!0},M=function(a){var b={},d=0;for(i=0;i<a.length;i++)dDate=c(a[i]),dDate.isValid()&&(b[dDate.format("YYYY-MM-DD")]=!0,d++);return d>0?b:!1},N=function(a){return a=a.toString(),a.length>=2?a:"0"+a
},O=function(){if(h.options.pickDate&&h.options.pickTime){var a="";return a='<div id="es" class="ui bootstrap-datetimepicker-widget'+(h.options.sideBySide?" timepicker-sbs":"")+" "+h.options.component+'" style="z-index:99999 !important;">',a+=h.options.sideBySide?'<div class="row"><div class="col-sm-6 datepicker">'+P.template+'</div><div class="col-sm-6 timepicker">'+Q.getTemplate()+"</div></div>":'<ul class="g-list-unstyled"><li'+(h.options.collapse?' class="collapse in"':"")+'><div class="datepicker">'+P.template+'</div></li><li class="picker-switch accordion-toggle"><a class="btn btn-es-primary" style="width:100%"><span class="'+h.options.icons.time+'"></span></a></li><li'+(h.options.collapse?' class="collapse"':"")+'><div class="timepicker">'+Q.getTemplate()+"</div></li></ul>",a+="</div>"
}return h.options.pickTime?'<div id="es" class="ui bootstrap-datetimepicker-widget"><div class="timepicker">'+Q.getTemplate()+"</div></div>":'<div id="es" class="ui bootstrap-datetimepicker-widget"><div class="datepicker">'+P.template+"</div></div>"},P={modes:[{clsName:"days",navFnc:"month",navStep:1},{clsName:"months",navFnc:"year",navStep:1},{clsName:"years",navFnc:"year",navStep:10}],headTemplate:'<thead><tr><th class="prev">&lsaquo;</th><th colspan="5" class="switch"></th><th class="next">&rsaquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>'},Q={hourTemplate:'<span data-action="showHours"   data-time-component="hours"   class="timepicker-hour"></span>',minuteTemplate:'<span data-action="showMinutes" data-time-component="minutes" class="timepicker-minute"></span>',secondTemplate:'<span data-action="showSeconds"  data-time-component="seconds" class="timepicker-second"></span>'};
P.template='<div class="datepicker-days"><table class="table-condensed">'+P.headTemplate+'<tbody></tbody></table></div><div class="datepicker-months"><table class="table-condensed">'+P.headTemplate+P.contTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+P.headTemplate+P.contTemplate+"</table></div>",Q.getTemplate=function(){return'<div class="timepicker-picker"><table class="table-condensed"><tr><td><a href="#" class="btn" data-action="incrementHours"><i class="'+h.options.icons.up+'"></i></a></td><td class="separator"></td><td>'+(h.options.useMinutes?'<a href="#" class="btn" data-action="incrementMinutes"><i class="'+h.options.icons.up+'"></i></a>':"")+"</td>"+(h.options.useSeconds?'<td class="separator"></td><td><a href="#" class="btn" data-action="incrementSeconds"><i class="'+h.options.icons.up+'"></i></a></td>':"")+(h.use24hours?"":'<td class="separator"></td>')+"</tr><tr><td>"+Q.hourTemplate+'</td> <td class="separator">:</td><td>'+(h.options.useMinutes?Q.minuteTemplate:'<span class="timepicker-minute">00</span>')+"</td> "+(h.options.useSeconds?'<td class="separator">:</td><td>'+Q.secondTemplate+"</td>":"")+(h.use24hours?"":'<td class="separator"></td><td><button type="button" class="btn btn-primary" data-action="togglePeriod"></button></td>')+'</tr><tr><td><a href="#" class="btn" data-action="decrementHours"><i class="'+h.options.icons.down+'"></i></a></td><td class="separator"></td><td>'+(h.options.useMinutes?'<a href="#" class="btn" data-action="decrementMinutes"><i class="'+h.options.icons.down+'"></i></a>':"")+"</td>"+(h.options.useSeconds?'<td class="separator"></td><td><a href="#" class="btn" data-action="decrementSeconds"><i class="'+h.options.icons.down+'"></i></a></td>':"")+(h.use24hours?"":'<td class="separator"></td>')+'</tr></table></div><div class="timepicker-hours" data-action="selectHour"><table class="table-condensed"></table></div><div class="timepicker-minutes" data-action="selectMinute"><table class="table-condensed"></table></div>'+(h.options.useSeconds?'<div class="timepicker-seconds" data-action="selectSecond"><table class="table-condensed"></table></div>':"")
},h.destroy=function(){F(),G(),h.widget.remove(),h.element.removeData("DateTimePicker"),h.component&&h.component.removeData("DateTimePicker")},h.show=function(a){if(h.options.useCurrent&&""==k().val())if(1!==h.options.minuteStepping){var b=c(),d=h.options.minuteStepping;b.minutes(Math.round(b.minutes()/d)*d%60).seconds(0),h.setValue(b.format(h.format))}else h.setValue(c().format(h.format));h.widget.hasClass("picker-open")?(h.widget.hide(),h.widget.removeClass("picker-open")):(h.widget.show(),h.widget.addClass("picker-open")),h.height=h.component?h.component.outerHeight():h.element.outerHeight(),m(),h.element.trigger({type:"dp.show",date:c(h.date)}),E(),a&&A(a)
},h.disable=function(){var a=h.element.find("input");a.prop("disabled")||(a.prop("disabled",!0),F())},h.enable=function(){var a=h.element.find("input");a.prop("disabled")&&(a.prop("disabled",!1),D())},h.hide=function(b){if(!b||!a(b.target).is(h.element.attr("id"))){var e,f,d=h.widget.find(".collapse");for(e=0;e<d.length;e++)if(f=d.eq(e).data("collapse"),f&&f.date-transitioning)return;h.widget.hide(),h.widget.removeClass("picker-open"),h.viewMode=h.startViewMode,C(),h.element.trigger({type:"dp.hide",date:c(h.date)}),G()
}},h.setValue=function(a){c.lang(h.options.language),a?h.unset=!1:(h.unset=!0,I()),c.isMoment(a)||(a=c(a,h.format)),a.isValid()?(h.date=a,I(),h.viewDate=c({y:h.date.year(),M:h.date.month()}),s(),w()):o(a)},h.getDate=function(){return h.unset?null:h.date},h.setDate=function(a){var b=c(h.date);a?h.setValue(a):h.setValue(null),n(b,"function")},h.setDisabledDates=function(a){h.options.disabledDates=M(a),h.viewDate&&p()},h.setEnabledDates=function(a){h.options.enabledDates=M(a),h.viewDate&&p()},h.setMaxDate=function(a){void 0!=a&&(h.options.maxDate=c(a),h.viewDate&&p())
},h.setMinDate=function(a){void 0!=a&&(h.options.minDate=c(a),h.viewDate&&p())},j()};a.fn._datetimepicker=function(b){return this.each(function(){var c=a(this),e=c.data("DateTimePicker");e||c.data("DateTimePicker",new d(this,b))})}};c(),b.resolveWith(c)})};FD40.module("datetimepicker",a)}(),function(){var moduleFactory=function($){var module=this,jQuery=$,exports=function(){var dialogHtml='<div id="es" class="es-dialog"> <div class="es-dialog-modal"> <div class="es-dialog-header"> <div class="es-dialog-header__grid"> <div class="es-dialog-back-button t-hidden"><i class="fa fa-chevron-left"></i></div> <div class="es-dialog-header__cell"><span class="es-dialog-title"></span></div> <div class="es-dialog-close-button"><i class="fa fa-times"></i></div> </div> </div> <div class="es-dialog-body"> <div class="es-dialog-container"> <div class="es-dialog-content"></div> <div class="o-loader"></div> <div class="o-empty"> <div class="o-empty__content"><i class="o-empty__icon fa fa-exclamation-triangle"></i> <div class="o-empty__text"><span class="es-dialog-error-message"></span></div> </div> </div> </div> </div> <div class="es-dialog-footer"> <div class=""> <div class="es-dialog-footer-content"></div> </div> </div> </div></div>',dialog_=".es-dialog",dialogModal_=".es-dialog-modal",dialogContent_=".es-dialog-content",dialogHeader_=".es-dialog-header",dialogFooter_=".es-dialog-footer",dialogFooterContent_=".es-dialog-footer-content",dialogCloseButton_=".es-dialog-close-button",dialogTitle_=".es-dialog-title",dialogErrorMessage_=".es-dialog-error-message",isFailed="is-failed",isLoading="is-loading",rxBraces=/\{|\}/gi,self=EasySocial.dialog=function(a){if(void 0===a)return self;
$.isString(a)&&(a={content:a});var b=self.open;return b.apply(self,[a]),self};$.extend(self,{defaultOptions:{title:"",content:"",buttons:"",classname:"",width:"auto",height:"auto",escapeKey:!0},open:function(a){var b=$(dialog_);b.length<1&&(b=$(dialogHtml).appendTo("body"));var a=$.extend({},self.defaultOptions,a),c=$(dialogTitle_);c.text(a.title);var d=$(dialogFooterContent_);d.html(a.buttons),b.toggleClass("has-footer",!!a.buttons),self.setBindings(a);var e=$(dialogContent_).empty(),f=a.content,g=self.getContentType(f);
b.switchClass("type-"+g),window.es.mobile&&b.addClass("is-mobile");var h=$(dialogModal_),i=a.width,j=a.height;if($.isNumeric(j)){var k=$(dialogHeader_),l=$(dialogFooter_);j+=k.height()+l.height()}switch(h.css({width:i,height:j}),b.addClassAfter("active"),g){case"html":e.html(f),b.trigger("init");break;case"iframe":var m=$("<iframe>"),n=f;m.appendTo(e).one("load",function(){}).attr("src",n);break;case"deferred":return b.switchClass(isLoading),f.done(function(c){$.isPlainObject(c)?self.reopen($.extend(!0,a,c)):$.isString(c)?(a.content=c,self.reopen(a)):b.switchClass(isFailed)
}).fail(function(a){b.switchClass(isFailed);var c=$(dialogErrorMessage_);$.isString(a)&&c.html(a),$.isPlainObject(a)&&a.message&&c.html(a.message)}),void 0;case"dialog":var o=self.parseXMLOptions(f);return self.open($.extend(!0,a,o)),void 0}},reopen:function(a){self.close(),self.open(a)},close:function(){self.unsetBindings();var a=$(dialog_);a.remove()},getContentType:function(a){return/<dialog>(.*?)/.test(a)?"dialog":$.isUrl(a)?"iframe":$.isDeferred(a)?"deferred":"html"},parseXMLOptions:function(xml){var xmlOptions=$.buildHTML(xml),newOptions={};
return $.each(xmlOptions.children(),function(i,node){var node=$(node),key=$.String.camelize(this.nodeName.toLowerCase()),val=node.html(),type=node.attr("type");switch(type){case"json":try{val=$.parseJSON(val)}catch(e){}break;case"javascript":try{val=eval("(function($){ return "+$.trim(val)+" })("+$.globalNamespace+")")}catch(e){}break;case"text":val=node.text()}$.isNumeric(val)&&(val=parseFloat(val)),newOptions[key]=val}),newOptions},bindings:{},setBindings:function(a){self.unsetBindings();var b=a.selectors,c=a.bindings,d=$(dialog_);
if(b&&c){var e={parent:self};$.each(b,function(a,b){var a=a.replace(rxBraces,""),c=e[a]=function(){return d.find(b)};c.selector=b}),e.parent=self,e.element=d,e.self=function(){return d},a.caller&&(e.caller=a.caller),$.each(c,function(a,b){var c=a.split(" "),f=c[0].replace(rxBraces,""),g=c[1]+".es.dialog",h=e[f];if("init"==f&&d.on(f,function(){var a=[this].concat(arguments);b.apply(e,a)}),!h)return e[f]=b,void 0;var i=h.selector;d.on(g,i,function(){var a=[].slice.call(arguments);b.apply(e,[$(this)].concat(a))
}),self.bindings[g]=b})}a.escapeKey&&$(document).on("keydown.es.dialog",function(a){27==a.keyCode&&self.close()})},setMessage:function(a){var b=$('<div class="o-alert o-alert--'+a.type+'"><button type="button" class="close" data-bs-dismiss="alert">\xd7</button></div>'),c=$(dialogContent_);b.append(a.message),b.prependTo(c)},unsetBindings:function(){var a=$(dialog_);$.each(self.bindings,function(b){a.off(b)}),$(document).off("keydown.es.dialog")}}),$(document).on("click",dialogCloseButton_,function(){self.close()
}).on("click",dialog_,function(a){var b=$(dialog_);a.target==b[0]&&self.close()})};exports(),module.resolveWith(exports)};FD40.module("dialog",moduleFactory)}(),function(){var a=function(a){var b=this,c=function(){function f(){var b=a(this).data("textareaClone");b.find("div").text(this.value.replace(/\r\n/g,"\n")+" "),a(this).trigger("resize.expanding")}a.expandingTextarea=a.extend({autoInitialize:!0,initialSelector:"textarea.expanding",opts:{resize:function(){}}},a.expandingTextarea||{});var b=["lineHeight","textDecoration","letterSpacing","fontSize","fontFamily","fontStyle","fontWeight","textTransform","textAlign","direction","wordSpacing","fontSizeAdjust","wordWrap","word-break","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth","paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","boxSizing","webkitBoxSizing","mozBoxSizing","msBoxSizing"],c={position:"absolute",height:"100%",resize:"none"},d={visibility:"hidden",border:"0 solid",whiteSpace:"pre-wrap"},e={position:"relative"};
a.fn.expandingTextarea=function(g){var h=a.extend({},a.expandingTextarea.opts,g);return"resize"===g?this.trigger("input.expanding"):"destroy"===g?(this.filter(".expanding-init").each(function(){var b=a(this).removeClass("expanding-init");b.attr("style",b.data("expanding-styles")||"").removeData("expanding-styles")}),this):(this.filter("textarea").not(".expanding-init").addClass("expanding-init").each(function(){var g=a(this),i=g.parent(),j=a(a.parseHTML("<pre class='textareaClone'><div></div></pre>"));g.after(j).data("textareaClone",j),i.css(e),g.data("expanding-styles",g.attr("style")),g.css(c),j.css(d),a.each(b,function(a,b){var c=g.css(b);
j.css(b)!==c&&j.css(b,c)}),g.bind("input.expanding propertychange.expanding keyup.expanding",f),f.apply(this),h.resize&&g.bind("resize.expanding",h.resize)}),this)},a(function(){a.expandingTextarea.autoInitialize&&a(a.expandingTextarea.initialSelector).expandingTextarea()})};c(),b.resolveWith(c)};FD40.module("expanding",a)}(),function(){var a=function(a){var b=this;window.es.requireGmaps||b.resolve();var c=a.callback(function(){window.google||window.google.maps||b.reject("Google Maps API is required. Please register the following JavaScript library http://maps.google.com/maps/api/js?sensor=true.");
var c=function(){"use strict";var c=document,d=function(b,c){return a("#"+b.replace("#",""),c)[0]},g=function(a){var b=this,j=["bounds_changed","center_changed","click","dblclick","drag","dragend","dragstart","idle","maptypeid_changed","projection_changed","resize","tilesloaded","zoom_changed"],k=["mousemove","mouseout","mouseover"];if(window.context_menu={},this.el="string"==typeof a.el||"string"==typeof a.div?d(a.el||a.div,a.context):a.el||a.div,"undefined"==typeof this.el||null===this.el)throw"No element defined.";
this.el.style.width=a.width||this.el.scrollWidth||this.el.offsetWidth,this.el.style.height=a.height||this.el.scrollHeight||this.el.offsetHeight,this.controls=[],this.overlays=[],this.layers=[],this.singleLayers={},this.markers=[],this.polylines=[],this.routes=[],this.polygons=[],this.infoWindow=null,this.overlay_el=null,this.zoom=a.zoom||15,this.registered_events={};var m,l=a.markerClusterer;m=a.mapType?google.maps.MapTypeId[a.mapType.toUpperCase()]:google.maps.MapTypeId.ROADMAP;var n=new google.maps.LatLng(a.lat,a.lng);
delete a.el,delete a.lat,delete a.lng,delete a.mapType,delete a.width,delete a.height,delete a.markerClusterer;var o=a.zoomControlOpt||{style:"DEFAULT",position:"TOP_LEFT"},p=a.zoomControl||!0,q=o.style||"DEFAULT",r=o.position||"TOP_LEFT",s=a.panControl||!0,t=a.mapTypeControl||!0,u=a.scaleControl||!0,v=a.streetViewControl||!0,w=w||!0,x={},y={zoom:this.zoom,center:n,mapTypeId:m},z={panControl:s,zoomControl:p,zoomControlOptions:{style:google.maps.ZoomControlStyle[q],position:google.maps.ControlPosition[r]},mapTypeControl:t,scaleControl:u,streetViewControl:v,overviewMapControl:w};
1!=a.disableDefaultUI&&(y=f(y,z)),x=f(y,a);for(var A=0;A<j.length;A++)delete x[j[A]];for(var A=0;A<k.length;A++)delete x[k[A]];this.map=new google.maps.Map(this.el,x),l&&(this.markerClusterer=l.apply(this,[this.map]));var B=function(a){var b=0,c=0;if(a.offsetParent)do b+=a.offsetLeft,c+=a.offsetTop;while(a=a.offsetParent);return[b,c]},C=function(a,c){var e="",f=window.context_menu[a];for(var g in f)if(f.hasOwnProperty(g)){var h=f[g];e+='<li><a id="'+a+"_"+g+'" href="#">'+h.title+"</a></li>"}if(d("gmaps_context_menu")){var i=d("gmaps_context_menu");
i.innerHTML=e;for(var j=i.getElementsByTagName("a"),k=j.length,g=0;k>g;g++){var l=j[g],m=function(d){d.preventDefault(),f[this.id.replace(a+"_","")].action.apply(b,[c]),b.hideContextMenu()};google.maps.event.clearListeners(l,"click"),google.maps.event.addDomListenerOnce(l,"click",m,!1)}var n=B.apply(this,[b.el]),o=n[0]+c.pixel.x-15,p=n[1]+c.pixel.y-15;i.style.left=o+"px",i.style.top=p+"px",i.style.display="block"}},D=function(a,c){if("marker"===a){c.pixel={};var d=new google.maps.OverlayView;d.setMap(b.map),d.draw=function(){var b=d.getProjection(),e=c.marker.getPosition();
c.pixel=b.fromLatLngToContainerPixel(e),C(a,c)}}else C(a,c)};this.setContextMenu=function(a){window.context_menu[a.control]={};for(var b in a.options)if(a.options.hasOwnProperty(b)){var e=a.options[b];window.context_menu[a.control][e.name]={title:e.title,action:e.action}}var f=c.createElement("ul");f.id="gmaps_context_menu",f.style.display="none",f.style.position="absolute",f.style.minWidth="100px",f.style.background="white",f.style.listStyle="none",f.style.padding="8px",f.style.boxShadow="2px 2px 6px #ccc",c.body.appendChild(f);
var g=d("gmaps_context_menu");google.maps.event.addDomListener(g,"mouseout",function(a){a.relatedTarget&&this.contains(a.relatedTarget)||window.setTimeout(function(){g.style.display="none"},400)},!1)},this.hideContextMenu=function(){var a=d("gmaps_context_menu");a&&(a.style.display="none")};for(var E=function(c,d){google.maps.event.addListener(c,d,function(c){void 0==c&&(c=this),a[d].apply(this,[c]),b.hideContextMenu()})},F=0;F<j.length;F++){var G=j[F];G in a&&E(this.map,G)}for(var F=0;F<k.length;F++){var G=k[F];
G in a&&E(this.map,G)}google.maps.event.addListener(this.map,"rightclick",function(b){a.rightclick&&a.rightclick.apply(this,[b]),void 0!=window.context_menu.map&&D("map",b)}),this.refresh=function(){google.maps.event.trigger(this.map,"resize")},this.fitZoom=function(){for(var a=[],b=this.markers.length,c=0;b>c;c++)a.push(this.markers[c].getPosition());this.fitLatLngBounds(a)},this.fitLatLngBounds=function(a){for(var b=a.length,c=new google.maps.LatLngBounds,d=0;b>d;d++)c.extend(a[d]);this.map.fitBounds(c)},this.setCenter=function(a,b,c){this.map.panTo(new google.maps.LatLng(a,b)),c&&c()
},this.getElement=function(){return this.el},this.zoomIn=function(a){a=a||1,this.zoom=this.map.getZoom()+a,this.map.setZoom(this.zoom)},this.zoomOut=function(a){a=a||1,this.zoom=this.map.getZoom()-a,this.map.setZoom(this.zoom)};var H=[];for(var I in this.map)"function"!=typeof this.map[I]||this[I]||H.push(I);for(var A=0;A<H.length;A++)!function(a,b,c){a[c]=function(){return b[c].apply(b,arguments)}}(this,this.map,H[A]);this.createControl=function(a){var b=c.createElement("div");b.style.cursor="pointer",b.style.fontFamily="Arial, sans-serif",b.style.fontSize="13px",b.style.boxShadow="rgba(0, 0, 0, 0.398438) 0px 2px 4px";
for(var d in a.style)b.style[d]=a.style[d];a.id&&(b.id=a.id),a.classes&&(b.className=a.classes),a.content&&(b.innerHTML=a.content);for(var e in a.events)!function(b,c){google.maps.event.addDomListener(b,c,function(){a.events[c].apply(this,[this])})}(b,e);return b.index=1,b},this.addControl=function(a){var b=google.maps.ControlPosition[a.position.toUpperCase()];delete a.position;var c=this.createControl(a);return this.controls.push(c),this.map.controls[b].push(c),c},this.createMarker=function(a){if(a.hasOwnProperty("lat")&&a.hasOwnProperty("lng")||a.position){var b=this,c=a.details,d=a.fences,e=a.outside,g={position:new google.maps.LatLng(a.lat,a.lng),map:null};
delete a.lat,delete a.lng,delete a.fences,delete a.outside;var h=f(g,a),i=new google.maps.Marker(h);if(i.fences=d,a.infoWindow){i.infoWindow=new google.maps.InfoWindow(a.infoWindow);for(var j=["closeclick","content_changed","domready","position_changed","zindex_changed"],k=0;k<j.length;k++)!function(b,c){a.infoWindow[c]&&google.maps.event.addListener(b,c,function(b){a.infoWindow[c].apply(this,[b])})}(i.infoWindow,j[k])}for(var l=["animation_changed","clickable_changed","cursor_changed","draggable_changed","flat_changed","icon_changed","position_changed","shadow_changed","shape_changed","title_changed","visible_changed","zindex_changed"],m=["dblclick","drag","dragend","dragstart","mousedown","mouseout","mouseover","mouseup"],k=0;k<l.length;k++)!function(b,c){a[c]&&google.maps.event.addListener(b,c,function(){a[c].apply(this,[this])
})}(i,l[k]);for(var k=0;k<m.length;k++)!function(b,c,d){a[d]&&google.maps.event.addListener(c,d,function(c){c.pixel||(c.pixel=b.getProjection().fromLatLngToPoint(c.latLng)),a[d].apply(this,[c])})}(this.map,i,m[k]);return google.maps.event.addListener(i,"click",function(){this.details=c,a.click&&a.click.apply(this,[this]),i.infoWindow&&(b.hideInfoWindows(),i.infoWindow.open(b.map,i))}),google.maps.event.addListener(i,"rightclick",function(b){b.marker=this,a.rightclick&&a.rightclick.apply(this,[b]),void 0!=window.context_menu.marker&&D("marker",b)
}),i.fences&&google.maps.event.addListener(i,"dragend",function(){b.checkMarkerGeofence(i,function(a,b){e(a,b)})}),i}throw"No latitude or longitude defined."},this.addMarker=function(a){var b;if(a.hasOwnProperty("gm_accessors_"))b=a;else{if(!(a.hasOwnProperty("lat")&&a.hasOwnProperty("lng")||a.position))throw"No latitude or longitude defined.";b=this.createMarker(a)}return b.setMap(this.map),this.markerClusterer&&this.markerClusterer.addMarker(b),this.markers.push(b),g.fire("marker_added",b,this),b},this.addMarkers=function(a){for(var c,b=0;c=a[b];b++)this.addMarker(c);
return this.markers},this.hideInfoWindows=function(){for(var b,a=0;b=this.markers[a];a++)b.infoWindow&&b.infoWindow.close()},this.removeMarker=function(a){for(var b=0;b<this.markers.length;b++)if(this.markers[b]===a){this.markers[b].setMap(null),this.markers.splice(b,1),g.fire("marker_removed",a,this);break}return a},this.removeMarkers=function(a){for(var a=a||this.markers,b=0;b<this.markers.length;b++)this.markers[b]===a[b]&&this.markers[b].setMap(null);for(var c=[],b=0;b<this.markers.length;b++)null!=this.markers[b].getMap()&&c.push(this.markers[b]);
this.markers=c},this.drawOverlay=function(a){var d=new google.maps.OverlayView;d.setMap(b.map);var e=!0;return null!=a.auto_show&&(e=a.auto_show),d.onAdd=function(){var b=c.createElement("div");b.style.borderStyle="none",b.style.borderWidth="0px",b.style.position="absolute",b.style.zIndex=100,b.innerHTML=a.content,d.el=b;var e=this.getPanes();a.layer||(a.layer="overlayLayer");var f=e[a.layer];f.appendChild(b);for(var g=["contextmenu","DOMMouseScroll","dblclick","mousedown"],h=0;h<g.length;h++)!function(a,b){google.maps.event.addDomListener(a,b,function(a){-1!=navigator.userAgent.toLowerCase().indexOf("msie")&&document.all?(a.cancelBubble=!0,a.returnValue=!1):a.stopPropagation()
})}(b,g[h]);google.maps.event.trigger(this,"ready")},d.draw=function(){var b=this.getProjection(),c=b.fromLatLngToDivPixel(new google.maps.LatLng(a.lat,a.lng));a.horizontalOffset=a.horizontalOffset||0,a.verticalOffset=a.verticalOffset||0;var f=d.el,g=f.children[0],h=g.clientHeight,i=g.clientWidth;switch(a.verticalAlign){case"top":f.style.top=c.y-h+a.verticalOffset+"px";break;default:case"middle":f.style.top=c.y-h/2+a.verticalOffset+"px";break;case"bottom":f.style.top=c.y+a.verticalOffset+"px"}switch(a.horizontalAlign){case"left":f.style.left=c.x-i+a.horizontalOffset+"px";
break;default:case"center":f.style.left=c.x-i/2+a.horizontalOffset+"px";break;case"right":f.style.left=c.x+a.horizontalOffset+"px"}f.style.display=e?"block":"none",e||a.show.apply(this,[f])},d.onRemove=function(){var b=d.el;a.remove?a.remove.apply(this,[b]):(d.el.parentNode.removeChild(d.el),d.el=null)},b.overlays.push(d),d},this.removeOverlay=function(a){for(var b=0;b<this.overlays.length;b++)if(this.overlays[b]===a){this.overlays[b].setMap(null),this.overlays.splice(b,1);break}},this.removeOverlays=function(){for(var c,a=0;c=b.overlays[a];a++)c.setMap(null);
b.overlays=[]},this.drawPolyline=function(a){var b=[],c=a.path;if(c.length)if(void 0===c[0][0])b=c;else for(var e,d=0;e=c[d];d++)b.push(new google.maps.LatLng(e[0],e[1]));var f={map:this.map,path:b,strokeColor:a.strokeColor,strokeOpacity:a.strokeOpacity,strokeWeight:a.strokeWeight,geodesic:a.geodesic,clickable:!0,editable:!1,visible:!0};a.hasOwnProperty("clickable")&&(f.clickable=a.clickable),a.hasOwnProperty("editable")&&(f.editable=a.editable),a.hasOwnProperty("icons")&&(f.icons=a.icons),a.hasOwnProperty("zIndex")&&(f.zIndex=a.zIndex);
for(var h=new google.maps.Polyline(f),i=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"],j=0;j<i.length;j++)!function(b,c){a[c]&&google.maps.event.addListener(b,c,function(b){a[c].apply(this,[b])})}(h,i[j]);return this.polylines.push(h),g.fire("polyline_added",h,this),h},this.removePolyline=function(a){for(var b=0;b<this.polylines.length;b++)if(this.polylines[b]===a){this.polylines[b].setMap(null),this.polylines.splice(b,1),g.fire("polyline_removed",a,this);break}},this.removePolylines=function(){for(var c,a=0;c=b.polylines[a];a++)c.setMap(null);
b.polylines=[]},this.drawCircle=function(a){a=f({map:this.map,center:new google.maps.LatLng(a.lat,a.lng)},a),delete a.lat,delete a.lng;for(var b=new google.maps.Circle(a),c=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"],d=0;d<c.length;d++)!function(b,c){a[c]&&google.maps.event.addListener(b,c,function(b){a[c].apply(this,[b])})}(b,c[d]);return this.polygons.push(b),b},this.drawRectangle=function(a){a=f({map:this.map},a);var b=new google.maps.LatLngBounds(new google.maps.LatLng(a.bounds[0][0],a.bounds[0][1]),new google.maps.LatLng(a.bounds[1][0],a.bounds[1][1]));
a.bounds=b;for(var c=new google.maps.Rectangle(a),d=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"],e=0;e<d.length;e++)!function(b,c){a[c]&&google.maps.event.addListener(b,c,function(b){a[c].apply(this,[b])})}(c,d[e]);return this.polygons.push(c),c},this.drawPolygon=function(a){var b=!1;a.hasOwnProperty("useGeoJSON")&&(b=a.useGeoJSON),delete a.useGeoJSON,a=f({map:this.map},a),0==b&&(a.paths=[a.paths.slice(0)]),a.paths.length>0&&a.paths[0].length>0&&(a.paths=i(h(a.paths,e,b)));
for(var c=new google.maps.Polygon(a),d=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"],j=0;j<d.length;j++)!function(b,c){a[c]&&google.maps.event.addListener(b,c,function(b){a[c].apply(this,[b])})}(c,d[j]);return this.polygons.push(c),g.fire("polygon_added",c,this),c},this.removePolygon=function(a){for(var b=0;b<this.polygons.length;b++)if(this.polygons[b]===a){this.polygons[b].setMap(null),this.polygons.splice(b,1),g.fire("polygon_removed",a,this);break}},this.removePolygons=function(){for(var c,a=0;c=b.polygons[a];a++)c.setMap(null);
b.polygons=[]},this.getFromFusionTables=function(a){var b=a.events;delete a.events;var c=a,d=new google.maps.FusionTablesLayer(c);for(var e in b)!function(a,c){google.maps.event.addListener(a,c,function(a){b[c].apply(this,[a])})}(d,e);return this.layers.push(d),d},this.loadFromFusionTables=function(a){var b=this.getFromFusionTables(a);return b.setMap(this.map),b},this.getFromKML=function(a){var b=a.url,c=a.events;delete a.url,delete a.events;var d=a,e=new google.maps.KmlLayer(b,d);for(var f in c)!function(a,b){google.maps.event.addListener(a,b,function(a){c[b].apply(this,[a])
})}(e,f);return this.layers.push(e),e},this.loadFromKML=function(a){var b=this.getFromKML(a);return b.setMap(this.map),b};var J,K;this.getRoutes=function(a){switch(a.travelMode){case"bicycling":J=google.maps.TravelMode.BICYCLING;break;case"transit":J=google.maps.TravelMode.TRANSIT;break;case"driving":J=google.maps.TravelMode.DRIVING;break;default:J=google.maps.TravelMode.WALKING}K="imperial"===a.unitSystem?google.maps.UnitSystem.IMPERIAL:google.maps.UnitSystem.METRIC;var b={avoidHighways:!1,avoidTolls:!1,optimizeWaypoints:!1,waypoints:[]},c=f(b,a);
c.origin=/string/.test(typeof a.origin)?a.origin:new google.maps.LatLng(a.origin[0],a.origin[1]),c.destination=new google.maps.LatLng(a.destination[0],a.destination[1]),c.travelMode=J,c.unitSystem=K,delete c.callback;var d=this,e=new google.maps.DirectionsService;e.route(c,function(b,c){if(c===google.maps.DirectionsStatus.OK)for(var e in b.routes)b.routes.hasOwnProperty(e)&&d.routes.push(b.routes[e]);a.callback&&a.callback(d.routes)})},this.removeRoutes=function(){this.routes=[]},this.getElevations=function(a){a=f({locations:[],path:!1,samples:256},a),a.locations.length>0&&a.locations[0].length>0&&(a.locations=i(h([a.locations],e,!1)));
var b=a.callback;delete a.callback;var c=new google.maps.ElevationService;if(a.path){var d={path:a.locations,samples:a.samples};c.getElevationAlongPath(d,function(a,c){b&&"function"==typeof b&&b(a,c)})}else delete a.path,delete a.samples,c.getElevationForLocations(a,function(a,c){b&&"function"==typeof b&&b(a,c)})},this.cleanRoute=this.removePolylines,this.drawRoute=function(a){var b=this;this.getRoutes({origin:a.origin,destination:a.destination,travelMode:a.travelMode,waypoints:a.waypoints,unitSystem:a.unitSystem,callback:function(c){c.length>0&&(b.drawPolyline({path:c[c.length-1].overview_path,strokeColor:a.strokeColor,strokeOpacity:a.strokeOpacity,strokeWeight:a.strokeWeight}),a.callback&&a.callback(c[c.length-1]))
}})},this.travelRoute=function(a){if(a.origin&&a.destination)this.getRoutes({origin:a.origin,destination:a.destination,travelMode:a.travelMode,waypoints:a.waypoints,callback:function(b){if(b.length>0&&a.start&&a.start(b[b.length-1]),b.length>0&&a.step){var c=b[b.length-1];if(c.legs.length>0)for(var f,d=c.legs[0].steps,e=0;f=d[e];e++)f.step_number=e,a.step(f,c.legs[0].steps.length-1)}b.length>0&&a.end&&a.end(b[b.length-1])}});else if(a.route&&a.route.legs.length>0)for(var d,b=a.route.legs[0].steps,c=0;d=b[c];c++)d.step_number=c,a.step(d)
},this.drawSteppedRoute=function(a){if(a.origin&&a.destination)this.getRoutes({origin:a.origin,destination:a.destination,travelMode:a.travelMode,waypoints:a.waypoints,callback:function(c){if(c.length>0&&a.start&&a.start(c[c.length-1]),c.length>0&&a.step){var d=c[c.length-1];if(d.legs.length>0)for(var g,e=d.legs[0].steps,f=0;g=e[f];f++)g.step_number=f,b.drawPolyline({path:g.path,strokeColor:a.strokeColor,strokeOpacity:a.strokeOpacity,strokeWeight:a.strokeWeight}),a.step(g,d.legs[0].steps.length-1)}c.length>0&&a.end&&a.end(c[c.length-1])
}});else if(a.route&&a.route.legs.length>0)for(var e,c=a.route.legs[0].steps,d=0;e=c[d];d++)e.step_number=d,b.drawPolyline({path:e.path,strokeColor:a.strokeColor,strokeOpacity:a.strokeOpacity,strokeWeight:a.strokeWeight}),a.step(e)},this.checkGeofence=function(a,b,c){return c.containsLatLng(new google.maps.LatLng(a,b))},this.checkMarkerGeofence=function(a,c){if(a.fences)for(var e,d=0;e=a.fences[d];d++){var f=a.getPosition();b.checkGeofence(f.lat(),f.lng(),e)||c(a,e)}},this.addLayer=function(a,b){b=b||{};var c;
switch(a){case"weather":this.singleLayers.weather=c=new google.maps.weather.WeatherLayer;break;case"clouds":this.singleLayers.clouds=c=new google.maps.weather.CloudLayer;break;case"traffic":this.singleLayers.traffic=c=new google.maps.TrafficLayer;break;case"transit":this.singleLayers.transit=c=new google.maps.TransitLayer;break;case"bicycling":this.singleLayers.bicycling=c=new google.maps.BicyclingLayer;break;case"panoramio":this.singleLayers.panoramio=c=new google.maps.panoramio.PanoramioLayer,c.setTag(b.filter),delete b.filter,b.click&&google.maps.event.addListener(c,"click",function(a){b.click(a),delete b.click
});break;case"places":if(this.singleLayers.places=c=new google.maps.places.PlacesService(this.map),b.search||b.nearbySearch){var d={bounds:b.bounds||null,keyword:b.keyword||null,location:b.location||null,name:b.name||null,radius:b.radius||null,rankBy:b.rankBy||null,types:b.types||null};b.search&&c.search(d,b.search),b.nearbySearch&&c.nearbySearch(d,b.nearbySearch)}if(b.textSearch){var e={bounds:b.bounds||null,location:b.location||null,query:b.query||null,radius:b.radius||null};c.textSearch(e,b.textSearch)}}return void 0!==c?("function"==typeof c.setOptions&&c.setOptions(b),"function"==typeof c.setMap&&c.setMap(this.map),c):void 0
},this.removeLayer=function(a){void 0!==this.singleLayers[a]&&(this.singleLayers[a].setMap(null),delete this.singleLayers[a])},this.toImage=function(a){var a=a||{},b={};if(b.size=a.size||[this.el.clientWidth,this.el.clientHeight],b.lat=this.getCenter().lat(),b.lng=this.getCenter().lng(),this.markers.length>0){b.markers=[];for(var c=0;c<this.markers.length;c++)b.markers.push({lat:this.markers[c].getPosition().lat(),lng:this.markers[c].getPosition().lng()})}if(this.polylines.length>0){var d=this.polylines[0];b.polyline={},b.polyline.path=google.maps.geometry.encoding.encodePath(d.getPath()),b.polyline.strokeColor=d.strokeColor,b.polyline.strokeOpacity=d.strokeOpacity,b.polyline.strokeWeight=d.strokeWeight
}return g.staticMapURL(b)},this.addMapType=function(a,b){if(!b.hasOwnProperty("getTileUrl")||"function"!=typeof b.getTileUrl)throw"'getTileUrl' function required.";b.tileSize=b.tileSize||new google.maps.Size(256,256);var c=new google.maps.ImageMapType(b);this.map.mapTypes.set(a,c)},this.addOverlayMapType=function(a){if(!a.hasOwnProperty("getTile")||"function"!=typeof a.getTile)throw"'getTile' function required.";var b=a.index;delete a.index,this.map.overlayMapTypes.insertAt(b,a)},this.removeOverlayMapType=function(a){this.map.overlayMapTypes.removeAt(a)
},this.addStyle=function(a){var b=new google.maps.StyledMapType(a.styles,a.styledMapName);this.map.mapTypes.set(a.mapTypeId,b)},this.setStyle=function(a){this.map.setMapTypeId(a)},this.createPanorama=function(a){return a.hasOwnProperty("lat")&&a.hasOwnProperty("lng")||(a.lat=this.getCenter().lat(),a.lng=this.getCenter().lng()),this.panorama=g.createPanorama(a),this.map.setStreetView(this.panorama),this.panorama},this.on=function(a,b){return g.on(a,this,b)},this.off=function(a){g.off(a,this)}};return g.createPanorama=function(a){var b=d(a.el,a.context);
a.position=new google.maps.LatLng(a.lat,a.lng),delete a.el,delete a.context,delete a.lat,delete a.lng;for(var c=["closeclick","links_changed","pano_changed","position_changed","pov_changed","resize","visible_changed"],e=f({visible:!0},a),g=0;g<c.length;g++)delete e[c[g]];for(var h=new google.maps.StreetViewPanorama(b,e),g=0;g<c.length;g++)!function(b,c){a[c]&&google.maps.event.addListener(b,c,function(){a[c].apply(this)})}(h,c[g]);return h},g.Route=function(a){this.map=a.map,this.route=a.route,this.step_count=0,this.steps=this.route.legs[0].steps,this.steps_length=this.steps.length,this.polyline=this.map.drawPolyline({path:new google.maps.MVCArray,strokeColor:a.strokeColor,strokeOpacity:a.strokeOpacity,strokeWeight:a.strokeWeight}).getPath(),this.back=function(){if(this.step_count>0){this.step_count--;
var a=this.route.legs[0].steps[this.step_count].path;for(var b in a)a.hasOwnProperty(b)&&this.polyline.pop()}},this.forward=function(){if(this.step_count<this.steps_length){var a=this.route.legs[0].steps[this.step_count].path;for(var b in a)a.hasOwnProperty(b)&&this.polyline.push(a[b]);this.step_count++}}},g.geolocate=function(a){var b=a.always||a.complete;navigator.geolocation?navigator.geolocation.getCurrentPosition(function(c){a.success(c),b&&b()},function(c){a.error(c),b&&b()},a.options):(a.not_supported(),b&&b())
},g.geocode=function(a){this.geocoder=new google.maps.Geocoder;var b=a.callback;a.hasOwnProperty("lat")&&a.hasOwnProperty("lng")&&(a.latLng=new google.maps.LatLng(a.lat,a.lng)),delete a.lat,delete a.lng,delete a.callback,this.geocoder.geocode(a,function(a,c){b(a,c)})},g.staticMapURL=function(a){function p(a,b){if("#"===a[0]&&(a=a.replace("#","0x"),b)){if(b=parseFloat(b),b=Math.min(1,Math.max(b,0)),0===b)return"0x00000000";b=(255*b).toString(16),1===b.length&&(b+=b),a=a.slice(0,8)+b}return a}var c,b=[],d="https://maps.googleapis.com/maps/api/staticmap";
a.url&&(d=a.url,delete a.url),d+="?";var e=a.markers;delete a.markers,!e&&a.marker&&(e=[a.marker],delete a.marker);var f=a.polyline;delete a.polyline;var g=window.es.gmapsApiKey;g&&b.push("key="+g);var h=window.es.locationLanguage;if(h&&b.push("language="+h),a.center)b.push("center="+a.center),delete a.center;else if(a.address)b.push("center="+a.address),delete a.address;else if(a.lat)b.push(["center=",a.lat,",",a.lng].join("")),delete a.lat,delete a.lng;else if(a.visible){var i=encodeURI(a.visible.join("|"));
b.push("visible="+i)}var j=a.size;j?(j.join&&(j=j.join("x")),delete a.size):j="630x300",b.push("size="+j),a.zoom||(a.zoom=15);var k=a.hasOwnProperty("sensor")?!!a.sensor:!0;delete a.sensor,b.push("sensor="+k);for(var l in a)a.hasOwnProperty(l)&&b.push(l+"="+a[l]);if(e)for(var m,n,o=0;c=e[o];o++)m=[],c.size&&"normal"!==c.size?m.push("size:"+c.size):c.icon&&m.push("icon:"+encodeURI(c.icon)),c.color&&m.push("color:"+c.color.replace("#","0x")),c.label&&m.push("label:"+c.label[0].toUpperCase()),n=c.address?c.address:c.lat+","+c.lng,m.length||0===o?(m.push(n),m=m.join("|"),b.push("markers="+encodeURI(m))):(m=b.pop()+encodeURI("|"+n),b.push(m));
if(f){if(c=f,f=[],c.strokeWeight&&f.push("weight:"+parseInt(c.strokeWeight,10)),c.strokeColor){var q=p(c.strokeColor,c.strokeOpacity);f.push("color:"+q)}if(c.fillColor){var r=p(c.fillColor,c.fillOpacity);f.push("fillcolor:"+r)}var s=c.path;if(s.join)for(var u,t=0;u=s[t];t++)f.push(u.join(","));else f.push("enc:"+s);f=f.join("|"),b.push("path="+encodeURI(f))}return b=b.join("&"),d+b},g.custom_events=["marker_added","marker_removed","polyline_added","polyline_removed","polygon_added","polygon_removed","geolocated","geolocation_failed"],g.on=function(a,b,c){if(-1==g.custom_events.indexOf(a))return google.maps.event.addListener(b,a,c);
var d={handler:c,eventName:a};return b.registered_events[a]=b.registered_events[a]||[],b.registered_events[a].push(d),d},g.off=function(a,b){-1==g.custom_events.indexOf(a)?google.maps.event.clearListeners(b,a):b.registered_events[a]=[]},g.fire=function(a,b,c){if(-1==g.custom_events.indexOf(a))google.maps.event.trigger(b,a,Array.prototype.slice.apply(arguments).slice(2));else if(a in c.registered_events)for(var d=c.registered_events[a],e=0;e<d.length;e++)!function(a,b,c){a.apply(b,[c])}(d[e].handler,c,b)},google.maps.Polygon.prototype.getBounds||(google.maps.Polygon.prototype.getBounds=function(){for(var d,b=new google.maps.LatLngBounds,c=this.getPaths(),e=0;e<c.getLength();e++){d=c.getAt(e);
for(var f=0;f<d.getLength();f++)b.extend(d.getAt(f))}return b}),google.maps.Polygon.prototype.containsLatLng||(google.maps.Polygon.prototype.containsLatLng=function(a){var b=this.getBounds();if(null!==b&&!b.contains(a))return!1;for(var c=!1,d=this.getPaths().getLength(),e=0;d>e;e++)for(var f=this.getPaths().getAt(e),g=f.getLength(),h=g-1,i=0;g>i;i++){var j=f.getAt(i),k=f.getAt(h);(j.lng()<a.lng()&&k.lng()>=a.lng()||k.lng()<a.lng()&&j.lng()>=a.lng())&&j.lat()+(a.lng()-j.lng())/(k.lng()-j.lng())*(k.lat()-j.lat())<a.lat()&&(c=!c),h=i
}return c}),google.maps.LatLngBounds.prototype.containsLatLng=function(a){return this.contains(a)},google.maps.Marker.prototype.setFences=function(a){this.fences=a},google.maps.Marker.prototype.addFence=function(a){this.fences.push(a)},g}(this),d=function(a,b){var c=a[0],d=a[1];return b&&(c=a[1],d=a[0]),new google.maps.LatLng(c,d)},e=function(a,b){for(var c=0;c<a.length;c++)a[c]=a[c].length>0&&"number"!=typeof a[c][0]?e(a[c],b):d(a[c],b);return a},f=function(a,b){if(a===b)return a;for(var c in b)a[c]=b[c];return a
},h=function(a,b){var c=Array.prototype.slice.call(arguments,2);if(Array.prototype.map&&a.map===Array.prototype.map)return Array.prototype.map.call(a,function(a){return callback_params=c,callback_params.splice(0,0,a),b.apply(this,callback_params)});for(var d=[],e=a.length,f=0;e>f;f++)callback_params=c,callback_params=callback_params.splice(0,0,a[f]),d.push(b.apply(this,callback_params));return d},i=function(a){new_array=[];for(var b=0;b<a.length;b++)new_array=new_array.concat(a[b]);return new_array};a.GMaps=c,a.GMaps.mapEvents=["bounds_changed","center_changed","click","dblclick","drag","dragend","dragstart","heading_changed","idle","maptypeid_changed","mousemove","mouseout","mouseover","projection_changed","resize","rightclick","tilesloaded","tilt_changed","zoom_changed"],a.fn.gmaps=function(b){if(!(this.length<1)){var d=a(this[0]),e=d.data("gmaps"),f=void 0===e,g=void 0===b;
if(a.isString(b)&&(b={address:b}),f){var h=a.uid("gmaps-"),i={lat:0,lng:0};return a.isPlainObject(b)&&(b=a.extend({},i,b)),d.attr("id",h),b.div="#"+h,a.each(a.GMaps.mapEvents,function(c,f){var g=a.isFunction(b[f])?b[f]:a.noop;b[f]=function(){var b=a.makeArray(arguments);g.apply(e,arguments),d.trigger.apply(d,["map_"+f].concat(b))}}),e=new c(b),d.data("gmaps",e),e.go=function(a,b){e.setCenter(a,b),e.addMarker({lat:a,lng:b})},g&&c.geolocate({success:function(a){e.go(a.coords.latitude,a.coords.longitude)}}),e}var j=b.lat,k=b.lng;
return(a.isNumber(j)||a.isNumber(k))&&e.go(j,k),e}},b.resolveWith(c)}),d=window.es.locationLanguage,e=window.es.gmapsApiKey,f=window.es.requireGmaps,g="";e&&(g="key="+e+"&"),f&&(window.google&&window.google.maps?window[c]():a.require().script(a.uri(window.location).protocol()+"://maps.google.com/maps/api/js?"+g+"callback="+c+"&language="+d).done())};FD40.module("gmaps",a)}(),function(){var a=function(a){var b=this,c=a,d=function(){!function(a,b){"use strict";var d=a.History=a.History||{};if("undefined"!=typeof d.Adapter)throw new Error("History.js Adapter has already been loaded...");
d.Adapter={bind:function(a,b,d){c(a).bind(b,d)},trigger:function(a,b,d){c(a).trigger(b,d)},extractEventData:function(a,c,d){var e=c&&c.originalEvent&&c.originalEvent[a]||d&&d[a]||b;return e},onDomLoad:function(a){c(a)}},"undefined"!=typeof d.init&&d.init()}(window),function(a){"use strict";var c=a.document,d=a.setTimeout||d,e=a.clearTimeout||e,f=a.setInterval||f,g=a.History=a.History||{};if("undefined"!=typeof g.initHtml4)throw new Error("History.js HTML4 Support has already been loaded...");g.initHtml4=function(){return"undefined"!=typeof g.initHtml4.initialized?!1:(g.initHtml4.initialized=!0,g.enabled=!0,g.savedHashes=[],g.isLastHash=function(a){var c,b=g.getHashByIndex();
return c=a===b},g.saveHash=function(a){return g.isLastHash(a)?!1:(g.savedHashes.push(a),!0)},g.getHashByIndex=function(a){var b=null;return b="undefined"==typeof a?g.savedHashes[g.savedHashes.length-1]:0>a?g.savedHashes[g.savedHashes.length+a]:g.savedHashes[a]},g.discardedHashes={},g.discardedStates={},g.discardState=function(a,b,c){var e,d=g.getHashByState(a);return e={discardedState:a,backState:c,forwardState:b},g.discardedStates[d]=e,!0},g.discardHash=function(a,b,c){var d={discardedHash:a,backState:c,forwardState:b};
return g.discardedHashes[a]=d,!0},g.discardedState=function(a){var c,b=g.getHashByState(a);return c=g.discardedStates[b]||!1},g.discardedHash=function(a){var b=g.discardedHashes[a]||!1;return b},g.recycleState=function(a){var b=g.getHashByState(a);return g.discardedState(a)&&delete g.discardedStates[b],!0},g.emulated.hashChange&&(g.hashChangeInit=function(){g.checkerFunction=null;var d,e,h,i,b="";return g.isInternetExplorer()?(d="historyjs-iframe",e=c.createElement("iframe"),e.setAttribute("id",d),e.style.display="none",c.body.appendChild(e),e.contentWindow.document.open(),e.contentWindow.document.close(),h="",i=!1,g.checkerFunction=function(){if(i)return!1;
i=!0;var c=g.getHash()||"",d=g.unescapeHash(e.contentWindow.document.location.hash)||"";return c!==b?(b=c,d!==c&&(h=d=c,e.contentWindow.document.open(),e.contentWindow.document.close(),e.contentWindow.document.location.hash=g.escapeHash(c)),g.Adapter.trigger(a,"hashchange")):d!==h&&(h=d,g.setHash(d,!1)),i=!1,!0}):g.checkerFunction=function(){var c=g.getHash();return c!==b&&(b=c,g.Adapter.trigger(a,"hashchange")),!0},g.intervalList.push(f(g.checkerFunction,g.options.hashChangeInterval)),!0},g.Adapter.onDomLoad(g.hashChangeInit)),g.emulated.pushState&&(g.onHashChange=function(b){var j,d=b&&b.newURL||c.location.href,e=g.getHashByUrl(d),f=null,h=null;
return g.isLastHash(e)?(g.busy(!1),!1):(g.doubleCheckComplete(),g.saveHash(e),e&&g.isTraditionalAnchor(e)?(g.Adapter.trigger(a,"anchorchange"),g.busy(!1),!1):(f=g.extractState(g.getFullUrl(e||c.location.href,!1),!0),g.isLastSavedState(f)?(g.busy(!1),!1):(h=g.getHashByState(f),(j=g.discardedState(f))?(g.getHashByIndex(-2)===g.getHashByState(j.forwardState)?g.back(!1):g.forward(!1),!1):(g.pushState(f.data,f.title,f.url,!1),!0))))},g.Adapter.bind(a,"hashchange",g.onHashChange),g.pushState=function(b,d,e,f){if(g.getHashByUrl(e))throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");
if(f!==!1&&g.busy())return g.pushQueue({scope:g,callback:g.pushState,args:arguments,queue:f}),!1;g.busy(!0);var h=g.createStateObject(b,d,e),i=g.getHashByState(h),j=g.getState(!1),k=g.getHashByState(j),l=g.getHash();return g.storeState(h),g.expectedStateId=h.id,g.recycleState(h),g.setTitle(h),i===k?(g.busy(!1),!1):i!==l&&i!==g.getShortUrl(c.location.href)?(g.setHash(i,!1),!1):(g.saveState(h),g.Adapter.trigger(a,"statechange"),g.busy(!1),!0)},g.replaceState=function(a,b,c,d){if(g.getHashByUrl(c))throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");
if(d!==!1&&g.busy())return g.pushQueue({scope:g,callback:g.replaceState,args:arguments,queue:d}),!1;g.busy(!0);var e=g.createStateObject(a,b,c),f=g.getState(!1),h=g.getStateByIndex(-2);return g.discardState(f,e,h),g.pushState(e.data,e.title,e.url,!1),!0}),g.emulated.pushState&&g.getHash()&&!g.emulated.hashChange&&g.Adapter.onDomLoad(function(){g.Adapter.trigger(a,"hashchange")}),void 0)},"undefined"!=typeof g.init&&g.init()}(window),function(a,b){"use strict";var c=a.console||b,d=a.document,e=a.navigator,f=a.sessionStorage||!1,g=a.setTimeout,h=a.clearTimeout,i=a.setInterval,j=a.clearInterval,k=a.JSON,l=a.alert,m=a.History=a.History||{},n=a.history;
if(k.stringify=k.stringify||k.encode,k.parse=k.parse||k.decode,"undefined"!=typeof m.init)throw new Error("History.js Core has already been loaded...");m.init=function(){return"undefined"==typeof m.Adapter?!1:("undefined"!=typeof m.initCore&&m.initCore(),"undefined"!=typeof m.initHtml4&&m.initHtml4(),!0)},m.initCore=function(){if("undefined"!=typeof m.initCore.initialized)return!1;if(m.initCore.initialized=!0,m.options=m.options||{},m.options.hashChangeInterval=m.options.hashChangeInterval||100,m.options.safariPollInterval=m.options.safariPollInterval||500,m.options.doubleCheckInterval=m.options.doubleCheckInterval||500,m.options.storeInterval=m.options.storeInterval||1e3,m.options.busyDelay=m.options.busyDelay||250,m.options.debug=m.options.debug||!1,m.options.initialTitle=m.options.initialTitle||d.title,m.intervalList=[],m.clearAllIntervals=function(){var a,b=m.intervalList;
if("undefined"!=typeof b&&null!==b){for(a=0;a<b.length;a++)j(b[a]);m.intervalList=null}},m.debug=function(){m.options.debug&&m.log.apply(m,arguments)},m.log=function(){var e,f,g,h,i,a=!("undefined"==typeof c||"undefined"==typeof c.log||"undefined"==typeof c.log.apply),b=d.getElementById("log");for(a?(h=Array.prototype.slice.call(arguments),e=h.shift(),"undefined"!=typeof c.debug?c.debug.apply(c,[e,h]):c.log.apply(c,[e,h])):e="\n"+arguments[0]+"\n",f=1,g=arguments.length;g>f;++f){if(i=arguments[f],"object"==typeof i&&"undefined"!=typeof k)try{i=k.stringify(i)
}catch(j){}e+="\n"+i+"\n"}return b?(b.value+=e+"\n-----\n",b.scrollTop=b.scrollHeight-b.clientHeight):a||l(e),!0},m.getInternetExplorerMajorVersion=function(){var a=m.getInternetExplorerMajorVersion.cached="undefined"!=typeof m.getInternetExplorerMajorVersion.cached?m.getInternetExplorerMajorVersion.cached:function(){for(var a=3,b=d.createElement("div"),c=b.getElementsByTagName("i");(b.innerHTML="<!--[if gt IE "+ ++a+"]><i></i><![endif]-->")&&c[0];);return a>4?a:!1}();return a},m.isInternetExplorer=function(){var a=m.isInternetExplorer.cached="undefined"!=typeof m.isInternetExplorer.cached?m.isInternetExplorer.cached:Boolean(m.getInternetExplorerMajorVersion());
return a},m.emulated={pushState:!Boolean(a.history&&a.history.pushState&&a.history.replaceState&&!(/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(e.userAgent)||/AppleWebKit\/5([0-2]|3[0-2])/i.test(e.userAgent))),hashChange:Boolean(!("onhashchange"in a||"onhashchange"in d)||m.isInternetExplorer()&&m.getInternetExplorerMajorVersion()<8)},m.enabled=!m.emulated.pushState,m.bugs={setHash:Boolean(!m.emulated.pushState&&"Apple Computer, Inc."===e.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(e.userAgent)),safariPoll:Boolean(!m.emulated.pushState&&"Apple Computer, Inc."===e.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(e.userAgent)),ieDoubleCheck:Boolean(m.isInternetExplorer()&&m.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(m.isInternetExplorer()&&m.getInternetExplorerMajorVersion()<7)},m.isEmptyObject=function(a){for(var b in a)return!1;
return!0},m.cloneObject=function(a){var b,c;return a?(b=k.stringify(a),c=k.parse(b)):c={},c},m.getRootUrl=function(){var a=d.location.protocol+"//"+(d.location.hostname||d.location.host);return d.location.port&&(a+=":"+d.location.port),a+="/"},m.getBaseHref=function(){var a=d.getElementsByTagName("base"),b=null,c="";return 1===a.length&&(b=a[0],c=b.href.replace(/[^\/]+$/,"")),c=c.replace(/\/+$/,""),c&&(c+="/"),c},m.getBaseUrl=function(){var a=m.getBaseHref()||m.getBasePageUrl()||m.getRootUrl();return a},m.getPageUrl=function(){var c,a=m.getState(!1,!1),b=(a||{}).url||d.location.href;
return c=b.replace(/\/+$/,"").replace(/[^\/]+$/,function(a){return/\./.test(a)?a:a+"/"})},m.getBasePageUrl=function(){var a=d.location.href.replace(/[#\?].*/,"").replace(/[^\/]+$/,function(a){return/[^\/]$/.test(a)?"":a}).replace(/\/+$/,"")+"/";return a},m.getFullUrl=function(a,b){var c=a,d=a.substring(0,1);return b="undefined"==typeof b?!0:b,/[a-z]+\:\/\//.test(a)||(c="/"===d?m.getRootUrl()+a.replace(/^\/+/,""):"#"===d?m.getPageUrl().replace(/#.*/,"")+a:"?"===d?m.getPageUrl().replace(/[\?#].*/,"")+a:b?m.getBaseUrl()+a.replace(/^(\.\/)+/,""):m.getBasePageUrl()+a.replace(/^(\.\/)+/,"")),c.replace(/\#$/,"")
},m.getShortUrl=function(a){var b=a,c=m.getBaseUrl(),d=m.getRootUrl();return m.emulated.pushState&&(b=b.replace(c,"")),b=b.replace(d,"/"),m.isTraditionalAnchor(b)&&(b="./"+b),b=b.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")},m.store={},m.idToState=m.idToState||{},m.stateToId=m.stateToId||{},m.urlToId=m.urlToId||{},m.storedStates=m.storedStates||[],m.savedStates=m.savedStates||[],m.normalizeStore=function(){m.store.idToState=m.store.idToState||{},m.store.urlToId=m.store.urlToId||{},m.store.stateToId=m.store.stateToId||{}
},m.getState=function(a,b){"undefined"==typeof a&&(a=!0),"undefined"==typeof b&&(b=!0);var c=m.getLastSavedState();return!c&&b&&(c=m.createStateObject()),a&&(c=m.cloneObject(c),c.url=c.cleanUrl||c.url),c},m.getIdByState=function(a){var c,b=m.extractId(a.url);if(!b)if(c=m.getStateString(a),"undefined"!=typeof m.stateToId[c])b=m.stateToId[c];else if("undefined"!=typeof m.store.stateToId[c])b=m.store.stateToId[c];else{for(;;)if(b=(new Date).getTime()+String(Math.random()).replace(/\D/g,""),"undefined"==typeof m.idToState[b]&&"undefined"==typeof m.store.idToState[b])break;
m.stateToId[c]=b,m.idToState[b]=a}return b},m.normalizeState=function(a){var b,c;return a&&"object"==typeof a||(a={}),"undefined"!=typeof a.normalized?a:(a.data&&"object"==typeof a.data||(a.data={}),b={},b.normalized=!0,b.title=a.title||"",b.url=m.getFullUrl(m.unescapeString(a.url||d.location.href)),b.hash=m.getShortUrl(b.url),b.data=m.cloneObject(a.data),b.id=m.getIdByState(b),b.cleanUrl=b.url.replace(/\??\&_suid.*/,""),b.url=b.cleanUrl,c=!m.isEmptyObject(b.data),(b.title||c)&&(b.hash=m.getShortUrl(b.url).replace(/\??\&_suid.*/,""),/\?/.test(b.hash)||(b.hash+="?"),b.hash+="&_suid="+b.id),b.hashedUrl=m.getFullUrl(b.hash),(m.emulated.pushState||m.bugs.safariPoll)&&m.hasUrlDuplicate(b)&&(b.url=b.hashedUrl),b)
},m.createStateObject=function(a,b,c){var d={data:a,title:b,url:c};return d=m.normalizeState(d)},m.getStateById=function(a){a=String(a);var c=m.idToState[a]||m.store.idToState[a]||b;return c},m.getStateString=function(a){var b,c,d;return b=m.normalizeState(a),c={data:b.data,title:a.title,url:a.url},d=k.stringify(c)},m.getStateId=function(a){var b,c;return b=m.normalizeState(a),c=b.id},m.getHashByState=function(a){var b,c;return b=m.normalizeState(a),c=b.hash},m.extractId=function(a){var b,c,d;return c=/(.*)\&_suid=([0-9]+)$/.exec(a),d=c?c[1]||a:a,b=c?String(c[2]||""):"",b||!1
},m.isTraditionalAnchor=function(a){var b=!/[\/\?\.]/.test(a);return b},m.extractState=function(a,b){var d,e,c=null;return b=b||!1,d=m.extractId(a),d&&(c=m.getStateById(d)),c||(e=m.getFullUrl(a),d=m.getIdByUrl(e)||!1,d&&(c=m.getStateById(d)),c||!b||m.isTraditionalAnchor(a)||(c=m.createStateObject(null,null,e))),c},m.getIdByUrl=function(a){var c=m.urlToId[a]||m.store.urlToId[a]||b;return c},m.getLastSavedState=function(){return m.savedStates[m.savedStates.length-1]||b},m.getLastStoredState=function(){return m.storedStates[m.storedStates.length-1]||b
},m.hasUrlDuplicate=function(a){var c,b=!1;return c=m.extractState(a.url),b=c&&c.id!==a.id},m.storeState=function(a){return m.urlToId[a.url]=a.id,m.storedStates.push(m.cloneObject(a)),a},m.isLastSavedState=function(a){var c,d,e,b=!1;return m.savedStates.length&&(c=a.id,d=m.getLastSavedState(),e=d.id,b=c===e),b},m.saveState=function(a){return m.isLastSavedState(a)?!1:(m.savedStates.push(m.cloneObject(a)),!0)},m.getStateByIndex=function(a){var b=null;return b="undefined"==typeof a?m.savedStates[m.savedStates.length-1]:0>a?m.savedStates[m.savedStates.length+a]:m.savedStates[a]
},m.getHash=function(){var a=m.unescapeHash(d.location.hash);return a},m.unescapeString=function(b){for(var d,c=b;;){if(d=a.unescape(c),d===c)break;c=d}return c},m.unescapeHash=function(a){var b=m.normalizeHash(a);return b=m.unescapeString(b)},m.normalizeHash=function(a){var b=a.replace(/[^#]*#/,"").replace(/#.*/,"");return b},m.setHash=function(a,b){var c,e,f;return b!==!1&&m.busy()?(m.pushQueue({scope:m,callback:m.setHash,args:arguments,queue:b}),!1):(c=m.escapeHash(a),m.busy(!0),e=m.extractState(a,!0),e&&!m.emulated.pushState?m.pushState(e.data,e.title,e.url,!1):d.location.hash!==c&&(m.bugs.setHash?(f=m.getPageUrl(),m.pushState(null,null,f+"#"+c,!1)):d.location.hash=c),m)
},m.escapeHash=function(b){var c=m.normalizeHash(b);return c=a.escape(c),m.bugs.hashEscape||(c=c.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),c},m.getHashByUrl=function(a){var b=String(a).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return b=m.unescapeHash(b)},m.setTitle=function(a){var c,b=a.title;b||(c=m.getStateByIndex(0),c&&c.url===a.url&&(b=c.title||m.options.initialTitle));try{d.getElementsByTagName("title")[0].innerHTML=b.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")
}catch(e){}return d.title=b,m},m.queues=[],m.busy=function(a){if("undefined"!=typeof a?m.busy.flag=a:"undefined"==typeof m.busy.flag&&(m.busy.flag=!1),!m.busy.flag){h(m.busy.timeout);var b=function(){var a,c,d;if(!m.busy.flag)for(a=m.queues.length-1;a>=0;--a)c=m.queues[a],0!==c.length&&(d=c.shift(),m.fireQueueItem(d),m.busy.timeout=g(b,m.options.busyDelay))};m.busy.timeout=g(b,m.options.busyDelay)}return m.busy.flag},m.busy.flag=!1,m.fireQueueItem=function(a){return a.callback.apply(a.scope||m,a.args||[])},m.pushQueue=function(a){return m.queues[a.queue||0]=m.queues[a.queue||0]||[],m.queues[a.queue||0].push(a),m
},m.queue=function(a,b){return"function"==typeof a&&(a={callback:a}),"undefined"!=typeof b&&(a.queue=b),m.busy()?m.pushQueue(a):m.fireQueueItem(a),m},m.clearQueue=function(){return m.busy.flag=!1,m.queues=[],m},m.stateChanged=!1,m.doubleChecker=!1,m.doubleCheckComplete=function(){return m.stateChanged=!0,m.doubleCheckClear(),m},m.doubleCheckClear=function(){return m.doubleChecker&&(h(m.doubleChecker),m.doubleChecker=!1),m},m.doubleCheck=function(a){return m.stateChanged=!1,m.doubleCheckClear(),m.bugs.ieDoubleCheck&&(m.doubleChecker=g(function(){return m.doubleCheckClear(),m.stateChanged||a(),!0
},m.options.doubleCheckInterval)),m},m.safariStatePoll=function(){var c,b=m.extractState(d.location.href);if(!m.isLastSavedState(b))return c=b,c||(c=m.createStateObject()),m.Adapter.trigger(a,"popstate"),m},m.back=function(a){return a!==!1&&m.busy()?(m.pushQueue({scope:m,callback:m.back,args:arguments,queue:a}),!1):(m.busy(!0),m.doubleCheck(function(){m.back(!1)}),n.go(-1),!0)},m.forward=function(a){return a!==!1&&m.busy()?(m.pushQueue({scope:m,callback:m.forward,args:arguments,queue:a}),!1):(m.busy(!0),m.doubleCheck(function(){m.forward(!1)
}),n.go(1),!0)},m.go=function(a,b){var c;if(a>0)for(c=1;a>=c;++c)m.forward(b);else{if(!(0>a))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(c=-1;c>=a;--c)m.back(b)}return m},m.emulated.pushState){var o=function(){};m.pushState=m.pushState||o,m.replaceState=m.replaceState||o}else m.onPopState=function(b,c){var g,h,e=!1,f=!1;return m.doubleCheckComplete(),(g=m.getHash())?(h=m.extractState(g||d.location.href,!0),h?m.replaceState(h.data,h.title,h.url,!1):(m.Adapter.trigger(a,"anchorchange"),m.busy(!1)),m.expectedStateId=!1,!1):(e=m.Adapter.extractEventData("state",b,c)||!1,f=e?m.getStateById(e):m.expectedStateId?m.getStateById(m.expectedStateId):m.extractState(d.location.href),f||(f=m.createStateObject(null,null,d.location.href)),m.expectedStateId=!1,m.isLastSavedState(f)?(m.busy(!1),!1):(m.storeState(f),m.saveState(f),m.setTitle(f),m.Adapter.trigger(a,"statechange"),m.busy(!1),!0))
},m.Adapter.bind(a,"popstate",m.onPopState),m.pushState=function(b,c,d,e){if(m.getHashByUrl(d)&&m.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(e!==!1&&m.busy())return m.pushQueue({scope:m,callback:m.pushState,args:arguments,queue:e}),!1;m.busy(!0);var f=m.createStateObject(b,c,d);return m.isLastSavedState(f)?m.busy(!1):(m.storeState(f),m.expectedStateId=f.id,n.pushState(f.id,f.title,f.url),m.Adapter.trigger(a,"popstate")),!0},m.replaceState=function(b,c,d,e){if(m.getHashByUrl(d)&&m.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");
if(e!==!1&&m.busy())return m.pushQueue({scope:m,callback:m.replaceState,args:arguments,queue:e}),!1;m.busy(!0);var f=m.createStateObject(b,c,d);return m.isLastSavedState(f)?m.busy(!1):(m.storeState(f),m.expectedStateId=f.id,n.replaceState(f.id,f.title,f.url),m.Adapter.trigger(a,"popstate")),!0};if(f){try{m.store=k.parse(f.getItem("History.store"))||{}}catch(p){m.store={}}m.normalizeStore()}else m.store={},m.normalizeStore();m.Adapter.bind(a,"beforeunload",m.clearAllIntervals),m.Adapter.bind(a,"unload",m.clearAllIntervals),m.saveState(m.storeState(m.extractState(d.location.href,!0))),f&&(m.onUnload=function(){var a,b;
try{a=k.parse(f.getItem("History.store"))||{}}catch(c){a={}}a.idToState=a.idToState||{},a.urlToId=a.urlToId||{},a.stateToId=a.stateToId||{};for(b in m.idToState)m.idToState.hasOwnProperty(b)&&(a.idToState[b]=m.idToState[b]);for(b in m.urlToId)m.urlToId.hasOwnProperty(b)&&(a.urlToId[b]=m.urlToId[b]);for(b in m.stateToId)m.stateToId.hasOwnProperty(b)&&(a.stateToId[b]=m.stateToId[b]);m.store=a,m.normalizeStore(),f.setItem("History.store",k.stringify(a))},m.intervalList.push(i(m.onUnload,m.options.storeInterval)),m.Adapter.bind(a,"beforeunload",m.onUnload),m.Adapter.bind(a,"unload",m.onUnload)),m.emulated.pushState||(m.bugs.safariPoll&&m.intervalList.push(i(m.safariStatePoll,m.options.safariPollInterval)),("Apple Computer, Inc."===e.vendor||"Mozilla"===(e.appCodeName||""))&&(m.Adapter.bind(a,"hashchange",function(){m.Adapter.trigger(a,"popstate")
}),m.getHash()&&m.Adapter.onDomLoad(function(){m.Adapter.trigger(a,"hashchange")})))},m.init()}(window);var b=[];a.fn.route=function(c){if(this.is("a")){var d=this.attr("custom-title"),e=this.attr("title");if(d&&(e=d),e){var f=a.joomla.appendTitle;"before"===f&&(e=a.joomla.sitename+(e?" - "+e:"")),"after"===f&&(e=(e?e+" - ":"")+a.joomla.sitename)}else e=a(document).find("title").text();var g=(new Date).getTime();b[g]=g,History.pushState(a.extend({timestamp:g,refresh:!0},c),e,this.attr("href"))}return this},History.Adapter.bind(window,"statechange",function(){var a=History.getState();
a.id===History.savedStates[0].id&&(window.location=a.url),a.data.timestamp in b?delete b[a.data.timestamp]:a.data.refresh&&(window.location=a.url)})};d(),b.resolveWith(d)};FD40.module("history",a)}(),function(){var a=function(a){var b=this,c=function(){a.fn.image=function(b){var b=a.Image[b];return b&&b.apply(this[0],a.makeArray(arguments).slice(1))},a.Image={get:function(b){var c="IMG"===this.nodeName,d=a(c?this:new Image),e=a.Deferred();return d.load(function(){var a,b,f,g;c||d.appendTo("body");var h={width:a=d.width(),height:b=d.height(),aspectRatio:f=a/b,orientation:g=1===f?"square":1>f?"tall":"wide"};
d.css({position:"absolute",left:"-99999px"}).data(h).addClass("orientation-"+g).removeAttr("style"),c||d.detach(),e.resolve(d,h)}).error(function(){e.reject()}).attr("src",b),e},aspectRatio:function(b,c){return a.isPlainObject(b)&&(b=b.width,c=b.height),b/c},orientation:function(b,c){return a.isPlainObject(b)&&(b=b.width,c=b.height),b===c?"square":b>c?"wide":"tall"},resizeProportionate:function(a,b,c,d,e){var f=a,g=b,h=c/a;f=a*h,g=b*h;var i=g>d;return"outer"==e&&(i=d>g),i&&(h=d/b,f=a*h,g=b*h),{top:(d-g)/2,left:(c-f)/2,width:f,height:g}
},resizeWithin:function(b,c,d,e){return a.Image.resizeProportionate(b,c,d,e,"inner")},resizeToFill:function(b,c,d,e){return a.Image.resizeProportionate(b,c,d,e,"outer")}}};c(),b.resolveWith(c)};FD40.module("image",a)}(),function(){var a=function(a){var b=this,d=function(){!function(a,c){"function"==typeof define&&define.amd?define(["leaflet"],c):"object"==typeof modules&&b.exports?b.exports=c(require("leaflet")):c(L)}(this,function(a){"use strict";return a.TileLayer.Provider=a.TileLayer.extend({initialize:function(b,c){var d=a.TileLayer.Provider.providers,e=b.split("."),f=e[0],g=e[1];
if(!d[f])throw"No such provider ("+f+")";var h={url:d[f].url,options:d[f].options};if(g&&"variants"in d[f]){if(!(g in d[f].variants))throw"No such variant of "+f+" ("+g+")";var j,i=d[f].variants[g];j="string"==typeof i?{variant:i}:i.options,h={url:i.url||h.url,options:a.Util.extend({},h.options,j)}}var k=function(a){return-1===a.indexOf("{attribution.")?a:a.replace(/\{attribution.(\w*)\}/,function(a,b){return k(d[b].options.attribution)})};h.options.attribution=k(h.options.attribution);var l=a.Util.extend({},h.options,c);
a.TileLayer.prototype.initialize.call(this,h.url,l)}}),a.TileLayer.Provider.providers={OpenStreetMap:{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",options:{maxZoom:19,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'},variants:{Mapnik:{},BlackAndWhite:{url:"https://tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png",options:{maxZoom:18}},DE:{url:"https://{s}.tile.openstreetmap.de/tiles/osmde/{z}/{x}/{y}.png",options:{maxZoom:18}},CH:{url:"https://tile.osm.ch/switzerland/{z}/{x}/{y}.png",options:{maxZoom:18,bounds:[[45,5],[48,11]]}},France:{url:"https://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png",options:{maxZoom:20,attribution:"&copy; Openstreetmap France | {attribution.OpenStreetMap}"}},HOT:{url:"https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",options:{attribution:'{attribution.OpenStreetMap}, Tiles style by <a href="https://www.hotosm.org/" target="_blank">Humanitarian OpenStreetMap Team</a> hosted by <a href="https://openstreetmap.fr/" target="_blank">OpenStreetMap France</a>'}},BZH:{url:"https://tile.openstreetmap.bzh/br/{z}/{x}/{y}.png",options:{attribution:'{attribution.OpenStreetMap}, Tiles courtesy of <a href="http://www.openstreetmap.bzh/" target="_blank">Breton OpenStreetMap Team</a>',bounds:[[46.2,-5.5],[50,.7]]}}}},OpenSeaMap:{url:"https://tiles.openseamap.org/seamark/{z}/{x}/{y}.png",options:{attribution:'Map data: &copy; <a href="http://www.openseamap.org">OpenSeaMap</a> contributors'}},OpenPtMap:{url:"http://openptmap.org/tiles/{z}/{x}/{y}.png",options:{maxZoom:17,attribution:'Map data: &copy; <a href="http://www.openptmap.org">OpenPtMap</a> contributors'}},OpenTopoMap:{url:"https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",options:{maxZoom:17,attribution:'Map data: {attribution.OpenStreetMap}, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'}},OpenRailwayMap:{url:"https://{s}.tiles.openrailwaymap.org/standard/{z}/{x}/{y}.png",options:{maxZoom:19,attribution:'Map data: {attribution.OpenStreetMap} | Map style: &copy; <a href="https://www.OpenRailwayMap.org">OpenRailwayMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'}},OpenFireMap:{url:"http://openfiremap.org/hytiles/{z}/{x}/{y}.png",options:{maxZoom:19,attribution:'Map data: {attribution.OpenStreetMap} | Map style: &copy; <a href="http://www.openfiremap.org">OpenFireMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'}},SafeCast:{url:"https://s3.amazonaws.com/te512.safecast.org/{z}/{x}/{y}.png",options:{maxZoom:16,attribution:'Map data: {attribution.OpenStreetMap} | Map style: &copy; <a href="https://blog.safecast.org/about/">SafeCast</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'}},Thunderforest:{url:"https://{s}.tile.thunderforest.com/{variant}/{z}/{x}/{y}.png?apikey={apikey}",options:{attribution:'&copy; <a href="http://www.thunderforest.com/">Thunderforest</a>, {attribution.OpenStreetMap}',variant:"cycle",apikey:"<insert your api key here>",maxZoom:22},variants:{OpenCycleMap:"cycle",Transport:{options:{variant:"transport"}},TransportDark:{options:{variant:"transport-dark"}},SpinalMap:{options:{variant:"spinal-map"}},Landscape:"landscape",Outdoors:"outdoors",Pioneer:"pioneer"}},OpenMapSurfer:{url:"https://maps.heigit.org/openmapsurfer/tiles/{variant}/webmercator/{z}/{x}/{y}.png",options:{maxZoom:19,variant:"roads",attribution:'Imagery from <a href="http://giscience.uni-hd.de/">GIScience Research Group @ University of Heidelberg</a> &mdash; Map data {attribution.OpenStreetMap}'},variants:{Roads:"roads",AdminBounds:{options:{variant:"adminb",maxZoom:18}}}},Hydda:{url:"https://{s}.tile.openstreetmap.se/hydda/{variant}/{z}/{x}/{y}.png",options:{maxZoom:18,variant:"full",attribution:'Tiles courtesy of <a href="http://openstreetmap.se/" target="_blank">OpenStreetMap Sweden</a> &mdash; Map data {attribution.OpenStreetMap}'},variants:{Full:"full",Base:"base",RoadsAndLabels:"roads_and_labels"}},MapBox:{url:"https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}{r}.png?access_token={accessToken}",options:{attribution:'<a href="https://www.mapbox.com/about/maps/" target="_blank">&copy; Mapbox</a> {attribution.OpenStreetMap} <a href="https://www.mapbox.com/map-feedback/" target="_blank">Improve this map</a>',subdomains:"abcd",id:"mapbox.streets",accessToken:"<insert your access token here>"}},Stamen:{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/{variant}/{z}/{x}/{y}{r}.{ext}",options:{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data {attribution.OpenStreetMap}',subdomains:"abcd",minZoom:0,maxZoom:20,variant:"toner",ext:"png"},variants:{Toner:"toner",TonerBackground:"toner-background",TonerHybrid:"toner-hybrid",TonerLines:"toner-lines",TonerLabels:"toner-labels",TonerLite:"toner-lite",Watercolor:{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/{variant}/{z}/{x}/{y}.{ext}",options:{variant:"watercolor",ext:"jpg",minZoom:1,maxZoom:16}},Terrain:{options:{variant:"terrain",minZoom:0,maxZoom:18}},TerrainBackground:{options:{variant:"terrain-background",minZoom:0,maxZoom:18}},TopOSMRelief:{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/{variant}/{z}/{x}/{y}.{ext}",options:{variant:"toposm-color-relief",ext:"jpg",bounds:[[22,-132],[51,-56]]}},TopOSMFeatures:{options:{variant:"toposm-features",bounds:[[22,-132],[51,-56]],opacity:.9}}}},Esri:{url:"https://server.arcgisonline.com/ArcGIS/rest/services/{variant}/MapServer/tile/{z}/{y}/{x}",options:{variant:"World_Street_Map",attribution:"Tiles &copy; Esri"},variants:{WorldStreetMap:{options:{attribution:"{attribution.Esri} &mdash; Source: Esri, DeLorme, NAVTEQ, USGS, Intermap, iPC, NRCAN, Esri Japan, METI, Esri China (Hong Kong), Esri (Thailand), TomTom, 2012"}},DeLorme:{options:{variant:"Specialty/DeLorme_World_Base_Map",minZoom:1,maxZoom:11,attribution:"{attribution.Esri} &mdash; Copyright: &copy;2012 DeLorme"}},WorldTopoMap:{options:{variant:"World_Topo_Map",attribution:"{attribution.Esri} &mdash; Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN, GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community"}},WorldImagery:{options:{variant:"World_Imagery",attribution:"{attribution.Esri} &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"}},WorldTerrain:{options:{variant:"World_Terrain_Base",maxZoom:13,attribution:"{attribution.Esri} &mdash; Source: USGS, Esri, TANA, DeLorme, and NPS"}},WorldShadedRelief:{options:{variant:"World_Shaded_Relief",maxZoom:13,attribution:"{attribution.Esri} &mdash; Source: Esri"}},WorldPhysical:{options:{variant:"World_Physical_Map",maxZoom:8,attribution:"{attribution.Esri} &mdash; Source: US National Park Service"}},OceanBasemap:{options:{variant:"Ocean_Basemap",maxZoom:13,attribution:"{attribution.Esri} &mdash; Sources: GEBCO, NOAA, CHS, OSU, UNH, CSUMB, National Geographic, DeLorme, NAVTEQ, and Esri"}},NatGeoWorldMap:{options:{variant:"NatGeo_World_Map",maxZoom:16,attribution:"{attribution.Esri} &mdash; National Geographic, Esri, DeLorme, NAVTEQ, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, iPC"}},WorldGrayCanvas:{options:{variant:"Canvas/World_Light_Gray_Base",maxZoom:16,attribution:"{attribution.Esri} &mdash; Esri, DeLorme, NAVTEQ"}}}},OpenWeatherMap:{url:"http://{s}.tile.openweathermap.org/map/{variant}/{z}/{x}/{y}.png?appid={apiKey}",options:{maxZoom:19,attribution:'Map data &copy; <a href="http://openweathermap.org">OpenWeatherMap</a>',apiKey:"<insert your api key here>",opacity:.5},variants:{Clouds:"clouds",CloudsClassic:"clouds_cls",Precipitation:"precipitation",PrecipitationClassic:"precipitation_cls",Rain:"rain",RainClassic:"rain_cls",Pressure:"pressure",PressureContour:"pressure_cntr",Wind:"wind",Temperature:"temp",Snow:"snow"}},HERE:{url:"https://{s}.{base}.maps.api.here.com/maptile/2.1/{type}/{mapID}/{variant}/{z}/{x}/{y}/{size}/{format}?app_id={app_id}&app_code={app_code}&lg={language}",options:{attribution:"Map &copy; 1987-"+(new Date).getFullYear()+' <a href="http://developer.here.com">HERE</a>',subdomains:"1234",mapID:"newest",app_id:"<insert your app_id here>",app_code:"<insert your app_code here>",base:"base",variant:"normal.day",maxZoom:20,type:"maptile",language:"eng",format:"png8",size:"256"},variants:{normalDay:"normal.day",normalDayCustom:"normal.day.custom",normalDayGrey:"normal.day.grey",normalDayMobile:"normal.day.mobile",normalDayGreyMobile:"normal.day.grey.mobile",normalDayTransit:"normal.day.transit",normalDayTransitMobile:"normal.day.transit.mobile",normalNight:"normal.night",normalNightMobile:"normal.night.mobile",normalNightGrey:"normal.night.grey",normalNightGreyMobile:"normal.night.grey.mobile",normalNightTransit:"normal.night.transit",normalNightTransitMobile:"normal.night.transit.mobile",reducedDay:"reduced.day",reducedNight:"reduced.night",basicMap:{options:{type:"basetile"}},mapLabels:{options:{type:"labeltile",format:"png"}},trafficFlow:{options:{base:"traffic",type:"flowtile"}},carnavDayGrey:"carnav.day.grey",hybridDay:{options:{base:"aerial",variant:"hybrid.day"}},hybridDayMobile:{options:{base:"aerial",variant:"hybrid.day.mobile"}},hybridDayTransit:{options:{base:"aerial",variant:"hybrid.day.transit"}},hybridDayGrey:{options:{base:"aerial",variant:"hybrid.grey.day"}},pedestrianDay:"pedestrian.day",pedestrianNight:"pedestrian.night",satelliteDay:{options:{base:"aerial",variant:"satellite.day"}},terrainDay:{options:{base:"aerial",variant:"terrain.day"}},terrainDayMobile:{options:{base:"aerial",variant:"terrain.day.mobile"}}}},FreeMapSK:{url:"http://t{s}.freemap.sk/T/{z}/{x}/{y}.jpeg",options:{minZoom:8,maxZoom:16,subdomains:"1234",bounds:[[47.204642,15.996093],[49.830896,22.576904]],attribution:'{attribution.OpenStreetMap}, vizualization CC-By-SA 2.0 <a href="http://freemap.sk">Freemap.sk</a>'}},MtbMap:{url:"http://tile.mtbmap.cz/mtbmap_tiles/{z}/{x}/{y}.png",options:{attribution:"{attribution.OpenStreetMap} &amp; USGS"}},CartoDB:{url:"https://{s}.basemaps.cartocdn.com/{variant}/{z}/{x}/{y}{r}.png",options:{attribution:'{attribution.OpenStreetMap} &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:19,variant:"light_all"},variants:{Positron:"light_all",PositronNoLabels:"light_nolabels",PositronOnlyLabels:"light_only_labels",DarkMatter:"dark_all",DarkMatterNoLabels:"dark_nolabels",DarkMatterOnlyLabels:"dark_only_labels",Voyager:"rastertiles/voyager",VoyagerNoLabels:"rastertiles/voyager_nolabels",VoyagerOnlyLabels:"rastertiles/voyager_only_labels",VoyagerLabelsUnder:"rastertiles/voyager_labels_under"}},HikeBike:{url:"https://tiles.wmflabs.org/{variant}/{z}/{x}/{y}.png",options:{maxZoom:19,attribution:"{attribution.OpenStreetMap}",variant:"hikebike"},variants:{HikeBike:{},HillShading:{options:{maxZoom:15,variant:"hillshading"}}}},BasemapAT:{url:"https://maps{s}.wien.gv.at/basemap/{variant}/normal/google3857/{z}/{y}/{x}.{format}",options:{maxZoom:19,attribution:'Datenquelle: <a href="https://www.basemap.at">basemap.at</a>',subdomains:["","1","2","3","4"],format:"png",bounds:[[46.35877,8.782379],[49.037872,17.189532]],variant:"geolandbasemap"},variants:{basemap:{options:{maxZoom:20,variant:"geolandbasemap"}},grau:"bmapgrau",overlay:"bmapoverlay",highdpi:{options:{variant:"bmaphidpi",format:"jpeg"}},orthofoto:{options:{maxZoom:20,variant:"bmaporthofoto30cm",format:"jpeg"}}}},nlmaps:{url:"https://geodata.nationaalgeoregister.nl/tiles/service/wmts/{variant}/EPSG:3857/{z}/{x}/{y}.png",options:{minZoom:6,maxZoom:19,bounds:[[50.5,3.25],[54,7.6]],attribution:'Kaartgegevens &copy; <a href="kadaster.nl">Kadaster</a>'},variants:{standaard:"brtachtergrondkaart",pastel:"brtachtergrondkaartpastel",grijs:"brtachtergrondkaartgrijs",luchtfoto:{url:"https://geodata.nationaalgeoregister.nl/luchtfoto/rgb/wmts/1.0.0/2016_ortho25/EPSG:3857/{z}/{x}/{y}.png"}}},NASAGIBS:{url:"https://map1.vis.earthdata.nasa.gov/wmts-webmerc/{variant}/default/{time}/{tilematrixset}{maxZoom}/{z}/{y}/{x}.{format}",options:{attribution:'Imagery provided by services from the Global Imagery Browse Services (GIBS), operated by the NASA/GSFC/Earth Science Data and Information System (<a href="https://earthdata.nasa.gov">ESDIS</a>) with funding provided by NASA/HQ.',bounds:[[-85.0511287776,-179.999999975],[85.0511287776,179.999999975]],minZoom:1,maxZoom:9,format:"jpg",time:"",tilematrixset:"GoogleMapsCompatible_Level"},variants:{ModisTerraTrueColorCR:"MODIS_Terra_CorrectedReflectance_TrueColor",ModisTerraBands367CR:"MODIS_Terra_CorrectedReflectance_Bands367",ViirsEarthAtNight2012:{options:{variant:"VIIRS_CityLights_2012",maxZoom:8}},ModisTerraLSTDay:{options:{variant:"MODIS_Terra_Land_Surface_Temp_Day",format:"png",maxZoom:7,opacity:.75}},ModisTerraSnowCover:{options:{variant:"MODIS_Terra_Snow_Cover",format:"png",maxZoom:8,opacity:.75}},ModisTerraAOD:{options:{variant:"MODIS_Terra_Aerosol",format:"png",maxZoom:6,opacity:.75}},ModisTerraChlorophyll:{options:{variant:"MODIS_Terra_Chlorophyll_A",format:"png",maxZoom:7,opacity:.75}}}},NLS:{url:"https://nls-{s}.tileserver.com/nls/{z}/{x}/{y}.jpg",options:{attribution:'<a href="http://geo.nls.uk/maps/">National Library of Scotland Historic Maps</a>',bounds:[[49.6,-12],[61.7,3]],minZoom:1,maxZoom:18,subdomains:"0123"}},JusticeMap:{url:"http://www.justicemap.org/tile/{size}/{variant}/{z}/{x}/{y}.png",options:{attribution:'<a href="http://www.justicemap.org/terms.php">Justice Map</a>',size:"county",bounds:[[14,-180],[72,-56]]},variants:{income:"income",americanIndian:"indian",asian:"asian",black:"black",hispanic:"hispanic",multi:"multi",nonWhite:"nonwhite",white:"white",plurality:"plural"}},Wikimedia:{url:"https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}{r}.png",options:{attribution:'<a href="https://wikimediafoundation.org/wiki/Maps_Terms_of_Use">Wikimedia</a>',minZoom:1,maxZoom:19}},GeoportailFrance:{url:"https://wxs.ign.fr/{apikey}/geoportail/wmts?REQUEST=GetTile&SERVICE=WMTS&VERSION=1.0.0&STYLE={style}&TILEMATRIXSET=PM&FORMAT={format}&LAYER={variant}&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",options:{attribution:'<a target="_blank" href="https://www.geoportail.gouv.fr/">Geoportail France</a>',bounds:[[-75,-180],[81,180]],minZoom:2,maxZoom:18,apikey:"choisirgeoportail",format:"image/jpeg",style:"normal",variant:"GEOGRAPHICALGRIDSYSTEMS.MAPS.SCAN-EXPRESS.STANDARD"},variants:{parcels:{options:{variant:"CADASTRALPARCELS.PARCELS",maxZoom:20,style:"bdparcellaire",format:"image/png"}},ignMaps:"GEOGRAPHICALGRIDSYSTEMS.MAPS",maps:"GEOGRAPHICALGRIDSYSTEMS.MAPS.SCAN-EXPRESS.STANDARD",orthos:{options:{maxZoom:19,variant:"ORTHOIMAGERY.ORTHOPHOTOS"}}}},OneMapSG:{url:"https://maps-{s}.onemap.sg/v3/{variant}/{z}/{x}/{y}.png",options:{variant:"Default",minZoom:11,maxZoom:18,bounds:[[1.56073,104.11475],[1.16,103.502]],attribution:'<img src="https://docs.onemap.sg/maps/images/oneMap64-01.png" style="height:20px;width:20px;"/> New OneMap | Map data &copy; contributors, <a href="http://SLA.gov.sg">Singapore Land Authority</a>'},variants:{Default:"Default",Night:"Night",Original:"Original",Grey:"Grey",LandLot:"LandLot"}}},a.tileLayer.provider=function(b,c){return new a.TileLayer.Provider(b,c)
},a})};d(),b.resolveWith(d)};FD40.module("leaflet-providers",a)}(),function(){var a=function(a){var b=this,d=function(){!function(a,c){"object"==typeof d&&"undefined"!=typeof b?c(d):"function"==typeof define&&define.amd?define(["exports"],c):c(a.L={})}(this,function(a){"use strict";function d(a){var b,c,d,e;for(c=1,d=arguments.length;d>c;c++){e=arguments[c];for(b in e)a[b]=e[b]}return a}function f(a,b){var c=Array.prototype.slice;if(a.bind)return a.bind.apply(a,c.call(arguments,1));var d=c.call(arguments,2);
return function(){return a.apply(b,d.length?d.concat(c.call(arguments)):arguments)}}function h(a){return a._leaflet_id=a._leaflet_id||++g,a._leaflet_id}function i(a,b,c){var d,e,f,g;return g=function(){d=!1,e&&(f.apply(c,e),e=!1)},f=function(){d?e=arguments:(a.apply(c,arguments),setTimeout(g,b),d=!0)}}function j(a,b,c){var d=b[1],e=b[0],f=d-e;return a===d&&c?a:((a-e)%f+f)%f+e}function k(){return!1}function l(a,b){var c=Math.pow(10,void 0===b?6:b);return Math.round(a*c)/c}function m(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")
}function n(a){return m(a).split(/\s+/)}function o(a,b){a.hasOwnProperty("options")||(a.options=a.options?e(a.options):{});for(var c in b)a.options[c]=b[c];return a.options}function p(a,b,c){var d=[];for(var e in a)d.push(encodeURIComponent(c?e.toUpperCase():e)+"="+encodeURIComponent(a[e]));return(b&&-1!==b.indexOf("?")?"&":"?")+d.join("&")}function r(a,b){return a.replace(q,function(a,c){var d=b[c];if(void 0===d)throw new Error("No value provided for variable "+a);return"function"==typeof d&&(d=d(b)),d})}function t(a,b){for(var c=0;c<a.length;c++)if(a[c]===b)return c;
return-1}function v(a){return window["webkit"+a]||window["moz"+a]||window["ms"+a]}function x(a){var b=+new Date,c=Math.max(0,16-(b-w));return w=b+c,window.setTimeout(a,c)}function A(a,b,c){return c&&y===x?(a.call(b),void 0):y.call(window,f(a,b))}function B(a){a&&z.call(window,a)}function D(){}function E(a){if("undefined"!=typeof L&&L&&L.Mixin){a=s(a)?a:[a];for(var b=0;b<a.length;b++)a[b]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)
}}function H(a,b,c){this.x=c?Math.round(a):a,this.y=c?Math.round(b):b}function J(a,b,c){return a instanceof H?a:s(a)?new H(a[0],a[1]):void 0===a||null===a?a:"object"==typeof a&&"x"in a&&"y"in a?new H(a.x,a.y):new H(a,b,c)}function K(a,b){if(a)for(var c=b?[a,b]:a,d=0,e=c.length;e>d;d++)this.extend(c[d])}function M(a,b){return!a||a instanceof K?a:new K(a,b)}function N(a,b){if(a)for(var c=b?[a,b]:a,d=0,e=c.length;e>d;d++)this.extend(c[d])}function O(a,b){return a instanceof N?a:new N(a,b)}function P(a,b,c){if(isNaN(a)||isNaN(b))throw new Error("Invalid LatLng object: ("+a+", "+b+")");
this.lat=+a,this.lng=+b,void 0!==c&&(this.alt=+c)}function Q(a,b,c){return a instanceof P?a:s(a)&&"object"!=typeof a[0]?3===a.length?new P(a[0],a[1],a[2]):2===a.length?new P(a[0],a[1]):null:void 0===a||null===a?a:"object"==typeof a&&"lat"in a?new P(a.lat,"lng"in a?a.lng:a.lon,a.alt):void 0===b?null:new P(a,b,c)}function U(a,b,c,d){return s(a)?(this._a=a[0],this._b=a[1],this._c=a[2],this._d=a[3],void 0):(this._a=a,this._b=b,this._c=c,this._d=d,void 0)}function V(a,b,c,d){return new U(a,b,c,d)}function Y(a){return document.createElementNS("http://www.w3.org/2000/svg",a)
}function Z(a,b){var d,e,f,g,h,i,c="";for(d=0,f=a.length;f>d;d++){for(h=a[d],e=0,g=h.length;g>e;e++)i=h[e],c+=(e?"L":"M")+i.x+" "+i.y;c+=b?Cb?"z":"x":""}return c||"M0 0"}function Eb(a){return navigator.userAgent.toLowerCase().indexOf(a)>=0}function Ob(a,b,c,d){return"touchstart"===b?Qb(a,c,d):"touchmove"===b?Vb(a,c,d):"touchend"===b&&Wb(a,c,d),this}function Pb(a,b,c){var d=a["_leaflet_"+b+c];return"touchstart"===b?a.removeEventListener(Gb,d,!1):"touchmove"===b?a.removeEventListener(Hb,d,!1):"touchend"===b&&(a.removeEventListener(Ib,d,!1),a.removeEventListener(Jb,d,!1)),this
}function Qb(a,b,c){var d=f(function(a){if("mouse"!==a.pointerType&&a.MSPOINTER_TYPE_MOUSE&&a.pointerType!==a.MSPOINTER_TYPE_MOUSE){if(!(Kb.indexOf(a.target.tagName)<0))return;Qc(a)}Ub(a,b)});a["_leaflet_touchstart"+c]=d,a.addEventListener(Gb,d,!1),Mb||(document.documentElement.addEventListener(Gb,Rb,!0),document.documentElement.addEventListener(Hb,Sb,!0),document.documentElement.addEventListener(Ib,Tb,!0),document.documentElement.addEventListener(Jb,Tb,!0),Mb=!0)}function Rb(a){Lb[a.pointerId]=a,Nb++}function Sb(a){Lb[a.pointerId]&&(Lb[a.pointerId]=a)
}function Tb(a){delete Lb[a.pointerId],Nb--}function Ub(a,b){a.touches=[];for(var c in Lb)a.touches.push(Lb[c]);a.changedTouches=[a],b(a)}function Vb(a,b,c){var d=function(a){(a.pointerType!==a.MSPOINTER_TYPE_MOUSE&&"mouse"!==a.pointerType||0!==a.buttons)&&Ub(a,b)};a["_leaflet_touchmove"+c]=d,a.addEventListener(Hb,d,!1)}function Wb(a,b,c){var d=function(a){Ub(a,b)};a["_leaflet_touchend"+c]=d,a.addEventListener(Ib,d,!1),a.addEventListener(Jb,d,!1)}function $b(a,b,c){function h(a){var b;if(wb){if(!bb||"mouse"===a.pointerType)return;
b=Nb}else b=a.touches.length;if(!(b>1)){var c=Date.now(),h=c-(d||c);e=a.touches?a.touches[0]:a,f=h>0&&g>=h,d=c}}function i(a){if(f&&!e.cancelBubble){if(wb){if(!bb||"mouse"===a.pointerType)return;var g,h,c={};for(h in e)g=e[h],c[h]=g&&g.bind?g.bind(e):g;e=c}e.type="dblclick",b(e),d=null}}var d,e,f=!1,g=250;return a[Zb+Xb+c]=h,a[Zb+Yb+c]=i,a[Zb+"dblclick"+c]=b,a.addEventListener(Xb,h,!1),a.addEventListener(Yb,i,!1),a.addEventListener("dblclick",b,!1),this}function _b(a,b){var c=a[Zb+Xb+b],d=a[Zb+Yb+b],e=a[Zb+"dblclick"+b];
return a.removeEventListener(Xb,c,!1),a.removeEventListener(Yb,d,!1),bb||a.removeEventListener("dblclick",e,!1),this}function dc(a){return"string"==typeof a?document.getElementById(a):a}function ec(a,b){var c=a.style[b]||a.currentStyle&&a.currentStyle[b];if((!c||"auto"===c)&&document.defaultView){var d=document.defaultView.getComputedStyle(a,null);c=d?d[b]:null}return"auto"===c?null:c}function fc(a,b,c){var d=document.createElement(a);return d.className=b||"",c&&c.appendChild(d),d}function gc(a){var b=a.parentNode;
b&&b.removeChild(a)}function hc(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function ic(a){var b=a.parentNode;b&&b.lastChild!==a&&b.appendChild(a)}function jc(a){var b=a.parentNode;b&&b.firstChild!==a&&b.insertBefore(a,b.firstChild)}function kc(a,b){if(void 0!==a.classList)return a.classList.contains(b);var c=oc(a);return c.length>0&&new RegExp("(^|\\s)"+b+"(\\s|$)").test(c)}function lc(a,b){if(void 0!==a.classList)for(var c=n(b),d=0,e=c.length;e>d;d++)a.classList.add(c[d]);else if(!kc(a,b)){var f=oc(a);
nc(a,(f?f+" ":"")+b)}}function mc(a,b){void 0!==a.classList?a.classList.remove(b):nc(a,m((" "+oc(a)+" ").replace(" "+b+" "," ")))}function nc(a,b){void 0===a.className.baseVal?a.className=b:a.className.baseVal=b}function oc(a){return a.correspondingElement&&(a=a.correspondingElement),void 0===a.className.baseVal?a.className:a.className.baseVal}function pc(a,b){"opacity"in a.style?a.style.opacity=b:"filter"in a.style&&qc(a,b)}function qc(a,b){var c=!1,d="DXImageTransform.Microsoft.Alpha";try{c=a.filters.item(d)
}catch(e){if(1===b)return}b=Math.round(100*b),c?(c.Enabled=100!==b,c.Opacity=b):a.style.filter+=" progid:"+d+"(opacity="+b+")"}function rc(a){for(var b=document.documentElement.style,c=0;c<a.length;c++)if(a[c]in b)return a[c];return!1}function sc(a,b,c){var d=b||new H(0,0);a.style[ac]=(ob?"translate("+d.x+"px,"+d.y+"px)":"translate3d("+d.x+"px,"+d.y+"px,0)")+(c?" scale("+c+")":"")}function tc(a,b){a._leaflet_pos=b,rb?sc(a,b):(a.style.left=b.x+"px",a.style.top=b.y+"px")}function uc(a){return a._leaflet_pos||new H(0,0)
}function zc(){Ic(window,"dragstart",Qc)}function Ac(){Kc(window,"dragstart",Qc)}function Dc(a){for(;-1===a.tabIndex;)a=a.parentNode;a.style&&(Ec(),Bc=a,Cc=a.style.outline,a.style.outline="none",Ic(window,"keydown",Ec))}function Ec(){Bc&&(Bc.style.outline=Cc,Bc=void 0,Cc=void 0,Kc(window,"keydown",Ec))}function Fc(a){do a=a.parentNode;while(!(a.offsetWidth&&a.offsetHeight||a===document.body));return a}function Gc(a){var b=a.getBoundingClientRect();return{x:b.width/a.offsetWidth||1,y:b.height/a.offsetHeight||1,boundingClientRect:b}
}function Ic(a,b,c,d){if("object"==typeof b)for(var e in b)Lc(a,e,b[e],c);else{b=n(b);for(var f=0,g=b.length;g>f;f++)Lc(a,b[f],c,d)}return this}function Kc(a,b,c,d){if("object"==typeof b)for(var e in b)Mc(a,e,b[e],c);else if(b){b=n(b);for(var f=0,g=b.length;g>f;f++)Mc(a,b[f],c,d)}else{for(var h in a[Jc])Mc(a,h,a[Jc][h]);delete a[Jc]}return this}function Lc(a,b,c,d){var e=b+h(c)+(d?"_"+h(d):"");if(a[Jc]&&a[Jc][e])return this;var f=function(b){return c.call(d||a,b||window.event)},g=f;wb&&0===b.indexOf("touch")?Ob(a,b,f,e):!xb||"dblclick"!==b||!$b||wb&&ib?"addEventListener"in a?"mousewheel"===b?a.addEventListener("onwheel"in a?"wheel":"mousewheel",f,!1):"mouseenter"===b||"mouseleave"===b?(f=function(b){b=b||window.event,Yc(a,b)&&g(b)
},a.addEventListener("mouseenter"===b?"mouseover":"mouseout",f,!1)):("click"===b&&db&&(f=function(a){$c(a,g)}),a.addEventListener(b,f,!1)):"attachEvent"in a&&a.attachEvent("on"+b,f):$b(a,f,e),a[Jc]=a[Jc]||{},a[Jc][e]=f}function Mc(a,b,c,d){var e=b+h(c)+(d?"_"+h(d):""),f=a[Jc]&&a[Jc][e];return f?(wb&&0===b.indexOf("touch")?Pb(a,b,e):!xb||"dblclick"!==b||!_b||wb&&ib?"removeEventListener"in a?"mousewheel"===b?a.removeEventListener("onwheel"in a?"wheel":"mousewheel",f,!1):a.removeEventListener("mouseenter"===b?"mouseover":"mouseleave"===b?"mouseout":b,f,!1):"detachEvent"in a&&a.detachEvent("on"+b,f):_b(a,e),a[Jc][e]=null,void 0):this
}function Nc(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,Xc(a),this}function Oc(a){return Lc(a,"mousewheel",Nc),this}function Pc(a){return Ic(a,"mousedown touchstart dblclick",Nc),Lc(a,"click",Wc),this}function Qc(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this}function Rc(a){return Qc(a),Nc(a),this}function Sc(a,b){if(!b)return new H(a.clientX,a.clientY);var c=Gc(b),d=c.boundingClientRect;return new H((a.clientX-d.left)/c.x-b.clientLeft,(a.clientY-d.top)/c.y-b.clientTop)
}function Uc(a){return bb?a.wheelDeltaY/2:a.deltaY&&0===a.deltaMode?-a.deltaY/Tc:a.deltaY&&1===a.deltaMode?20*-a.deltaY:a.deltaY&&2===a.deltaMode?60*-a.deltaY:a.deltaX||a.deltaZ?0:a.wheelDelta?(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&Math.abs(a.detail)<32765?20*-a.detail:a.detail?a.detail/-32765*60:0}function Wc(a){Vc[a.type]=!0}function Xc(a){var b=Vc[a.type];return Vc[a.type]=!1,b}function Yc(a,b){var c=b.relatedTarget;if(!c)return!0;try{for(;c&&c!==a;)c=c.parentNode}catch(d){return!1}return c!==a}function $c(a,b){var c=a.timeStamp||a.originalEvent&&a.originalEvent.timeStamp,d=Zc&&c-Zc;
return d&&d>100&&500>d||a.target._simulatedClick&&!a._simulated?(Rc(a),void 0):(Zc=c,b(a),void 0)}function cd(a,b){return new bd(a,b)}function td(a,b){if(!b||!a.length)return a.slice();var c=b*b;return a=yd(a,c),a=wd(a,c)}function ud(a,b,c){return Math.sqrt(Ed(a,b,c,!0))}function vd(a,b,c){return Ed(a,b,c)}function wd(a,b){var c=a.length,d=typeof Uint8Array!=void 0+""?Uint8Array:Array,e=new d(c);e[0]=e[c-1]=1,xd(a,e,b,0,c-1);var f,g=[];for(f=0;c>f;f++)e[f]&&g.push(a[f]);return g}function xd(a,b,c,d,e){var g,h,i,f=0;
for(h=d+1;e-1>=h;h++)i=Ed(a[h],a[d],a[e],!0),i>f&&(g=h,f=i);f>c&&(b[g]=1,xd(a,b,c,d,g),xd(a,b,c,g,e))}function yd(a,b){for(var c=[a[0]],d=1,e=0,f=a.length;f>d;d++)Dd(a[d],a[e])>b&&(c.push(a[d]),e=d);return f-1>e&&c.push(a[f-1]),c}function Ad(a,b,c,d,e){var h,i,j,f=d?zd:Cd(a,c),g=Cd(b,c);for(zd=g;;){if(!(f|g))return[a,b];if(f&g)return!1;h=f||g,i=Bd(a,b,h,c,e),j=Cd(i,c),h===f?(a=i,f=j):(b=i,g=j)}}function Bd(a,b,c,d,e){var j,k,f=b.x-a.x,g=b.y-a.y,h=d.min,i=d.max;return 8&c?(j=a.x+f*(i.y-a.y)/g,k=i.y):4&c?(j=a.x+f*(h.y-a.y)/g,k=h.y):2&c?(j=i.x,k=a.y+g*(i.x-a.x)/f):1&c&&(j=h.x,k=a.y+g*(h.x-a.x)/f),new H(j,k,e)
}function Cd(a,b){var c=0;return a.x<b.min.x?c|=1:a.x>b.max.x&&(c|=2),a.y<b.min.y?c|=4:a.y>b.max.y&&(c|=8),c}function Dd(a,b){var c=b.x-a.x,d=b.y-a.y;return c*c+d*d}function Ed(a,b,c,d){var j,e=b.x,f=b.y,g=c.x-e,h=c.y-f,i=g*g+h*h;return i>0&&(j=((a.x-e)*g+(a.y-f)*h)/i,j>1?(e=c.x,f=c.y):j>0&&(e+=g*j,f+=h*j)),g=a.x-e,h=a.y-f,d?g*g+h*h:new H(e,f)}function Fd(a){return!s(a[0])||"object"!=typeof a[0][0]&&"undefined"!=typeof a[0][0]}function Gd(a){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Fd(a)
}function Id(a,b,c){var d,f,g,h,i,j,k,l,m,e=[1,4,2,8];for(f=0,k=a.length;k>f;f++)a[f]._code=Cd(a[f],b);for(h=0;4>h;h++){for(l=e[h],d=[],f=0,k=a.length,g=k-1;k>f;g=f++)i=a[f],j=a[g],i._code&l?j._code&l||(m=Bd(j,i,l,b,c),m._code=Cd(m,b),d.push(m)):(j._code&l&&(m=Bd(j,i,l,b,c),m._code=Cd(m,b),d.push(m)),d.push(i));a=d}return a}function Wd(a){return new Vd(a)}function $d(a,b){return new Zd(a,b)}function be(a,b){return new ae(a,b)}function de(a,b,c){return new ce(a,b,c)}function fe(a,b){return new ee(a,b)}function he(a,b){return new ge(a,b)
}function je(a,b){var h,i,j,k,c="Feature"===a.type?a.geometry:a,d=c?c.coordinates:null,e=[],f=b&&b.pointToLayer,g=b&&b.coordsToLatLng||ke;if(!d&&!c)return null;switch(c.type){case"Point":return h=g(d),f?f(a,h):new Zd(h);case"MultiPoint":for(j=0,k=d.length;k>j;j++)h=g(d[j]),e.push(f?f(a,h):new Zd(h));return new Td(e);case"LineString":case"MultiLineString":return i=le(d,"LineString"===c.type?0:1,g),new ee(i,b);case"Polygon":case"MultiPolygon":return i=le(d,"Polygon"===c.type?1:2,g),new ge(i,b);case"GeometryCollection":for(j=0,k=c.geometries.length;k>j;j++){var l=je({geometry:c.geometries[j],type:"Feature",properties:a.properties},b);
l&&e.push(l)}return new Td(e);default:throw new Error("Invalid GeoJSON object.")}}function ke(a){return new P(a[1],a[0],a[2])}function le(a,b,c){for(var g,d=[],e=0,f=a.length;f>e;e++)g=b?le(a[e],b-1,c):(c||ke)(a[e]),d.push(g);return d}function me(a,b){return b="number"==typeof b?b:6,void 0!==a.alt?[l(a.lng,b),l(a.lat,b),l(a.alt,b)]:[l(a.lng,b),l(a.lat,b)]}function ne(a,b,c,d){for(var e=[],f=0,g=a.length;g>f;f++)e.push(b?ne(a[f],b-1,c,d):me(a[f],d));return!b&&c&&e.push(e[0]),e}function oe(a,b){return a.feature?d({},a.feature,{geometry:b}):pe(b)
}function pe(a){return"Feature"===a.type||"FeatureCollection"===a.type?a:{type:"Feature",properties:{},geometry:a}}function re(a,b){return new ie(a,b)}function we(a,b,c){return new ve(a,b,c)}function De(a){return new Ce(a)}function Fe(a){return new Ee(a)}function He(a,b){return new Ge(a,b)}function Je(a,b){return new Ie(a,b)}function Me(a){return Bb?new Le(a):null}function Re(a){return Cb||Db?new Qe(a):null}function Te(a,b){return new Se(a,b)}var b="1.4.0+HEAD.3337f36",c=Object.freeze;Object.freeze=function(a){return a
};var e=Object.create||function(){function a(){}return function(b){return a.prototype=b,new a}}(),g=0,q=/\{ *([\w_-]+) *\}/g,s=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},u="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",w=0,y=window.requestAnimationFrame||v("RequestAnimationFrame")||x,z=window.cancelAnimationFrame||v("CancelAnimationFrame")||v("CancelRequestAnimationFrame")||function(a){window.clearTimeout(a)},C=(Object.freeze||Object)({freeze:c,extend:d,create:e,bind:f,lastId:g,stamp:h,throttle:i,wrapNum:j,falseFn:k,formatNum:l,trim:m,splitWords:n,setOptions:o,getParamString:p,template:r,isArray:s,indexOf:t,emptyImageUrl:u,requestFn:y,cancelFn:z,requestAnimFrame:A,cancelAnimFrame:B});
D.extend=function(a){var b=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},c=b.__super__=this.prototype,f=e(c);f.constructor=b,b.prototype=f;for(var g in this)this.hasOwnProperty(g)&&"prototype"!==g&&"__super__"!==g&&(b[g]=this[g]);return a.statics&&(d(b,a.statics),delete a.statics),a.includes&&(E(a.includes),d.apply(null,[f].concat(a.includes)),delete a.includes),f.options&&(a.options=d(e(f.options),a.options)),d(f,a),f._initHooks=[],f.callInitHooks=function(){if(!this._initHooksCalled){c.callInitHooks&&c.callInitHooks.call(this),this._initHooksCalled=!0;
for(var a=0,b=f._initHooks.length;b>a;a++)f._initHooks[a].call(this)}},b},D.include=function(a){return d(this.prototype,a),this},D.mergeOptions=function(a){return d(this.prototype.options,a),this},D.addInitHook=function(a){var b=Array.prototype.slice.call(arguments,1),c="function"==typeof a?a:function(){this[a].apply(this,b)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c),this};var F={on:function(a,b,c){if("object"==typeof a)for(var d in a)this._on(d,a[d],b);
else{a=n(a);for(var e=0,f=a.length;f>e;e++)this._on(a[e],b,c)}return this},off:function(a,b,c){if(a)if("object"==typeof a)for(var d in a)this._off(d,a[d],b);else{a=n(a);for(var e=0,f=a.length;f>e;e++)this._off(a[e],b,c)}else delete this._events;return this},_on:function(a,b,c){this._events=this._events||{};var d=this._events[a];d||(d=[],this._events[a]=d),c===this&&(c=void 0);for(var e={fn:b,ctx:c},f=d,g=0,h=f.length;h>g;g++)if(f[g].fn===b&&f[g].ctx===c)return;f.push(e)},_off:function(a,b,c){var d,e,f;if(this._events&&(d=this._events[a])){if(!b){for(e=0,f=d.length;f>e;e++)d[e].fn=k;
return delete this._events[a],void 0}if(c===this&&(c=void 0),d)for(e=0,f=d.length;f>e;e++){var g=d[e];if(g.ctx===c&&g.fn===b)return g.fn=k,this._firingCount&&(this._events[a]=d=d.slice()),d.splice(e,1),void 0}}},fire:function(a,b,c){if(!this.listens(a,c))return this;var e=d({},b,{type:a,target:this,sourceTarget:b&&b.sourceTarget||this});if(this._events){var f=this._events[a];if(f){this._firingCount=this._firingCount+1||1;for(var g=0,h=f.length;h>g;g++){var i=f[g];i.fn.call(i.ctx||this,e)}this._firingCount--}}return c&&this._propagateEvent(e),this
},listens:function(a,b){var c=this._events&&this._events[a];if(c&&c.length)return!0;if(b)for(var d in this._eventParents)if(this._eventParents[d].listens(a,b))return!0;return!1},once:function(a,b,c){if("object"==typeof a){for(var d in a)this.once(d,a[d],b);return this}var e=f(function(){this.off(a,b,c).off(a,e,c)},this);return this.on(a,b,c).on(a,e,c)},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[h(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[h(a)],this
},_propagateEvent:function(a){for(var b in this._eventParents)this._eventParents[b].fire(a.type,d({layer:a.target,propagatedFrom:a.target},a),!0)}};F.addEventListener=F.on,F.removeEventListener=F.clearAllEventListeners=F.off,F.addOneTimeEventListener=F.once,F.fireEvent=F.fire,F.hasEventListeners=F.listens;var G=D.extend(F),I=Math.trunc||function(a){return a>0?Math.floor(a):Math.ceil(a)};H.prototype={clone:function(){return new H(this.x,this.y)},add:function(a){return this.clone()._add(J(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this
},subtract:function(a){return this.clone()._subtract(J(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new H(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new H(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this
},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=I(this.x),this.y=I(this.y),this},distanceTo:function(a){a=J(a);var b=a.x-this.x,c=a.y-this.y;return Math.sqrt(b*b+c*c)},equals:function(a){return a=J(a),a.x===this.x&&a.y===this.y
},contains:function(a){return a=J(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+l(this.x)+", "+l(this.y)+")"}},K.prototype={extend:function(a){return a=J(a),this.min||this.max?(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(a.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(a.y,this.max.y)):(this.min=a.clone(),this.max=a.clone()),this},getCenter:function(a){return new H((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)
},getBottomLeft:function(){return new H(this.min.x,this.max.y)},getTopRight:function(){return new H(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var b,c;return a="number"==typeof a[0]||a instanceof H?J(a):M(a),a instanceof K?(b=a.min,c=a.max):b=c=a,b.x>=this.min.x&&c.x<=this.max.x&&b.y>=this.min.y&&c.y<=this.max.y},intersects:function(a){a=M(a);var b=this.min,c=this.max,d=a.min,e=a.max,f=e.x>=b.x&&d.x<=c.x,g=e.y>=b.y&&d.y<=c.y;
return f&&g},overlaps:function(a){a=M(a);var b=this.min,c=this.max,d=a.min,e=a.max,f=e.x>b.x&&d.x<c.x,g=e.y>b.y&&d.y<c.y;return f&&g},isValid:function(){return!(!this.min||!this.max)}},N.prototype={extend:function(a){var d,e,b=this._southWest,c=this._northEast;if(a instanceof P)d=a,e=a;else{if(!(a instanceof N))return a?this.extend(Q(a)||O(a)):this;if(d=a._southWest,e=a._northEast,!d||!e)return this}return b||c?(b.lat=Math.min(d.lat,b.lat),b.lng=Math.min(d.lng,b.lng),c.lat=Math.max(e.lat,c.lat),c.lng=Math.max(e.lng,c.lng)):(this._southWest=new P(d.lat,d.lng),this._northEast=new P(e.lat,e.lng)),this
},pad:function(a){var b=this._southWest,c=this._northEast,d=Math.abs(b.lat-c.lat)*a,e=Math.abs(b.lng-c.lng)*a;return new N(new P(b.lat-d,b.lng-e),new P(c.lat+d,c.lng+e))},getCenter:function(){return new P((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new P(this.getNorth(),this.getWest())},getSouthEast:function(){return new P(this.getSouth(),this.getEast())
},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){a="number"==typeof a[0]||a instanceof P||"lat"in a?Q(a):O(a);var d,e,b=this._southWest,c=this._northEast;return a instanceof N?(d=a.getSouthWest(),e=a.getNorthEast()):d=e=a,d.lat>=b.lat&&e.lat<=c.lat&&d.lng>=b.lng&&e.lng<=c.lng},intersects:function(a){a=O(a);var b=this._southWest,c=this._northEast,d=a.getSouthWest(),e=a.getNorthEast(),f=e.lat>=b.lat&&d.lat<=c.lat,g=e.lng>=b.lng&&d.lng<=c.lng;
return f&&g},overlaps:function(a){a=O(a);var b=this._southWest,c=this._northEast,d=a.getSouthWest(),e=a.getNorthEast(),f=e.lat>b.lat&&d.lat<c.lat,g=e.lng>b.lng&&d.lng<c.lng;return f&&g},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a,b){return a?(a=O(a),this._southWest.equals(a.getSouthWest(),b)&&this._northEast.equals(a.getNorthEast(),b)):!1},isValid:function(){return!(!this._southWest||!this._northEast)}},P.prototype={equals:function(a,b){if(!a)return!1;
a=Q(a);var c=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return(void 0===b?1e-9:b)>=c},toString:function(a){return"LatLng("+l(this.lat,a)+", "+l(this.lng,a)+")"},distanceTo:function(a){return S.distance(this,Q(a))},wrap:function(){return S.wrapLatLng(this)},toBounds:function(a){var b=180*a/40075017,c=b/Math.cos(Math.PI/180*this.lat);return O([this.lat-b,this.lng-c],[this.lat+b,this.lng+c])},clone:function(){return new P(this.lat,this.lng,this.alt)}};var R={latLngToPoint:function(a,b){var c=this.projection.project(a),d=this.scale(b);
return this.transformation._transform(c,d)},pointToLatLng:function(a,b){var c=this.scale(b),d=this.transformation.untransform(a,c);return this.projection.unproject(d)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(a){if(this.infinite)return null;var b=this.projection.bounds,c=this.scale(a),d=this.transformation.transform(b.min,c),e=this.transformation.transform(b.max,c);
return new K(d,e)},infinite:!1,wrapLatLng:function(a){var b=this.wrapLng?j(a.lng,this.wrapLng,!0):a.lng,c=this.wrapLat?j(a.lat,this.wrapLat,!0):a.lat,d=a.alt;return new P(c,b,d)},wrapLatLngBounds:function(a){var b=a.getCenter(),c=this.wrapLatLng(b),d=b.lat-c.lat,e=b.lng-c.lng;if(0===d&&0===e)return a;var f=a.getSouthWest(),g=a.getNorthEast(),h=new P(f.lat-d,f.lng-e),i=new P(g.lat-d,g.lng-e);return new N(h,i)}},S=d({},R,{wrapLng:[-180,180],R:6371e3,distance:function(a,b){var c=Math.PI/180,d=a.lat*c,e=b.lat*c,f=Math.sin((b.lat-a.lat)*c/2),g=Math.sin((b.lng-a.lng)*c/2),h=f*f+Math.cos(d)*Math.cos(e)*g*g,i=2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h));
return this.R*i}}),T={R:6378137,MAX_LATITUDE:85.0511287798,project:function(a){var b=Math.PI/180,c=this.MAX_LATITUDE,d=Math.max(Math.min(c,a.lat),-c),e=Math.sin(d*b);return new H(this.R*a.lng*b,this.R*Math.log((1+e)/(1-e))/2)},unproject:function(a){var b=180/Math.PI;return new P((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*b,a.x*b/this.R)},bounds:function(){var a=6378137*Math.PI;return new K([-a,-a],[a,a])}()};U.prototype={transform:function(a,b){return this._transform(a.clone(),b)},_transform:function(a,b){return b=b||1,a.x=b*(this._a*a.x+this._b),a.y=b*(this._c*a.y+this._d),a
},untransform:function(a,b){return b=b||1,new H((a.x/b-this._b)/this._a,(a.y/b-this._d)/this._c)}};var vc,wc,xc,W=d({},S,{code:"EPSG:3857",projection:T,transformation:function(){var a=.5/(Math.PI*T.R);return V(a,.5,-a,.5)}()}),X=d({},W,{code:"EPSG:900913"}),$=document.documentElement.style,_="ActiveXObject"in window,ab=_&&!document.addEventListener,bb="msLaunchUri"in navigator&&!("documentMode"in document),cb=Eb("webkit"),db=Eb("android"),eb=Eb("android 2")||Eb("android 3"),fb=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),gb=db&&Eb("Google")&&537>fb&&!("AudioNode"in window),hb=!!window.opera,ib=Eb("chrome"),jb=Eb("gecko")&&!cb&&!hb&&!_,kb=!ib&&Eb("safari"),lb=Eb("phantom"),mb="OTransition"in $,nb=0===navigator.platform.indexOf("Win"),ob=_&&"transition"in $,pb="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!eb,qb="MozPerspective"in $,rb=!window.L_DISABLE_3D&&(ob||pb||qb)&&!mb&&!lb,sb="undefined"!=typeof orientation||Eb("mobile"),tb=sb&&cb,ub=sb&&pb,vb=!window.PointerEvent&&window.MSPointerEvent,wb=!(!window.PointerEvent&&!vb),xb=!window.L_NO_TOUCH&&(wb||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),yb=sb&&hb,zb=sb&&jb,Ab=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Bb=function(){return!!document.createElement("canvas").getContext
}(),Cb=!(!document.createElementNS||!Y("svg").createSVGRect),Db=!Cb&&function(){try{var a=document.createElement("div");a.innerHTML='<v:shape adj="1"/>';var b=a.firstChild;return b.style.behavior="url(#default#VML)",b&&"object"==typeof b.adj}catch(c){return!1}}(),Fb=(Object.freeze||Object)({ie:_,ielt9:ab,edge:bb,webkit:cb,android:db,android23:eb,androidStock:gb,opera:hb,chrome:ib,gecko:jb,safari:kb,phantom:lb,opera12:mb,win:nb,ie3d:ob,webkit3d:pb,gecko3d:qb,any3d:rb,mobile:sb,mobileWebkit:tb,mobileWebkit3d:ub,msPointer:vb,pointer:wb,touch:xb,mobileOpera:yb,mobileGecko:zb,retina:Ab,canvas:Bb,svg:Cb,vml:Db}),Gb=vb?"MSPointerDown":"pointerdown",Hb=vb?"MSPointerMove":"pointermove",Ib=vb?"MSPointerUp":"pointerup",Jb=vb?"MSPointerCancel":"pointercancel",Kb=["INPUT","SELECT","OPTION"],Lb={},Mb=!1,Nb=0,Xb=vb?"MSPointerDown":wb?"pointerdown":"touchstart",Yb=vb?"MSPointerUp":wb?"pointerup":"touchend",Zb="_leaflet_",ac=rc(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),bc=rc(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),cc="webkitTransition"===bc||"OTransition"===bc?bc+"End":"transitionend";
if("onselectstart"in document)vc=function(){Ic(window,"selectstart",Qc)},wc=function(){Kc(window,"selectstart",Qc)};else{var yc=rc(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);vc=function(){if(yc){var a=document.documentElement.style;xc=a[yc],a[yc]="none"}},wc=function(){yc&&(document.documentElement.style[yc]=xc,xc=void 0)}}var Bc,Cc,Zc,Hc=(Object.freeze||Object)({TRANSFORM:ac,TRANSITION:bc,TRANSITION_END:cc,get:dc,getStyle:ec,create:fc,remove:gc,empty:hc,toFront:ic,toBack:jc,hasClass:kc,addClass:lc,removeClass:mc,setClass:nc,getClass:oc,setOpacity:pc,testProp:rc,setTransform:sc,setPosition:tc,getPosition:uc,disableTextSelection:vc,enableTextSelection:wc,disableImageDrag:zc,enableImageDrag:Ac,preventOutline:Dc,restoreOutline:Ec,getSizedParentNode:Fc,getScale:Gc}),Jc="_leaflet_events",Tc=nb&&ib?2*window.devicePixelRatio:jb?window.devicePixelRatio:1,Vc={},_c=(Object.freeze||Object)({on:Ic,off:Kc,stopPropagation:Nc,disableScrollPropagation:Oc,disableClickPropagation:Pc,preventDefault:Qc,stop:Rc,getMousePosition:Sc,getWheelDelta:Uc,fakeStop:Wc,skipped:Xc,isExternalTarget:Yc,addListener:Ic,removeListener:Kc}),ad=G.extend({run:function(a,b,c,d){this.stop(),this._el=a,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(d||.5,.2),this._startPos=uc(a),this._offset=b.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()
},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=A(this._animate,this),this._step()},_step:function(a){var b=+new Date-this._startTime,c=1e3*this._duration;c>b?this._runFrame(this._easeOut(b/c),a):(this._runFrame(1),this._complete())},_runFrame:function(a,b){var c=this._startPos.add(this._offset.multiplyBy(a));b&&c._round(),tc(this._el,c),this.fire("step")},_complete:function(){B(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)
}}),bd=G.extend({options:{crs:W,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(a,b){b=o(this,b),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(a),this._initLayout(),this._onResize=f(this._onResize,this),this._initEvents(),b.maxBounds&&this.setMaxBounds(b.maxBounds),void 0!==b.zoom&&(this._zoom=this._limitZoom(b.zoom)),b.center&&void 0!==b.zoom&&this.setView(Q(b.center),b.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=bc&&rb&&!yb&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ic(this._proxy,cc,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)
},setView:function(a,b,c){if(b=void 0===b?this._zoom:this._limitZoom(b),a=this._limitCenter(Q(a),b,this.options.maxBounds),c=c||{},this._stop(),this._loaded&&!c.reset&&c!==!0){void 0!==c.animate&&(c.zoom=d({animate:c.animate},c.zoom),c.pan=d({animate:c.animate,duration:c.duration},c.pan));var e=this._zoom!==b?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,b,c.zoom):this._tryAnimatedPan(a,c.pan);if(e)return clearTimeout(this._sizeTimer),this}return this._resetView(a,b),this},setZoom:function(a,b){return this._loaded?this.setView(this.getCenter(),a,{zoom:b}):(this._zoom=a,this)
},zoomIn:function(a,b){return a=a||(rb?this.options.zoomDelta:1),this.setZoom(this._zoom+a,b)},zoomOut:function(a,b){return a=a||(rb?this.options.zoomDelta:1),this.setZoom(this._zoom-a,b)},setZoomAround:function(a,b,c){var d=this.getZoomScale(b),e=this.getSize().divideBy(2),f=a instanceof H?a:this.latLngToContainerPoint(a),g=f.subtract(e).multiplyBy(1-1/d),h=this.containerPointToLatLng(e.add(g));return this.setView(h,b,{zoom:c})},_getBoundsCenterZoom:function(a,b){b=b||{},a=a.getBounds?a.getBounds():O(a);var c=J(b.paddingTopLeft||b.padding||[0,0]),d=J(b.paddingBottomRight||b.padding||[0,0]),e=this.getBoundsZoom(a,!1,c.add(d));
if(e="number"==typeof b.maxZoom?Math.min(b.maxZoom,e):e,1/0===e)return{center:a.getCenter(),zoom:e};var f=d.subtract(c).divideBy(2),g=this.project(a.getSouthWest(),e),h=this.project(a.getNorthEast(),e),i=this.unproject(g.add(h).divideBy(2).add(f),e);return{center:i,zoom:e}},fitBounds:function(a,b){if(a=O(a),!a.isValid())throw new Error("Bounds are not valid.");var c=this._getBoundsCenterZoom(a,b);return this.setView(c.center,c.zoom,b)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,b){return this.setView(a,this._zoom,{pan:b})
},panBy:function(a,b){if(a=J(a).round(),b=b||{},!a.x&&!a.y)return this.fire("moveend");if(b.animate!==!0&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ad,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),b.noMoveStart||this.fire("movestart"),b.animate!==!1){lc(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(a).round();this._panAnim.run(this._mapPane,c,b.duration||.25,b.easeLinearity)
}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},flyTo:function(a,b,c){function m(a){var b=a?-1:1,c=a?i:h,d=i*i-h*h+b*l*l*j*j,e=2*c*l*j,f=d/e,g=Math.sqrt(f*f+1)-f,k=1e-9>g?-18:Math.log(g);return k}function n(a){return(Math.exp(a)-Math.exp(-a))/2}function o(a){return(Math.exp(a)+Math.exp(-a))/2}function p(a){return n(a)/o(a)}function r(a){return h*(o(q)/o(q+k*a))}function s(a){return h*(o(q)*p(q+k*a)-n(q))/l}function t(a){return 1-Math.pow(1-a,1.5)}function x(){var c=(Date.now()-u)/w,f=t(c)*v;
1>=c?(this._flyToFrame=A(x,this),this._move(this.unproject(d.add(e.subtract(d).multiplyBy(s(f)/j)),g),this.getScaleZoom(h/r(f),g),{flyTo:!0})):this._move(a,b)._moveEnd(!0)}if(c=c||{},c.animate===!1||!rb)return this.setView(a,b,c);this._stop();var d=this.project(this.getCenter()),e=this.project(a),f=this.getSize(),g=this._zoom;a=Q(a),b=void 0===b?g:b;var h=Math.max(f.x,f.y),i=h*this.getZoomScale(g,b),j=e.distanceTo(d)||1,k=1.42,l=k*k,q=m(0),u=Date.now(),v=(m(1)-q)/k,w=c.duration?1e3*c.duration:1e3*v*.8;return this._moveStart(!0,c.noMoveStart),x.call(this),this
},flyToBounds:function(a,b){var c=this._getBoundsCenterZoom(a,b);return this.flyTo(c.center,c.zoom,b)},setMaxBounds:function(a){return a=O(a),a.isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(a){var b=this.options.minZoom;return this.options.minZoom=a,this._loaded&&b!==a&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(a):this
},setMaxZoom:function(a){var b=this.options.maxZoom;return this.options.maxZoom=a,this._loaded&&b!==a&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(a):this},panInsideBounds:function(a,b){this._enforcingBounds=!0;var c=this.getCenter(),d=this._limitCenter(c,this._zoom,O(a));return c.equals(d)||this.panTo(d,b),this._enforcingBounds=!1,this},panInside:function(a,b){b=b||{};var c=J(b.paddingTopLeft||b.padding||[0,0]),d=J(b.paddingBottomRight||b.padding||[0,0]),e=this.getCenter(),f=this.project(e),g=this.project(a),h=this.getPixelBounds(),i=h.getSize().divideBy(2),j=M([h.min.add(c),h.max.subtract(d)]);
if(!j.contains(g)){this._enforcingBounds=!0;var k=f.subtract(g),l=J(g.x+k.x,g.y+k.y);(g.x<j.min.x||g.x>j.max.x)&&(l.x=f.x-k.x,k.x>0?l.x+=i.x-c.x:l.x-=i.x-d.x),(g.y<j.min.y||g.y>j.max.y)&&(l.y=f.y-k.y,k.y>0?l.y+=i.y-c.y:l.y-=i.y-d.y),this.panTo(this.unproject(l),b),this._enforcingBounds=!1}return this},invalidateSize:function(a){if(!this._loaded)return this;a=d({animate:!1,pan:!0},a===!0?{animate:!0}:a);var b=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var c=this.getSize(),e=b.divideBy(2).round(),g=c.divideBy(2).round(),h=e.subtract(g);
return h.x||h.y?(a.animate&&a.pan?this.panBy(h):(a.pan&&this._rawPanBy(h),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(f(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:b,newSize:c})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(a){if(a=this._locateOptions=d({timeout:1e4,watch:!1},a),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;
var b=f(this._handleGeolocationResponse,this),c=f(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(b,c,a):navigator.geolocation.getCurrentPosition(b,c,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){var b=a.code,c=a.message||(1===b?"permission denied":2===b?"position unavailable":"timeout");
this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:b,message:"Geolocation error: "+c+"."})},_handleGeolocationResponse:function(a){var b=a.coords.latitude,c=a.coords.longitude,d=new P(b,c),e=d.toBounds(2*a.coords.accuracy),f=this._locateOptions;if(f.setView){var g=this.getBoundsZoom(e);this.setView(d,f.maxZoom?Math.min(g,f.maxZoom):g)}var h={latlng:d,bounds:e,timestamp:a.timestamp};for(var i in a.coords)"number"==typeof a.coords[i]&&(h[i]=a.coords[i]);this.fire("locationfound",h)
},addHandler:function(a,b){if(!b)return this;var c=this[a]=new b(this);return this._handlers.push(c),this.options[a]&&c.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(a){this._container._leaflet_id=void 0,this._containerId=void 0}void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),gc(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(B(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");
var b;for(b in this._layers)this._layers[b].remove();for(b in this._panes)gc(this._panes[b]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(a,b){var c="leaflet-pane"+(a?" leaflet-"+a.replace("Pane","")+"-pane":""),d=fc("div",c,b||this._mapPane);return a&&(this._panes[a]=d),d},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom
},getBounds:function(){var a=this.getPixelBounds(),b=this.unproject(a.getBottomLeft()),c=this.unproject(a.getTopRight());return new N(b,c)},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,b,c){a=O(a),c=J(c||[0,0]);var d=this.getZoom()||0,e=this.getMinZoom(),f=this.getMaxZoom(),g=a.getNorthWest(),h=a.getSouthEast(),i=this.getSize().subtract(c),j=M(this.project(h,d),this.project(g,d)).getSize(),k=rb?this.options.zoomSnap:1,l=i.x/j.x,m=i.y/j.y,n=b?Math.max(l,m):Math.min(l,m);
return d=this.getScaleZoom(n,d),k&&(d=Math.round(d/(k/100))*(k/100),d=b?Math.ceil(d/k)*k:Math.floor(d/k)*k),Math.max(e,Math.min(f,d))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new H(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(a,b){var c=this._getTopLeftPoint(a,b);return new K(c,c.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(void 0===a?this.getZoom():a)
},getPane:function(a){return"string"==typeof a?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a,b){var c=this.options.crs;return b=void 0===b?this._zoom:b,c.scale(a)/c.scale(b)},getScaleZoom:function(a,b){var c=this.options.crs;b=void 0===b?this._zoom:b;var d=c.zoom(a*c.scale(b));return isNaN(d)?1/0:d},project:function(a,b){return b=void 0===b?this._zoom:b,this.options.crs.latLngToPoint(Q(a),b)},unproject:function(a,b){return b=void 0===b?this._zoom:b,this.options.crs.pointToLatLng(J(a),b)
},layerPointToLatLng:function(a){var b=J(a).add(this.getPixelOrigin());return this.unproject(b)},latLngToLayerPoint:function(a){var b=this.project(Q(a))._round();return b._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(Q(a))},wrapLatLngBounds:function(a){return this.options.crs.wrapLatLngBounds(O(a))},distance:function(a,b){return this.options.crs.distance(Q(a),Q(b))},containerPointToLayerPoint:function(a){return J(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return J(a).add(this._getMapPanePos())
},containerPointToLatLng:function(a){var b=this.containerPointToLayerPoint(J(a));return this.layerPointToLatLng(b)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Q(a)))},mouseEventToContainerPoint:function(a){return Sc(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var b=this._container=dc(a);
if(!b)throw new Error("Map container not found.");if(b._leaflet_id)throw new Error("Map container is already initialized.");Ic(b,"scroll",this._onScroll,this),this._containerId=h(b)},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&rb,lc(a,"leaflet-container"+(xb?" leaflet-touch":"")+(Ab?" leaflet-retina":"")+(ab?" leaflet-oldie":"")+(kb?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var b=ec(a,"position");"absolute"!==b&&"relative"!==b&&"fixed"!==b&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()
},_initPanes:function(){var a=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),tc(this._mapPane,new H(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(lc(a.markerPane,"leaflet-zoom-hide"),lc(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(a,b){tc(this._mapPane,new H(0,0));var c=!this._loaded;
this._loaded=!0,b=this._limitZoom(b),this.fire("viewprereset");var d=this._zoom!==b;this._moveStart(d,!1)._move(a,b)._moveEnd(d),this.fire("viewreset"),c&&this.fire("load")},_moveStart:function(a,b){return a&&this.fire("zoomstart"),b||this.fire("movestart"),this},_move:function(a,b,c){void 0===b&&(b=this._zoom);var d=this._zoom!==b;return this._zoom=b,this._lastCenter=a,this._pixelOrigin=this._getNewPixelOrigin(a),(d||c&&c.pinch)&&this.fire("zoom",c),this.fire("move",c)},_moveEnd:function(a){return a&&this.fire("zoomend"),this.fire("moveend")
},_stop:function(){return B(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(a){tc(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(a){this._targets={},this._targets[h(this._container)]=this;var b=a?Kc:Ic;
b(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,this),this.options.trackResize&&b(window,"resize",this._onResize,this),rb&&this.options.transform3DLimit&&(a?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){B(this._resizeRequest),this._resizeRequest=A(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();
Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(a,b){for(var d,c=[],e="mouseout"===b||"mouseover"===b,f=a.target||a.srcElement,g=!1;f;){if(d=this._targets[h(f)],d&&("click"===b||"preclick"===b)&&!a._simulated&&this._draggableMoved(d)){g=!0;break}if(d&&d.listens(b,!0)){if(e&&!Yc(f,a))break;if(c.push(d),e)break}if(f===this._container)break;f=f.parentNode}return c.length||g||e||!Yc(f,a)||(c=[this]),c},_handleDOMEvent:function(a){if(this._loaded&&!Xc(a)){var b=a.type;
("mousedown"===b||"keypress"===b)&&Dc(a.target||a.srcElement),this._fireDOMEvent(a,b)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(a,b,c){if("click"===a.type){var e=d({},a);e.type="preclick",this._fireDOMEvent(e,e.type,c)}if(!a._stopped&&(c=(c||[]).concat(this._findEventTargets(a,b)),c.length)){var f=c[0];"contextmenu"===b&&f.listens(b,!0)&&Qc(a);var g={originalEvent:a};if("keypress"!==a.type){var h=f.getLatLng&&(!f._radius||f._radius<=10);g.containerPoint=h?this.latLngToContainerPoint(f.getLatLng()):this.mouseEventToContainerPoint(a),g.layerPoint=this.containerPointToLayerPoint(g.containerPoint),g.latlng=h?f.getLatLng():this.layerPointToLatLng(g.layerPoint)
}for(var i=0;i<c.length;i++)if(c[i].fire(b,g,!0),g.originalEvent._stopped||c[i].options.bubblingMouseEvents===!1&&-1!==t(this._mouseEvents,b))return}},_draggableMoved:function(a){return a=a.dragging&&a.dragging.enabled()?a:this,a.dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,b=this._handlers.length;b>a;a++)this._handlers[a].disable()},whenReady:function(a,b){return this._loaded?a.call(b||this,{target:this}):this.on("load",a,b),this},_getMapPanePos:function(){return uc(this._mapPane)||new H(0,0)
},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,b){var c=a&&void 0!==b?this._getNewPixelOrigin(a,b):this.getPixelOrigin();return c.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(a,b){var c=this.getSize()._divideBy(2);return this.project(a,b)._subtract(c)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(a,b,c){var d=this._getNewPixelOrigin(c,b);return this.project(a,b)._subtract(d)},_latLngBoundsToNewLayerBounds:function(a,b,c){var d=this._getNewPixelOrigin(c,b);
return M([this.project(a.getSouthWest(),b)._subtract(d),this.project(a.getNorthWest(),b)._subtract(d),this.project(a.getSouthEast(),b)._subtract(d),this.project(a.getNorthEast(),b)._subtract(d)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,b,c){if(!c)return a;var d=this.project(a,b),e=this.getSize().divideBy(2),f=new K(d.subtract(e),d.add(e)),g=this._getBoundsOffset(f,c,b);
return g.round().equals([0,0])?a:this.unproject(d.add(g),b)},_limitOffset:function(a,b){if(!b)return a;var c=this.getPixelBounds(),d=new K(c.min.add(a),c.max.add(a));return a.add(this._getBoundsOffset(d,b))},_getBoundsOffset:function(a,b,c){var d=M(this.project(b.getNorthEast(),c),this.project(b.getSouthWest(),c)),e=d.min.subtract(a.min),f=d.max.subtract(a.max),g=this._rebound(e.x,-f.x),h=this._rebound(e.y,-f.y);return new H(g,h)},_rebound:function(a,b){return a+b>0?Math.round(a-b)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(b))
},_limitZoom:function(a){var b=this.getMinZoom(),c=this.getMaxZoom(),d=rb?this.options.zoomSnap:1;return d&&(a=Math.round(a/d)*d),Math.max(b,Math.min(c,a))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){mc(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,b){var c=this._getCenterOffset(a)._trunc();return(b&&b.animate)===!0||this.getSize().contains(c)?(this.panBy(c,b),!0):!1},_createAnimProxy:function(){var a=this._proxy=fc("div","leaflet-proxy leaflet-zoom-animated");
this._panes.mapPane.appendChild(a),this.on("zoomanim",function(a){var b=ac,c=this._proxy.style[b];sc(this._proxy,this.project(a.center,a.zoom),this.getZoomScale(a.zoom,1)),c===this._proxy.style[b]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",function(){var a=this.getCenter(),b=this.getZoom();sc(this._proxy,this.project(a,b),this.getZoomScale(b,1))},this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){gc(this._proxy),delete this._proxy},_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()
},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,b,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(b-this._zoom)>this.options.zoomAnimationThreshold)return!1;var d=this.getZoomScale(b),e=this._getCenterOffset(a)._divideBy(1-1/d);return c.animate===!0||this.getSize().contains(e)?(A(function(){this._moveStart(!0,!1)._animateZoom(a,b,!0)},this),!0):!1},_animateZoom:function(a,b,c,d){this._mapPane&&(c&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=b,lc(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:a,zoom:b,noUpdate:d}),setTimeout(f(this._onZoomTransitionEnd,this),250))
},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&mc(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),A(function(){this._moveEnd(!0)},this))}}),dd=D.extend({options:{position:"topright"},initialize:function(a){o(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var b=this._map;return b&&b.removeControl(this),this.options.position=a,b&&b.addControl(this),this},getContainer:function(){return this._container
},addTo:function(a){this.remove(),this._map=a;var b=this._container=this.onAdd(a),c=this.getPosition(),d=a._controlCorners[c];return lc(b,"leaflet-control"),-1!==c.indexOf("bottom")?d.insertBefore(b,d.firstChild):d.appendChild(b),this},remove:function(){return this._map?(gc(this._container),this.onRemove&&this.onRemove(this._map),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&a.screenX>0&&a.screenY>0&&this._map.getContainer().focus()}}),ed=function(a){return new dd(a)};bd.include({addControl:function(a){return a.addTo(this),this
},removeControl:function(a){return a.remove(),this},_initControlPos:function(){function d(d,e){var f=b+d+" "+b+e;a[d+e]=fc("div",f,c)}var a=this._controlCorners={},b="leaflet-",c=this._controlContainer=fc("div",b+"control-container",this._container);d("top","left"),d("top","right"),d("bottom","left"),d("bottom","right")},_clearControlPos:function(){for(var a in this._controlCorners)gc(this._controlCorners[a]);gc(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var fd=dd.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(a,b,c,d){return d>c?-1:c>d?1:0
}},initialize:function(a,b,c){o(this,c),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var d in a)this._addLayer(a[d],d);for(d in b)this._addLayer(b[d],d,!0)},onAdd:function(a){this._initLayout(),this._update(),this._map=a,a.on("zoomend",this._checkDisabledLayers,this);for(var b=0;b<this._layers.length;b++)this._layers[b].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(a){return dd.prototype.addTo.call(this,a),this._expandIfNotCollapsed()
},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(a,b){return this._addLayer(a,b),this._map?this._update():this},addOverlay:function(a,b){return this._addLayer(a,b,!0),this._map?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);var b=this._getLayer(h(a));return b&&this._layers.splice(this._layers.indexOf(b),1),this._map?this._update():this
},expand:function(){lc(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);return a<this._section.clientHeight?(lc(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=a+"px"):mc(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return mc(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var a="leaflet-control-layers",b=this._container=fc("div",a),c=this.options.collapsed;
b.setAttribute("aria-haspopup",!0),Pc(b),Oc(b);var d=this._section=fc("section",a+"-list");c&&(this._map.on("click",this.collapse,this),db||Ic(b,{mouseenter:this.expand,mouseleave:this.collapse},this));var e=this._layersLink=fc("a",a+"-toggle",b);e.href="#",e.title="Layers",xb?(Ic(e,"click",Rc),Ic(e,"click",this.expand,this)):Ic(e,"focus",this.expand,this),c||this.expand(),this._baseLayersList=fc("div",a+"-base",d),this._separator=fc("div",a+"-separator",d),this._overlaysList=fc("div",a+"-overlays",d),b.appendChild(d)
},_getLayer:function(a){for(var b=0;b<this._layers.length;b++)if(this._layers[b]&&h(this._layers[b].layer)===a)return this._layers[b]},_addLayer:function(a,b,c){this._map&&a.on("add remove",this._onLayerChange,this),this._layers.push({layer:a,name:b,overlay:c}),this.options.sortLayers&&this._layers.sort(f(function(a,b){return this.options.sortFunction(a.layer,b.layer,a.name,b.name)},this)),this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;
hc(this._baseLayersList),hc(this._overlaysList),this._layerControlInputs=[];var a,b,c,d,e=0;for(c=0;c<this._layers.length;c++)d=this._layers[c],this._addItem(d),b=b||d.overlay,a=a||!d.overlay,e+=d.overlay?0:1;return this.options.hideSingleBase&&(a=a&&e>1,this._baseLayersList.style.display=a?"":"none"),this._separator.style.display=b&&a?"":"none",this},_onLayerChange:function(a){this._handlingClick||this._update();var b=this._getLayer(h(a.target)),c=b.overlay?"add"===a.type?"overlayadd":"overlayremove":"add"===a.type?"baselayerchange":null;
c&&this._map.fire(c,b)},_createRadioElement:function(a,b){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(b?' checked="checked"':"")+"/>",d=document.createElement("div");return d.innerHTML=c,d.firstChild},_addItem:function(a){var d,b=document.createElement("label"),c=this._map.hasLayer(a.layer);a.overlay?(d=document.createElement("input"),d.type="checkbox",d.className="leaflet-control-layers-selector",d.defaultChecked=c):d=this._createRadioElement("leaflet-base-layers",c),this._layerControlInputs.push(d),d.layerId=h(a.layer),Ic(d,"click",this._onInputClick,this);
var e=document.createElement("span");e.innerHTML=" "+a.name;var f=document.createElement("div");b.appendChild(f),f.appendChild(d),f.appendChild(e);var g=a.overlay?this._overlaysList:this._baseLayersList;return g.appendChild(b),this._checkDisabledLayers(),b},_onInputClick:function(){var b,c,a=this._layerControlInputs,d=[],e=[];this._handlingClick=!0;for(var f=a.length-1;f>=0;f--)b=a[f],c=this._getLayer(b.layerId).layer,b.checked?d.push(c):b.checked||e.push(c);for(f=0;f<e.length;f++)this._map.hasLayer(e[f])&&this._map.removeLayer(e[f]);
for(f=0;f<d.length;f++)this._map.hasLayer(d[f])||this._map.addLayer(d[f]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var b,c,a=this._layerControlInputs,d=this._map.getZoom(),e=a.length-1;e>=0;e--)b=a[e],c=this._getLayer(b.layerId).layer,b.disabled=void 0!==c.options.minZoom&&d<c.options.minZoom||void 0!==c.options.maxZoom&&d>c.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()
},_collapse:function(){return this.collapse()}}),gd=function(a,b,c){return new fd(a,b,c)},hd=dd.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(a){var b="leaflet-control-zoom",c=fc("div",b+" leaflet-bar"),d=this.options;return this._zoomInButton=this._createButton(d.zoomInText,d.zoomInTitle,b+"-in",c,this._zoomIn),this._zoomOutButton=this._createButton(d.zoomOutText,d.zoomOutTitle,b+"-out",c,this._zoomOut),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),c
},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(a,b,c,d,e){var f=fc("a",c,d);
return f.innerHTML=a,f.href="#",f.title=b,f.setAttribute("role","button"),f.setAttribute("aria-label",b),Pc(f),Ic(f,"click",Rc),Ic(f,"click",e,this),Ic(f,"click",this._refocusOnMap,this),f},_updateDisabled:function(){var a=this._map,b="leaflet-disabled";mc(this._zoomInButton,b),mc(this._zoomOutButton,b),(this._disabled||a._zoom===a.getMinZoom())&&lc(this._zoomOutButton,b),(this._disabled||a._zoom===a.getMaxZoom())&&lc(this._zoomInButton,b)}});bd.mergeOptions({zoomControl:!0}),bd.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new hd,this.addControl(this.zoomControl))
});var id=function(a){return new hd(a)},jd=dd.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(a){var b="leaflet-control-scale",c=fc("div",b),d=this.options;return this._addScales(d,b+"-line",c),a.on(d.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),c},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,b,c){a.metric&&(this._mScale=fc("div",b,c)),a.imperial&&(this._iScale=fc("div",b,c))
},_update:function(){var a=this._map,b=a.getSize().y/2,c=a.distance(a.containerPointToLatLng([0,b]),a.containerPointToLatLng([this.options.maxWidth,b]));this._updateScales(c)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(a){var b=this._getRoundNum(a),c=1e3>b?b+" m":b/1e3+" km";this._updateScale(this._mScale,c,b/a)},_updateImperial:function(a){var c,d,e,b=3.2808399*a;b>5280?(c=b/5280,d=this._getRoundNum(c),this._updateScale(this._iScale,d+" mi",d/c)):(e=this._getRoundNum(b),this._updateScale(this._iScale,e+" ft",e/b))
},_updateScale:function(a,b,c){a.style.width=Math.round(this.options.maxWidth*c)+"px",a.innerHTML=b},_getRoundNum:function(a){var b=Math.pow(10,(Math.floor(a)+"").length-1),c=a/b;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,b*c}}),kd=function(a){return new jd(a)},ld=dd.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(a){o(this,a),this._attributions={}},onAdd:function(a){a.attributionControl=this,this._container=fc("div","leaflet-control-attribution"),Pc(this._container);
for(var b in a._layers)a._layers[b].getAttribution&&this.addAttribution(a._layers[b].getAttribution());return this._update(),this._container},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){if(this._map){var a=[];for(var b in this._attributions)this._attributions[b]&&a.push(b);
var c=[];this.options.prefix&&c.push(this.options.prefix),a.length&&c.push(a.join(", ")),this._container.innerHTML=c.join(" | ")}}});bd.mergeOptions({attributionControl:!0}),bd.addInitHook(function(){this.options.attributionControl&&(new ld).addTo(this)});var md=function(a){return new ld(a)};dd.Layers=fd,dd.Zoom=hd,dd.Scale=jd,dd.Attribution=ld,ed.layers=gd,ed.zoom=id,ed.scale=kd,ed.attribution=md;var nd=D.extend({initialize:function(a){this._map=a},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)
},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});nd.addTo=function(a,b){return a.addHandler(b,this),this};var zd,od={Events:F},pd=xb?"touchstart mousedown":"mousedown",qd={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},rd={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},sd=G.extend({options:{clickTolerance:3},initialize:function(a,b,c,d){o(this,d),this._element=a,this._dragStartTarget=b||a,this._preventOutline=c
},enable:function(){this._enabled||(Ic(this._dragStartTarget,pd,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(sd._dragging===this&&this.finishDrag(),Kc(this._dragStartTarget,pd,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(a){if(!a._simulated&&this._enabled&&(this._moved=!1,!kc(this._element,"leaflet-zoom-anim")&&!(sd._dragging||a.shiftKey||1!==a.which&&1!==a.button&&!a.touches||(sd._dragging=this,this._preventOutline&&Dc(this._element),zc(),vc(),this._moving)))){this.fire("down");
var b=a.touches?a.touches[0]:a,c=Fc(this._element);this._startPoint=new H(b.clientX,b.clientY),this._parentScale=Gc(c),Ic(document,rd[a.type],this._onMove,this),Ic(document,qd[a.type],this._onUp,this)}},_onMove:function(a){if(!a._simulated&&this._enabled){if(a.touches&&a.touches.length>1)return this._moved=!0,void 0;var b=a.touches&&1===a.touches.length?a.touches[0]:a,c=new H(b.clientX,b.clientY)._subtract(this._startPoint);(c.x||c.y)&&(Math.abs(c.x)+Math.abs(c.y)<this.options.clickTolerance||(c.x/=this._parentScale.x,c.y/=this._parentScale.y,Qc(a),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=uc(this._element).subtract(c),lc(document.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,window.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),lc(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(c),this._moving=!0,B(this._animRequest),this._lastEvent=a,this._animRequest=A(this._updatePosition,this,!0)))
}},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a),tc(this._element,this._newPos),this.fire("drag",a)},_onUp:function(a){!a._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){mc(document.body,"leaflet-dragging"),this._lastTarget&&(mc(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var a in rd)Kc(document,rd[a],this._onMove,this),Kc(document,qd[a],this._onUp,this);Ac(),wc(),this._moved&&this._moving&&(B(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,sd._dragging=!1
}}),Hd=(Object.freeze||Object)({simplify:td,pointToSegmentDistance:ud,closestPointOnSegment:vd,clipSegment:Ad,_getEdgeIntersection:Bd,_getBitCode:Cd,_sqClosestPointOnSegment:Ed,isFlat:Fd,_flat:Gd}),Jd=(Object.freeze||Object)({clipPolygon:Id}),Kd={project:function(a){return new H(a.lng,a.lat)},unproject:function(a){return new P(a.y,a.x)},bounds:new K([-180,-90],[180,90])},Ld={R:6378137,R_MINOR:6356752.314245179,bounds:new K([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(a){var b=Math.PI/180,c=this.R,d=a.lat*b,e=this.R_MINOR/c,f=Math.sqrt(1-e*e),g=f*Math.sin(d),h=Math.tan(Math.PI/4-d/2)/Math.pow((1-g)/(1+g),f/2);
return d=-c*Math.log(Math.max(h,1e-10)),new H(a.lng*b*c,d)},unproject:function(a){for(var j,b=180/Math.PI,c=this.R,d=this.R_MINOR/c,e=Math.sqrt(1-d*d),f=Math.exp(-a.y/c),g=Math.PI/2-2*Math.atan(f),h=0,i=.1;15>h&&Math.abs(i)>1e-7;h++)j=e*Math.sin(g),j=Math.pow((1-j)/(1+j),e/2),i=Math.PI/2-2*Math.atan(f*j)-g,g+=i;return new P(g*b,a.x*b/c)}},Md=(Object.freeze||Object)({LonLat:Kd,Mercator:Ld,SphericalMercator:T}),Nd=d({},S,{code:"EPSG:3395",projection:Ld,transformation:function(){var a=.5/(Math.PI*Ld.R);return V(a,.5,-a,.5)
}()}),Od=d({},S,{code:"EPSG:4326",projection:Kd,transformation:V(1/180,1,-1/180,.5)}),Pd=d({},R,{projection:Kd,transformation:V(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(a,b){var c=b.lng-a.lng,d=b.lat-a.lat;return Math.sqrt(c*c+d*d)},infinite:!0});R.Earth=S,R.EPSG3395=Nd,R.EPSG3857=W,R.EPSG900913=X,R.EPSG4326=Od,R.Simple=Pd;var Qd=G.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(a){return a.addLayer(this),this
},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[h(a)]=this,this},removeInteractiveTarget:function(a){return delete this._map._targets[h(a)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(a){var b=a.target;if(b.hasLayer(this)){if(this._map=b,this._zoomAnimated=b._zoomAnimated,this.getEvents){var c=this.getEvents();
b.on(c,this),this.once("remove",function(){b.off(c,this)},this)}this.onAdd(b),this.getAttribution&&b.attributionControl&&b.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),b.fire("layeradd",{layer:this})}}});bd.include({addLayer:function(a){if(!a._layerAdd)throw new Error("The provided object is not a Layer.");var b=h(a);return this._layers[b]?this:(this._layers[b]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a),this)},removeLayer:function(a){var b=h(a);
return this._layers[b]?(this._loaded&&a.onRemove(this),a.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(a.getAttribution()),delete this._layers[b],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return!!a&&h(a)in this._layers},eachLayer:function(a,b){for(var c in this._layers)a.call(b,this._layers[c]);return this},_addLayers:function(a){a=a?s(a)?a:[a]:[];for(var b=0,c=a.length;c>b;b++)this.addLayer(a[b])
},_addZoomLimit:function(a){(isNaN(a.options.maxZoom)||!isNaN(a.options.minZoom))&&(this._zoomBoundLayers[h(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){var b=h(a);this._zoomBoundLayers[b]&&(delete this._zoomBoundLayers[b],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,b=-1/0,c=this._getZoomSpan();for(var d in this._zoomBoundLayers){var e=this._zoomBoundLayers[d].options;a=void 0===e.minZoom?a:Math.min(a,e.minZoom),b=void 0===e.maxZoom?b:Math.max(b,e.maxZoom)}this._layersMaxZoom=b===-1/0?void 0:b,this._layersMinZoom=1/0===a?void 0:a,c!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)
}});var Rd=Qd.extend({initialize:function(a,b){o(this,b),this._layers={};var c,d;if(a)for(c=0,d=a.length;d>c;c++)this.addLayer(a[c])},addLayer:function(a){var b=this.getLayerId(a);return this._layers[b]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var b=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[b]&&this._map.removeLayer(this._layers[b]),delete this._layers[b],this},hasLayer:function(a){return!!a&&(a in this._layers||this.getLayerId(a)in this._layers)},clearLayers:function(){return this.eachLayer(this.removeLayer,this)
},invoke:function(a){var c,d,b=Array.prototype.slice.call(arguments,1);for(c in this._layers)d=this._layers[c],d[a]&&d[a].apply(d,b);return this},onAdd:function(a){this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a)},eachLayer:function(a,b){for(var c in this._layers)a.call(b,this._layers[c]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];return this.eachLayer(a.push,a),a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return h(a)
}}),Sd=function(a,b){return new Rd(a,b)},Td=Rd.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),Rd.prototype.addLayer.call(this,a),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),Rd.prototype.removeLayer.call(this,a),this.fire("layerremove",{layer:a})):this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")
},getBounds:function(){var a=new N;for(var b in this._layers){var c=this._layers[b];a.extend(c.getBounds?c.getBounds():c.getLatLng())}return a}}),Ud=function(a){return new Td(a)},Vd=D.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(a){o(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,b){var c=this._getIconUrl(a);if(!c){if("icon"===a)throw new Error("iconUrl not set in Icon options (see the docs).");
return null}var d=this._createImg(c,b&&"IMG"===b.tagName?b:null);return this._setIconStyles(d,a),d},_setIconStyles:function(a,b){var c=this.options,d=c[b+"Size"];"number"==typeof d&&(d=[d,d]);var e=J(d),f=J("shadow"===b&&c.shadowAnchor||c.iconAnchor||e&&e.divideBy(2,!0));a.className="leaflet-marker-"+b+" "+(c.className||""),f&&(a.style.marginLeft=-f.x+"px",a.style.marginTop=-f.y+"px"),e&&(a.style.width=e.x+"px",a.style.height=e.y+"px")},_createImg:function(a,b){return b=b||document.createElement("img"),b.src=a,b
},_getIconUrl:function(a){return Ab&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}}),Xd=Vd.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(a){return Xd.imagePath||(Xd.imagePath=this._detectIconPath()),(this.options.imagePath||Xd.imagePath)+Vd.prototype._getIconUrl.call(this,a)},_detectIconPath:function(){var a=fc("div","leaflet-default-icon-path",document.body),b=ec(a,"background-image")||ec(a,"backgroundImage");
return document.body.removeChild(a),b=null===b||0!==b.indexOf("url")?"":b.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),Yd=nd.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new sd(a,a,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),lc(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&mc(this._marker._icon,"leaflet-marker-draggable")
},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(a){var b=this._marker,c=b._map,d=this._marker.options.autoPanSpeed,e=this._marker.options.autoPanPadding,f=uc(b._icon),g=c.getPixelBounds(),h=c.getPixelOrigin(),i=M(g.min._subtract(h).add(e),g.max._subtract(h).subtract(e));if(!i.contains(f)){var j=J((Math.max(i.max.x,f.x)-i.max.x)/(g.max.x-i.max.x)-(Math.min(i.min.x,f.x)-i.min.x)/(g.min.x-i.min.x),(Math.max(i.max.y,f.y)-i.max.y)/(g.max.y-i.max.y)-(Math.min(i.min.y,f.y)-i.min.y)/(g.min.y-i.min.y)).multiplyBy(d);
c.panBy(j,{animate:!1}),this._draggable._newPos._add(j),this._draggable._startPos._add(j),tc(b._icon,this._draggable._newPos),this._onDrag(a),this._panRequest=A(this._adjustPan.bind(this,a))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onPreDrag:function(a){this._marker.options.autoPan&&(B(this._panRequest),this._panRequest=A(this._adjustPan.bind(this,a)))},_onDrag:function(a){var b=this._marker,c=b._shadow,d=uc(b._icon),e=b._map.layerPointToLatLng(d);
c&&tc(c,d),b._latlng=e,a.latlng=e,a.oldLatLng=this._oldLatLng,b.fire("move",a).fire("drag",a)},_onDragEnd:function(a){B(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",a)}}),Zd=Qd.extend({options:{icon:new Xd,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(a,b){o(this,b),this._latlng=Q(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._zoomAnimated&&a.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()
},onRemove:function(a){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&a.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(a){var b=this._latlng;return this._latlng=Q(a),this.update(),this.fire("move",{oldLatLng:b,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()
},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,b="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),c=a.icon.createIcon(this._icon),d=!1;c!==this._icon&&(this._icon&&this._removeIcon(),d=!0,a.title&&(c.title=a.title),"IMG"===c.tagName&&(c.alt=a.alt||"")),lc(c,b),a.keyboard&&(c.tabIndex="0"),this._icon=c,a.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});
var e=a.icon.createShadow(this._shadow),f=!1;e!==this._shadow&&(this._removeShadow(),f=!0),e&&(lc(e,b),e.alt=""),this._shadow=e,a.opacity<1&&this._updateOpacity(),d&&this.getPane().appendChild(this._icon),this._initInteraction(),e&&f&&this.getPane("shadowPane").appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),gc(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&gc(this._shadow),this._shadow=null
},_setPos:function(a){tc(this._icon,a),this._shadow&&tc(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon.style.zIndex=this._zIndex+a},_animateZoom:function(a){var b=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(b)},_initInteraction:function(){if(this.options.interactive&&(lc(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Yd)){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Yd(this),a&&this.dragging.enable()
}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;pc(this._icon,a),this._shadow&&pc(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}}),_d=Qd.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)
},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return o(this,a),this._renderer&&this._renderer._updateStyle(this),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path
},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),ae=_d.extend({options:{fill:!0,radius:10},initialize:function(a,b){o(this,b),this._latlng=Q(a),this._radius=this.options.radius},setLatLng:function(a){return this._latlng=Q(a),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()
},getRadius:function(){return this._radius},setStyle:function(a){var b=a&&a.radius||this._radius;return _d.prototype.setStyle.call(this,a),this.setRadius(b),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var a=this._radius,b=this._radiusY||a,c=this._clickTolerance(),d=[a+c,b+c];this._pxBounds=new K(this._point.subtract(d),this._point.add(d))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)
},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()}}),ce=ae.extend({initialize:function(a,b,c){if("number"==typeof b&&(b=d({},c,{radius:b})),o(this,b),this._latlng=Q(a),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius
},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new N(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:_d.prototype.setStyle,_project:function(){var a=this._latlng.lng,b=this._latlng.lat,c=this._map,d=c.options.crs;if(d.distance===S.distance){var e=Math.PI/180,f=this._mRadius/S.R/e,g=c.project([b+f,a]),h=c.project([b-f,a]),i=g.add(h).divideBy(2),j=c.unproject(i).lat,k=Math.acos((Math.cos(f*e)-Math.sin(b*e)*Math.sin(j*e))/(Math.cos(b*e)*Math.cos(j*e)))/e;
(isNaN(k)||0===k)&&(k=f/Math.cos(Math.PI/180*b)),this._point=i.subtract(c.getPixelOrigin()),this._radius=isNaN(k)?0:i.x-c.project([j,a-k]).x,this._radiusY=i.y-g.y}else{var l=d.unproject(d.project(this._latlng).subtract([this._mRadius,0]));this._point=c.latLngToLayerPoint(this._latlng),this._radius=this._point.x-c.latLngToLayerPoint(l).x}this._updateBounds()}}),ee=_d.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,b){o(this,b),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()
},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(a){for(var e,f,b=1/0,c=null,d=Ed,g=0,h=this._parts.length;h>g;g++)for(var i=this._parts[g],j=1,k=i.length;k>j;j++){e=i[j-1],f=i[j];var l=d(a,e,f,!0);b>l&&(b=l,c=d(a,e,f))}return c&&(c.distance=Math.sqrt(b)),c},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var a,b,c,d,e,f,g,h=this._rings[0],i=h.length;if(!i)return null;for(a=0,b=0;i-1>a;a++)b+=h[a].distanceTo(h[a+1])/2;if(0===b)return this._map.layerPointToLatLng(h[0]);
for(a=0,d=0;i-1>a;a++)if(e=h[a],f=h[a+1],c=e.distanceTo(f),d+=c,d>b)return g=(d-b)/c,this._map.layerPointToLatLng([f.x-g*(f.x-e.x),f.y-g*(f.y-e.y)])},getBounds:function(){return this._bounds},addLatLng:function(a,b){return b=b||this._defaultShape(),a=Q(a),b.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new N,this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return Fd(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(a){for(var b=[],c=Fd(a),d=0,e=a.length;e>d;d++)c?(b[d]=Q(a[d]),this._bounds.extend(b[d])):b[d]=this._convertLatLngs(a[d]);
return b},_project:function(){var a=new K;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,a);var b=this._clickTolerance(),c=new H(b,b);this._bounds.isValid()&&a.isValid()&&(a.min._subtract(c),a.max._add(c),this._pxBounds=a)},_projectLatlngs:function(a,b,c){var f,g,d=a[0]instanceof P,e=a.length;if(d){for(g=[],f=0;e>f;f++)g[f]=this._map.latLngToLayerPoint(a[f]),c.extend(g[f]);b.push(g)}else for(f=0;e>f;f++)this._projectLatlngs(a[f],b,c)},_clipPoints:function(){var a=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(a)){if(this.options.noClip)return this._parts=this._rings,void 0;
var c,d,e,f,g,h,i,b=this._parts;for(c=0,e=0,f=this._rings.length;f>c;c++)for(i=this._rings[c],d=0,g=i.length;g-1>d;d++)h=Ad(i[d],i[d+1],a,d,!0),h&&(b[e]=b[e]||[],b[e].push(h[0]),(h[1]!==i[d+1]||d===g-2)&&(b[e].push(h[1]),e++))}},_simplifyPoints:function(){for(var a=this._parts,b=this.options.smoothFactor,c=0,d=a.length;d>c;c++)a[c]=td(a[c],b)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(a,b){var c,d,e,f,g,h,i=this._clickTolerance();
if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(c=0,f=this._parts.length;f>c;c++)for(h=this._parts[c],d=0,g=h.length,e=g-1;g>d;e=d++)if((b||0!==d)&&ud(a,h[e],h[d])<=i)return!0;return!1}});ee._flat=Gd;var ge=ee.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var a,b,c,d,e,f,g,h,i,j=this._rings[0],k=j.length;if(!k)return null;for(f=g=h=0,a=0,b=k-1;k>a;b=a++)c=j[a],d=j[b],e=c.y*d.x-d.y*c.x,g+=(c.x+d.x)*e,h+=(c.y+d.y)*e,f+=3*e;
return i=0===f?j[0]:[g/f,h/f],this._map.layerPointToLatLng(i)},_convertLatLngs:function(a){var b=ee.prototype._convertLatLngs.call(this,a),c=b.length;return c>=2&&b[0]instanceof P&&b[0].equals(b[c-1])&&b.pop(),b},_setLatLngs:function(a){ee.prototype._setLatLngs.call(this,a),Fd(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Fd(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var a=this._renderer._bounds,b=this.options.weight,c=new H(b,b);if(a=new K(a.min.subtract(c),a.max.add(c)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(a)){if(this.options.noClip)return this._parts=this._rings,void 0;
for(var f,d=0,e=this._rings.length;e>d;d++)f=Id(this._rings[d],a,!0),f.length&&this._parts.push(f)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(a){var c,d,e,f,g,h,i,j,b=!1;if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(f=0,i=this._parts.length;i>f;f++)for(c=this._parts[f],g=0,j=c.length,h=j-1;j>g;h=g++)d=c[g],e=c[h],d.y>a.y!=e.y>a.y&&a.x<(e.x-d.x)*(a.y-d.y)/(e.y-d.y)+d.x&&(b=!b);return b||ee.prototype._containsPoint.call(this,a,!0)}}),ie=Td.extend({initialize:function(a,b){o(this,b),this._layers={},a&&this.addData(a)
},addData:function(a){var c,d,e,b=s(a)?a:a.features;if(b){for(c=0,d=b.length;d>c;c++)e=b[c],(e.geometries||e.geometry||e.features||e.coordinates)&&this.addData(e);return this}var f=this.options;if(f.filter&&!f.filter(a))return this;var g=je(a,f);return g?(g.feature=pe(a),g.defaultOptions=g.options,this.resetStyle(g),f.onEachFeature&&f.onEachFeature(a,g),this.addLayer(g)):this},resetStyle:function(a){return a.options=d({},a.defaultOptions),this._setLayerStyle(a,this.options.style),this},setStyle:function(a){return this.eachLayer(function(b){this._setLayerStyle(b,a)
},this)},_setLayerStyle:function(a,b){"function"==typeof b&&(b=b(a.feature)),a.setStyle&&a.setStyle(b)}}),qe={toGeoJSON:function(a){return oe(this,{type:"Point",coordinates:me(this.getLatLng(),a)})}};Zd.include(qe),ce.include(qe),ae.include(qe),ee.include({toGeoJSON:function(a){var b=!Fd(this._latlngs),c=ne(this._latlngs,b?1:0,!1,a);return oe(this,{type:(b?"Multi":"")+"LineString",coordinates:c})}}),ge.include({toGeoJSON:function(a){var b=!Fd(this._latlngs),c=b&&!Fd(this._latlngs[0]),d=ne(this._latlngs,c?2:b?1:0,!0,a);
return b||(d=[d]),oe(this,{type:(c?"Multi":"")+"Polygon",coordinates:d})}}),Rd.include({toMultiPoint:function(a){var b=[];return this.eachLayer(function(c){b.push(c.toGeoJSON(a).geometry.coordinates)}),oe(this,{type:"MultiPoint",coordinates:b})},toGeoJSON:function(a){var b=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===b)return this.toMultiPoint(a);var c="GeometryCollection"===b,d=[];return this.eachLayer(function(b){if(b.toGeoJSON){var e=b.toGeoJSON(a);if(c)d.push(e.geometry);
else{var f=pe(e);"FeatureCollection"===f.type?d.push.apply(d,f.features):d.push(f)}}}),c?oe(this,{geometries:d,type:"GeometryCollection"}):{type:"FeatureCollection",features:d}}});var se=re,te=Qd.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(a,b,c){this._url=a,this._bounds=O(b),o(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(lc(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()
},onRemove:function(){gc(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&ic(this._image),this},bringToBack:function(){return this._map&&jc(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=O(a),this._map&&this._reset(),this
},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a="IMG"===this._url.tagName,b=this._image=a?this._url:fc("img");return lc(b,"leaflet-image-layer"),this._zoomAnimated&&lc(b,"leaflet-zoom-animated"),this.options.className&&lc(b,this.options.className),b.onselectstart=k,b.onmousemove=k,b.onload=f(this.fire,this,"load"),b.onerror=f(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(b.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),a?(this._url=b.src,void 0):(b.src=this._url,b.alt=this.options.alt,void 0)
},_animateZoom:function(a){var b=this._map.getZoomScale(a.zoom),c=this._map._latLngBoundsToNewLayerBounds(this._bounds,a.zoom,a.center).min;sc(this._image,c,b)},_reset:function(){var a=this._image,b=new K(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),c=b.getSize();tc(a,b.min),a.style.width=c.x+"px",a.style.height=c.y+"px"},_updateOpacity:function(){pc(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)
},_overlayOnError:function(){this.fire("error");var a=this.options.errorOverlayUrl;a&&this._url!==a&&(this._url=a,this._image.src=a)}}),ue=function(a,b,c){return new te(a,b,c)},ve=te.extend({options:{autoplay:!0,loop:!0},_initImage:function(){var a="VIDEO"===this._url.tagName,b=this._image=a?this._url:fc("video");if(lc(b,"leaflet-image-layer"),this._zoomAnimated&&lc(b,"leaflet-zoom-animated"),b.onselectstart=k,b.onmousemove=k,b.onloadeddata=f(this.fire,this,"load"),a){for(var c=b.getElementsByTagName("source"),d=[],e=0;e<c.length;e++)d.push(c[e].src);
return this._url=c.length>0?d:[b.src],void 0}s(this._url)||(this._url=[this._url]),b.autoplay=!!this.options.autoplay,b.loop=!!this.options.loop;for(var g=0;g<this._url.length;g++){var h=fc("source");h.src=this._url[g],b.appendChild(h)}}}),xe=Qd.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(a,b){o(this,a),this._source=b},onAdd:function(a){this._zoomAnimated=a._zoomAnimated,this._container||this._initLayout(),a._fadeAnimated&&pc(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&pc(this._container,1),this.bringToFront()
},onRemove:function(a){a._fadeAnimated?(pc(this._container,0),this._removeTimeout=setTimeout(f(gc,void 0,this._container),200)):gc(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=Q(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())
},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ic(this._container),this},bringToBack:function(){return this._map&&jc(this._container),this},_updateContent:function(){if(this._content){var a=this._contentNode,b="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof b)a.innerHTML=b;
else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(b)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),b=J(this.options.offset),c=this._getAnchor();this._zoomAnimated?tc(this._container,a.add(c)):b=b.add(a).add(c);var d=this._containerBottom=-b.y,e=this._containerLeft=-Math.round(this._containerWidth/2)+b.x;this._container.style.bottom=d+"px",this._container.style.left=e+"px"}},_getAnchor:function(){return[0,0]}}),ye=xe.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(a){return a.openPopup(this),this
},onAdd:function(a){xe.prototype.onAdd.call(this,a),a.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof _d||this._source.on("preclick",Nc))},onRemove:function(a){xe.prototype.onRemove.call(this,a),a.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof _d||this._source.off("preclick",Nc))},getEvents:function(){var a=xe.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this._close),this.options.keepInView&&(a.moveend=this._adjustPan),a
},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var a="leaflet-popup",b=this._container=fc("div",a+" "+(this.options.className||"")+" leaflet-zoom-animated"),c=this._wrapper=fc("div",a+"-content-wrapper",b);if(this._contentNode=fc("div",a+"-content",c),Pc(c),Oc(this._contentNode),Ic(c,"contextmenu",Nc),this._tipContainer=fc("div",a+"-tip-container",b),this._tip=fc("div",a+"-tip",this._tipContainer),this.options.closeButton){var d=this._closeButton=fc("a",a+"-close-button",b);
d.href="#close",d.innerHTML="&#215;",Ic(d,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var a=this._contentNode,b=a.style;b.width="",b.whiteSpace="nowrap";var c=a.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),b.width=c+1+"px",b.whiteSpace="",b.height="";var d=a.offsetHeight,e=this.options.maxHeight,f="leaflet-popup-scrolled";e&&d>e?(b.height=e+"px",lc(a,f)):mc(a,f),this._containerWidth=this._container.offsetWidth},_animateZoom:function(a){var b=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center),c=this._getAnchor();
tc(this._container,b.add(c))},_adjustPan:function(){if(this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var a=this._map,b=parseInt(ec(this._container,"marginBottom"),10)||0,c=this._container.offsetHeight+b,d=this._containerWidth,e=new H(this._containerLeft,-c-this._containerBottom);e._add(uc(this._container));var f=a.layerPointToContainerPoint(e),g=J(this.options.autoPanPadding),h=J(this.options.autoPanPaddingTopLeft||g),i=J(this.options.autoPanPaddingBottomRight||g),j=a.getSize(),k=0,l=0;
f.x+d+i.x>j.x&&(k=f.x+d-j.x+i.x),f.x-k-h.x<0&&(k=f.x-h.x),f.y+c+i.y>j.y&&(l=f.y+c-j.y+i.y),f.y-l-h.y<0&&(l=f.y-h.y),(k||l)&&a.fire("autopanstart").panBy([k,l])}},_onCloseButtonClick:function(a){this._close(),Rc(a)},_getAnchor:function(){return J(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),ze=function(a,b){return new ye(a,b)};bd.mergeOptions({closePopupOnClick:!0}),bd.include({openPopup:function(a,b,c){return a instanceof ye||(a=new ye(c).setContent(a)),b&&a.setLatLng(b),this.hasLayer(a)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=a,this.addLayer(a))
},closePopup:function(a){return a&&a!==this._popup||(a=this._popup,this._popup=null),a&&this.removeLayer(a),this}}),Qd.include({bindPopup:function(a,b){return a instanceof ye?(o(a,b),this._popup=a,a._source=this):((!this._popup||b)&&(this._popup=new ye(b,this)),this._popup.setContent(a)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this
},openPopup:function(a,b){if(a instanceof Qd||(b=a,a=this),a instanceof Td)for(var c in this._layers){a=this._layers[c];break}return b||(b=a.getCenter?a.getCenter():a.getLatLng()),this._popup&&this._map&&(this._popup._source=a,this._popup.update(),this._map.openPopup(this._popup,b)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(a){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(a)),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1
},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){var b=a.layer||a.target;if(this._popup&&this._map)return Rc(a),b instanceof _d?(this.openPopup(a.layer||a.target,a.latlng),void 0):(this._map.hasLayer(this._popup)&&this._popup._source===b?this.closePopup():this.openPopup(b,a.latlng),void 0)},_movePopup:function(a){this._popup.setLatLng(a.latlng)},_onKeyPress:function(a){13===a.originalEvent.keyCode&&this._openPopup(a)
}});var Ae=xe.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(a){xe.prototype.onAdd.call(this,a),this.setOpacity(this.options.opacity),a.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(a){xe.prototype.onRemove.call(this,a),a.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var a=xe.prototype.getEvents.call(this);
return xb&&!this.options.permanent&&(a.preclick=this._close),a},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var a="leaflet-tooltip",b=a+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=fc("div",b)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(a){var b=this._map,c=this._container,d=b.latLngToContainerPoint(b.getCenter()),e=b.layerPointToContainerPoint(a),f=this.options.direction,g=c.offsetWidth,h=c.offsetHeight,i=J(this.options.offset),j=this._getAnchor();
"top"===f?a=a.add(J(-g/2+i.x,-h+i.y+j.y,!0)):"bottom"===f?a=a.subtract(J(g/2-i.x,-i.y,!0)):"center"===f?a=a.subtract(J(g/2+i.x,h/2-j.y+i.y,!0)):"right"===f||"auto"===f&&e.x<d.x?(f="right",a=a.add(J(i.x+j.x,j.y-h/2+i.y,!0))):(f="left",a=a.subtract(J(g+j.x-i.x,h/2-j.y-i.y,!0))),mc(c,"leaflet-tooltip-right"),mc(c,"leaflet-tooltip-left"),mc(c,"leaflet-tooltip-top"),mc(c,"leaflet-tooltip-bottom"),lc(c,"leaflet-tooltip-"+f),tc(c,a)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)
},setOpacity:function(a){this.options.opacity=a,this._container&&pc(this._container,a)},_animateZoom:function(a){var b=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPosition(b)},_getAnchor:function(){return J(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Be=function(a,b){return new Ae(a,b)};bd.include({openTooltip:function(a,b,c){return a instanceof Ae||(a=new Ae(c).setContent(a)),b&&a.setLatLng(b),this.hasLayer(a)?this:this.addLayer(a)
},closeTooltip:function(a){return a&&this.removeLayer(a),this}}),Qd.include({bindTooltip:function(a,b){return a instanceof Ae?(o(a,b),this._tooltip=a,a._source=this):((!this._tooltip||b)&&(this._tooltip=new Ae(b,this)),this._tooltip.setContent(a)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(a){if(a||!this._tooltipHandlersAdded){var b=a?"off":"on",c={remove:this.closeTooltip,move:this._moveTooltip};
this._tooltip.options.permanent?c.add=this._openTooltip:(c.mouseover=this._openTooltip,c.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(c.mousemove=this._moveTooltip),xb&&(c.click=this._openTooltip)),this[b](c),this._tooltipHandlersAdded=!a}},openTooltip:function(a,b){if(a instanceof Qd||(b=a,a=this),a instanceof Td)for(var c in this._layers){a=this._layers[c];break}return b||(b=a.getCenter?a.getCenter():a.getLatLng()),this._tooltip&&this._map&&(this._tooltip._source=a,this._tooltip.update(),this._map.openTooltip(this._tooltip,b),this._tooltip.options.interactive&&this._tooltip._container&&(lc(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this
},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(mc(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(a){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(a)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(a){return this._tooltip&&this._tooltip.setContent(a),this},getTooltip:function(){return this._tooltip
},_openTooltip:function(a){var b=a.layer||a.target;this._tooltip&&this._map&&this.openTooltip(b,this._tooltip.options.sticky?a.latlng:void 0)},_moveTooltip:function(a){var c,d,b=a.latlng;this._tooltip.options.sticky&&a.originalEvent&&(c=this._map.mouseEventToContainerPoint(a.originalEvent),d=this._map.containerPointToLayerPoint(c),b=this._map.layerPointToLatLng(d)),this._tooltip.setLatLng(b)}});var Ce=Vd.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(a){var b=a&&"DIV"===a.tagName?a:document.createElement("div"),c=this.options;
if(b.innerHTML=c.html!==!1?c.html:"",c.bgPos){var d=J(c.bgPos);b.style.backgroundPosition=-d.x+"px "+-d.y+"px"}return this._setIconStyles(b,"icon"),b},createShadow:function(){return null}});Vd.Default=Xd;var Ee=Qd.extend({options:{tileSize:256,opacity:1,updateWhenIdle:sb,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(a){o(this,a)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()
},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles(),gc(this._container),a._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ic(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(jc(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this
},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=i(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return document.createElement("div")},getTileSize:function(){var a=this.options.tileSize;
return a instanceof H?a:new H(a,a)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a){for(var f,b=this.getPane().children,c=-a(-1/0,1/0),d=0,e=b.length;e>d;d++)f=b[d].style.zIndex,b[d]!==this._container&&f&&(c=a(c,+f));isFinite(c)&&(this.options.zIndex=c+a(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ab){pc(this._container,this.options.opacity);var a=+new Date,b=!1,c=!1;
for(var d in this._tiles){var e=this._tiles[d];if(e.current&&e.loaded){var f=Math.min(1,(a-e.loaded)/200);pc(e.el,f),1>f?b=!0:(e.active?c=!0:this._onOpaqueTile(e),e.active=!0)}}c&&!this._noPrune&&this._pruneTiles(),b&&(B(this._fadeFrame),this._fadeFrame=A(this._updateOpacity,this))}},_onOpaqueTile:k,_initContainer:function(){this._container||(this._container=fc("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))
},_updateLevels:function(){var a=this._tileZoom,b=this.options.maxZoom;if(void 0===a)return void 0;for(var c in this._levels)this._levels[c].el.children.length||c===a?(this._levels[c].el.style.zIndex=b-Math.abs(a-c),this._onUpdateLevel(c)):(gc(this._levels[c].el),this._removeTilesAtZoom(c),this._onRemoveLevel(c),delete this._levels[c]);var d=this._levels[a],e=this._map;return d||(d=this._levels[a]={},d.el=fc("div","leaflet-tile-container leaflet-zoom-animated",this._container),d.el.style.zIndex=b,d.origin=e.project(e.unproject(e.getPixelOrigin()),a).round(),d.zoom=a,this._setZoomTransform(d,e.getCenter(),e.getZoom()),k(d.el.offsetWidth),this._onCreateLevel(d)),this._level=d,d
},_onUpdateLevel:k,_onRemoveLevel:k,_onCreateLevel:k,_pruneTiles:function(){if(this._map){var a,b,c=this._map.getZoom();if(c>this.options.maxZoom||c<this.options.minZoom)return this._removeAllTiles(),void 0;for(a in this._tiles)b=this._tiles[a],b.retain=b.current;for(a in this._tiles)if(b=this._tiles[a],b.current&&!b.active){var d=b.coords;this._retainParent(d.x,d.y,d.z,d.z-5)||this._retainChildren(d.x,d.y,d.z,d.z+2)}for(a in this._tiles)this._tiles[a].retain||this._removeTile(a)}},_removeTilesAtZoom:function(a){for(var b in this._tiles)this._tiles[b].coords.z===a&&this._removeTile(b)
},_removeAllTiles:function(){for(var a in this._tiles)this._removeTile(a)},_invalidateAll:function(){for(var a in this._levels)gc(this._levels[a].el),this._onRemoveLevel(a),delete this._levels[a];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(a,b,c,d){var e=Math.floor(a/2),f=Math.floor(b/2),g=c-1,h=new H(+e,+f);h.z=+g;var i=this._tileCoordsToKey(h),j=this._tiles[i];return j&&j.active?(j.retain=!0,!0):(j&&j.loaded&&(j.retain=!0),g>d?this._retainParent(e,f,g,d):!1)},_retainChildren:function(a,b,c,d){for(var e=2*a;2*a+2>e;e++)for(var f=2*b;2*b+2>f;f++){var g=new H(e,f);
g.z=c+1;var h=this._tileCoordsToKey(g),i=this._tiles[h];i&&i.active?i.retain=!0:(i&&i.loaded&&(i.retain=!0),d>c+1&&this._retainChildren(e,f,c+1,d))}},_resetView:function(a){var b=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),b,b)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_clampZoom:function(a){var b=this.options;return void 0!==b.minNativeZoom&&a<b.minNativeZoom?b.minNativeZoom:void 0!==b.maxNativeZoom&&b.maxNativeZoom<a?b.maxNativeZoom:a},_setView:function(a,b,c,d){var e=this._clampZoom(Math.round(b));
(void 0!==this.options.maxZoom&&e>this.options.maxZoom||void 0!==this.options.minZoom&&e<this.options.minZoom)&&(e=void 0);var f=this.options.updateWhenZooming&&e!==this._tileZoom;(!d||f)&&(this._tileZoom=e,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==e&&this._update(a),c||this._pruneTiles(),this._noPrune=!!c),this._setZoomTransforms(a,b)},_setZoomTransforms:function(a,b){for(var c in this._levels)this._setZoomTransform(this._levels[c],a,b)},_setZoomTransform:function(a,b,c){var d=this._map.getZoomScale(c,a.zoom),e=a.origin.multiplyBy(d).subtract(this._map._getNewPixelOrigin(b,c)).round();
rb?sc(a.el,e,d):tc(a.el,e)},_resetGrid:function(){var a=this._map,b=a.options.crs,c=this._tileSize=this.getTileSize(),d=this._tileZoom,e=this._map.getPixelWorldBounds(this._tileZoom);e&&(this._globalTileRange=this._pxBoundsToTileRange(e)),this._wrapX=b.wrapLng&&!this.options.noWrap&&[Math.floor(a.project([0,b.wrapLng[0]],d).x/c.x),Math.ceil(a.project([0,b.wrapLng[1]],d).x/c.y)],this._wrapY=b.wrapLat&&!this.options.noWrap&&[Math.floor(a.project([b.wrapLat[0],0],d).y/c.x),Math.ceil(a.project([b.wrapLat[1],0],d).y/c.y)]
},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(a){var b=this._map,c=b._animatingZoom?Math.max(b._animateToZoom,b.getZoom()):b.getZoom(),d=b.getZoomScale(c,this._tileZoom),e=b.project(a,this._tileZoom).floor(),f=b.getSize().divideBy(2*d);return new K(e.subtract(f),e.add(f))},_update:function(a){var b=this._map;if(b){var c=this._clampZoom(b.getZoom());if(void 0===a&&(a=b.getCenter()),void 0!==this._tileZoom){var d=this._getTiledPixelBounds(a),e=this._pxBoundsToTileRange(d),f=e.getCenter(),g=[],h=this.options.keepBuffer,i=new K(e.getBottomLeft().subtract([h,-h]),e.getTopRight().add([h,-h]));
if(!(isFinite(e.min.x)&&isFinite(e.min.y)&&isFinite(e.max.x)&&isFinite(e.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var j in this._tiles){var k=this._tiles[j].coords;k.z===this._tileZoom&&i.contains(new H(k.x,k.y))||(this._tiles[j].current=!1)}if(Math.abs(c-this._tileZoom)>1)return this._setView(a,c),void 0;for(var l=e.min.y;l<=e.max.y;l++)for(var m=e.min.x;m<=e.max.x;m++){var n=new H(m,l);if(n.z=this._tileZoom,this._isValidTile(n)){var o=this._tiles[this._tileCoordsToKey(n)];
o?o.current=!0:g.push(n)}}if(g.sort(function(a,b){return a.distanceTo(f)-b.distanceTo(f)}),0!==g.length){this._loading||(this._loading=!0,this.fire("loading"));var p=document.createDocumentFragment();for(m=0;m<g.length;m++)this._addTile(g[m],p);this._level.el.appendChild(p)}}}},_isValidTile:function(a){var b=this._map.options.crs;if(!b.infinite){var c=this._globalTileRange;if(!b.wrapLng&&(a.x<c.min.x||a.x>c.max.x)||!b.wrapLat&&(a.y<c.min.y||a.y>c.max.y))return!1}if(!this.options.bounds)return!0;var d=this._tileCoordsToBounds(a);
return O(this.options.bounds).overlaps(d)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToNwSe:function(a){var b=this._map,c=this.getTileSize(),d=a.scaleBy(c),e=d.add(c),f=b.unproject(d,a.z),g=b.unproject(e,a.z);return[f,g]},_tileCoordsToBounds:function(a){var b=this._tileCoordsToNwSe(a),c=new N(b[0],b[1]);return this.options.noWrap||(c=this._map.wrapLatLngBounds(c)),c},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(a){var b=a.split(":"),c=new H(+b[0],+b[1]);
return c.z=+b[2],c},_removeTile:function(a){var b=this._tiles[a];b&&(gc(b.el),delete this._tiles[a],this.fire("tileunload",{tile:b.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){lc(a,"leaflet-tile");var b=this.getTileSize();a.style.width=b.x+"px",a.style.height=b.y+"px",a.onselectstart=k,a.onmousemove=k,ab&&this.options.opacity<1&&pc(a,this.options.opacity),db&&!eb&&(a.style.WebkitBackfaceVisibility="hidden")},_addTile:function(a,b){var c=this._getTilePos(a),d=this._tileCoordsToKey(a),e=this.createTile(this._wrapCoords(a),f(this._tileReady,this,a));
this._initTile(e),this.createTile.length<2&&A(f(this._tileReady,this,a,null,e)),tc(e,c),this._tiles[d]={el:e,coords:a,current:!0},b.appendChild(e),this.fire("tileloadstart",{tile:e,coords:a})},_tileReady:function(a,b,c){b&&this.fire("tileerror",{error:b,tile:c,coords:a});var d=this._tileCoordsToKey(a);c=this._tiles[d],c&&(c.loaded=+new Date,this._map._fadeAnimated?(pc(c.el,0),B(this._fadeFrame),this._fadeFrame=A(this._updateOpacity,this)):(c.active=!0,this._pruneTiles()),b||(lc(c.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:c.el,coords:a})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ab||!this._map._fadeAnimated?A(this._pruneTiles,this):setTimeout(f(this._pruneTiles,this),250)))
},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var b=new H(this._wrapX?j(a.x,this._wrapX):a.x,this._wrapY?j(a.y,this._wrapY):a.y);return b.z=a.z,b},_pxBoundsToTileRange:function(a){var b=this.getTileSize();return new K(a.min.unscaleBy(b).floor(),a.max.unscaleBy(b).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles)if(!this._tiles[a].loaded)return!1;return!0}}),Ge=Ee.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(a,b){this._url=a,b=o(this,b),b.detectRetina&&Ab&&b.maxZoom>0&&(b.tileSize=Math.floor(b.tileSize/2),b.zoomReverse?(b.zoomOffset--,b.minZoom++):(b.zoomOffset++,b.maxZoom--),b.minZoom=Math.max(0,b.minZoom)),"string"==typeof b.subdomains&&(b.subdomains=b.subdomains.split("")),db||this.on("tileunload",this._onTileRemove)
},setUrl:function(a,b){return this._url===a&&void 0===b&&(b=!0),this._url=a,b||this.redraw(),this},createTile:function(a,b){var c=document.createElement("img");return Ic(c,"load",f(this._tileOnLoad,this,b,c)),Ic(c,"error",f(this._tileOnError,this,b,c)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),c.alt="",c.setAttribute("role","presentation"),c.src=this.getTileUrl(a),c},getTileUrl:function(a){var b={r:Ab?"@2x":"",s:this._getSubdomain(a),x:a.x,y:a.y,z:this._getZoomForUrl()};
if(this._map&&!this._map.options.crs.infinite){var c=this._globalTileRange.max.y-a.y;this.options.tms&&(b.y=c),b["-y"]=c}return r(this._url,d(b,this.options))},_tileOnLoad:function(a,b){ab?setTimeout(f(a,this,null,b),0):a(null,b)},_tileOnError:function(a,b,c){var d=this.options.errorTileUrl;d&&b.getAttribute("src")!==d&&(b.src=d),a(c,b)},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this._tileZoom,b=this.options.maxZoom,c=this.options.zoomReverse,d=this.options.zoomOffset;return c&&(a=b-a),a+d
},_getSubdomain:function(a){var b=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[b]},_abortLoading:function(){var a,b;for(a in this._tiles)this._tiles[a].coords.z!==this._tileZoom&&(b=this._tiles[a].el,b.onload=k,b.onerror=k,b.complete||(b.src=u,gc(b),delete this._tiles[a]))},_removeTile:function(a){var b=this._tiles[a];if(b)return gb||b.el.setAttribute("src",u),Ee.prototype._removeTile.call(this,a)},_tileReady:function(a,b,c){return!this._map||c&&c.getAttribute("src")===u?void 0:Ee.prototype._tileReady.call(this,a,b,c)
}}),Ie=Ge.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(a,b){this._url=a;var c=d({},this.defaultWmsParams);for(var e in b)e in this.options||(c[e]=b[e]);b=o(this,b);var f=b.detectRetina&&Ab?2:1,g=this.getTileSize();c.width=g.x*f,c.height=g.y*f,this.wmsParams=c},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var b=this._wmsVersion>=1.3?"crs":"srs";
this.wmsParams[b]=this._crs.code,Ge.prototype.onAdd.call(this,a)},getTileUrl:function(a){var b=this._tileCoordsToNwSe(a),c=this._crs,d=M(c.project(b[0]),c.project(b[1])),e=d.min,f=d.max,g=(this._wmsVersion>=1.3&&this._crs===Od?[e.y,e.x,f.y,f.x]:[e.x,e.y,f.x,f.y]).join(","),h=Ge.prototype.getTileUrl.call(this,a);return h+p(this.wmsParams,h,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+g},setParams:function(a,b){return d(this.wmsParams,a),b||this.redraw(),this}});Ge.WMS=Ie,He.wms=Je;var Ke=Qd.extend({options:{padding:.1,tolerance:0},initialize:function(a){o(this,a),h(this),this._layers=this._layers||{}
},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&lc(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)
},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(a,b){var c=this._map.getZoomScale(b,this._zoom),d=uc(this._container),e=this._map.getSize().multiplyBy(.5+this.options.padding),f=this._map.project(this._center,b),g=this._map.project(a,b),h=g.subtract(f),i=e.multiplyBy(-c).add(d).add(e).subtract(h);rb?sc(this._container,i,c):tc(this._container,i)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var a in this._layers)this._layers[a]._reset()
},_onZoomEnd:function(){for(var a in this._layers)this._layers[a]._project()},_updatePaths:function(){for(var a in this._layers)this._layers[a]._update()},_update:function(){var a=this.options.padding,b=this._map.getSize(),c=this._map.containerPointToLayerPoint(b.multiplyBy(-a)).round();this._bounds=new K(c,c.add(b.multiplyBy(1+2*a)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Le=Ke.extend({getEvents:function(){var a=Ke.prototype.getEvents.call(this);return a.viewprereset=this._onViewPreReset,a
},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ke.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var a=this._container=document.createElement("canvas");Ic(a,"mousemove",i(this._onMouseMove,32,this),this),Ic(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ic(a,"mouseout",this._handleMouseOut,this),this._ctx=a.getContext("2d")},_destroyContainer:function(){B(this._redrawRequest),delete this._ctx,gc(this._container),Kc(this._container),delete this._container
},_updatePaths:function(){if(!this._postponeUpdatePaths){var a;this._redrawBounds=null;for(var b in this._layers)a=this._layers[b],a._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){Ke.prototype._update.call(this);var a=this._bounds,b=this._container,c=a.getSize(),d=Ab?2:1;tc(b,a.min),b.width=d*c.x,b.height=d*c.y,b.style.width=c.x+"px",b.style.height=c.y+"px",Ab&&this._ctx.scale(2,2),this._ctx.translate(-a.min.x,-a.min.y),this.fire("update")}},_reset:function(){Ke.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())
},_initPath:function(a){this._updateDashArray(a),this._layers[h(a)]=a;var b=a._order={layer:a,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=b),this._drawLast=b,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(a){this._requestRedraw(a)},_removePath:function(a){var b=a._order,c=b.next,d=b.prev;c?c.prev=d:this._drawLast=d,d?d.next=c:this._drawFirst=c,delete a._order,delete this._layers[h(a)],this._requestRedraw(a)},_updatePath:function(a){this._extendRedrawBounds(a),a._project(),a._update(),this._requestRedraw(a)
},_updateStyle:function(a){this._updateDashArray(a),this._requestRedraw(a)},_updateDashArray:function(a){if("string"==typeof a.options.dashArray){var d,e,b=a.options.dashArray.split(/[, ]+/),c=[];for(e=0;e<b.length;e++){if(d=Number(b[e]),isNaN(d))return;c.push(d)}a.options._dashArray=c}else a.options._dashArray=a.options.dashArray},_requestRedraw:function(a){this._map&&(this._extendRedrawBounds(a),this._redrawRequest=this._redrawRequest||A(this._redraw,this))},_extendRedrawBounds:function(a){if(a._pxBounds){var b=(a.options.weight||0)+1;
this._redrawBounds=this._redrawBounds||new K,this._redrawBounds.extend(a._pxBounds.min.subtract([b,b])),this._redrawBounds.extend(a._pxBounds.max.add([b,b]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var a=this._redrawBounds;if(a){var b=a.getSize();this._ctx.clearRect(a.min.x,a.min.y,b.x,b.y)}else this._ctx.clearRect(0,0,this._container.width,this._container.height)
},_draw:function(){var a,b=this._redrawBounds;if(this._ctx.save(),b){var c=b.getSize();this._ctx.beginPath(),this._ctx.rect(b.min.x,b.min.y,c.x,c.y),this._ctx.clip()}this._drawing=!0;for(var d=this._drawFirst;d;d=d.next)a=d.layer,(!b||a._pxBounds&&a._pxBounds.intersects(b))&&a._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(a,b){if(this._drawing){var c,d,e,f,g=a._parts,h=g.length,i=this._ctx;if(h){for(i.beginPath(),c=0;h>c;c++){for(d=0,e=g[c].length;e>d;d++)f=g[c][d],i[d?"lineTo":"moveTo"](f.x,f.y);
b&&i.closePath()}this._fillStroke(i,a)}}},_updateCircle:function(a){if(this._drawing&&!a._empty()){var b=a._point,c=this._ctx,d=Math.max(Math.round(a._radius),1),e=(Math.max(Math.round(a._radiusY),1)||d)/d;1!==e&&(c.save(),c.scale(1,e)),c.beginPath(),c.arc(b.x,b.y/e,d,0,2*Math.PI,!1),1!==e&&c.restore(),this._fillStroke(c,a)}},_fillStroke:function(a,b){var c=b.options;c.fill&&(a.globalAlpha=c.fillOpacity,a.fillStyle=c.fillColor||c.color,a.fill(c.fillRule||"evenodd")),c.stroke&&0!==c.weight&&(a.setLineDash&&a.setLineDash(b.options&&b.options._dashArray||[]),a.globalAlpha=c.opacity,a.lineWidth=c.weight,a.strokeStyle=c.color,a.lineCap=c.lineCap,a.lineJoin=c.lineJoin,a.stroke())
},_onClick:function(a){for(var c,d,b=this._map.mouseEventToLayerPoint(a),e=this._drawFirst;e;e=e.next)c=e.layer,c.options.interactive&&c._containsPoint(b)&&!this._map._draggableMoved(c)&&(d=c);d&&(Wc(a),this._fireEvent([d],a))},_onMouseMove:function(a){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var b=this._map.mouseEventToLayerPoint(a);this._handleMouseHover(a,b)}},_handleMouseOut:function(a){var b=this._hoveredLayer;b&&(mc(this._container,"leaflet-interactive"),this._fireEvent([b],a,"mouseout"),this._hoveredLayer=null)
},_handleMouseHover:function(a,b){for(var c,d,e=this._drawFirst;e;e=e.next)c=e.layer,c.options.interactive&&c._containsPoint(b)&&(d=c);d!==this._hoveredLayer&&(this._handleMouseOut(a),d&&(lc(this._container,"leaflet-interactive"),this._fireEvent([d],a,"mouseover"),this._hoveredLayer=d)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],a)},_fireEvent:function(a,b,c){this._map._fireDOMEvent(b,c||b.type,a)},_bringToFront:function(a){var b=a._order;if(b){var c=b.next,d=b.prev;c&&(c.prev=d,d?d.next=c:c&&(this._drawFirst=c),b.prev=this._drawLast,this._drawLast.next=b,b.next=null,this._drawLast=b,this._requestRedraw(a))
}},_bringToBack:function(a){var b=a._order;if(b){var c=b.next,d=b.prev;d&&(d.next=c,c?c.prev=d:d&&(this._drawLast=d),b.prev=null,b.next=this._drawFirst,this._drawFirst.prev=b,this._drawFirst=b,this._requestRedraw(a))}}}),Ne=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return document.createElement("<lvml:"+a+' class="lvml">')}}catch(a){return function(a){return document.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),Oe={_initContainer:function(){this._container=fc("div","leaflet-vml-container")
},_update:function(){this._map._animatingZoom||(Ke.prototype._update.call(this),this.fire("update"))},_initPath:function(a){var b=a._container=Ne("shape");lc(b,"leaflet-vml-shape "+(this.options.className||"")),b.coordsize="1 1",a._path=Ne("path"),b.appendChild(a._path),this._updateStyle(a),this._layers[h(a)]=a},_addPath:function(a){var b=a._container;this._container.appendChild(b),a.options.interactive&&a.addInteractiveTarget(b)},_removePath:function(a){var b=a._container;gc(b),a.removeInteractiveTarget(b),delete this._layers[h(a)]
},_updateStyle:function(a){var b=a._stroke,c=a._fill,d=a.options,e=a._container;e.stroked=!!d.stroke,e.filled=!!d.fill,d.stroke?(b||(b=a._stroke=Ne("stroke")),e.appendChild(b),b.weight=d.weight+"px",b.color=d.color,b.opacity=d.opacity,b.dashStyle=d.dashArray?s(d.dashArray)?d.dashArray.join(" "):d.dashArray.replace(/( *, *)/g," "):"",b.endcap=d.lineCap.replace("butt","flat"),b.joinstyle=d.lineJoin):b&&(e.removeChild(b),a._stroke=null),d.fill?(c||(c=a._fill=Ne("fill")),e.appendChild(c),c.color=d.fillColor||d.color,c.opacity=d.fillOpacity):c&&(e.removeChild(c),a._fill=null)
},_updateCircle:function(a){var b=a._point.round(),c=Math.round(a._radius),d=Math.round(a._radiusY||c);this._setPath(a,a._empty()?"M0 0":"AL "+b.x+","+b.y+" "+c+","+d+" 0,23592600")},_setPath:function(a,b){a._path.v=b},_bringToFront:function(a){ic(a._container)},_bringToBack:function(a){jc(a._container)}},Pe=Db?Ne:Y,Qe=Ke.extend({getEvents:function(){var a=Ke.prototype.getEvents.call(this);return a.zoomstart=this._onZoomStart,a},_initContainer:function(){this._container=Pe("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Pe("g"),this._container.appendChild(this._rootGroup)
},_destroyContainer:function(){gc(this._container),Kc(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){Ke.prototype._update.call(this);var a=this._bounds,b=a.getSize(),c=this._container;this._svgSize&&this._svgSize.equals(b)||(this._svgSize=b,c.setAttribute("width",b.x),c.setAttribute("height",b.y)),tc(c,a.min),c.setAttribute("viewBox",[a.min.x,a.min.y,b.x,b.y].join(" ")),this.fire("update")
}},_initPath:function(a){var b=a._path=Pe("path");a.options.className&&lc(b,a.options.className),a.options.interactive&&lc(b,"leaflet-interactive"),this._updateStyle(a),this._layers[h(a)]=a},_addPath:function(a){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(a){gc(a._path),a.removeInteractiveTarget(a._path),delete this._layers[h(a)]},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(a){var b=a._path,c=a.options;
b&&(c.stroke?(b.setAttribute("stroke",c.color),b.setAttribute("stroke-opacity",c.opacity),b.setAttribute("stroke-width",c.weight),b.setAttribute("stroke-linecap",c.lineCap),b.setAttribute("stroke-linejoin",c.lineJoin),c.dashArray?b.setAttribute("stroke-dasharray",c.dashArray):b.removeAttribute("stroke-dasharray"),c.dashOffset?b.setAttribute("stroke-dashoffset",c.dashOffset):b.removeAttribute("stroke-dashoffset")):b.setAttribute("stroke","none"),c.fill?(b.setAttribute("fill",c.fillColor||c.color),b.setAttribute("fill-opacity",c.fillOpacity),b.setAttribute("fill-rule",c.fillRule||"evenodd")):b.setAttribute("fill","none"))
},_updatePoly:function(a,b){this._setPath(a,Z(a._parts,b))},_updateCircle:function(a){var b=a._point,c=Math.max(Math.round(a._radius),1),d=Math.max(Math.round(a._radiusY),1)||c,e="a"+c+","+d+" 0 1,0 ",f=a._empty()?"M0 0":"M"+(b.x-c)+","+b.y+e+2*c+",0 "+e+2*-c+",0 ";this._setPath(a,f)},_setPath:function(a,b){a._path.setAttribute("d",b)},_bringToFront:function(a){ic(a._path)},_bringToBack:function(a){jc(a._path)}});Db&&Qe.include(Oe),bd.include({getRenderer:function(a){var b=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;
return b||(b=this._renderer=this._createRenderer()),this.hasLayer(b)||this.addLayer(b),b},_getPaneRenderer:function(a){if("overlayPane"===a||void 0===a)return!1;var b=this._paneRenderers[a];return void 0===b&&(b=this._createRenderer({pane:a}),this._paneRenderers[a]=b),b},_createRenderer:function(a){return this.options.preferCanvas&&Me(a)||Re(a)}});var Se=ge.extend({initialize:function(a,b){ge.prototype.initialize.call(this,this._boundsToLatLngs(a),b)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))
},_boundsToLatLngs:function(a){return a=O(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});Qe.create=Pe,Qe.pointsToPath=Z,ie.geometryToLayer=je,ie.coordsToLatLng=ke,ie.coordsToLatLngs=le,ie.latLngToCoords=me,ie.latLngsToCoords=ne,ie.getFeature=oe,ie.asFeature=pe,bd.mergeOptions({boxZoom:!0});var Ue=nd.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane,this._resetStateTimeout=0,a.on("unload",this._destroy,this)},addHooks:function(){Ic(this._container,"mousedown",this._onMouseDown,this)
},removeHooks:function(){Kc(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){gc(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(a){return!a.shiftKey||1!==a.which&&1!==a.button?!1:(this._clearDeferredResetState(),this._resetState(),vc(),zc(),this._startPoint=this._map.mouseEventToContainerPoint(a),Ic(document,{contextmenu:Rc,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this),void 0)
},_onMouseMove:function(a){this._moved||(this._moved=!0,this._box=fc("div","leaflet-zoom-box",this._container),lc(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(a);var b=new K(this._point,this._startPoint),c=b.getSize();tc(this._box,b.min),this._box.style.width=c.x+"px",this._box.style.height=c.y+"px"},_finish:function(){this._moved&&(gc(this._box),mc(this._container,"leaflet-crosshair")),wc(),Ac(),Kc(document,{contextmenu:Rc,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)
},_onMouseUp:function(a){if((1===a.which||1===a.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(f(this._resetState,this),0);var b=new N(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(b).fire("boxzoomend",{boxZoomBounds:b})}},_onKeyDown:function(a){27===a.keyCode&&this._finish()}});bd.addInitHook("addHandler","boxZoom",Ue),bd.mergeOptions({doubleClickZoom:!0});var Ve=nd.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)
},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var b=this._map,c=b.getZoom(),d=b.options.zoomDelta,e=a.originalEvent.shiftKey?c-d:c+d;"center"===b.options.doubleClickZoom?b.setZoom(e):b.setZoomAround(a.containerPoint,e)}});bd.addInitHook("addHandler","doubleClickZoom",Ve),bd.mergeOptions({dragging:!0,inertia:!eb,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var We=nd.extend({addHooks:function(){if(!this._draggable){var a=this._map;
this._draggable=new sd(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}lc(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){mc(this._map._container,"leaflet-grab"),mc(this._map._container,"leaflet-touch-drag"),this._draggable.disable()
},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var a=this._map;if(a._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var b=O(this._map.options.maxBounds);this._offsetLimit=M(this._map.latLngToContainerPoint(b.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(b.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))
}else this._offsetLimit=null;a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(a){if(this._map.options.inertia){var b=this._lastTime=+new Date,c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(b),this._prunePositions(b)}this._map.fire("move",a).fire("drag",a)},_prunePositions:function(a){for(;this._positions.length>1&&a-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2),b=this._map.latLngToLayerPoint([0,0]);
this._initialWorldOffset=b.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,b){return a-(a-b)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var a=this._draggable._newPos.subtract(this._draggable._startPos),b=this._offsetLimit;a.x<b.min.x&&(a.x=this._viscousLimit(a.x,b.min.x)),a.y<b.min.y&&(a.y=this._viscousLimit(a.y,b.min.y)),a.x>b.max.x&&(a.x=this._viscousLimit(a.x,b.max.x)),a.y>b.max.y&&(a.y=this._viscousLimit(a.y,b.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)
}},_onPreDragWrap:function(){var a=this._worldWidth,b=Math.round(a/2),c=this._initialWorldOffset,d=this._draggable._newPos.x,e=(d-b+c)%a+b-c,f=(d+b+c)%a-b-c,g=Math.abs(e+c)<Math.abs(f+c)?e:f;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=g},_onDragEnd:function(a){var b=this._map,c=b.options,d=!c.inertia||this._times.length<2;if(b.fire("dragend",a),d)b.fire("moveend");else{this._prunePositions(+new Date);var e=this._lastPos.subtract(this._positions[0]),f=(this._lastTime-this._times[0])/1e3,g=c.easeLinearity,h=e.multiplyBy(g/f),i=h.distanceTo([0,0]),j=Math.min(c.inertiaMaxSpeed,i),k=h.multiplyBy(j/i),l=j/(c.inertiaDeceleration*g),m=k.multiplyBy(-l/2).round();
m.x||m.y?(m=b._limitOffset(m,b.options.maxBounds),A(function(){b.panBy(m,{duration:l,easeLinearity:g,noMoveStart:!0,animate:!0})})):b.fire("moveend")}}});bd.addInitHook("addHandler","dragging",We),bd.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Xe=nd.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanDelta(a.options.keyboardPanDelta),this._setZoomDelta(a.options.zoomDelta)},addHooks:function(){var a=this._map._container;
a.tabIndex<=0&&(a.tabIndex="0"),Ic(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Kc(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var a=document.body,b=document.documentElement,c=a.scrollTop||b.scrollTop,d=a.scrollLeft||b.scrollLeft;
this._map._container.focus(),window.scrollTo(d,c)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(a){var d,e,b=this._panKeys={},c=this.keyCodes;for(d=0,e=c.left.length;e>d;d++)b[c.left[d]]=[-1*a,0];for(d=0,e=c.right.length;e>d;d++)b[c.right[d]]=[a,0];for(d=0,e=c.down.length;e>d;d++)b[c.down[d]]=[0,a];for(d=0,e=c.up.length;e>d;d++)b[c.up[d]]=[0,-1*a]},_setZoomDelta:function(a){var d,e,b=this._zoomKeys={},c=this.keyCodes;
for(d=0,e=c.zoomIn.length;e>d;d++)b[c.zoomIn[d]]=a;for(d=0,e=c.zoomOut.length;e>d;d++)b[c.zoomOut[d]]=-a},_addHooks:function(){Ic(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Kc(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var d,b=a.keyCode,c=this._map;if(b in this._panKeys)c._panAnim&&c._panAnim._inProgress||(d=this._panKeys[b],a.shiftKey&&(d=J(d).multiplyBy(3)),c.panBy(d),c.options.maxBounds&&c.panInsideBounds(c.options.maxBounds));
else if(b in this._zoomKeys)c.setZoom(c.getZoom()+(a.shiftKey?3:1)*this._zoomKeys[b]);else{if(27!==b||!c._popup||!c._popup.options.closeOnEscapeKey)return;c.closePopup()}Rc(a)}}});bd.addInitHook("addHandler","keyboard",Xe),bd.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Ye=nd.extend({addHooks:function(){Ic(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Kc(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(a){var b=Uc(a),c=this._map.options.wheelDebounceTime;
this._delta+=b,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var d=Math.max(c-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(f(this._performZoom,this),d),Rc(a)},_performZoom:function(){var a=this._map,b=a.getZoom(),c=this._map.options.zoomSnap||0;a._stop();var d=this._delta/(4*this._map.options.wheelPxPerZoomLevel),e=4*Math.log(2/(1+Math.exp(-Math.abs(d))))/Math.LN2,f=c?Math.ceil(e/c)*c:e,g=a._limitZoom(b+(this._delta>0?f:-f))-b;
this._delta=0,this._startTime=null,g&&("center"===a.options.scrollWheelZoom?a.setZoom(b+g):a.setZoomAround(this._lastMousePos,b+g))}});bd.addInitHook("addHandler","scrollWheelZoom",Ye),bd.mergeOptions({tap:!0,tapTolerance:15});var Ze=nd.extend({addHooks:function(){Ic(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Kc(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(a.touches){if(Qc(a),this._fireClick=!0,a.touches.length>1)return this._fireClick=!1,clearTimeout(this._holdTimeout),void 0;
var b=a.touches[0],c=b.target;this._startPos=this._newPos=new H(b.clientX,b.clientY),c.tagName&&"a"===c.tagName.toLowerCase()&&lc(c,"leaflet-active"),this._holdTimeout=setTimeout(f(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",b))},this),1e3),this._simulateEvent("mousedown",b),Ic(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(a){if(clearTimeout(this._holdTimeout),Kc(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&a&&a.changedTouches){var b=a.changedTouches[0],c=b.target;
c&&c.tagName&&"a"===c.tagName.toLowerCase()&&mc(c,"leaflet-active"),this._simulateEvent("mouseup",b),this._isTapValid()&&this._simulateEvent("click",b)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(a){var b=a.touches[0];this._newPos=new H(b.clientX,b.clientY),this._simulateEvent("mousemove",b)},_simulateEvent:function(a,b){var c=document.createEvent("MouseEvents");c._simulated=!0,b.target._simulatedClick=!0,c.initMouseEvent(a,!0,!0,window,1,b.screenX,b.screenY,b.clientX,b.clientY,!1,!1,!1,!1,0,null),b.target.dispatchEvent(c)
}});xb&&!wb&&bd.addInitHook("addHandler","tap",Ze),bd.mergeOptions({touchZoom:xb&&!eb,bounceAtZoomLimits:!0});var $e=nd.extend({addHooks:function(){lc(this._map._container,"leaflet-touch-zoom"),Ic(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){mc(this._map._container,"leaflet-touch-zoom"),Kc(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var b=this._map;if(a.touches&&2===a.touches.length&&!b._animatingZoom&&!this._zooming){var c=b.mouseEventToContainerPoint(a.touches[0]),d=b.mouseEventToContainerPoint(a.touches[1]);
this._centerPoint=b.getSize()._divideBy(2),this._startLatLng=b.containerPointToLatLng(this._centerPoint),"center"!==b.options.touchZoom&&(this._pinchStartLatLng=b.containerPointToLatLng(c.add(d)._divideBy(2))),this._startDist=c.distanceTo(d),this._startZoom=b.getZoom(),this._moved=!1,this._zooming=!0,b._stop(),Ic(document,"touchmove",this._onTouchMove,this),Ic(document,"touchend",this._onTouchEnd,this),Qc(a)}},_onTouchMove:function(a){if(a.touches&&2===a.touches.length&&this._zooming){var b=this._map,c=b.mouseEventToContainerPoint(a.touches[0]),d=b.mouseEventToContainerPoint(a.touches[1]),e=c.distanceTo(d)/this._startDist;
if(this._zoom=b.getScaleZoom(e,this._startZoom),!b.options.bounceAtZoomLimits&&(this._zoom<b.getMinZoom()&&1>e||this._zoom>b.getMaxZoom()&&e>1)&&(this._zoom=b._limitZoom(this._zoom)),"center"===b.options.touchZoom){if(this._center=this._startLatLng,1===e)return}else{var g=c._add(d)._divideBy(2)._subtract(this._centerPoint);if(1===e&&0===g.x&&0===g.y)return;this._center=b.unproject(b.project(this._pinchStartLatLng,this._zoom).subtract(g),this._zoom)}this._moved||(b._moveStart(!0,!1),this._moved=!0),B(this._animRequest);
var h=f(b._move,b,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=A(h,this,!0),Qc(a)}},_onTouchEnd:function(){return this._moved&&this._zooming?(this._zooming=!1,B(this._animRequest),Kc(document,"touchmove",this._onTouchMove),Kc(document,"touchend",this._onTouchEnd),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom)),void 0):(this._zooming=!1,void 0)
}});bd.addInitHook("addHandler","touchZoom",$e),bd.BoxZoom=Ue,bd.DoubleClickZoom=Ve,bd.Drag=We,bd.Keyboard=Xe,bd.ScrollWheelZoom=Ye,bd.Tap=Ze,bd.TouchZoom=$e,Object.freeze=c,a.version=b,a.Control=dd,a.control=ed,a.Browser=Fb,a.Evented=G,a.Mixin=od,a.Util=C,a.Class=D,a.Handler=nd,a.extend=d,a.bind=f,a.stamp=h,a.setOptions=o,a.DomEvent=_c,a.DomUtil=Hc,a.PosAnimation=ad,a.Draggable=sd,a.LineUtil=Hd,a.PolyUtil=Jd,a.Point=H,a.point=J,a.Bounds=K,a.bounds=M,a.Transformation=U,a.transformation=V,a.Projection=Md,a.LatLng=P,a.latLng=Q,a.LatLngBounds=N,a.latLngBounds=O,a.CRS=R,a.GeoJSON=ie,a.geoJSON=re,a.geoJson=se,a.Layer=Qd,a.LayerGroup=Rd,a.layerGroup=Sd,a.FeatureGroup=Td,a.featureGroup=Ud,a.ImageOverlay=te,a.imageOverlay=ue,a.VideoOverlay=ve,a.videoOverlay=we,a.DivOverlay=xe,a.Popup=ye,a.popup=ze,a.Tooltip=Ae,a.tooltip=Be,a.Icon=Vd,a.icon=Wd,a.DivIcon=Ce,a.divIcon=De,a.Marker=Zd,a.marker=$d,a.TileLayer=Ge,a.tileLayer=He,a.GridLayer=Ee,a.gridLayer=Fe,a.SVG=Qe,a.svg=Re,a.Renderer=Ke,a.Canvas=Le,a.canvas=Me,a.Path=_d,a.CircleMarker=ae,a.circleMarker=be,a.Circle=ce,a.circle=de,a.Polyline=ee,a.polyline=fe,a.Polygon=ge,a.polygon=he,a.Rectangle=Se,a.rectangle=Te,a.Map=bd,a.map=cd;
var _e=window.L;a.noConflict=function(){return window.L=_e,this},window.L=a})};d(),b.resolveWith(d)};FD40.module("leaflet",a)}(),function(){var moduleFactory=function($){var module=this,jQuery=$,exports=function(){!function($){$.fn.markItUp=function(settings,extraSettings){var method,params,options,ctrlKey,shiftKey,altKey;return ctrlKey=shiftKey=altKey=!1,"string"==typeof settings&&(method=settings,params=extraSettings),options={id:"",nameSpace:"",root:"",previewHandler:!1,previewInWindow:"",previewInElement:"",previewAutoRefresh:!0,previewPosition:"after",previewTemplatePath:"~/templates/preview.html",previewParser:!1,previewParserPath:"",previewParserVar:"data",resizeHandle:!0,beforeInsert:"",afterInsert:"",onEnter:{},onShiftEnter:{},onCtrlEnter:{},onTab:{},markupSet:[{}]},$.extend(options,settings,$.markItUp.sets[(extraSettings||settings||{}).set],extraSettings),options.root||$("script").each(function(a,b){miuScript=$(b).get(0).src.match(/(.*)jquery\.markitup(\.pack)?\.js$/),null!==miuScript&&(options.root=miuScript[1])
}),this.each(function(){function localize(a,b){return b?a.replace(/("|')~\//g,"$1"+options.root):a.replace(/^~\//,options.root)}function init(){id="",nameSpace="",options.id?id='id="'+options.id+'"':$$.attr("id")&&(id='id="markItUp'+$$.attr("id").substr(0,1).toUpperCase()+$$.attr("id").substr(1)+'"'),options.nameSpace&&(nameSpace='class="'+options.nameSpace+'"'),$$.wrap("<div "+nameSpace+"></div>"),$$.wrap("<div "+id+' class="markItUp"></div>'),$$.wrap('<div class="markItUpContainer"></div>'),$$.addClass("markItUpEditor"),header=$('<div class="markItUpHeader"></div>').insertBefore($$),$(dropMenus(options.markupSet)).appendTo(header),footer=$('<div class="markItUpFooter"></div>').insertAfter($$),$$.wrap('<div class="markItUpExpanding"></div>'),options.resizeHandle===!0&&$.browser.safari!==!0&&(resizeHandle=$('<div class="markItUpResizeHandle"></div>').insertAfter($$).bind("mousedown.markItUp",function(a){var d,e,b=$$.height(),c=a.clientY;
d=function(a){return $$.css("height",Math.max(20,a.clientY+b-c)+"px"),!1},e=function(){return $("html").unbind("mousemove.markItUp",d).unbind("mouseup.markItUp",e),!1},$("html").bind("mousemove.markItUp",d).bind("mouseup.markItUp",e)}),footer.append(resizeHandle)),$$.bind("keydown.markItUp",keyPressed).bind("keyup",keyPressed),$$.bind("insertion.markItUp",function(a,b){b.target!==!1&&get(),textarea===$.markItUp.focused&&markup(b)}),$$.bind("focus.markItUp",function(){$.markItUp.focused=this}),options.previewInElement&&refreshPreview()
}function dropMenus(markupSet){var ul=$("<ul></ul>"),i=0;return $("li:hover > ul",ul).css("display","block"),$.each(markupSet,function(){var button=this,t="",title,li,j;if(title=button.key?(button.name||"")+" [Ctrl+"+button.key+"]":button.name||"",key=button.key?'accesskey="'+button.key+'"':"",button.separator)li=$('<li class="markItUpSeparator">'+(button.separator||"")+"</li>").appendTo(ul);else{for(i++,j=levels.length-1;j>=0;j--)t+=levels[j]+"-";li=$('<li class="markItUpButton markItUpButton'+t+i+" "+(button.className||"")+'"><a href="" '+key+' title="'+title+'">'+(button.name||"")+"</a></li>").bind("contextmenu.markItUp",function(){return!1
}).bind("click.markItUp",function(){return!1}).bind("focusin.markItUp",function(){$$.focus()}).bind("mouseup",function(){return button.call&&eval(button.call)(),setTimeout(function(){markup(button)},1),!1}).bind("mouseenter.markItUp",function(){$("> ul",this).show(),$(document).one("click",function(){$("ul ul",header).hide()})}).bind("mouseleave.markItUp",function(){$("> ul",this).hide()}).appendTo(ul),button.dropMenu&&(levels.push(i),$(li).addClass("markItUpDropMenu").append(dropMenus(button.dropMenu)))}}),levels.pop(),ul
}function magicMarkups(a){return a?(a=a.toString(),a=a.replace(/\(\!\(([\s\S]*?)\)\!\)/g,function(a,b){var c=b.split("|!|");return altKey===!0?void 0!==c[1]?c[1]:c[0]:void 0===c[1]?"":c[0]}),a=a.replace(/\[\!\[([\s\S]*?)\]\!\]/g,function(a,b){var c=b.split(":!:");return abort===!0?!1:(value=prompt(c[0],c[1]?c[1]:""),null===value&&(abort=!0),value)})):""}function prepare(a){return $.isFunction(a)&&(a=a(hash)),magicMarkups(a)}function build(a){var b=prepare(clicked.openWith),c=prepare(clicked.placeHolder),d=prepare(clicked.replaceWith),e=prepare(clicked.closeWith),f=prepare(clicked.openBlockWith),g=prepare(clicked.closeBlockWith),h=clicked.multiline;
if(""!==d)block=b+d+e;else if(""===selection&&""!==c)block=b+c+e;else{a=a||selection;var i=[a],j=[];h===!0&&(i=a.split(/\r?\n/));for(var k=0;k<i.length;k++){line=i[k];var l;(l=line.match(/ *$/))?j.push(b+line.replace(/ *$/g,"")+e+l):j.push(b+line+e)}block=j.join("\n")}return block=f+block+g,{block:block,openWith:b,replaceWith:d,placeHolder:c,closeWith:e}}function markup(a){var b,c,d,e;if(hash=clicked=a,get(),$.extend(hash,{line:"",root:options.root,textarea:textarea,selection:selection||"",caretPosition:caretPosition,ctrlKey:ctrlKey,shiftKey:shiftKey,altKey:altKey}),prepare(options.beforeInsert),prepare(clicked.beforeInsert),(ctrlKey===!0&&shiftKey===!0||a.multiline===!0)&&prepare(clicked.beforeMultiInsert),$.extend(hash,{line:1}),ctrlKey===!0&&shiftKey===!0){for(lines=selection.split(/\r?\n/),c=0,d=lines.length,e=0;d>e;e++)""!==$.trim(lines[e])?($.extend(hash,{line:++c,selection:lines[e]}),lines[e]=build(lines[e]).block):lines[e]="";
string={block:lines.join("\n")},start=caretPosition,b=string.block.length+($.browser.opera?d-1:0)}else ctrlKey===!0?(string=build(selection),start=caretPosition+string.openWith.length,b=string.block.length-string.openWith.length-string.closeWith.length,b-=string.block.match(/ $/)?1:0,b-=fixIeBug(string.block)):shiftKey===!0?(string=build(selection),start=caretPosition,b=string.block.length,b-=fixIeBug(string.block)):(string=build(selection),start=caretPosition+string.block.length,b=0,start-=fixIeBug(string.block));
""===selection&&""===string.replaceWith&&(caretOffset+=fixOperaBug(string.block),start=caretPosition+string.openWith.length,b=string.block.length-string.openWith.length-string.closeWith.length,caretOffset=$$.val().substring(caretPosition,$$.val().length).length,caretOffset-=fixOperaBug($$.val().substring(0,caretPosition))),$.extend(hash,{caretPosition:caretPosition,scrollPosition:scrollPosition}),string.block!==selection&&abort===!1?(insert(string.block),set(start,b)):caretOffset=-1,get(),$.extend(hash,{line:"",selection:selection}),(ctrlKey===!0&&shiftKey===!0||a.multiline===!0)&&prepare(clicked.afterMultiInsert),prepare(clicked.afterInsert),prepare(options.afterInsert),previewWindow&&options.previewAutoRefresh&&refreshPreview(),shiftKey=altKey=ctrlKey=abort=!1
}function fixOperaBug(a){return $.browser.opera?a.length-a.replace(/\n*/g,"").length:0}function fixIeBug(a){return $.browser.msie?a.length-a.replace(/\r*/g,"").length:0}function insert(a){if(document.selection){var b=document.selection.createRange();b.text=a}else textarea.value=textarea.value.substring(0,caretPosition)+a+textarea.value.substring(caretPosition+selection.length,textarea.value.length)}function set(a,b){if(textarea.createTextRange){if($.browser.opera&&$.browser.version>=9.5&&0==b)return!1;range=textarea.createTextRange(),range.collapse(!0),range.moveStart("character",a),range.moveEnd("character",b),range.select()
}else textarea.setSelectionRange&&textarea.setSelectionRange(a,a+b);textarea.scrollTop=scrollPosition,textarea.focus()}function get(){if(textarea.focus(),scrollPosition=textarea.scrollTop,document.selection)if(selection=document.selection.createRange().text,$.browser.msie){var a=document.selection.createRange(),b=a.duplicate();for(b.moveToElementText(textarea),caretPosition=-1;b.inRange(a);)b.moveStart("character"),caretPosition++}else caretPosition=textarea.selectionStart;else caretPosition=textarea.selectionStart,selection=textarea.value.substring(caretPosition,textarea.selectionEnd);
return selection}function preview(){"function"==typeof options.previewHandler?previewWindow=!0:options.previewInElement?previewWindow=$(options.previewInElement):!previewWindow||previewWindow.closed?options.previewInWindow?(previewWindow=window.open("","preview",options.previewInWindow),$(window).unload(function(){previewWindow.close()})):(iFrame=$('<iframe class="markItUpPreviewFrame"></iframe>'),"after"==options.previewPosition?iFrame.insertAfter(footer):iFrame.insertBefore(header),previewWindow=iFrame[iFrame.length-1].contentWindow||frame[iFrame.length-1]):altKey===!0&&(iFrame?iFrame.remove():previewWindow.close(),previewWindow=iFrame=!1),options.previewAutoRefresh||refreshPreview(),options.previewInWindow&&previewWindow.focus()
}function refreshPreview(){renderPreview()}function renderPreview(){if(options.previewHandler&&"function"==typeof options.previewHandler)options.previewHandler($$.val());else if(options.previewParser&&"function"==typeof options.previewParser){var b=options.previewParser($$.val());writeInPreview(localize(b,1))}else""!==options.previewParserPath?$.ajax({type:"POST",dataType:"text",global:!1,url:options.previewParserPath,data:options.previewParserVar+"="+encodeURIComponent($$.val()),success:function(a){writeInPreview(localize(a,1))
}}):template||$.ajax({url:options.previewTemplatePath,dataType:"text",global:!1,success:function(a){writeInPreview(localize(a,1).replace(/<!-- content -->/g,$$.val()))}});return!1}function writeInPreview(a){if(options.previewInElement)$(options.previewInElement).html(a);else if(previewWindow&&previewWindow.document){try{sp=previewWindow.document.documentElement.scrollTop}catch(b){sp=0}previewWindow.document.open(),previewWindow.document.write(a),previewWindow.document.close(),previewWindow.document.documentElement.scrollTop=sp
}}function keyPressed(a){if(shiftKey=a.shiftKey,altKey=a.altKey,ctrlKey=a.altKey&&a.ctrlKey?!1:a.ctrlKey||a.metaKey,"keydown"===a.type){if(ctrlKey===!0&&(li=$('a[accesskey="'+(13==a.keyCode?"\\n":String.fromCharCode(a.keyCode))+'"]',header).parent("li"),0!==li.length))return ctrlKey=!1,setTimeout(function(){li.triggerHandler("mouseup")},1),!1;if(13===a.keyCode||10===a.keyCode)return ctrlKey===!0?(ctrlKey=!1,markup(options.onCtrlEnter),options.onCtrlEnter.keepDefault):shiftKey===!0?(shiftKey=!1,markup(options.onShiftEnter),options.onShiftEnter.keepDefault):(markup(options.onEnter),options.onEnter.keepDefault);
if(9===a.keyCode)return 1==shiftKey||1==ctrlKey||1==altKey?!1:-1!==caretOffset?(get(),caretOffset=$$.val().length-caretOffset,set(caretOffset,0),caretOffset=-1,!1):(markup(options.onTab),options.onTab.keepDefault)}}function remove(){$$.unbind(".markItUp").removeClass("markItUpEditor"),$$.parents("div.markItUp").parent("div").replaceWith($$),$$.data("markItUp",null)}var $$,textarea,levels,scrollPosition,caretPosition,caretOffset,clicked,hash,header,footer,previewWindow,template,iFrame,abort;if($$=$(this),textarea=this,levels=[],abort=!1,scrollPosition=caretPosition=0,caretOffset=-1,options.previewParserPath=localize(options.previewParserPath),options.previewTemplatePath=localize(options.previewTemplatePath),method)switch(method){case"remove":remove();
break;case"insert":markup(params);break;default:$.error("Method "+method+" does not exist on jQuery.markItUp")}else init()})},$.fn.markItUpRemove=function(){return this.each(function(){$(this).markItUp("remove")})};var sets;"object"==typeof $.markItUp&&(sets=$.markItUp.sets),$.markItUp=function(a){var b={target:!1};return $.extend(b,a),b.target?$(b.target).each(function(){$(this).focus(),$(this).trigger("insertion",[b])}):($("textarea").trigger("insertion",[b]),void 0)},$.markItUp.sets={},sets&&$.extend($.markItUp.sets,sets)
}(jQuery)};exports(),module.resolveWith(exports)};FD40.module("markitup",moduleFactory)}(),function(){var a=function(a){var b=this,c=function(){var b="",c=" ",d="\xa0",e="\n",f="data-type",g="data-value",h={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,ENTER:13,ESCAPE:27,LEFT:37,RIGHT:39,SPACE:32,TAB:9,UP:38};a.fn.caret=function(a,b){if(0!=this.length){if("number"==typeof a)return b="number"==typeof b?b:a,this.each(function(){if(this.setSelectionRange){var c=this;window.setTimeout(function(){c.setSelectionRange(a,b)
},0)}else if(this.createTextRange){var d=this.createTextRange();d.collapse(!0),d.moveEnd("character",b),d.moveStart("character",a);try{d.select()}catch(e){}}});if(this[0].setSelectionRange)a=this[0].selectionStart,b=this[0].selectionEnd;else if(document.selection&&document.selection.createRange){var c=document.selection.createRange();a=0-c.duplicate().moveStart("character",-1e5),b=a+c.text.length}return{start:a,end:b}}};var i=function(b){a.extend(this,b)};a.extend(i.prototype,{val:function(a){var b=this;return void 0===a?b.text.nodeValue:(b.text.nodeValue=a,b.end=b.start+(b.length=a.length),b)
},nextSibling:function(a){for(var b=a.nextSibling;b&&1===b.nodeType&&b.hasAttribute("data-ignore");)b=b.nextSibling;return b},insert:function(f,g,h){var j=this,k=j.block,l=j.text,m=j.parent,n=j.br,o=j.val(),p=j.length,q=f==e,r=f==c,s=f==b,t=j.trigger||{},v=(t.finalize,j.finalized),w=32==o.charCodeAt(g-1),x=t.allowSpace||j.allowSpace,y=r&&(!x||x&&w);if(void 0===g&&(g=p),void 0===h&&(h=g),k&&w&&!x&&!v){if(r){var z=a(j.textarea),A=z.val(),B=z.caret().end-1,C=j.start+g;z.val(A.substring(0,C)+A.slice(C+1)).caret(B)
}return j.toTextMarker(),r?(a(m).trigger("markerInsert",[j,K,f,g,h]),j):j.insert(f,g,h)}if(k&&h==p&&!s&&(y||q||n||v)){var D=j.spawn().insert(f,0);return a(m).trigger("markerExit",[j,K,D,f,g,h]),D}if(k&&0===j.index&&0===h&&1===f.length){var E=document.createTextNode(f);m.insertBefore(E,k);var F=new i({index:0,start:0,end:f.length,text:E,parent:m,textarea:j.textarea,allowSpace:!0});return a(m).trigger("markerInsert",[F,K,f,g,h]),F}var G=k?k.nextSibling:l.nextSibling,H=o.substring(0,g),I=o.slice(h),J=f.replace(/  /g," "+d).split(e),K=[],L=k||l,M=J.length;
for(J[0]=H+J[0],J[M-1]+=I;--M;){var L=document.createTextNode(J[M]),n=document.createElement("BR");K.push(m.insertBefore(L,G)),K.push(m.insertBefore(n,L)),G=n}return j.val(J[M]),a(m).trigger("markerInsert",[j,K,f,g,h]),j},remove:function(){var b=this,c=b.parent,d=b.block,e=b.text;return d&&a(d).trigger("triggerDestroy",[b]),c.removeChild(d||e),b.removed=!0,a(c).trigger("markerRemove",[b]),b},toTextMarker:function(){var b=this,c=b.block,d=b.parent;if(!c)return b;var e=b.clone();return c&&a(c).trigger("triggerDestroy",[b]),d.insertBefore(b.text,c.nextSibling),d.removeChild(c),delete b.block,delete b.trigger,a(b.parent).trigger("markerConvert",[b,e,"text"]),b
},toBlockMarker:function(){var c=this;if(!c.block){var d=c.clone(),e=c.parent,f=c.block=document.createElement("SPAN"),g=c.text;return e.insertBefore(f,g.nextSibling),f.appendChild(g),a(f).data("marker",{}),a(c.parent).trigger("markerConvert",[c,d,"block"]),c}},spawn:function(a,b){var c=this,d=c.text,e=c.parent,f=c.block,g=f?f.nextSibling:d.nextSibling;void 0===a&&(a=b=c.length),b<c.length&&(g=e.insertBefore(d.splitText(b),g)),d=e.insertBefore(d.splitText(a),g);var h=new i({index:c.index+1,start:a=c.start+a,end:b=c.start+b,length:b-a,text:d,parent:e,textarea:c.textarea,before:c,after:c.after,br:!1,allowSpace:!0,finalized:!1});
return c.end=a,c.length=c.end-c.start,c.after=h,h},clone:function(){return new i(a.pick(this,"index,start,end,length,text,parent,textarea,before,after,br,allowSpace,trigger,value,finalized".split(",")))},finalize:function(b){var c=this,d=c.block;if(d){var e=a(d).data("marker");e.value=b,e.finalized=!0,a.extend(c,e)}},updateValue:function(b){var c=this,d=c.block;if(d){var e=a(d).data("marker");e.value=b,a.extend(c,e)}}}),a.Controller("Mentions",{pluginName:"mentions",hostname:"mentions",defaultOptions:{cssCloneProps:["lineHeight","textDecoration","letterSpacing","fontSize","fontFamily","fontStyle","fontWeight","textTransform","textAlign","direction","wordSpacing","fontSizeAdjust"],triggers:{},"{textarea}":"[data-mentions-textarea]","{overlay}":"[data-mentions-overlay]","{block}":"[data-mentions-overlay] > span"}},function(b){return{init:function(){b._overlay=b.overlay()[0],b._textarea=b.textarea()[0],setTimeout(function(){b.cloneLayout()
},15),b.addPlugin("autocomplete"),b.initialCaret=b.textarea().data("initial")||0},setLayout:function(){b.normalize()},cloneLayout:function(){for(var a=b.overlay(),c=a.detach()[0],d=b.textarea(),e=b.options.cssCloneProps,f=0;prop=e[f++];)c.style[prop]=d.css(prop);c.style.opacity=1,a.insertBefore(d),b.setLayout()},reset:function(){var c=b.overlay(),d=c.data("default");void 0!==d?c.html(a("<div>").html(d).html()):c.empty();var e=b.textarea(),f=e.data("default");void 0!==f?e.val(a("<div>").html(f).text()):e.val(""),b.caretBefore=b.caretAfter={start:0,end:0},b.previousMarker=null,b.normalize(),b.initialFocus=!0,b.trigger("triggerClear"),b.previousCursorPosition=0
},moveCursor:function(a){b.textarea().trigger("focus"),b.textarea().caret(a)},getTrigger:function(a){var c=b.options.triggers;if(c.hasOwnProperty(a)){var d=c[a];return d.key=a,d}},getTriggerFromType:function(c){var e,d=b.options.triggers;return a.each(d,function(a,b){return b.type===c?(e=b,!1):void 0}),e},getStopIndex:function(a,b){for(var c=b.length,d=a.length;c--;){var e=b.substr(c,1),f=a.indexOf(e);d=0>f?d:Math.min(d,f)}return d},getMarkers:function(c){var k,d=b._textarea,h=b._overlay,j=a.makeArray(h.childNodes),l=0,m=0,n=null,o=!1,p=[],q=function(a){var b;
return c&&(b=c.apply(a,[a])),null!==b&&b!==!1&&p.push(void 0!==b?b:a),b};for(a.remove(j,function(a){return 1===a.nodeType&&a.hasAttribute("data-ignore")});k=j[l++];){var t,v,w,r=k.nodeType,s=k.nodeName,u=null,x=!1,y=!1;if(3==r)t=k,y=!0;else if((u=k)&&"BR"==s)t=document.createTextNode(e),x=!0;else if(1!==r||"SPAN"!==s||!(t=k.childNodes[0])||3!==t.nodeType){h.removeChild(k);continue}var z={index:l-1,start:m,end:v=m+(w=t.length),length:w,text:t,block:u,parent:h,textarea:d,before:n,br:x,allowSpace:y,finalized:!1};
if(u){var A=a(k),B=A.data("marker");if(B||(B={})&&A.data("marker",B),k.hasAttribute(f)){var C=A.attr(f),D=b.getTriggerFromType(C);D&&(B.trigger=D),A.removeAttr(f)}k.hasAttribute(g)&&(B.value=A.attr(g),B.finalized=!0,A.removeAttr(g)),a.extend(z,B)}var E=new i(z);if(l>1&&null!==n&&(n.after=E,o=q(n)===!1))break;m=v,n=E}return o||q(n),p},getMarkerAt:function(a){if(void 0!==a){var c;return b.getMarkers(function(){return a>=this.start&&a<=this.end?(c=this,!1):void 0}),c}},getMarkersBetween:function(a,c){return void 0!==a?b.getMarkers(function(){return this.start>c?!1:this.end<a?null:this
}):void 0},toArray:function(a,c){var d=b.getMarkers(function(){var c=this;if(!c.block||c.br)return null;if(!c.trigger){var d=c.text.nodeValue,e=d.slice(0,1),f=b.getTrigger(e);if(!f)return null;c.trigger=f,c.value=d.slice(1)}var g=c.start,h=b._textarea.value,i=h.match(/^\n+/g);if(null!=i){var j=i[0].split(/\r*\n/),k=j.length-1;if(k>0)var g=c.start-k}var l={start:g,length:c.length,type:c.trigger.type,value:c.value};return a?JSON.stringify(l):l});return c?d:d.reverse()},insert:function(a,c,d){var e,f;if(c===d||void 0===d)e=b.getMarkerAt(c),f=e.start,e.insert(a,c-f,d-f);
else{var g=b.getMarkersBetween(c,d),h=g.length;if(1>h)return;if(1==h)e=g[0],f=e.start,e.insert(a,c-f,d-f);else{var i=h-1,e=g[i];for(e.block&&d>e.start&&e.toTextMarker(),d-e.start>0&&e.insert("",0,d-e.start);(e=g[--i])&&i>0;)e.remove();e.block&&0===e.index&&0===c&&e.toTextMarker(),e.insert(a,c-e.start,e.length),0===c&&e.br&&e.remove()}}return b.normalize(),e},textareaInsert:function(a,c,d){var e=b._textarea,f=e.value;return e.value=f.substring(0,c)+a+f.slice(d)},normalize:function(){var a=b._overlay,c=b._textarea;
a.normalize();var d=a.firstChild,e=a.lastChild,f=document.createTextNode("");e&&"BR"!==e.nodeName||a.appendChild(f),e&&e==d&&1===e.nodeType&&e.hasAttribute("data-ignore")&&a.insertBefore(f,e),a.style.height="auto",a.style.height=c.scrollHeight+"px",c.scrollTop=0,b.lengthBefore=c.value.length},lengthBefore:0,caretBefore:{start:0,end:0},caretAfter:{start:0,end:0},skipKeydown:!1,previousMarker:null,initialFocus:!0,isPasting:!1,smileyLength:0,tagToProcess:[],previousCursorPosition:0,"{textarea} focus":function(){b.initialFocus&&b.textarea().caret(b.initialCaret||0)
},"{textarea} focusout":function(){b.previousCursorPosition=b.textarea().prop("selectionEnd")},"{textarea} keydown":function(c,d){if(b.initialFocus=!1,!b.skipKeydown){{b.caretBefore=c.caret()}8===d.keyCode&&a.IE<10&&b.overlay().css("opacity",0),b.skipKeydown=!0}},"{textarea} keypress":function(a,c){b.caretBefore=a.caret(),8===c.keyCode},convertHashTag:function(){var d=b.overlay().html();d=d.replace(/<span[^>]*>(#.*?)<\/span[^>]*>/g,"$1"),d=d.replace(/<br\s*[\/]?>/gi,"\n");var e=d.match(/(\s|^)(#[^\s]+[\w])/g);
if(e&&e.length>0){var f=[];a.each(e,function(b,c){c=c.trim(),-1==a.inArray(c,f)&&f.push(c)}),a(f).each(function(a,b){var c=b.replace("#",""),e=c.match(/[&=\?]/g);if(!e){spanEle="<span>$1</span>";var f=new RegExp("("+b+")($|^|\\b)","gm");d=d.replace(f,spanEle)}}),b.overlay().html(d)}},convertEmoticon:function(){var d=b.overlay().html();d=d.replace(/<span[^>]*>(:.*?)<\/span[^>]*>/g,"$1"),d=d.trim(),d=d.replace(/<br\s*[\/]?>/gi,"\n");var e=d.match(/:\([^\s]+[\w]\)/g);if(e&&e.length>0){var f=[];a.each(e,function(b,c){-1==a.inArray(c,f)&&f.push(c)
}),a(f).each(function(a,b){b=b.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),spanEle="<span>$1</span> ";var c=new RegExp("("+b+")($|^| |\\b)","gm");d=d.replace(c,spanEle)}),b.overlay().html(d)}},"{textarea} input":function(a){b.reflect(),b.isPasting&&(b.convertHashTag(),b.convertEmoticon(),b.isPasting=!1),a.val().length<1&&b.reset()},"{textarea} paste":function(){b.isPasting=!0},"{textarea} keyup":function(c,d){if(b.skipKeydown=!1,8===d.keyCode&&a.IE<10){var e=b.caretBefore,f=b.caretAfter=b.textarea().caret();b.insert("",f.end,e.end),b.caretBefore=f,b.overlay().css("opacity",1)
}b.isPasting&&(b.isPasting=!1)},"{textarea} click":function(a){b.caretBefore=a.caret()},reflect:function(){var c=b._textarea,d=c.value,e=b.caretBefore,f=b.caretAfter=a(c).caret(),g=a.browser.opera&&f.end>f.start,h=b.getMarkerAt(e.start),i=b.lengthBefore-d.length,j=!1;if(g&&e.start!==e.end&&(e.end+=i),b.smileyLength>0){var k=b.previousCursorPosition+b.smileyLength;f.start=k,f.end=k,b.smileyLength=0}if(h){var l=b.previousMarker,m=h.block;if(l){var n=l.block,o=(l.trigger||{}).finalize;if(n&&o&&!l.finalized&&n!==m)try{l.toTextMarker()
}catch(p){b.previousMarker=null}}if(!h.br&&(0===i||f.end<e.start))var q=h.start,r=h.end-i,s=f.end,t=e.start,j=q!==r;else var s=q=Math.min(e.start,f.start),t=e.end,r=f.end;var u=d.substring(q,r);j?(h.val()!==u&&h.finalized&&h.toTextMarker(),h.val(u),b.overlay().trigger("markerInsert",[h,[],u,q,r]),b.normalize()):b.insert(u,s,t),g&&(f.start=f.end),b.caretBefore=b.caretAfter}},"{overlay} markerInsert":function(c,d,e,f,g,h,i){var l,j=e.text,k=j.nodeValue;b.previousMarker=null;var m=k.charCodeAt(h-1),n=e.before&&e.before.br;
if((l=b.getTrigger(g)&&(32===m||isNaN(m)))&&(0===e.index||32===m||n)){var o=k.slice(h),p=o.slice(1);i=l.wrap&&o.length>1&&32!=p.charCodeAt()?b.getStopIndex(p,l.stop)+h+1:h+1;var q=e.spawn(h,i).toBlockMarker(),p=q.val().slice(1),r=a(q.block).data("marker");r.value=p,r.trigger=l,b.previousMarker=q,b.trigger("triggerCreate",[q,l,p])}if(e.block&&!e.br)if(e.finalized){var s=e.length;s-1>i&&e.toTextMarker()}else{var t=k.slice(0,1),l=b.getTrigger(t);if(!l)return;var p=k.slice(1),h=b.getStopIndex(p,l.stop)+1,i=k.length,q=!1;
i>h&&(q=e.spawn(h,i)),p=e.val().slice(1);var r=a(e.block).data("marker");r.value=p,r.trigger=l,b.previousMarker=e,b.trigger("triggerChange",[e,q,l,p])}},"{overlay} markerExit":function(a,c,d,e,f){var j=d.trigger;if(j){var k=j.allowSpace||d.allowSpace,l=d.val();k||d.val()!==j.key||d.toTextMarker(),b.trigger("triggerExit",[d,f,j,l])}}}}),a.template("mentions/menu",'<div class="mentions-autocomplete" data-mentions-autocomplete><b><b></b></b><div class="mentions-autocomplete-inner" data-mentions-autocomplete-viewport><div class="mentions-autocomplete-loading" data-mentions-autocomplete-loading data-mentions-autocomplete-close></div><div class="mentions-autocomplete-empty" data-mentions-autocomplete-empty></div><div class="mentions-autocomplete-search" data-mentions-autocomplete-search></div><ul class="mentions-menu" data-mentions-menu></ul></div></div>'),a.template("mentions/menuItem",'<li class="mentions-menuItem" data-mentions-menuItem>[%== html %]</li>'),a.template("mentions/loadingHint",'<div class="mentions-autocomplete-loading-indicator"><div class="o-loader o-loader--top o-loader--sm is-active"></div></div>'),a.template("mentions/searchHint",'<span class="mentions-autocomplete-search-hint">Type a keyword to begin.</span>'),a.template("mentions/emptyHint",'<span class="mentions-autocomplete-empty-text">No items found.</span>'),a.Controller("Mentions.Autocomplete",{defaultOptions:{view:{menu:"mentions/menu",menuItem:"mentions/menuItem",searchHint:"mentions/searchHint",loadingHint:"mentions/loadingHint",emptyHint:"mentions/emptyHint"},id:"",component:"",modifier:"",shadow:!1,sticky:!1,animation:!1,query:{data:null,cache:!0,minLength:1,limit:10,highlight:!0,caseSensitive:!1,exclusive:!1,searchHint:!1,loadingHint:!1,emptyHint:!1,renderAll:!1},position:{my:"left top",at:"left bottom",collision:"none"},size:{width:"auto",height:"auto"},"{menu}":"[data-mentions-menu]","{menuItem}":"[data-mentions-menuItem]","{viewport}":"[data-mentions-autocomplete-viewport]","{loadingHint}":"[data-mentions-autocomplete-loading]","{emptyHint}":"[data-mentions-autocomplete-empty]","{searchHint}":"[data-mentions-autocomplete-search]","{closeButton}":"[data-mentions-autocomplete-close]"}},function(b,c,d){return{init:function(){setTimeout(function(){if(b.element.data(b.Class.fullName)){var e=b.mentions;
b.uid=a.uid(),e.autocomplete=b,e.pluginInstances.autocomplete=b,c.position.of||(c.position.of=b.mentions.element),b.defaultSearchHint=b.view.searchHint().toHTML(),b.defaultEmptyHint=b.view.emptyHint().toHTML(),b.defaultLoadingHint=b.view.loadingHint().toHTML(),b.element.detach()}else{b.destroy();{b.view.menu().attr("id",c.id).addClass(c.component).addClass(c.modifier).addClass(c.shadow?"has-shadow":"").addClass(c.animation?"has-animation":"").addClass(c.sticky?"is-sticky":"").appendTo("body").data(b.Class.fullName,!0).addController(b.Class,c)
}}},50)},setLayout:function(){if(!b.hidden){var c=b.options,d=c.size,e=b.mentions.element.outerWidth(),f="auto";a.isFunction(d.width)&&(e=d.width(e)),a.isFunction(d.height)&&(f=d.height(f)),b.element.css({opacity:1,width:e}).position(b.options.position),setTimeout(function(){b.viewport().addClass("active")},1)}},"{window} resize":a.debounce(function(){b.element.css("opacity",0),b.setLayout()},250),"{window} scroll":a.debounce(function(){b.element.css("opacity",0),b.setLayout()},250),"{window} dialogTransitionStart":function(){b.hidden=!0,b.element.css("opacity",0)
},"{window} dialogTransitionEnd":function(){b.hidden=!1,b.setLayout()},currentMarker:null,"{mentions} triggerCreate":function(a,c,d,e,f){b.populate(d,e,f),b.currentMarker=d},"{mentions} triggerChange":function(a,c,d,e,f,g){b.populate(d,f,g),b.currentMarker=d},"{mentions} triggerExit":function(){var h=b.activeQuery;h&&(h.aborted=!0),b.hide()},"{mentions.block} triggerDestroy":function(){b.hide()},"{mentions} triggerClear":function(){b.hide()},hidden:!0,show:function(c){clearTimeout(b.sleep),b.element.appendTo("body").show(),b.hidden=!1,b.viewport().removeClass("active"),b.setLayout();
var e=a(document),f="click.mentions."+b.uid;e.off(f).on(f,function(c){var g=a(c.target).parents().andSelf();g.filter(d).length>0||(e.off(f),b.hide())}),c&&(b.sleep=setTimeout(function(){b.hide()},c))},hide:function(){b.element.hide();var a=b.menuItem(),c=a.filter(".active");c.length>0&&(b.lastItem={keyword:"",item:c.data("item")}),b.viewport().removeClass("active"),a.removeClass("active"),b.render.reset(),b.hidden=!0,clearTimeout(b.sleep),b.sleep=setTimeout(function(){b.element.detach()},3e3)},query:function(c){if(c){var d=a.extend({},b.options.query,a.isPlainObject(c)?c:{data:c}),e=d.data;
if(e){if(a.isUrl(e)){var f=e;d.lookup=function(){return a.ajax(f+d.keyword)}}if(a.isFunction(e)){var g=e;d.lookup=function(){return g.call(b,d.keyword)}}if(a.isArray(e)){var h=e;d.lookup=function(){var b=a.Deferred(),c=d.keyword.toLowerCase();return setTimeout(function(){var d=a.grep(h,function(a){return a.title.toLowerCase().indexOf(c)>-1});b.resolve(d)},0),b}}return d}}},tasks:{},delayTask:null,activeQuery:null,renderAllItems:function(c,d,e,f){var g=b.mentions,h=b,i=b.element,j=b.menu(),k=c.keyword;j.empty(),a.each(c.data,function(d,e){if(g.trigger("menuCreateItem",[e,c,h,g]),a.isPlainObject(e)&&!e.discard){var f=e.menuHtml||e.title;
b.view.menuItem({html:f}).data("item",e).appendTo(j)}}),j.data("keyword",k);var l=b.menuItem();if(g.trigger("menuCreate",[j,l,c,h,g]),l.filter(":not(.hidden)").length<1&&(i.addClass("empty"),!c.emptyHint))return b.hide();c.exclusive&&b.menuItem(":not(.hidden):first").addClass("active"),g.trigger("renderMenu",[j,c,h,g]),b.show(),b.activeQuery=c,c.keyword=f,c.trigger=e,c.marker=d,b.trigger("queryPrepare",[c]);var f=c.keyword,m=c.id=e.key+"|"+c.caseSensitive?f:f.toLowerCase(),n=b.tasks,o=c.task=n[m],p=function(){var a=b.trigger("queryBeforeStart",[c]);
a.isDefaultPrevented()||(o=n[m]=c.task=c.lookup(),b.trigger("queryStart",[c]))};clearTimeout(b.delayTask),b.delayTask=setTimeout(p,250)},populate:function(c,d,e){var f=b.activeQuery;f&&(f.aborted=!0);var f=b.query(d.query);if(f){if(f.renderAll&&""===e)return b.renderAllItems(f,c,d,e),void 0;b.activeQuery=f,f.keyword=e,f.trigger=d,f.marker=c,b.trigger("queryPrepare",[f]);var e=f.keyword;if(""===e||e.length<f.minLength){var g=f.searchHint;return g?(b.searchHint().html(a.isString(g)?g:b.defaultSearchHint),b.element.addClass("search"),b.show()):b.hide(),void 0
}var h=f.id=d.key+"|"+f.caseSensitive?e:e.toLowerCase(),i=b.tasks,j=f.task=i[h],k=!a.isDeferred(j)||!f.cache,l=function(){var a=b.trigger("queryBeforeStart",[f]);a.isDefaultPrevented()||((k||!k&&"rejected"==j.state())&&(j=i[h]=f.task=f.lookup()),j.done(b.render(function(a){return[a,f]})),b.trigger("queryStart",[f]))};k?(clearTimeout(b.delayTask),b.delayTask=setTimeout(l,250)):l()}},"{self} queryPrepare":function(a,c,d){a.removeClass("loading empty search"),d.loadingHint&&b.hide()},"{self} queryBeforeStart":function(c,d,e){var f=e.loadingHint;
f&&(b.loadingHint().html(a.isString(f)?f:b.defaultLoadingHint),c.addClass("loading"),b.show())},"{self} queryStart":function(a,c,d){d.task.fail(function(){b.hide()}).always(function(){a.removeClass("loading")})},render:a.Enqueue(function(c,d){if(d.aborted)return b.hide(),void 0;a.isArray(c)||(c=[]);var e=b.mentions,f=b,g=b.element,h=b.menu(),i=d.keyword;if(c.length<1){var j=d.emptyHint;return j?(b.emptyHint().html(a.isString(j)?j:b.defaultEmptyHint),h.empty(),g.addClass("empty"),b.show(2e3)):b.hide(),e.trigger("menuRender",[h,d,f,e]),void 0
}g.removeClass("empty"),d.cache&&h.data("keyword")===i||(h.empty(),a.each(c,function(c,g){if(e.trigger("menuCreateItem",[g,d,f,e]),a.isPlainObject(g)&&!g.discard){var i=g.menuHtml||g.title;b.view.menuItem({html:i}).data("item",g).appendTo(h)}}),h.data("keyword",i));var k=b.menuItem();return e.trigger("menuCreate",[h,k,d,f,e]),k.filter(":not(.hidden)").length<1&&(g.addClass("empty"),!d.emptyHint)?b.hide():(d.exclusive&&b.menuItem(":not(.hidden):first").addClass("active"),e.trigger("renderMenu",[h,d,f,e]),b.show(),void 0)
}),"{mentions.textarea} keydown":function(a,c){clearTimeout(b.sleep);var d=b.menuItem(".active:not(.hidden)");switch(d.length<1&&(d=!1),c.keyCode){case h.UP:b.menuItem().removeClass("active"),d?d.prev(b.menuItem.selector+":not(.hidden)").addClass("active"):b.menuItem(":not(.hidden):last").addClass("active"),b.hidden||c.preventDefault();break;case h.DOWN:b.menuItem().removeClass("active"),d?d.next(b.menuItem.selector+":not(.hidden)").addClass("active"):b.menuItem(":not(.hidden):first").addClass("active"),b.hidden||c.preventDefault();
break;case h.ESCAPE:b.hide();break;case h.ENTER:if(!b.hidden&&d){var e=d.data("item");b.use(e),c.preventDefault()}}var d=b.menuItem(".active:not(.hidden)");b.hidden||b.viewport().scrollIntoView(d)},"{menuItem} mouseup":function(a){b.hide();var c=a.data("item");b.use(c),setTimeout(function(){b.mentions.textarea().focus()},150)},use:function(a){var c=b.activeQuery;if(c){var d=c.marker,e=a.title;d.text.nodeValue=e;var f=a;c.use&&(f=c.use(a)),d.finalize(f),b.mentions.textareaInsert(e,d.start,d.end),b.mentions.textarea().caret(d.start+e.length),b.mentions.normalize(),b.hidden=!0,b.hide()
}},"{menuItem} mouseover":function(a){b.menuItem().removeClass("active"),a.addClass("active")},"{menuItem} mouseout":function(){b.menuItem().removeClass("active")},"{closeButton} click":function(){b.hide()},"{mentions} destroyed":function(){b.element.remove()}}})};c(),b.resolveWith(c)};FD40.module("mentions",a)}(),function(){var a=function(a){var b=this,c=a,d=function(){"use strict";!function(a){function n(){var a=f();a!==g&&(g=a,d.trigger("orientationchange"))}function u(b,c,d,e){var f=d.type;d.type=c,a.event.dispatch.call(b,d,e),d.type=f
}a.attrFn=a.attrFn||{};var b="ontouchstart"in window,c={tap_pixel_range:5,swipe_h_threshold:50,swipe_v_threshold:50,taphold_threshold:750,doubletap_int:500,shake_threshold:15,touch_capable:b,orientation_support:"orientation"in window&&"onorientationchange"in window,startevent:b?"touchstart":"mousedown",endevent:b?"touchend":"mouseup",moveevent:b?"touchmove":"mousemove",tapevent:b?"tap":"click",scrollevent:b?"touchmove":"scroll",hold_timer:null,tap_timer:null};a.touch={},a.isTouchCapable=function(){return c.touch_capable
},a.getStartEvent=function(){return c.startevent},a.getEndEvent=function(){return c.endevent},a.getMoveEvent=function(){return c.moveevent},a.getTapEvent=function(){return c.tapevent},a.getScrollEvent=function(){return c.scrollevent},a.touch.setSwipeThresholdX=function(a){if("number"!=typeof a)throw new Error("Threshold parameter must be a type of number");c.swipe_h_threshold=a},a.touch.setSwipeThresholdY=function(a){if("number"!=typeof a)throw new Error("Threshold parameter must be a type of number");c.swipe_v_threshold=a
},a.touch.setDoubleTapInt=function(a){if("number"!=typeof a)throw new Error("Interval parameter must be a type of number");c.doubletap_int=a},a.touch.setTapHoldThreshold=function(a){if("number"!=typeof a)throw new Error("Threshold parameter must be a type of number");c.taphold_threshold=a},a.touch.setTapRange=function(a){if("number"!=typeof a)throw new Error("Ranger parameter must be a type of number");c.tap_pixel_range=threshold},a.each(["tapstart","tapend","tapmove","tap","singletap","doubletap","taphold","swipe","swipeup","swiperight","swipedown","swipeleft","swipeend","scrollstart","scrollend","orientationchange","tap2","taphold2"],function(b,c){a.fn[c]=function(a){return a?this.on(c,a):this.trigger(c)
},a.attrFn[c]=!0}),a.event.special.tapstart={setup:function(){var b=this,d=a(b);d.on(c.startevent,function e(a){if(d.data("callee",e),a.which&&1!==a.which)return!1;var f=a.originalEvent,g={position:{x:c.touch_capable?f.touches[0].pageX:a.pageX,y:c.touch_capable?f.touches[0].pageY:a.pageY},offset:{x:c.touch_capable?Math.round(f.changedTouches[0].pageX-(d.offset()?d.offset().left:0)):Math.round(a.pageX-(d.offset()?d.offset().left:0)),y:c.touch_capable?Math.round(f.changedTouches[0].pageY-(d.offset()?d.offset().top:0)):Math.round(a.pageY-(d.offset()?d.offset().top:0))},time:Date.now(),target:a.target};
return u(b,"tapstart",a,g),!0})},remove:function(){a(this).off(c.startevent,a(this).data.callee)}},a.event.special.tapmove={setup:function(){var b=this,d=a(b);d.on(c.moveevent,function e(a){d.data("callee",e);var f=a.originalEvent,g={position:{x:c.touch_capable?f.touches[0].pageX:a.pageX,y:c.touch_capable?f.touches[0].pageY:a.pageY},offset:{x:c.touch_capable?Math.round(f.changedTouches[0].pageX-(d.offset()?d.offset().left:0)):Math.round(a.pageX-(d.offset()?d.offset().left:0)),y:c.touch_capable?Math.round(f.changedTouches[0].pageY-(d.offset()?d.offset().top:0)):Math.round(a.pageY-(d.offset()?d.offset().top:0))},time:Date.now(),target:a.target};
return u(b,"tapmove",a,g),!0})},remove:function(){a(this).off(c.moveevent,a(this).data.callee)}},a.event.special.tapend={setup:function(){var b=this,d=a(b);d.on(c.endevent,function e(a){d.data("callee",e);var f=a.originalEvent,g={position:{x:c.touch_capable?f.changedTouches[0].pageX:a.pageX,y:c.touch_capable?f.changedTouches[0].pageY:a.pageY},offset:{x:c.touch_capable?Math.round(f.changedTouches[0].pageX-(d.offset()?d.offset().left:0)):Math.round(a.pageX-(d.offset()?d.offset().left:0)),y:c.touch_capable?Math.round(f.changedTouches[0].pageY-(d.offset()?d.offset().top:0)):Math.round(a.pageY-(d.offset()?d.offset().top:0))},time:Date.now(),target:a.target};
return u(b,"tapend",a,g),!0})},remove:function(){a(this).off(c.endevent,a(this).data.callee)}},a.event.special.taphold={setup:function(){var e,b=this,d=a(b),f={x:0,y:0},g=0,h=0;d.on(c.startevent,function i(a){if(a.which&&1!==a.which)return!1;d.data("tapheld",!1),e=a.target;{var j=a.originalEvent,k=Date.now();({x:c.touch_capable?j.touches[0].pageX:a.pageX,y:c.touch_capable?j.touches[0].pageY:a.pageY}),{x:c.touch_capable?j.touches[0].pageX-j.touches[0].target.offsetLeft:a.offsetX,y:c.touch_capable?j.touches[0].pageY-j.touches[0].target.offsetTop:a.offsetY}
}f.x=a.originalEvent.targetTouches?a.originalEvent.targetTouches[0].pageX:a.pageX,f.y=a.originalEvent.targetTouches?a.originalEvent.targetTouches[0].pageY:a.pageY,g=f.x,h=f.y;var n=d.parent().data("threshold")?d.parent().data("threshold"):d.data("threshold"),o="undefined"!=typeof n&&n!==!1&&parseInt(n)?parseInt(n):c.taphold_threshold;return c.hold_timer=window.setTimeout(function(){var l=f.x-g,m=f.y-h;if(a.target==e&&(f.x==g&&f.y==h||l>=-c.tap_pixel_range&&l<=c.tap_pixel_range&&m>=-c.tap_pixel_range&&m<=c.tap_pixel_range)){d.data("tapheld",!0);
for(var n=Date.now(),o=n-k,p=a.originalEvent.targetTouches?a.originalEvent.targetTouches:[a],q=[],r=0;r<p.length;r++){var s={position:{x:c.touch_capable?j.changedTouches[r].pageX:a.pageX,y:c.touch_capable?j.changedTouches[r].pageY:a.pageY},offset:{x:c.touch_capable?Math.round(j.changedTouches[r].pageX-(d.offset()?d.offset().left:0)):Math.round(a.pageX-(d.offset()?d.offset().left:0)),y:c.touch_capable?Math.round(j.changedTouches[r].pageY-(d.offset()?d.offset().top:0)):Math.round(a.pageY-(d.offset()?d.offset().top:0))},time:Date.now(),target:a.target,duration:o};
q.push(s)}var t=2==p.length?"taphold2":"taphold";d.data("callee1",i),u(b,t,a,q)}},o),!0}).on(c.endevent,function j(){d.data("callee2",j),d.data("tapheld",!1),window.clearTimeout(c.hold_timer)}).on(c.moveevent,function k(a){d.data("callee3",k),g=a.originalEvent.targetTouches?a.originalEvent.targetTouches[0].pageX:a.pageX,h=a.originalEvent.targetTouches?a.originalEvent.targetTouches[0].pageY:a.pageY})},remove:function(){a(this).off(c.startevent,a(this).data.callee1).off(c.endevent,a(this).data.callee2).off(c.moveevent,a(this).data.callee3)
}},a.event.special.doubletap={setup:function(){var e,f,h,i,b=this,d=a(b),g=null,j=!1;d.on(c.startevent,function k(b){return b.which&&1!==b.which?!1:(d.data("doubletapped",!1),e=b.target,d.data("callee1",k),h=b.originalEvent,g||(g={position:{x:c.touch_capable?h.touches[0].pageX:b.pageX,y:c.touch_capable?h.touches[0].pageY:b.pageY},offset:{x:c.touch_capable?Math.round(h.changedTouches[0].pageX-(d.offset()?d.offset().left:0)):Math.round(b.pageX-(d.offset()?d.offset().left:0)),y:c.touch_capable?Math.round(h.changedTouches[0].pageY-(d.offset()?d.offset().top:0)):Math.round(b.pageY-(d.offset()?d.offset().top:0))},time:Date.now(),target:b.target,element:b.originalEvent.srcElement,index:a(b.target).index()}),!0)
}).on(c.endevent,function l(e){var k=Date.now(),m=d.data("lastTouch")||k+1,n=k-m;if(window.clearTimeout(f),d.data("callee2",l),n<c.doubletap_int&&a(e.target).index()==g.index&&n>100){d.data("doubletapped",!0),window.clearTimeout(c.tap_timer);var o={position:{x:c.touch_capable?e.originalEvent.changedTouches[0].pageX:e.pageX,y:c.touch_capable?e.originalEvent.changedTouches[0].pageY:e.pageY},offset:{x:c.touch_capable?Math.round(h.changedTouches[0].pageX-(d.offset()?d.offset().left:0)):Math.round(e.pageX-(d.offset()?d.offset().left:0)),y:c.touch_capable?Math.round(h.changedTouches[0].pageY-(d.offset()?d.offset().top:0)):Math.round(e.pageY-(d.offset()?d.offset().top:0))},time:Date.now(),target:e.target,element:e.originalEvent.srcElement,index:a(e.target).index()},p={firstTap:g,secondTap:o,interval:o.time-g.time};
j||(u(b,"doubletap",e,p),g=null),j=!0,i=window.setTimeout(function(){j=!1},c.doubletap_int)}else d.data("lastTouch",k),f=window.setTimeout(function(){g=null,window.clearTimeout(f)},c.doubletap_int,[e]);d.data("lastTouch",k)})},remove:function(){a(this).off(c.startevent,a(this).data.callee1).off(c.endevent,a(this).data.callee2)}},a.event.special.singletap={setup:function(){var b=this,d=a(b),e=null,f=null,g={x:0,y:0};d.on(c.startevent,function h(a){return a.which&&1!==a.which?!1:(f=Date.now(),e=a.target,d.data("callee1",h),g.x=a.originalEvent.targetTouches?a.originalEvent.targetTouches[0].pageX:a.pageX,g.y=a.originalEvent.targetTouches?a.originalEvent.targetTouches[0].pageY:a.pageY,!0)
}).on(c.endevent,function i(a){if(d.data("callee2",i),a.target==e){var h=a.originalEvent.changedTouches?a.originalEvent.changedTouches[0].pageX:a.pageX,j=a.originalEvent.changedTouches?a.originalEvent.changedTouches[0].pageY:a.pageY;c.tap_timer=window.setTimeout(function(){var e=g.x-h,i=g.y-j;if(!d.data("doubletapped")&&!d.data("tapheld")&&(g.x==h&&g.y==j||e>=-c.tap_pixel_range&&e<=c.tap_pixel_range&&i>=-c.tap_pixel_range&&i<=c.tap_pixel_range)){var k=a.originalEvent,l={position:{x:c.touch_capable?k.changedTouches[0].pageX:a.pageX,y:c.touch_capable?k.changedTouches[0].pageY:a.pageY},offset:{x:c.touch_capable?Math.round(k.changedTouches[0].pageX-(d.offset()?d.offset().left:0)):Math.round(a.pageX-(d.offset()?d.offset().left:0)),y:c.touch_capable?Math.round(k.changedTouches[0].pageY-(d.offset()?d.offset().top:0)):Math.round(a.pageY-(d.offset()?d.offset().top:0))},time:Date.now(),target:a.target};
l.time-f<c.taphold_threshold&&u(b,"singletap",a,l)}},c.doubletap_int)}})},remove:function(){a(this).off(c.startevent,a(this).data.callee1).off(c.endevent,a(this).data.callee2)}},a.event.special.tap={setup:function(){var g,i,b=this,d=a(b),e=!1,f=null,h={x:0,y:0};d.on(c.startevent,function j(a){return d.data("callee1",j),a.which&&1!==a.which?!1:(e=!0,h.x=a.originalEvent.targetTouches?a.originalEvent.targetTouches[0].pageX:a.pageX,h.y=a.originalEvent.targetTouches?a.originalEvent.targetTouches[0].pageY:a.pageY,g=Date.now(),f=a.target,i=a.originalEvent.targetTouches?a.originalEvent.targetTouches:[a],!0)
}).on(c.endevent,function k(a){d.data("callee2",k);var j=a.originalEvent.targetTouches?a.originalEvent.changedTouches[0].pageX:a.pageX,l=a.originalEvent.targetTouches?a.originalEvent.changedTouches[0].pageY:a.pageY,m=h.x-j,n=h.y-l;if(f==a.target&&e&&Date.now()-g<c.taphold_threshold&&(h.x==j&&h.y==l||m>=-c.tap_pixel_range&&m<=c.tap_pixel_range&&n>=-c.tap_pixel_range&&n<=c.tap_pixel_range)){for(var p=a.originalEvent,q=[],r=0;r<i.length;r++){var s={position:{x:c.touch_capable?p.changedTouches[r].pageX:a.pageX,y:c.touch_capable?p.changedTouches[r].pageY:a.pageY},offset:{x:c.touch_capable?Math.round(p.changedTouches[r].pageX-(d.offset()?d.offset().left:0)):Math.round(a.pageX-(d.offset()?d.offset().left:0)),y:c.touch_capable?Math.round(p.changedTouches[r].pageY-(d.offset()?d.offset().top:0)):Math.round(a.pageY-(d.offset()?d.offset().top:0))},time:Date.now(),target:a.target};
q.push(s)}var t=2==i.length?"tap2":"tap";u(b,t,a,q)}})},remove:function(){a(this).off(c.startevent,a(this).data.callee1).off(c.endevent,a(this).data.callee2)}},a.event.special.swipe={setup:function(){function j(b){d=a(b.currentTarget),d.data("callee1",j),g.x=b.originalEvent.targetTouches?b.originalEvent.targetTouches[0].pageX:b.pageX,g.y=b.originalEvent.targetTouches?b.originalEvent.targetTouches[0].pageY:b.pageY,h.x=g.x,h.y=g.y,e=!0;var f=b.originalEvent;i={position:{x:c.touch_capable?f.touches[0].pageX:b.pageX,y:c.touch_capable?f.touches[0].pageY:b.pageY},offset:{x:c.touch_capable?Math.round(f.changedTouches[0].pageX-(d.offset()?d.offset().left:0)):Math.round(b.pageX-(d.offset()?d.offset().left:0)),y:c.touch_capable?Math.round(f.changedTouches[0].pageY-(d.offset()?d.offset().top:0)):Math.round(b.pageY-(d.offset()?d.offset().top:0))},time:Date.now(),target:b.target}
}function k(b){d=a(b.currentTarget),d.data("callee2",k),h.x=b.originalEvent.targetTouches?b.originalEvent.targetTouches[0].pageX:b.pageX,h.y=b.originalEvent.targetTouches?b.originalEvent.targetTouches[0].pageY:b.pageY;var j,l=d.parent().data("xthreshold")?d.parent().data("xthreshold"):d.data("xthreshold"),m=d.parent().data("ythreshold")?d.parent().data("ythreshold"):d.data("ythreshold"),n="undefined"!=typeof l&&l!==!1&&parseInt(l)?parseInt(l):c.swipe_h_threshold,o="undefined"!=typeof m&&m!==!1&&parseInt(m)?parseInt(m):c.swipe_v_threshold;
if(g.y>h.y&&g.y-h.y>o&&(j="swipeup"),g.x<h.x&&h.x-g.x>n&&(j="swiperight"),g.y<h.y&&h.y-g.y>o&&(j="swipedown"),g.x>h.x&&g.x-h.x>n&&(j="swipeleft"),void 0!=j&&e){g.x=0,g.y=0,h.x=0,h.y=0,e=!1;var p=b.originalEvent,q={position:{x:c.touch_capable?p.touches[0].pageX:b.pageX,y:c.touch_capable?p.touches[0].pageY:b.pageY},offset:{x:c.touch_capable?Math.round(p.changedTouches[0].pageX-(d.offset()?d.offset().left:0)):Math.round(b.pageX-(d.offset()?d.offset().left:0)),y:c.touch_capable?Math.round(p.changedTouches[0].pageY-(d.offset()?d.offset().top:0)):Math.round(b.pageY-(d.offset()?d.offset().top:0))},time:Date.now(),target:b.target},r=Math.abs(i.position.x-q.position.x),s=Math.abs(i.position.y-q.position.y),t={startEvnt:i,endEvnt:q,direction:j.replace("swipe",""),xAmount:r,yAmount:s,duration:q.time-i.time};
f=!0,d.trigger("swipe",t).trigger(j,t)}}function l(b){d=a(b.currentTarget);var g="";if(d.data("callee3",l),f){var h=d.data("xthreshold"),j=d.data("ythreshold"),k="undefined"!=typeof h&&h!==!1&&parseInt(h)?parseInt(h):c.swipe_h_threshold,m="undefined"!=typeof j&&j!==!1&&parseInt(j)?parseInt(j):c.swipe_v_threshold,n=b.originalEvent,o={position:{x:c.touch_capable?n.changedTouches[0].pageX:b.pageX,y:c.touch_capable?n.changedTouches[0].pageY:b.pageY},offset:{x:c.touch_capable?Math.round(n.changedTouches[0].pageX-(d.offset()?d.offset().left:0)):Math.round(b.pageX-(d.offset()?d.offset().left:0)),y:c.touch_capable?Math.round(n.changedTouches[0].pageY-(d.offset()?d.offset().top:0)):Math.round(b.pageY-(d.offset()?d.offset().top:0))},time:Date.now(),target:b.target};
i.position.y>o.position.y&&i.position.y-o.position.y>m&&(g="swipeup"),i.position.x<o.position.x&&o.position.x-i.position.x>k&&(g="swiperight"),i.position.y<o.position.y&&o.position.y-i.position.y>m&&(g="swipedown"),i.position.x>o.position.x&&i.position.x-o.position.x>k&&(g="swipeleft");var p=Math.abs(i.position.x-o.position.x),q=Math.abs(i.position.y-o.position.y),r={startEvnt:i,endEvnt:o,direction:g.replace("swipe",""),xAmount:p,yAmount:q,duration:o.time-i.time};d.trigger("swipeend",r)}e=!1,f=!1}var i,b=this,d=a(b),e=!1,f=!1,g={x:0,y:0},h={x:0,y:0};
d.on(c.startevent,j),d.on(c.moveevent,k),d.on(c.endevent,l)},remove:function(){a(this).off(c.startevent,a(this).data.callee1).off(c.moveevent,a(this).data.callee2).off(c.endevent,a(this).data.callee3)}},a.event.special.scrollstart={setup:function(){function g(a,c){e=c,u(b,e?"scrollstart":"scrollend",a)}var e,f,b=this,d=a(b);d.on(c.scrollevent,function h(a){d.data("callee",h),e||g(a,!0),clearTimeout(f),f=setTimeout(function(){g(a,!1)},50)})},remove:function(){a(this).off(c.scrollevent,a(this).data.callee)}};var e,f,g,h,i,d=a(window),j={0:!0,180:!0};
if(c.orientation_support){var k=window.innerWidth||d.width(),l=window.innerHeight||d.height(),m=50;h=k>l&&k-l>m,i=j[window.orientation],(h&&i||!h&&!i)&&(j={"-90":!0,90:!0})}a.event.special.orientationchange=e={setup:function(){return c.orientation_support?!1:(g=f(),d.on("throttledresize",n),!0)},teardown:function(){return c.orientation_support?!1:(d.off("throttledresize",n),!0)},add:function(a){var b=a.handler;a.handler=function(a){return a.orientation=f(),b.apply(this,arguments)}}},a.event.special.orientationchange.orientation=f=function(){var a=!0,b=document.documentElement;
return a=c.orientation_support?j[window.orientation]:b&&b.clientWidth/b.clientHeight<1.1,a?"portrait":"landscape"},a.event.special.throttledresize={setup:function(){a(this).on("resize",p)},teardown:function(){a(this).off("resize",p)}};var r,s,t,o=250,p=function(){s=Date.now(),t=s-q,t>=o?(q=s,a(this).trigger("throttledresize")):(r&&window.clearTimeout(r),r=window.setTimeout(n,o-t))},q=0;a.each({scrollend:"scrollstart",swipeup:"swipe",swiperight:"swipe",swipedown:"swipe",swipeleft:"swipe",swipeend:"swipe",tap2:"tap",taphold2:"taphold"},function(b,c){a.event.special[b]={setup:function(){a(this).on(c,a.noop)
}}})}(c)};d(),b.resolveWith(d)};FD40.module("mobile-events",a)}(),function(){var a=function(a){var b=this,c=function(){(function(c){function ab(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function bb(a,b){function e(){d.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+a)}var c=!0;return hb(function(){return c&&(e(),c=!1),b.apply(this,arguments)
},b)}function cb(a,b){return function(c){return kb(a.call(this,c),b)}}function db(a,b){return function(c){return this.lang().ordinal(a.call(this,c),b)}}function eb(){}function fb(a){xb(a),hb(this,a)}function gb(a){var b=qb(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+1e3*j+6e4*i+36e5*h,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._bubble()}function hb(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);
return b.hasOwnProperty("toString")&&(a.toString=b.toString),b.hasOwnProperty("valueOf")&&(a.valueOf=b.valueOf),a}function ib(a){var c,b={};for(c in a)a.hasOwnProperty(c)&&r.hasOwnProperty(c)&&(b[c]=a[c]);return b}function jb(a){return 0>a?Math.ceil(a):Math.floor(a)}function kb(a,b,c){for(var d=""+Math.abs(a),e=a>=0;d.length<b;)d="0"+d;return(e?c?"+":"":"-")+d}function lb(a,b,c,e){var f=b._milliseconds,g=b._days,h=b._months;e=null==e?!0:e,f&&a._d.setTime(+a._d+f*c),g&&cc(a,"Date",bc(a,"Date")+g*c),h&&ac(a,bc(a,"Month")+h*c),e&&d.updateOffset(a,g||h)
}function mb(a){return"[object Array]"===Object.prototype.toString.call(a)}function nb(a){return"[object Date]"===Object.prototype.toString.call(a)||a instanceof Date}function ob(a,b,c){var g,d=Math.min(a.length,b.length),e=Math.abs(a.length-b.length),f=0;for(g=0;d>g;g++)(c&&a[g]!==b[g]||!c&&sb(a[g])!==sb(b[g]))&&f++;return f+e}function pb(a){if(a){var b=a.toLowerCase().replace(/(.)s$/,"$1");a=V[a]||W[b]||b}return a}function qb(a){var c,d,b={};for(d in a)a.hasOwnProperty(d)&&(c=pb(d),c&&(b[c]=a[d]));return b
}function rb(a){var b,e;if(0===a.indexOf("week"))b=7,e="day";else{if(0!==a.indexOf("month"))return;b=12,e="month"}d[a]=function(f,g){var h,i,j=d.fn._lang[a],k=[];if("number"==typeof f&&(g=f,f=c),i=function(a){var b=d().utc().set(e,a);return j.call(d.fn._lang,b,f||"")},null!=g)return i(g);for(h=0;b>h;h++)k.push(i(h));return k}}function sb(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=b>=0?Math.floor(b):Math.ceil(b)),c}function tb(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function ub(a,b,c){return Zb(d([a,11,31+b-c]),b,c).week
}function vb(a){return wb(a)?366:365}function wb(a){return a%4===0&&a%100!==0||a%400===0}function xb(a){var b;a._a&&-2===a._pf.overflow&&(b=a._a[k]<0||a._a[k]>11?k:a._a[l]<1||a._a[l]>tb(a._a[j],a._a[k])?l:a._a[m]<0||a._a[m]>23?m:a._a[n]<0||a._a[n]>59?n:a._a[o]<0||a._a[o]>59?o:a._a[p]<0||a._a[p]>999?p:-1,a._pf._overflowDayOfYear&&(j>b||b>l)&&(b=l),a._pf.overflow=b)}function yb(a){return null==a._isValid&&(a._isValid=!isNaN(a._d.getTime())&&a._pf.overflow<0&&!a._pf.empty&&!a._pf.invalidMonth&&!a._pf.nullInput&&!a._pf.invalidFormat&&!a._pf.userInvalidated,a._strict&&(a._isValid=a._isValid&&0===a._pf.charsLeftOver&&0===a._pf.unusedTokens.length)),a._isValid
}function zb(a){return a?a.toLowerCase().replace("_","-"):a}function Ab(a,b){return b._isUTC?d(a).zone(b._offset||0):d(a).local()}function Bb(a,b){return b.abbr=a,q[a]||(q[a]=new eb),q[a].set(b),q[a]}function Cb(a){delete q[a]}function Db(a){var c,e,f,g,b=0,h=function(a){if(!q[a]&&s)try{require("./lang/"+a)}catch(b){}return q[a]};if(!a)return d.fn._lang;if(!mb(a)){if(e=h(a))return e;a=[a]}for(;b<a.length;){for(g=zb(a[b]).split("-"),c=g.length,f=zb(a[b+1]),f=f?f.split("-"):null;c>0;){if(e=h(g.slice(0,c).join("-")))return e;
if(f&&f.length>=c&&ob(g,f,!0)>=c-1)break;c--}b++}return d.fn._lang}function Eb(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function Fb(a){var c,d,b=a.match(w);for(c=0,d=b.length;d>c;c++)b[c]=$[b[c]]?$[b[c]]:Eb(b[c]);return function(e){var f="";for(c=0;d>c;c++)f+=b[c]instanceof Function?b[c].call(e,a):b[c];return f}}function Gb(a,b){return a.isValid()?(b=Hb(b,a.lang()),X[b]||(X[b]=Fb(b)),X[b](a)):a.lang().invalidDate()}function Hb(a,b){function d(a){return b.longDateFormat(a)||a
}var c=5;for(x.lastIndex=0;c>=0&&x.test(a);)a=a.replace(x,d),x.lastIndex=0,c-=1;return a}function Ib(a,b){var c,d=b._strict;switch(a){case"Q":return I;case"DDDD":return K;case"YYYY":case"GGGG":case"gggg":return d?L:A;case"Y":case"G":case"g":return N;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return d?M:B;case"S":if(d)return I;case"SS":if(d)return J;case"SSS":if(d)return K;case"DDD":return z;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return D;case"a":case"A":return Db(b._l)._meridiemParse;case"X":return G;
case"Z":case"ZZ":return E;case"T":return F;case"SSSS":return C;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return d?J:y;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return y;case"Do":return H;default:return c=new RegExp(Qb(Pb(a.replace("\\","")),"i"))}}function Jb(a){a=a||"";var b=a.match(E)||[],c=b[b.length-1]||[],d=(c+"").match(S)||["-",0,0],e=+(60*d[1])+sb(d[2]);return"+"===d[0]?-e:e}function Kb(a,b,c){var e,f=c._a;
switch(a){case"Q":null!=b&&(f[k]=3*(sb(b)-1));break;case"M":case"MM":null!=b&&(f[k]=sb(b)-1);break;case"MMM":case"MMMM":e=Db(c._l).monthsParse(b),null!=e?f[k]=e:c._pf.invalidMonth=b;break;case"D":case"DD":null!=b&&(f[l]=sb(b));break;case"Do":null!=b&&(f[l]=sb(parseInt(b,10)));break;case"DDD":case"DDDD":null!=b&&(c._dayOfYear=sb(b));break;case"YY":f[j]=d.parseTwoDigitYear(b);break;case"YYYY":case"YYYYY":case"YYYYYY":f[j]=sb(b);break;case"a":case"A":c._isPm=Db(c._l).isPM(b);break;case"H":case"HH":case"h":case"hh":f[m]=sb(b);
break;case"m":case"mm":f[n]=sb(b);break;case"s":case"ss":f[o]=sb(b);break;case"S":case"SS":case"SSS":case"SSSS":f[p]=sb(1e3*("0."+b));break;case"X":c._d=new Date(1e3*parseFloat(b));break;case"Z":case"ZZ":c._useUTC=!0,c._tzm=Jb(b);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":a=a.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":a=a.substr(0,2),b&&(c._w=c._w||{},c._w[a]=b)}}function Lb(a){var b,c,f,g,h,i,o,p,q,r,e=[];if(!a._d){for(f=Nb(a),a._w&&null==a._a[l]&&null==a._a[k]&&(h=function(b){var c=parseInt(b,10);
return b?b.length<3?c>68?1900+c:2e3+c:c:null==a._a[j]?d().weekYear():a._a[j]},i=a._w,null!=i.GG||null!=i.W||null!=i.E?o=$b(h(i.GG),i.W||1,i.E,4,1):(p=Db(a._l),q=null!=i.d?Wb(i.d,p):null!=i.e?parseInt(i.e,10)+p._week.dow:0,r=parseInt(i.w,10)||1,null!=i.d&&q<p._week.dow&&r++,o=$b(h(i.gg),r,q,p._week.doy,p._week.dow)),a._a[j]=o.year,a._dayOfYear=o.dayOfYear),a._dayOfYear&&(g=null==a._a[j]?f[j]:a._a[j],a._dayOfYear>vb(g)&&(a._pf._overflowDayOfYear=!0),c=Vb(g,0,a._dayOfYear),a._a[k]=c.getUTCMonth(),a._a[l]=c.getUTCDate()),b=0;3>b&&null==a._a[b];++b)a._a[b]=e[b]=f[b];
for(;7>b;b++)a._a[b]=e[b]=null==a._a[b]?2===b?1:0:a._a[b];e[m]+=sb((a._tzm||0)/60),e[n]+=sb((a._tzm||0)%60),a._d=(a._useUTC?Vb:Ub).apply(null,e)}}function Mb(a){var b;a._d||(b=qb(a._i),a._a=[b.year,b.month,b.day,b.hour,b.minute,b.second,b.millisecond],Lb(a))}function Nb(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function Ob(a){a._a=[],a._pf.empty=!0;var d,e,f,g,h,b=Db(a._l),c=""+a._i,i=c.length,j=0;for(f=Hb(a._f,b).match(w)||[],d=0;d<f.length;d++)g=f[d],e=(c.match(Ib(g,a))||[])[0],e&&(h=c.substr(0,c.indexOf(e)),h.length>0&&a._pf.unusedInput.push(h),c=c.slice(c.indexOf(e)+e.length),j+=e.length),$[g]?(e?a._pf.empty=!1:a._pf.unusedTokens.push(g),Kb(g,e,a)):a._strict&&!e&&a._pf.unusedTokens.push(g);
a._pf.charsLeftOver=i-j,c.length>0&&a._pf.unusedInput.push(c),a._isPm&&a._a[m]<12&&(a._a[m]+=12),a._isPm===!1&&12===a._a[m]&&(a._a[m]=0),Lb(a),xb(a)}function Pb(a){return a.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e})}function Qb(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Rb(a){var b,c,d,e,f;if(0===a._f.length)return a._pf.invalidFormat=!0,a._d=new Date(0/0),void 0;for(e=0;e<a._f.length;e++)f=0,b=hb({},a),b._pf=ab(),b._f=a._f[e],Ob(b),yb(b)&&(f+=b._pf.charsLeftOver,f+=10*b._pf.unusedTokens.length,b._pf.score=f,(null==d||d>f)&&(d=f,c=b));
hb(a,c||b)}function Sb(a){var b,c,e=a._i,f=O.exec(e);if(f){for(a._pf.iso=!0,b=0,c=Q.length;c>b;b++)if(Q[b][1].exec(e)){a._f=Q[b][0]+(f[6]||" ");break}for(b=0,c=R.length;c>b;b++)if(R[b][1].exec(e)){a._f+=R[b][0];break}e.match(E)&&(a._f+="Z"),Ob(a)}else d.createFromInputFallback(a)}function Tb(a){var b=a._i,e=t.exec(b);b===c?a._d=new Date:e?a._d=new Date(+e[1]):"string"==typeof b?Sb(a):mb(b)?(a._a=b.slice(0),Lb(a)):nb(b)?a._d=new Date(+b):"object"==typeof b?Mb(a):"number"==typeof b?a._d=new Date(b):d.createFromInputFallback(a)
}function Ub(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 1970>a&&h.setFullYear(a),h}function Vb(a){var b=new Date(Date.UTC.apply(null,arguments));return 1970>a&&b.setUTCFullYear(a),b}function Wb(a,b){if("string"==typeof a)if(isNaN(a)){if(a=b.weekdaysParse(a),"number"!=typeof a)return null}else a=parseInt(a,10);return a}function Xb(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function Yb(a,b,c){var d=h(Math.abs(a)/1e3),e=h(d/60),f=h(e/60),g=h(f/24),i=h(g/365),j=45>d&&["s",d]||1===e&&["m"]||45>e&&["mm",e]||1===f&&["h"]||22>f&&["hh",f]||1===g&&["d"]||25>=g&&["dd",g]||45>=g&&["M"]||345>g&&["MM",h(g/30)]||1===i&&["y"]||["yy",i];
return j[2]=b,j[3]=a>0,j[4]=c,Xb.apply({},j)}function Zb(a,b,c){var g,e=c-b,f=c-a.day();return f>e&&(f-=7),e-7>f&&(f+=7),g=d(a).add("d",f),{week:Math.ceil(g.dayOfYear()/7),year:g.year()}}function $b(a,b,c,d,e){var g,h,f=Vb(a,0,1).getUTCDay();return c=null!=c?c:e,g=e-f+(f>d?7:0)-(e>f?7:0),h=7*(b-1)+(c-e)+g+1,{year:h>0?a:a-1,dayOfYear:h>0?h:vb(a-1)+h}}function _b(a){var b=a._i,e=a._f;return null===b||e===c&&""===b?d.invalid({nullInput:!0}):("string"==typeof b&&(a._i=b=Db().preparse(b)),d.isMoment(b)?(a=ib(b),a._d=new Date(+b._d)):e?mb(e)?Rb(a):Ob(a):Tb(a),new fb(a))
}function ac(a,b){var c;return"string"==typeof b&&(b=a.lang().monthsParse(b),"number"!=typeof b)?a:(c=Math.min(a.date(),tb(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a)}function bc(a,b){return a._d["get"+(a._isUTC?"UTC":"")+b]()}function cc(a,b,c){return"Month"===b?ac(a,c):a._d["set"+(a._isUTC?"UTC":"")+b](c)}function dc(a,b){return function(c){return null!=c?(cc(this,a,c),d.updateOffset(this,b),this):bc(this,a)}}function ec(a){d.duration.fn[a]=function(){return this._data[a]}}function fc(a,b){d.duration.fn["as"+a]=function(){return+this/b
}}for(var d,i,e="2.6.0",h=Math.round,j=0,k=1,l=2,m=3,n=4,o=5,p=6,q={},r={_isAMomentObject:null,_i:null,_f:null,_l:null,_strict:null,_isUTC:null,_offset:null,_pf:null,_lang:null},s="undefined"!=typeof b&&b.exports,t=/^\/?Date\((\-?\d+)/i,u=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,v=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,w=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,x=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,y=/\d\d?/,z=/\d{1,3}/,A=/\d{1,4}/,B=/[+\-]?\d{1,6}/,C=/\d+/,D=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,E=/Z|[\+\-]\d\d:?\d\d/gi,F=/T/i,G=/[\+\-]?\d+(\.\d{1,3})?/,H=/\d{1,2}/,I=/\d/,J=/\d\d/,K=/\d{3}/,L=/\d{4}/,M=/[+-]?\d{6}/,N=/[+-]?\d+/,O=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,P="YYYY-MM-DDTHH:mm:ssZ",Q=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],R=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],S=/([\+\-]|\d\d)/gi,U=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),V={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},W={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},X={},Y="DDD w W M D d".split(" "),Z="M D H h m s w W".split(" "),$={M:function(){return this.month()+1
},MMM:function(a){return this.lang().monthsShort(this,a)},MMMM:function(a){return this.lang().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.lang().weekdaysMin(this,a)},ddd:function(a){return this.lang().weekdaysShort(this,a)},dddd:function(a){return this.lang().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return kb(this.year()%100,2)},YYYY:function(){return kb(this.year(),4)
},YYYYY:function(){return kb(this.year(),5)},YYYYYY:function(){var a=this.year(),b=a>=0?"+":"-";return b+kb(Math.abs(a),6)},gg:function(){return kb(this.weekYear()%100,2)},gggg:function(){return kb(this.weekYear(),4)},ggggg:function(){return kb(this.weekYear(),5)},GG:function(){return kb(this.isoWeekYear()%100,2)},GGGG:function(){return kb(this.isoWeekYear(),4)},GGGGG:function(){return kb(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)
},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return sb(this.milliseconds()/100)},SS:function(){return kb(sb(this.milliseconds()/10),2)},SSS:function(){return kb(this.milliseconds(),3)},SSSS:function(){return kb(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+kb(sb(a/60),2)+":"+kb(sb(a)%60,2)
},ZZ:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+kb(sb(a/60),2)+kb(sb(a)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},_=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];Y.length;)i=Y.pop(),$[i+"o"]=db($[i],i);for(;Z.length;)i=Z.pop(),$[i+i]=cb($[i],2);for($.DDDD=cb($.DDD,3),hb(eb.prototype,{set:function(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b
},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(a){return this._months[a.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a){var b,c,e;for(this._monthsParse||(this._monthsParse=[]),b=0;12>b;b++)if(this._monthsParse[b]||(c=d.utc([2e3,b]),e="^"+this.months(c,"")+"|^"+this.monthsShort(c,""),this._monthsParse[b]=new RegExp(e.replace(".",""),"i")),this._monthsParse[b].test(a))return b
},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},weekdaysParse:function(a){var b,c,e;for(this._weekdaysParse||(this._weekdaysParse=[]),b=0;7>b;b++)if(this._weekdaysParse[b]||(c=d([2e3,1]).day(b),e="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(e.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b
},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(a){var b=this._longDateFormat[a];return!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b),b},isPM:function(a){return"p"===(a+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(a,b){var c=this._calendar[a];
return"function"==typeof c?c.apply(b):c},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)},pastFuture:function(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)},ordinal:function(a){return this._ordinal.replace("%d",a)
},_ordinal:"%d",preparse:function(a){return a},postformat:function(a){return a},week:function(a){return Zb(a,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),d=function(a,b,d,e){var f;return"boolean"==typeof d&&(e=d,d=c),f={},f._isAMomentObject=!0,f._i=a,f._f=b,f._l=d,f._strict=e,f._isUTC=!1,f._pf=ab(),_b(f)},d.suppressDeprecationWarnings=!1,d.createFromInputFallback=bb("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(a){a._d=new Date(a._i)
}),d.utc=function(a,b,d,e){var f;return"boolean"==typeof d&&(e=d,d=c),f={},f._isAMomentObject=!0,f._useUTC=!0,f._isUTC=!0,f._l=d,f._i=a,f._f=b,f._strict=e,f._pf=ab(),_b(f).utc()},d.unix=function(a){return d(1e3*a)},d.duration=function(a,b){var f,g,h,c=a,e=null;return d.isDuration(a)?c={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(c={},b?c[b]=a:c.milliseconds=a):(e=u.exec(a))?(f="-"===e[1]?-1:1,c={y:0,d:sb(e[l])*f,h:sb(e[m])*f,m:sb(e[n])*f,s:sb(e[o])*f,ms:sb(e[p])*f}):(e=v.exec(a))&&(f="-"===e[1]?-1:1,h=function(a){var b=a&&parseFloat(a.replace(",","."));
return(isNaN(b)?0:b)*f},c={y:h(e[2]),M:h(e[3]),d:h(e[4]),h:h(e[5]),m:h(e[6]),s:h(e[7]),w:h(e[8])}),g=new gb(c),d.isDuration(a)&&a.hasOwnProperty("_lang")&&(g._lang=a._lang),g},d.version=e,d.defaultFormat=P,d.momentProperties=r,d.updateOffset=function(){},d.lang=function(a,b){var c;return a?(b?Bb(zb(a),b):null===b?(Cb(a),a="en"):q[a]||Db(a),c=d.duration.fn._lang=d.fn._lang=Db(a),c._abbr):d.fn._lang._abbr},d.langData=function(a){return a&&a._lang&&a._lang._abbr&&(a=a._lang._abbr),Db(a)},d.isMoment=function(a){return a instanceof fb||null!=a&&a.hasOwnProperty("_isAMomentObject")
},d.isDuration=function(a){return a instanceof gb},i=_.length-1;i>=0;--i)rb(_[i]);d.normalizeUnits=function(a){return pb(a)},d.invalid=function(a){var b=d.utc(0/0);return null!=a?hb(b._pf,a):b._pf.userInvalidated=!0,b},d.parseZone=function(){return d.apply(null,arguments).parseZone()},d.parseTwoDigitYear=function(a){return sb(a)+(sb(a)>68?1900:2e3)},hb(d.fn=fb.prototype,{clone:function(){return d(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")
},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var a=d(this).utc();return 0<a.year()&&a.year()<=9999?Gb(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):Gb(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var a=this;return[a.year(),a.month(),a.date(),a.hours(),a.minutes(),a.seconds(),a.milliseconds()]},isValid:function(){return yb(this)},isDSTShifted:function(){return this._a?this.isValid()&&ob(this._a,(this._isUTC?d.utc(this._a):d(this._a)).toArray())>0:!1},parsingFlags:function(){return hb({},this._pf)
},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(a){var b=Gb(this,a||d.defaultFormat);return this.lang().postformat(b)},add:function(a,b){var c;return c="string"==typeof a?d.duration(+b,a):d.duration(a,b),lb(this,c,1),this},subtract:function(a,b){var c;return c="string"==typeof a?d.duration(+b,a):d.duration(a,b),lb(this,c,-1),this},diff:function(a,b,c){var g,h,e=Ab(a,this),f=6e4*(this.zone()-e.zone());
return b=pb(b),"year"===b||"month"===b?(g=432e5*(this.daysInMonth()+e.daysInMonth()),h=12*(this.year()-e.year())+(this.month()-e.month()),h+=(this-d(this).startOf("month")-(e-d(e).startOf("month")))/g,h-=6e4*(this.zone()-d(this).startOf("month").zone()-(e.zone()-d(e).startOf("month").zone()))/g,"year"===b&&(h/=12)):(g=this-e,h="second"===b?g/1e3:"minute"===b?g/6e4:"hour"===b?g/36e5:"day"===b?(g-f)/864e5:"week"===b?(g-f)/6048e5:g),c?h:jb(h)},from:function(a,b){return d.duration(this.diff(a)).lang(this.lang()._abbr).humanize(!b)
},fromNow:function(a){return this.from(d(),a)},calendar:function(){var a=Ab(d(),this).startOf("day"),b=this.diff(a,"days",!0),c=-6>b?"sameElse":-1>b?"lastWeek":0>b?"lastDay":1>b?"sameDay":2>b?"nextDay":7>b?"nextWeek":"sameElse";return this.format(this.lang().calendar(c,this))},isLeapYear:function(){return wb(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=Wb(a,this.lang()),this.add({d:a-b})):b
},month:dc("Month",!0),startOf:function(a){switch(a=pb(a)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a?this.weekday(0):"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(a){return a=pb(a),this.startOf(a).add("isoWeek"===a?"week":a,1).subtract("ms",1)},isAfter:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)>+d(a).startOf(b)
},isBefore:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)<+d(a).startOf(b)},isSame:function(a,b){return b=b||"ms",+this.clone().startOf(b)===+Ab(a,this).startOf(b)},min:function(a){return a=d.apply(null,arguments),this>a?this:a},max:function(a){return a=d.apply(null,arguments),a>this?this:a},zone:function(a,b){var c=this._offset||0;return null==a?this._isUTC?c:this._d.getTimezoneOffset():("string"==typeof a&&(a=Jb(a)),Math.abs(a)<16&&(a=60*a),this._offset=a,this._isUTC=!0,c!==a&&(!b||this._changeInProgress?lb(this,d.duration(c-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,d.updateOffset(this,!0),this._changeInProgress=null)),this)
},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(a){return a=a?d(a).zone():0,(this.zone()-a)%60===0},daysInMonth:function(){return tb(this.year(),this.month())},dayOfYear:function(a){var b=h((d(this).startOf("day")-d(this).startOf("year"))/864e5)+1;return null==a?b:this.add("d",a-b)},quarter:function(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)
},weekYear:function(a){var b=Zb(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==a?b:this.add("y",a-b)},isoWeekYear:function(a){var b=Zb(this,1,4).year;return null==a?b:this.add("y",a-b)},week:function(a){var b=this.lang().week(this);return null==a?b:this.add("d",7*(a-b))},isoWeek:function(a){var b=Zb(this,1,4).week;return null==a?b:this.add("d",7*(a-b))},weekday:function(a){var b=(this.day()+7-this.lang()._week.dow)%7;return null==a?b:this.add("d",a-b)},isoWeekday:function(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)
},isoWeeksInYear:function(){return ub(this.year(),1,4)},weeksInYear:function(){var a=this._lang._week;return ub(this.year(),a.dow,a.doy)},get:function(a){return a=pb(a),this[a]()},set:function(a,b){return a=pb(a),"function"==typeof this[a]&&this[a](b),this},lang:function(a){return a===c?this._lang:(this._lang=Db(a),this)}}),d.fn.millisecond=d.fn.milliseconds=dc("Milliseconds",!1),d.fn.second=d.fn.seconds=dc("Seconds",!1),d.fn.minute=d.fn.minutes=dc("Minutes",!1),d.fn.hour=d.fn.hours=dc("Hours",!0),d.fn.date=dc("Date",!0),d.fn.dates=bb("dates accessor is deprecated. Use date instead.",dc("Date",!0)),d.fn.year=dc("FullYear",!0),d.fn.years=bb("years accessor is deprecated. Use year instead.",dc("FullYear",!0)),d.fn.days=d.fn.day,d.fn.months=d.fn.month,d.fn.weeks=d.fn.week,d.fn.isoWeeks=d.fn.isoWeek,d.fn.quarters=d.fn.quarter,d.fn.toJSON=d.fn.toISOString,hb(d.duration.fn=gb.prototype,{_bubble:function(){var e,f,g,h,a=this._milliseconds,b=this._days,c=this._months,d=this._data;
d.milliseconds=a%1e3,e=jb(a/1e3),d.seconds=e%60,f=jb(e/60),d.minutes=f%60,g=jb(f/60),d.hours=g%24,b+=jb(g/24),d.days=b%30,c+=jb(b/30),d.months=c%12,h=jb(c/12),d.years=h},weeks:function(){return jb(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*sb(this._months/12)},humanize:function(a){var b=+this,c=Yb(b,!a,this.lang());return a&&(c=this.lang().pastFuture(b,c)),this.lang().postformat(c)},add:function(a,b){var c=d.duration(a,b);return this._milliseconds+=c._milliseconds,this._days+=c._days,this._months+=c._months,this._bubble(),this
},subtract:function(a,b){var c=d.duration(a,b);return this._milliseconds-=c._milliseconds,this._days-=c._days,this._months-=c._months,this._bubble(),this},get:function(a){return a=pb(a),this[a.toLowerCase()+"s"]()},as:function(a){return a=pb(a),this["as"+a.charAt(0).toUpperCase()+a.slice(1)+"s"]()},lang:d.fn.lang,toIsoString:function(){var a=Math.abs(this.years()),b=Math.abs(this.months()),c=Math.abs(this.days()),d=Math.abs(this.hours()),e=Math.abs(this.minutes()),f=Math.abs(this.seconds()+this.milliseconds()/1e3);
return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(a?a+"Y":"")+(b?b+"M":"")+(c?c+"D":"")+(d||e||f?"T":"")+(d?d+"H":"")+(e?e+"M":"")+(f?f+"S":""):"P0D"}});for(i in U)U.hasOwnProperty(i)&&(fc(i,U[i]),ec(i.toLowerCase()));fc("Weeks",6048e5),d.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},d.lang("en",{ordinal:function(a){var b=a%10,c=1===sb(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),a.moment=d}).call(this)};c(),b.resolveWith(c)};FD40.module("moment",a)
}(),function(){var a=function(a){var b=this,c=function(){var b=new function(){this.countRegexp=function(a,b){var c=a.match(b);return c?c.length:0},this.getStrength=function(a,b){var c=a.length;if(b>c)return 0;var d=this.countRegexp(a,/\d/g),e=this.countRegexp(a,/[a-z]/g),f=this.countRegexp(a,/[A-Z]/g),g=c-d-e-f;if(d==c||e==c||f==c||g==c)return 1;var h=0;return d&&(h+=2),e&&(h+=f?4:3),f&&(h+=e?4:3),g&&(h+=5),c>10&&(h+=1),h},this.getStrengthLevel=function(a,b){var c=this.getStrength(a,b),a=1;return 0>=c?a=1:c>0&&4>=c?a=2:c>4&&8>=c?a=3:c>8&&12>=c?a=4:c>12&&(a=5),a
}};a.fn.password_strength=function(c){var d=a.extend({container:null,minLength:6,texts:{1:"Too weak",2:"Weak password",3:"Normal strength",4:"Strong password",5:"Very strong password"},onCheck:null},c);return this.each(function(){var c=null;d.container?c=a(d.container):(c=a("<span/>").attr("class","password_strength"),a(this).after(c)),a(this).keyup(function(){var e=a(this).val(),f=b.getStrengthLevel(e,d.minLength);if(e.length>0){var g="password_strength_"+f;!c.hasClass(g)&&f in d.texts&&c.text(d.texts[f]).attr("class","password_strength "+g)
}else c.text("").attr("class","password_strength");d.onCheck&&d.onCheck.call(this,f)})})}};c(),b.resolveWith(c)};FD40.module("passwordstrength",a)}(),function(){var a=function(a){var b=this,c=a,d=function(){!function(a,b,c){function j(a){var b={},d=/^jQuery\d+$/;return c.each(a.attributes,function(a,c){c.specified&&!d.test(c.name)&&(b[c.name]=c.value)}),b}function k(a,d){var e=this,f=c(e);if(e.value==f.attr("placeholder")&&f.hasClass("placeholder"))if(f.data("placeholder-password")){if(f=f.hide().next().show().attr("id",f.removeAttr("id").data("placeholder-id")),a===!0)return f[0].value=d;
f.focus()}else e.value="",f.removeClass("placeholder"),e==b.activeElement&&e.select()}function l(){var a,b=this,d=c(b),f=this.id;if(""==b.value){if("password"==b.type){if(!d.data("placeholder-textinput")){try{a=d.clone().attr({type:"text"})}catch(g){a=c("<input>").attr(c.extend(j(this),{type:"text"}))}a.removeAttr("name").data({"placeholder-password":!0,"placeholder-id":f}).bind("focus.placeholder",k),d.data({"placeholder-textinput":a,"placeholder-id":f}).before(a)}d=d.removeAttr("id").hide().prev().attr("id",f).show()
}d.addClass("placeholder"),d[0].value=d.attr("placeholder")}else d.removeClass("placeholder")}var h,i,d="placeholder"in b.createElement("input"),e="placeholder"in b.createElement("textarea"),f=c.fn,g=c.valHooks;d&&e?(i=f.placeholder=function(){return this},i.input=i.textarea=!0):(i=f.placeholder=function(){var a=this;return a.filter((d?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":k,"blur.placeholder":l}).data("placeholder-enabled",!0).trigger("blur.placeholder"),a},i.input=d,i.textarea=e,h={get:function(a){var b=c(a);
return b.data("placeholder-enabled")&&b.hasClass("placeholder")?"":a.value},set:function(a,d){var e=c(a);return e.data("placeholder-enabled")?(""==d?(a.value=d,a!=b.activeElement&&l.call(a)):e.hasClass("placeholder")?k.call(a,!0,d)||(a.value=d):a.value=d,e):a.value=d}},d||(g.input=h),e||(g.textarea=h),c(function(){c(b).delegate("form","submit.placeholder",function(){var a=c(".placeholder",this).each(k);setTimeout(function(){a.each(l)},10)})}),c(a).bind("beforeunload.placeholder",function(){c(".placeholder").each(function(){this.value=""
})}))}(window,document,c)};d(),b.resolveWith(d)};FD40.module("placeholder",a)}(),function(){var moduleFactory=function($){var module=this,jQuery=$,exports=function(){!function(){function k(){this.returnValue=!1}function l(){this.cancelBubble=!0}var g,j,a=0,b=[],c={},d={},e={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},f=/[<>&\"\']/g,h=window.setTimeout,i={};!function(a){var c,e,f,b=a.split(/,/);for(c=0;c<b.length;c+=2)for(f=b[c+1].split(/ /),e=0;e<f.length;e++)d[f[e]]=b[c]}("application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,application/vnd.openxmlformats-officedocument.presentationml.template,potx,application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,application/x-javascript,js,application/json,json,audio/mpeg,mpga mpega mp2 mp3,audio/x-wav,wav,audio/mp4,m4a,image/bmp,bmp,image/gif,gif,image/jpeg,jpeg jpg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/plain,asc txt text diff log,text/html,htm html xhtml,text/css,css,text/csv,csv,text/rtf,rtf,video/mpeg,mpeg mpg mpe m2v,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/3gpp,3gp,video/3gpp2,3g2,video/vnd.rn-realvideo,rv,application/vnd.oasis.opendocument.formula-template,otf,application/octet-stream,exe");
var m={VERSION:"@@version@@",STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,FILE_SIZE_ERROR:-600,FILE_EXTENSION_ERROR:-601,IMAGE_FORMAT_ERROR:-700,IMAGE_MEMORY_ERROR:-701,IMAGE_DIMENSIONS_ERROR:-702,mimeTypes:d,ua:function(){var d,e,f,a=navigator,b=a.userAgent,c=a.vendor;return d=/WebKit/.test(b),f=d&&-1!==c.indexOf("Apple"),e=window.opera&&window.opera.buildNumber,{windows:-1!==navigator.platform.indexOf("Win"),android:/Android/.test(b),ie:!d&&!e&&/MSIE/gi.test(b)&&/Explorer/gi.test(a.appName),webkit:d,gecko:!d&&/Gecko/.test(b),safari:f,opera:!!e}
}(),typeOf:function(a){return{}.toString.call(a).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()},extend:function(a){return m.each(arguments,function(b,c){c>0&&m.each(b,function(b,c){a[c]=b})}),a},cleanName:function(a){var b,c;for(c=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"],b=0;b<c.length;b+=2)a=a.replace(c[b],c[b+1]);return a=a.replace(/\s+/g,"_"),a=a.replace(/[^a-z0-9_\-\.]+/gi,"")
},addRuntime:function(a,c){return c.name=a,b[a]=c,b.push(c),c},guid:function(){var c,b=(new Date).getTime().toString(32);for(c=0;5>c;c++)b+=Math.floor(65535*Math.random()).toString(32);return(m.guidPrefix||"p")+b+(a++).toString(32)},buildUrl:function(a,b){var c="";return m.each(b,function(a,b){c+=(c?"&":"")+encodeURIComponent(b)+"="+encodeURIComponent(a)}),c&&(a+=(a.indexOf("?")>0?"&":"?")+c),a},each:function(a,b){var c,d,e;if(a)if(c=a.length,c===g){for(d in a)if(a.hasOwnProperty(d)&&b(a[d],d)===!1)return}else for(e=0;c>e;e++)if(b(a[e],e)===!1)return
},formatSize:function(a){return a===g||/\D/.test(a)?m.translate("N/A"):a>1073741824?Math.round(a/1073741824,1)+" GB":a>1048576?Math.round(a/1048576,1)+" MB":a>1024?Math.round(a/1024,1)+" KB":a+" b"},getPos:function(a,b){function i(a){var b,c,d=0,e=0;return a&&(c=a.getBoundingClientRect(),b="CSS1Compat"===f.compatMode?f.documentElement:f.body,d=c.left+b.scrollLeft,e=c.top+b.scrollTop),{x:d,y:e}}var e,g,h,c=0,d=0,f=document;if(a=a,b=b||f.body,a&&a.getBoundingClientRect&&m.ua.ie&&(!f.documentMode||f.documentMode<8))return g=i(a),h=i(b),{x:g.x-h.x,y:g.y-h.y};
for(e=a;e&&e!=b&&e.nodeType;)c+=e.offsetLeft||0,d+=e.offsetTop||0,e=e.offsetParent;for(e=a.parentNode;e&&e!=b&&e.nodeType;)c-=e.scrollLeft||0,d-=e.scrollTop||0,e=e.parentNode;return{x:c,y:d}},getSize:function(a){return{w:a.offsetWidth||a.clientWidth,h:a.offsetHeight||a.clientHeight}},parseSize:function(a){var b;return"string"==typeof a&&(a=/^([0-9]+)([mgk]?)$/.exec(a.toLowerCase().replace(/[^0-9mkg]/g,"")),b=a[2],a=+a[1],"g"==b&&(a*=1073741824),"m"==b&&(a*=1048576),"k"==b&&(a*=1024)),a},xmlEncode:function(a){return a?(""+a).replace(f,function(a){return e[a]?"&"+e[a]+";":a
}):a},toArray:function(a){var b,c=[];for(b=0;b<a.length;b++)c[b]=a[b];return c},inArray:function(a,b){if(b){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(b,a);for(var c=0,d=b.length;d>c;c++)if(b[c]===a)return c}return-1},addI18n:function(a){return m.extend(c,a)},translate:function(a){return c[a]||a},isEmptyObj:function(a){if(a===g)return!0;for(var b in a)return!1;return!0},hasClass:function(a,b){var c;return""==a.className?!1:(c=new RegExp("(^|\\s+)"+b+"(\\s+|$)"),c.test(a.className))},addClass:function(a,b){m.hasClass(a,b)||(a.className=""==a.className?b:a.className.replace(/\s+$/,"")+" "+b)
},removeClass:function(a,b){var c=new RegExp("(^|\\s+)"+b+"(\\s+|$)");a.className=a.className.replace(c,function(a,b,c){return" "===b&&" "===c?" ":""})},getStyle:function(a,b){return a.currentStyle?a.currentStyle[b]:window.getComputedStyle?window.getComputedStyle(a,null)[b]:void 0},addEvent:function(a,b,c){var d,e,h;h=arguments[3],b=b.toLowerCase(),j===g&&(j="Plupload_"+m.guid()),a.addEventListener?(d=c,a.addEventListener(b,d,!1)):a.attachEvent&&(d=function(){var a=window.event;a.target||(a.target=a.srcElement),a.preventDefault=k,a.stopPropagation=l,c(a)
},a.attachEvent("on"+b,d)),a[j]===g&&(a[j]=m.guid()),i.hasOwnProperty(a[j])||(i[a[j]]={}),e=i[a[j]],e.hasOwnProperty(b)||(e[b]=[]),e[b].push({func:d,orig:c,key:h})},removeEvent:function(a,b){var c,d,e;if("function"==typeof arguments[2]?d=arguments[2]:e=arguments[2],b=b.toLowerCase(),a[j]&&i[a[j]]&&i[a[j]][b]){c=i[a[j]][b];for(var f=c.length-1;f>=0&&(c[f].key!==e&&c[f].orig!==d||(a.removeEventListener?a.removeEventListener(b,c[f].func,!1):a.detachEvent&&a.detachEvent("on"+b,c[f].func),c[f].orig=null,c[f].func=null,c.splice(f,1),d===g));f--);if(c.length||delete i[a[j]][b],m.isEmptyObj(i[a[j]])){delete i[a[j]];
try{delete a[j]}catch(h){a[j]=g}}}},removeAllEvents:function(a){var b=arguments[1];a[j]!==g&&a[j]&&m.each(i[a[j]],function(c,d){m.removeEvent(a,d,b)})}};m.Uploader=function(a){function j(){var a,c,b=0;if(this.state==m.STARTED){for(c=0;c<e.length;c++)a||e[c].status!=m.QUEUED?b++:(a=e[c],a.status=m.UPLOADING,this.trigger("BeforeUpload",a)&&this.trigger("UploadFile",a));b==e.length&&(this.stop(),this.trigger("UploadComplete",e))}}function k(){var a,b;for(d.reset(),a=0;a<e.length;a++)b=e[a],b.size!==g?(d.size+=b.size,d.loaded+=b.loaded):d.size=g,b.status==m.DONE?d.uploaded++:b.status==m.FAILED?d.failed++:d.queued++;
d.size===g?d.percent=e.length>0?Math.ceil(d.uploaded/e.length*100):0:(d.bytesPerSec=Math.ceil(d.loaded/((+new Date-f||1)/1e3)),d.percent=d.size>0?Math.ceil(d.loaded/d.size*100):0)}var d,f,c={},e=[],i=!1;d=new m.QueueProgress,a=m.extend({chunk_size:0,multipart:!0,multi_selection:!0,file_data_name:"file",filters:[]},a),m.extend(this,{state:m.STOPPED,runtime:"",features:{},files:e,settings:a,total:d,id:m.guid(),init:function(){function p(){var b,d,e,a=i[n++];if(a){if(b=a.getFeatures(),d=c.settings.required_features)for(d=d.split(","),e=0;e<d.length;e++)if(!b[d[e]])return p(),void 0;
a.init(c,function(d){d&&d.success?(c.features=b,c.runtime=a.name,c.trigger("Init",{runtime:a.name}),c.trigger("PostInit"),c.refresh()):p()})}else c.trigger("Error",{code:m.INIT_ERROR,message:m.translate("Init error.")})}var d,i,o,c=this,n=0;if("function"==typeof a.preinit?a.preinit(c):m.each(a.preinit,function(a,b){c.bind(b,a)}),a.page_url=a.page_url||document.location.pathname.replace(/\/[^\/]+$/g,"/"),/^(\w+:\/\/|\/)/.test(a.url)||(a.url=a.page_url+a.url),a.chunk_size=m.parseSize(a.chunk_size),a.max_file_size=m.parseSize(a.max_file_size),c.bind("FilesAdded",function(b,d){var f,i,k,j=0,l=a.filters;
for(l&&l.length&&(k=[],m.each(l,function(a){m.each(a.extensions.split(/,/),function(a){/^\s*\*\s*$/.test(a)?k.push("\\.*"):k.push("\\."+a.replace(new RegExp("["+"/^$.*+?|()[]{}\\".replace(/./g,"\\$&")+"]","g"),"\\$&"))})}),k=new RegExp(k.join("|")+"$","i")),f=0;f<d.length;f++)i=d[f],i.loaded=0,i.percent=0,i.status=m.QUEUED,!k||k.test(i.name)?i.size!==g&&i.size>a.max_file_size?b.trigger("Error",{code:m.FILE_SIZE_ERROR,message:m.translate("File size error."),file:i}):(e.push(i),j++):b.trigger("Error",{code:m.FILE_EXTENSION_ERROR,message:m.translate("File extension error."),file:i});
return j?(h(function(){c.trigger("QueueChanged"),c.refresh()},1),void 0):!1}),a.unique_names&&c.bind("UploadFile",function(a,b){var c=b.name.match(/\.([^.]+)$/),d="tmp";c&&(d=c[1]),b.target_name=b.id+"."+d}),c.bind("BeforeUpload",function(a){window.es.token!=EasySocial.token()&&(a.settings.url=a.settings.url.replace(window.es.token,EasySocial.token()))}),c.bind("UploadProgress",function(a,b){b.percent=b.size>0?Math.ceil(b.loaded/b.size*100):100,k()}),c.bind("StateChanged",function(a){if(a.state==m.STARTED)f=+new Date;
else if(a.state==m.STOPPED)for(d=a.files.length-1;d>=0;d--)a.files[d].status==m.UPLOADING&&(a.files[d].status=m.QUEUED,k())}),c.bind("QueueChanged",k),c.bind("Error",function(a,b){b.file&&(b.file.status=m.FAILED,k(),a.state==m.STARTED&&h(function(){j.call(c)},1))}),c.bind("FileUploaded",function(a,b){b.status=m.DONE,b.loaded=b.size,a.trigger("UploadProgress",b),h(function(){j.call(c)},1)}),a.runtimes)for(i=[],o=a.runtimes.split(/\s?,\s?/),d=0;d<o.length;d++)b[o[d]]&&i.push(b[o[d]]);else i=b;p(),"function"==typeof a.init?a.init(c):m.each(a.init,function(a,b){c.bind(b,a)
})},refresh:function(){this.trigger("Refresh")},start:function(){e.length&&this.state!=m.STARTED&&(this.state=m.STARTED,this.trigger("StateChanged"),j.call(this))},stop:function(){this.state!=m.STOPPED&&(this.state=m.STOPPED,this.trigger("CancelUpload"),this.trigger("StateChanged"))},disableBrowse:function(){i=arguments[0]!==g?arguments[0]:!0,this.trigger("DisableBrowse",i)},getFile:function(a){var b;for(b=e.length-1;b>=0;b--)if(e[b].id===a)return e[b]},removeFile:function(a){var b;for(b=e.length-1;b>=0;b--)if(e[b].id===a.id)return this.splice(b,1)[0]
},splice:function(a,b){var c;return c=e.splice(a===g?0:a,b===g?e.length:b),this.trigger("FilesRemoved",c),this.trigger("QueueChanged"),c},trigger:function(a){var d,e,b=c[a.toLowerCase()];if(b)for(e=Array.prototype.slice.call(arguments),e[0]=this,d=0;d<b.length;d++)if(b[d].func.apply(b[d].scope,e)===!1)return!1;return!0},hasEventListener:function(a){return!!c[a.toLowerCase()]},bind:function(a,b,d){var e;a=a.toLowerCase(),e=c[a]||[],e.push({func:b,scope:d||this}),c[a]=e},unbind:function(a){a=a.toLowerCase();var d,b=c[a],e=arguments[1];
if(b){if(e!==g){for(d=b.length-1;d>=0;d--)if(b[d].func===e){b.splice(d,1);break}}else b=[];b.length||delete c[a]}},unbindAll:function(){var a=this;m.each(c,function(b,c){a.unbind(c)})},destroy:function(){this.stop(),this.trigger("Destroy"),this.unbindAll()}})},m.File=function(a,b,c){var d=this;d.id=a,d.name=b,d.size=c,d.loaded=0,d.percent=0,d.status=0},m.Runtime=function(){this.getFeatures=function(){},this.init=function(){}},m.QueueProgress=function(){var a=this;a.size=0,a.loaded=0,a.uploaded=0,a.failed=0,a.queued=0,a.percent=0,a.bytesPerSec=0,a.reset=function(){a.size=a.loaded=a.uploaded=a.failed=a.queued=a.percent=a.bytesPerSec=0
}},m.runtimes={},$.plupload=m}(),function(a,b,c){function e(a){return b.getElementById(a)}c.runtimes.Html4=c.addRuntime("html4",{getFeatures:function(){return{multipart:!0,triggerDialog:c.ua.gecko&&a.FormData||c.ua.webkit}},init:function(d,f){d.bind("Init",function(f){function u(){var a,h,i,j;l=c.guid(),m.push(l),a=b.createElement("form"),a.setAttribute("id","form_"+l),a.setAttribute("method","post"),a.setAttribute("enctype","multipart/form-data"),a.setAttribute("encoding","multipart/form-data"),a.setAttribute("target",f.id+"_iframe"),a.style.position="absolute",h=b.createElement("input"),h.setAttribute("id","input_"+l),h.setAttribute("type","file"),h.setAttribute("accept",o),h.setAttribute("size",1),j=e(f.settings.browse_button),f.features.triggerDialog&&j&&c.addEvent(e(f.settings.browse_button),"click",function(a){h.disabled||h.click(),a.preventDefault()
},f.id),c.extend(h.style,{width:"100%",height:"100%",opacity:0,fontSize:"99px",cursor:"pointer"}),c.extend(a.style,{overflow:"hidden"}),i=f.settings.shim_bgcolor,i&&(a.style.background=i),n&&c.extend(h.style,{filter:"alpha(opacity=0)"}),c.addEvent(h,"change",function(b){var i,g=b.target,k=[];g.value&&(e("form_"+l).style.top="-1048575px",i=g.value.replace(/\\/g,"/"),i=i.substring(i.length,i.lastIndexOf("/")+1),k.push(new c.File(l,i)),f.features.triggerDialog?c.removeEvent(j,"click",f.id):c.removeAllEvents(a,f.id),c.removeEvent(h,"change",f.id),u(),k.length&&d.trigger("FilesAdded",k))
},f.id),a.appendChild(h),g.appendChild(a),f.refresh()}function v(){var d=b.createElement("div");d.innerHTML='<iframe id="'+f.id+'_iframe" name="'+f.id+'_iframe" src="'+i+':&quot;&quot;" style="display:none"></iframe>',h=d.firstChild,g.appendChild(h),c.addEvent(h,"load",function(b){var e,g,d=b.target;if(j){try{e=d.contentWindow.document||d.contentDocument||a.frames[d.id].document}catch(h){return f.trigger("Error",{code:c.SECURITY_ERROR,message:c.translate("Security error."),file:j}),void 0}g=e.documentElement.innerText||e.documentElement.textContent,g&&(j.status=c.DONE,j.loaded=1025,j.percent=100,f.trigger("UploadProgress",j),f.trigger("FileUploaded",j,{response:g}))
}},f.id)}var h,j,l,q,r,s,t,g=b.body,i="javascript",m=[],n=/MSIE/.test(navigator.userAgent),o=[],p=f.settings.filters;a:for(q=0;q<p.length;q++)for(r=p[q].extensions.split(/,/),t=0;t<r.length;t++){if("*"===r[t]){o=[];break a}s=c.mimeTypes[r[t]],s&&-1===c.inArray(s,o)&&o.push(s)}o=o.join(","),f.settings.container&&(g=e(f.settings.container),"static"===c.getStyle(g,"position")&&(g.style.position="relative")),f.bind("UploadFile",function(a,d){var f,g;d.status!=c.DONE&&d.status!=c.FAILED&&a.state!=c.STOPPED&&(f=e("form_"+d.id),g=e("input_"+d.id),g.setAttribute("name",a.settings.file_data_name),f.setAttribute("action",a.settings.url),c.each(c.extend({name:d.target_name||d.name},a.settings.multipart_params),function(a,d){var e=b.createElement("input");
c.extend(e,{type:"hidden",name:d,value:a}),f.insertBefore(e,f.firstChild)}),j=d,e("form_"+l).style.top="-1048575px",f.submit())}),f.bind("FileUploaded",function(a){a.refresh()}),f.bind("StateChanged",function(b){b.state==c.STARTED?v():b.state==c.STOPPED&&a.setTimeout(function(){c.removeEvent(h,"load",b.id),h.parentNode&&h.parentNode.removeChild(h)},0),c.each(b.files,function(a){if(a.status===c.DONE||a.status===c.FAILED){var d=e("form_"+a.id);d&&d.parentNode.removeChild(d)}})}),f.bind("Refresh",function(a){var d,f,g,h,i,j,k,m,n;
d=e(a.settings.browse_button),d&&(i=c.getPos(d,e(a.settings.container)),j=c.getSize(d),k=e("form_"+l),m=e("input_"+l),c.extend(k.style,{top:i.y+"px",left:i.x+"px",width:j.w+"px",height:j.h+"px"}),a.features.triggerDialog&&("static"===c.getStyle(d,"position")&&c.extend(d.style,{position:"relative"}),n=parseInt(d.style.zIndex,10),isNaN(n)&&(n=0),c.extend(d.style,{zIndex:n}),c.extend(k.style,{zIndex:n-1})),g=a.settings.browse_button_hover,h=a.settings.browse_button_active,f=a.features.triggerDialog?d:k,g&&(c.addEvent(f,"mouseover",function(){c.addClass(d,g)
},a.id),c.addEvent(f,"mouseout",function(){c.removeClass(d,g)},a.id)),h&&(c.addEvent(f,"mousedown",function(){c.addClass(d,h)},a.id),c.addEvent(b.body,"mouseup",function(){c.removeClass(d,h)},a.id)))}),d.bind("FilesRemoved",function(a,b){var c,d;for(c=0;c<b.length;c++)d=e("form_"+b[c].id),d&&d.parentNode.removeChild(d)}),d.bind("DisableBrowse",function(a,c){var d=b.getElementById("input_"+l);d&&(d.disabled=c)}),d.bind("Destroy",function(a){var d,f,g,h={inputContainer:"form_"+l,inputFile:"input_"+l,browseButton:a.settings.browse_button};
for(d in h)f=e(h[d]),f&&c.removeAllEvents(f,a.id);c.removeAllEvents(b.body,a.id),c.each(m,function(a){g=e("form_"+a),g&&g.parentNode.removeChild(g)})}),u()}),f({success:!0})}})}(window,document,$.plupload),function(a,b,c,d){function g(a){var c=a.naturalWidth,d=a.naturalHeight;if(c*d>1048576){var e=b.createElement("canvas");e.width=e.height=1;var f=e.getContext("2d");return f.drawImage(a,-c+1,0),0===f.getImageData(0,0,1,1).data[3]}return!1}function h(a,c,d){var e=b.createElement("canvas");e.width=1,e.height=d;
var f=e.getContext("2d");f.drawImage(a,0,0);for(var g=f.getImageData(0,0,1,d).data,h=0,i=d,j=d;j>h;){var k=g[4*(j-1)+3];0===k?i=j:h=j,j=i+h>>1}var l=j/d;return 0===l?1:l}function j(a,c,d){var e=a.naturalWidth,f=a.naturalHeight,i=d.width,j=d.height,k=c.getContext("2d");k.save();var l=g(a);l&&(e/=2,f/=2);var m=1024,n=b.createElement("canvas");n.width=n.height=m;for(var o=n.getContext("2d"),p=h(a,e,f),q=0;f>q;){for(var r=q+m>f?f-q:m,s=0;e>s;){var t=s+m>e?e-s:m;o.clearRect(0,0,m,m),o.drawImage(a,-s,-q);var u=s*i/e<<0,v=Math.ceil(t*i/e),w=q*j/f/p<<0,x=Math.ceil(r*j/f/p);
k.drawImage(n,0,0,t,r,u,w,v,x),s+=m}q+=m}k.restore(),n=o=null}function k(b,c){var d;return"FileReader"in a?(d=new FileReader,d.readAsDataURL(b),d.onload=function(){c(d.result)},void 0):c(b.getAsDataURL())}function l(b,c){var d;return"FileReader"in a?(d=new FileReader,d.readAsBinaryString(b),d.onload=function(){c(d.result)},void 0):c(b.getAsBinary())}function m(a,c,d,f){var g,i,l,m=this;k(e[a.id],function(e){g=b.createElement("canvas"),g.style.display="none",b.body.appendChild(g),i=new Image,i.onerror=i.onabort=function(){f({success:!1})
},i.onload=function(){var b,h,n,q;if(c.width||(c.width=i.width),c.height||(c.height=i.height),l=Math.min(c.width/i.width,c.height/i.height),1>l)b=Math.round(i.width*l),h=Math.round(i.height*l);else{if(!c.quality||"image/jpeg"!==d)return f({success:!1}),void 0;b=i.width,h=i.height}if(g.width=b,g.height=h,j(i,g,{width:b,height:h}),"image/jpeg"===d&&(n=new o(atob(e.substring(e.indexOf("base64,")+7))),n.headers&&n.headers.length&&(q=new p,q.init(n.get("exif")[0])&&(q.setExif("PixelXDimension",b),q.setExif("PixelYDimension",h),n.set("exif",q.getBinary()),m.hasEventListener("ExifData")&&m.trigger("ExifData",a,q.EXIF()),m.hasEventListener("GpsData")&&m.trigger("GpsData",a,q.GPS())))),c.quality&&"image/jpeg"===d)try{e=g.toDataURL(d,c.quality/100)
}catch(r){e=g.toDataURL(d)}else e=g.toDataURL(d);e=e.substring(e.indexOf("base64,")+7),e=atob(e),n&&n.headers&&n.headers.length&&(e=n.restore(e),n.purge()),g.parentNode.removeChild(g),f({success:!0,data:e})},i.src=e})}function n(){function c(c,d){var g,e=a?0:-8*(d-1),f=0;for(g=0;d>g;g++)f|=b.charCodeAt(c+g)<<Math.abs(e+8*g);return f}function e(a,c,d){var d=3===arguments.length?d:b.length-c-1;b=b.substr(0,c)+a+b.substr(d+c)}function f(b,c,d){var h,f="",g=a?0:-8*(d-1);for(h=0;d>h;h++)f+=String.fromCharCode(c>>Math.abs(g+8*h)&255);
e(f,b,d)}var b,a=!1;return{II:function(b){return b===d?a:(a=b,void 0)},init:function(c){a=!1,b=c},SEGMENT:function(a,c,d){switch(arguments.length){case 1:return b.substr(a,b.length-a-1);case 2:return b.substr(a,c);case 3:e(d,a,c);break;default:return b}},BYTE:function(a){return c(a,1)},SHORT:function(a){return c(a,2)},LONG:function(a,b){return b===d?c(a,4):(f(a,b,4),void 0)},SLONG:function(a){var b=c(a,4);return b>2147483647?b-4294967296:b},STRING:function(a,b){var d="";for(b+=a;b>a;a++)d+=String.fromCharCode(c(a,1));
return d}}}function o(a){var e,f,i,b={65505:{app:"EXIF",name:"APP1",signature:"Exif\x00"},65506:{app:"ICC",name:"APP2",signature:"ICC_PROFILE\x00"},65517:{app:"IPTC",name:"APP13",signature:"Photoshop 3.0\x00"}},c=[],g=d,h=0;if(e=new n,e.init(a),65496===e.SHORT(0)){for(f=2,i=Math.min(1048576,a.length);i>=f;)if(g=e.SHORT(f),g>=65488&&65495>=g)f+=2;else{if(65498===g||65497===g)break;h=e.SHORT(f+2)+2,b[g]&&e.STRING(f+4,b[g].signature.length)===b[g].signature&&c.push({hex:g,app:b[g].app.toUpperCase(),name:b[g].name.toUpperCase(),start:f,length:h,segment:e.SEGMENT(f,h)}),f+=h
}return e.init(null),{headers:c,restore:function(a){e.init(a);var b=new o(a);if(!b.headers)return!1;for(var d=b.headers.length;d>0;d--){var g=b.headers[d-1];e.SEGMENT(g.start,g.length,"")}b.purge(),f=65504==e.SHORT(2)?4+e.SHORT(4):2;for(var d=0,h=c.length;h>d;d++)e.SEGMENT(f,0,c[d].segment),f+=c[d].length;return e.SEGMENT()},get:function(a){for(var b=[],d=0,e=c.length;e>d;d++)c[d].app===a.toUpperCase()&&b.push(c[d].segment);return b},set:function(a,b){var d=[];"string"==typeof b?d.push(b):d=b;for(var e=ii=0,f=c.length;f>e&&(c[e].app===a.toUpperCase()&&(c[e].segment=d[ii],c[e].length=d[ii].length,ii++),!(ii>=d.length));e++);},purge:function(){c=[],e.init(null)
}}}}function p(){function g(b,c){var h,i,j,k,l,m,n,o,g=a.SHORT(b),p=[],q={};for(h=0;g>h;h++)if(n=m=b+12*h+2,j=c[a.SHORT(n)],j!==d){switch(k=a.SHORT(n+=2),l=a.LONG(n+=2),n+=4,p=[],k){case 1:case 7:for(l>4&&(n=a.LONG(n)+e.tiffHeader),i=0;l>i;i++)p[i]=a.BYTE(n+i);break;case 2:l>4&&(n=a.LONG(n)+e.tiffHeader),q[j]=a.STRING(n,l-1);continue;case 3:for(l>2&&(n=a.LONG(n)+e.tiffHeader),i=0;l>i;i++)p[i]=a.SHORT(n+2*i);break;case 4:for(l>1&&(n=a.LONG(n)+e.tiffHeader),i=0;l>i;i++)p[i]=a.LONG(n+4*i);break;case 5:for(n=a.LONG(n)+e.tiffHeader,i=0;l>i;i++)p[i]=a.LONG(n+4*i)/a.LONG(n+4*i+4);
break;case 9:for(n=a.LONG(n)+e.tiffHeader,i=0;l>i;i++)p[i]=a.SLONG(n+4*i);break;case 10:for(n=a.LONG(n)+e.tiffHeader,i=0;l>i;i++)p[i]=a.SLONG(n+4*i)/a.SLONG(n+4*i+4);break;default:continue}o=1==l?p[0]:p,q[j]=f.hasOwnProperty(j)&&"object"!=typeof o?f[j][o]:o}return q}function h(){var c=d,f=e.tiffHeader;return a.II(18761==a.SHORT(f)),42!==a.SHORT(f+=2)?!1:(e.IFD0=e.tiffHeader+a.LONG(f+=2),c=g(e.IFD0,b.tiff),e.exifIFD="ExifIFDPointer"in c?e.tiffHeader+c.ExifIFDPointer:d,e.gpsIFD="GPSInfoIFDPointer"in c?e.tiffHeader+c.GPSInfoIFDPointer:d,!0)
}function j(c,d,f){var g,h,j,k=0;if("string"==typeof d){var l=b[c.toLowerCase()];for(hex in l)if(l[hex]===d){d=hex;break}}for(g=e[c.toLowerCase()+"IFD"],h=a.SHORT(g),i=0;h>i;i++)if(j=g+12*i+2,a.SHORT(j)==d){k=j+8;break}return k?(a.LONG(k,f),!0):!1}var a,b,f,e={};return a=new n,b={tiff:{274:"Orientation",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},exif:{36864:"ExifVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",36867:"DateTimeOriginal",33434:"ExposureTime",33437:"FNumber",34855:"ISOSpeedRatings",37377:"ShutterSpeedValue",37378:"ApertureValue",37383:"MeteringMode",37384:"LightSource",37385:"Flash",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",41988:"DigitalZoomRatio",41992:"Contrast",41993:"Saturation",41994:"Sharpness"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude"}},f={ColorSpace:{1:"sRGB",0:"Uncalibrated"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{1:"Daylight",2:"Fliorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 -5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire.",1:"Flash fired.",5:"Strobe return light not detected.",7:"Strobe return light detected.",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},ExposureMode:{0:"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},GPSLatitudeRef:{N:"North latitude",S:"South latitude"},GPSLongitudeRef:{E:"East longitude",W:"West longitude"}},{init:function(b){return e={tiffHeader:10},b!==d&&b.length?(a.init(b),65505===a.SHORT(0)&&"EXIF\x00"===a.STRING(4,5).toUpperCase()?h():!1):!1
},EXIF:function(){var a;if(a=g(e.exifIFD,b.exif),a.ExifVersion&&"array"===c.typeOf(a.ExifVersion)){for(var d=0,f="";d<a.ExifVersion.length;d++)f+=String.fromCharCode(a.ExifVersion[d]);a.ExifVersion=f}return a},GPS:function(){var a;return a=g(e.gpsIFD,b.gps),a.GPSVersionID&&(a.GPSVersionID=a.GPSVersionID.join(".")),a},setExif:function(a,b){return"PixelXDimension"!==a&&"PixelYDimension"!==a?!1:j("exif",a,b)},getBinary:function(){return a.SEGMENT()}}}var f,e={};c.runtimes.Html5=c.addRuntime("html5",{getFeatures:function(){var d,e,g,h,i,j;
return e=g=i=j=!1,a.XMLHttpRequest&&(d=new XMLHttpRequest,g=!!d.upload,e=!(!d.sendAsBinary&&!d.upload)),e&&(h=!!(d.sendAsBinary||a.Uint8Array&&a.ArrayBuffer),i=!(!File||!File.prototype.getAsDataURL&&!a.FileReader||!h),j=!(!File||!(File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice))),f=c.ua.safari&&c.ua.windows,{html5:e,dragdrop:function(){var a=b.createElement("div");return"draggable"in a||"ondragstart"in a&&"ondrop"in a}(),jpgresize:i,pngresize:i,multipart:i||!!a.FileReader||!!a.FormData,canSendBinary:h,cantSendBlobInFormData:!(!(c.ua.gecko&&a.FormData&&a.FileReader)||FileReader.prototype.readAsArrayBuffer)||c.ua.android,progress:g,chunks:j,multi_selection:!(c.ua.safari&&c.ua.windows),triggerDialog:c.ua.gecko&&a.FormData||c.ua.webkit}
},init:function(d,g){function j(b){var i,h=[],j={},k=$.Deferred(),l=b.length-1;$.each(b,function(b,d){if(!(j[d.name]&&c.ua.safari&&c.ua.windows)){j[d.name]=!0,i=c.guid(),e[i]=d;var f=new c.File(i,d.fileName||d.name,d.fileSize||d.size);d.type.length<1?"FileReader"in a&&(reader=new FileReader,reader.readAsDataURL(d),reader.onload=function(){data=reader.result,data=data.substring(data.indexOf("base64,")+7),data=atob(data);var a=data.substring(0,3);"ID3"==a&&(f.name=d.name+".mp3"),h.push(f),b==l&&k.resolve()}):(h.push(f),b==l&&k.resolve())
}}),k.done(function(){h.length&&d.trigger("FilesAdded",h)})}var h,i;return h=this.getFeatures(),h.html5?(d.bind("Init",function(a){var e,f,h,i,l,m,o,g=[],k=a.settings.filters,n=b.body;e=b.createElement("div"),e.id=a.id+"_html5_container",c.extend(e.style,{position:"absolute",background:d.settings.shim_bgcolor||"transparent",width:"100px",height:"100px",overflow:"hidden",zIndex:99999,opacity:d.settings.shim_bgcolor?"":0}),e.className="plupload html5",d.settings.container&&(n=b.getElementById(d.settings.container),"static"===c.getStyle(n,"position")&&(n.style.position="relative")),n.appendChild(e);
a:for(h=0;h<k.length;h++)for(l=k[h].extensions.split(/,/),i=0;i<l.length;i++){if("*"===l[i]){g=[];break a}m=c.mimeTypes[l[i]],m&&-1===c.inArray(m,g)&&g.push(m)}if(e.innerHTML='<input id="'+d.id+'_html5"  style="font-size:999px" type="file" accept="'+g.join(",")+'" '+(d.settings.multi_selection&&d.features.multi_selection?'multiple="multiple"':"")+" />",e.scrollTop=100,o=b.getElementById(d.id+"_html5"),a.features.triggerDialog?c.extend(o.style,{position:"absolute",width:"100%",height:"100%"}):c.extend(o.style,{cssFloat:"right",styleFloat:"right"}),o.onchange=function(){j(this.files),this.value=""
},f=b.getElementById(a.settings.browse_button)){var p=a.settings.browse_button_hover,q=a.settings.browse_button_active,r=a.features.triggerDialog?f:e;p&&(c.addEvent(r,"mouseover",function(){c.addClass(f,p)},a.id),c.addEvent(r,"mouseout",function(){c.removeClass(f,p)},a.id)),q&&(c.addEvent(r,"mousedown",function(){c.addClass(f,q)},a.id),c.addEvent(b.body,"mouseup",function(){c.removeClass(f,q)},a.id)),a.features.triggerDialog&&c.addEvent(f,"click",function(c){var d=b.getElementById(a.id+"_html5");d&&!d.disabled&&d.click(),c.preventDefault()
},a.id)}}),d.bind("PostInit",function(){var a=b.getElementById(d.settings.drop_element);if(a){if(f)return c.addEvent(a,"dragenter",function(){var f,g,h;f=b.getElementById(d.id+"_drop"),f||(f=b.createElement("input"),f.setAttribute("type","file"),f.setAttribute("id",d.id+"_drop"),f.setAttribute("multiple","multiple"),c.addEvent(f,"change",function(){j(this.files),c.removeEvent(f,"change",d.id),f.parentNode.removeChild(f)},d.id),c.addEvent(f,"dragover",function(a){a.stopPropagation()},d.id),a.appendChild(f)),g=c.getPos(a,b.getElementById(d.settings.container)),h=c.getSize(a),"static"===c.getStyle(a,"position")&&c.extend(a.style,{position:"relative"}),c.extend(f.style,{position:"absolute",display:"block",top:0,left:0,width:h.w+"px",height:h.h+"px",opacity:0})
},d.id),void 0;c.addEvent(a,"dragover",function(a){a.preventDefault()},d.id),c.addEvent(a,"drop",function(a){var b=a.dataTransfer;b&&b.files&&j(b.files),a.preventDefault()},d.id)}}),d.bind("Refresh",function(a){var e,f,g,h,i;e=b.getElementById(d.settings.browse_button),e&&(f=c.getPos(e,b.getElementById(a.settings.container)),g=c.getSize(e),h=b.getElementById(d.id+"_html5_container"),c.extend(h.style,{top:f.y+"px",left:f.x+"px",width:g.w+"px",height:g.h+"px"}),d.features.triggerDialog&&("static"===c.getStyle(e,"position")&&c.extend(e.style,{position:"relative"}),i=parseInt(c.getStyle(e,"zIndex"),10),isNaN(i)&&(i=0),c.extend(e.style,{zIndex:i}),c.extend(h.style,{zIndex:i-1})))
}),d.bind("DisableBrowse",function(a,c){var d=b.getElementById(a.id+"_html5");d&&(d.disabled=c)}),d.bind("CancelUpload",function(){i&&i.abort&&i.abort()}),d.bind("UploadFile",function(b,d){function k(a,b,c){var d;if(!File.prototype.slice)return(d=File.prototype.webkitSlice||File.prototype.mozSlice)?d.call(a,b,c):null;try{return a.slice(),a.slice(b,c)}catch(e){return a.slice(b,c-b)}}function n(e){function l(){function u(a){if(i.sendAsBinary)i.sendAsBinary(a);else if(b.features.canSendBinary){for(var c=new Uint8Array(a.length),d=0;d<a.length;d++)c[d]=255&a.charCodeAt(d);
i.send(c.buffer)}}function v(e){var n,f=0,k="----pluploadboundary"+c.guid(),v="--",w="\r\n",x="";if(i=new XMLHttpRequest,i.upload&&(i.upload.onprogress=function(a){d.loaded=Math.min(d.size,j+a.loaded-f),b.trigger("UploadProgress",d)}),i.onreadystatechange=function(){var a,f;if(4==i.readyState&&b.state!==c.STOPPED){try{a=i.status}catch(h){a=0}if(a>=400)b.trigger("Error",{code:c.HTTP_ERROR,message:c.translate("HTTP Error."),file:d,status:a});else{if(o){if(f={chunk:g,chunks:o,response:i.responseText,status:a},b.trigger("ChunkUploaded",d,f),j+=r,f.cancelled)return d.status=c.FAILED,void 0;
d.loaded=Math.min(d.size,(g+1)*q)}else d.loaded=d.size;b.trigger("UploadProgress",d),e=m=n=x=null,!o||++g>=o?(d.status=c.DONE,b.trigger("FileUploaded",d,{response:i.responseText,status:a})):l()}}},b.settings.multipart&&h.multipart){if(p.name=d.target_name||d.name,i.open("post",t,!0),c.each(b.settings.headers,function(a,b){i.setRequestHeader(b,a)}),"string"!=typeof e&&a.FormData)return n=new FormData,c.each(c.extend(p,b.settings.multipart_params),function(a,b){n.append(b,a)}),n.append(b.settings.file_data_name,e),i.send(n),void 0;
if("string"==typeof e)return i.setRequestHeader("Content-Type","multipart/form-data; boundary="+k),c.each(c.extend(p,b.settings.multipart_params),function(a,b){x+=v+k+w+'Content-Disposition: form-data; name="'+b+'"'+w+w,x+=unescape(encodeURIComponent(a))+w}),s=c.mimeTypes[d.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream",x+=v+k+w+'Content-Disposition: form-data; name="'+b.settings.file_data_name+'"; filename="'+unescape(encodeURIComponent(d.name))+'"'+w+"Content-Type: "+s+w+w+e+w+v+k+v+w,f=x.length-e.length,e=x,u(e),void 0
}t=c.buildUrl(b.settings.url,c.extend(p,b.settings.multipart_params)),i.open("post",t,!0),i.setRequestHeader("Content-Type","application/octet-stream"),c.each(b.settings.headers,function(a,b){i.setRequestHeader(b,a)}),"string"==typeof e?u(e):i.send(e)}var m,o,p,q,r,s,t=b.settings.url;d.status!=c.DONE&&d.status!=c.FAILED&&b.state!=c.STOPPED&&(p={name:d.target_name||d.name},f.chunk_size&&d.size>f.chunk_size&&(h.chunks||"string"==typeof e)?(q=f.chunk_size,o=Math.ceil(d.size/q),r=Math.min(q,d.size-g*q),m="string"==typeof e?e.substring(g*q,g*q+r):k(e,g*q,g*q+r),p.chunk=g,p.chunks=o):(r=d.size,m=e),b.settings.multipart&&h.multipart&&"string"!=typeof m&&a.FileReader&&h.cantSendBlobInFormData&&h.chunks&&b.settings.chunk_size?!function(){var a=new FileReader;
a.onload=function(){v(a.result),a=null},a.readAsBinaryString(m)}():v(m))}var g=0,j=0;l()}var g,f=b.settings;g=e[d.id],h.jpgresize&&b.settings.resize&&/\.(png|jpg|jpeg)$/i.test(d.name)?m.call(b,d,b.settings.resize,/\.png$/i.test(d.name)?"image/png":"image/jpeg",function(a){a.success?(d.size=a.data.length,n(a.data)):h.chunks?n(g):l(g,n)}):!h.chunks&&h.jpgresize?l(g,n):n(g)}),d.bind("Destroy",function(a){var d,e,f=b.body,g={inputContainer:a.id+"_html5_container",inputFile:a.id+"_html5",browseButton:a.settings.browse_button,dropElm:a.settings.drop_element};
for(d in g)e=b.getElementById(g[d]),e&&c.removeAllEvents(e,a.id);c.removeAllEvents(b.body,a.id),a.settings.container&&(f=b.getElementById(a.settings.container)),f.removeChild(b.getElementById(g.inputContainer))}),g({success:!0}),void 0):(g({success:!1}),void 0)}})}(window,document,$.plupload),$.Controller("plupload",{pluginName:"plupload",hostname:"plupload",defaultOptions:{"{uploader}":"[data-plupload-uploader]","{uploadButton}":"[data-plupload-upload-button]","{uploadDropsite}":"[data-plupload-dropsite]",settings:{runtimes:"html5, html4",url:$.indexUrl,max_file_count:20,unique_names:!0}}},function(self,opts,base){return{init:function(){var a=self.options.settings,b=$.uid("uploadContainer-");
self.element.attr("id",b),a.container=b;var c=self.uploadButtonId=$.uid("uploadButton-");self.uploadButtonMain=self.uploadButton(":first").attr("id",c),a.browse_button=c;var d=$.uid("uploadDropsite-");self.uploadDropsite().length>0&&(self.uploadDropsite().attr("id",d),a.drop_element=d),self.uploader=$(self.uploader()[0]||self.element),self.plupload=new $.plupload.Uploader(a),self.plupload.bind("PostInit",function(){self.eventHandler("PostInit",$.makeArray(arguments))}),self.plupload.init();var e=["BeforeUpload","ChunkUploaded","Destroy","Error","FilesAdded","FilesRemoved","FileUploaded","Init","QueueChanged","Refresh","StateChanged","UploadComplete","UploadFile","UploadProgress"];
$.each(e,function(a,b){self.plupload.bind(b,function(){self.eventHandler(b,$.makeArray(arguments))})}),$.IE||"html5"!=self.plupload.runtime||base.addClass("can-drop-file"),base.addClass("can-upload")},"{uploadButton} click":function(a){a[0]!=self.uploadButtonMain[0]&&self.plupload.features.triggerDialog&&self.uploadButtonMain.click()},"{uploadButton} mouseover":function(a){self.plupload.features.triggerDialog||(self.uploadButton().removeAttr("id"),a.attr("id",self.uploadButtonId),self.plupload.refresh())},eventHandler:function(a,b){{var e,c=self["plupload::"+a];
!function(){var b=(self.uploader.data("events")||{})[a];return b?b[0].handler:void 0}()}$.isFunction(c)&&(e=c.apply(self,b)),e!==!1&&self.uploader.trigger(a,e||b)},"plupload::FileUploaded":function(up,file,data,handler){var response;try{response=eval("("+data.response+")")}catch(e){response={type:"error",message:"Unable to parse server response.",data:data}}return"error"==response.type?(self.uploader.trigger("FileError",[up,file,response]),!1):[up,file,response]},"plupload::Error":function(a,b){try{console.log("plupload Error: ",a,b)
}catch(c){}}}})};exports(),module.resolveWith(exports)};FD40.module("plupload",moduleFactory)}(),function(){var a=function(a){var b=this;a.require().script("ui/position").done(function(){var c=function(){a.fn.popbox=function(c){if(a.isPlainObject(c))return this.each(function(){var d=a(this),e=b.get(d);e?e.update(c):e=new b(d,c)}),this;if(a.isString(c)){var g,d=a(this[0]),e=b.get(d)||new b(d),f=e[c];return a.isFunction(f)&&(g=f.apply(e,a.makeArray(arguments).slice(1))),g||this}return this};var b=function(c,d){var e=this;
c.data("popbox",e),a.isString(d)&&(d={content:d}),d||(d={}),c.parentsUntil("body").addBack().each(function(){var b=a(this);return"fixed"===b.css("position")?(d.fixed=!0,!1):void 0});var f={},g=c.attr("data-popbox")||c.find("[data-popbox-content]").html()||a(c.attr("data-popbox-target")).html();g&&(f.content=g),a(["id","component","type","toggle","position","collision"]).each(function(a,b){var d=c.attr("data-popbox-"+b);"rtl"==window.es.direction&&d&&(-1!==d.indexOf("left")?d=d.replace("left","right"):-1!==d.indexOf("right")&&(d=d.replace("right","left"))),f[b]=d
}),void 0!==c.attr("data-popbox-offset")&&(f.offset=parseInt(c.attr("data-popbox-offset"))),void 0!==c.attr("data-popbox-offset-horizontal")&&(f.offsethorizontal=parseInt(c.attr("data-popbox-offset-horizontal"))),void 0===g&&c.attr("data-popbox",""),e.update(a.extend(!0,{},b.defaultOptions,{tooltip:a(),loader:a('<div id="es" class="popbox loading" data-popbox-tooltip><div class="arrow"></div><div class="o-loader o-loader--sm o-loader--top is-active"></div></div>'),uid:a.uid(),button:c},f,d))};b.defaultOptions={content:"",id:null,type:"",enabled:!1,wait:!1,locked:!1,exclusive:!1,hideTimer:null,hideDelay:50,toggle:"hover",position:"bottom",collision:"flip",cache:!0,fixed:!1,offset:10,offsethorizontal:0},b.get=function(c){var d=a(c).data("popbox");
return d instanceof b?d:void 0},b.toggleEvent=navigator.userAgent.match(/iPhone|iPad|iPod/i)&&"development"!=window.es.environment?"touchstart":"click",a.extend(b.prototype,{positions:"top top-left top-right top-center bottom bottom-left bottom-right bottom-center left left-top left-bottom left-center right right-top right-bottom right-center",update:function(b){var c=this;if(a.extend(!0,c,b),a.isModule(c.content))return c.wait=!0,a.module(c.content).done(function(b){a.isPlainObject(b)&&c.update(b),a.isFunction(b)&&c.update({content:b})
}).fail(function(){var b=a("[data-es-popbox-error]").text();(b.length<=0||b.indexOf("COM_EASYSOCIAL_")>=0)&&(b="Unable to load tooltip content."),c.update({content:b})}).always(function(){c.wait=!1}),void 0;a.isString(c.content)&&(c.content=a.Deferred().resolve(c.content));var d=c.position;if(a.isString(d)){var f,g,h,i,e=d.split("-");switch(e[0]){case"top":case"bottom":f=h=e[1]||"center",g="top"==e[0]?"bottom":"top",i="top"==e[0]?"top":"bottom";break;case"left":case"right":g=i=e[1]||"center",f="left"==e[0]?"right":"left",h="left"==e[0]?"left":"right"
}c.position={classname:d,my:f+" "+g,at:h+" "+i,using:function(b,d){var f=a(this),g=c.position.classname,h=b.top,i=b.left,j=c.offset,k=c.offsethorizontal,l=c.button.offset();switch(e[0]){case"top":case"bottom":var m=d.vertical;m==e[0]&&(g=g.replace(/top|bottom/gi,"top"==m?"bottom":"top")),h="top"==m?h+j:h-j,"left"==e[1]&&i<Math.floor(l.left)&&(g=g.replace(/left|right/gi,"left"==e[1]?"right":"left"));var n=d.horizontal;i="left"==n?i+k:i-k;break;case"left":case"right":var n=d.horizontal;d.horizontal==e[0]&&(g=g.replace(/left|right/gi,"left"==d.horizontal?"right":"left")),i="left"==n?i+j:i-j
}"rtl"==window.es.direction&&(-1!==g.indexOf("left")?g=g.replace("left","right"):-1!==g.indexOf("right")&&(g=g.replace("right","left"))),f.css({top:h+"px",left:i+"px"}).removeClass(c.positions).addClass(g)}}}a.extend(c.position,{of:c.button,collision:c.collision}),c.loader.attr({id:c.id,"data-popbox-tooltip":c.type,style:c.fixed?"position: fixed":""}).addClass(c.component).addClass("popbox-"+c.type),window.es.mobile&&c.loader.addClass("is-mobile"),window.es.android&&c.loader.addClass("is-android"),window.es.ios&&c.loader.addClass("is-ios"),c.enabled&&c.show()
},trigger:function(a,b){this.tooltip.trigger(a,b),this.button.trigger(a,b)},show:function(){var c=this;if(c.enabled=!0,!c.wait){if(clearTimeout(c.hideTimer),c.exclusive&&a("[data-popbox-tooltip]").each(function(){var c=b.get(a(this));c&&c.hide(!0)}),c.button.addClass("active"),"click"==c.toggle){var d=a(document),e=b.toggleEvent+".popbox."+c.uid;d.off(e).on(e,function(b){var d=a(b.target).parents().andSelf();window.es.mobile&&d.filter(c.tooltip).length>0||(window.es.mobile||!(d.filter(c.button).length>0||d.filter(c.tooltip).length>0))&&c.hide()
})}var f=a(window),g="resize.popbox"+c.uid;if(f.off(g).on(g,function(){c.tooltip.length>0&&c.tooltip.position(c.position)}),c.tooltip.length>0)return c.tooltip.appendTo("body").position(c.position),c.trigger("popboxActivate",[c]),void 0;if(a.isFunction(c.content)){var h=c.content(c);if(c.update(h),c.wait)return}a.isDeferred(c.content)&&("pending"==c.content.state()&&(c.loader.appendTo("body").position(c.position),c.trigger("popboxLoading",[c])),c.content.always(function(){c.wait=!1}).done(function(b){if(!(c.tooltip.length>0)&&c.enabled){c.loader.detach();
var d=a.buildHTML(b);if(d.filter("[data-popbox-tooltip]").length<1){var e=d;d=a('<div id="es" class="es popbox" data-popbox-tooltip><div class="arrow"></div><div class="popbox-content" data-popbox-content></div></div>').attr({id:c.id,"data-popbox-tooltip":c.type,style:c.fixed?"position: fixed":""}).addClass(c.component).addClass("popbox-"+c.type).appendTo("body"),window.es.mobile&&d.addClass("is-mobile"),window.es.android&&d.addClass("is-android"),window.es.ios&&d.addClass("is-ios"),d.find("[data-popbox-content]").append(e)
}else d=d.appendTo("body").filter("[data-popbox-tooltip]");c.tooltip=d.data("popbox",c).position(c.position),c.tooltip.find("label").on("click",function(b){b.preventDefault(),b.stopPropagation();var d=c.tooltip.find("#"+a(this).attr("for"));d.length>0&&(d.is(":checkbox")?d.click():d.focus())}),c.trigger("popboxActivate",[c])}}).fail(function(){var b=a("[data-es-popbox-error]").text();(b.length<=0||b.indexOf("COM_EASYSOCIAL_")>=0)&&(b="Unable to load tooltip content."),c.update({content:b})}))}},hide:function(c){var d=this,e=a(document),f=b.toggleEvent+".popbox."+d.uid;
e.off(f),d.enabled=!1,clearTimeout(d.hideTimer),d.loader.detach();var g=function(){(!d.locked||c)&&(d.tooltip.detach(),a(window).off("resize.popbox"+d.uid),d.trigger("popboxDeactivate",[d]),d.cache||d.destroy())};d.button.removeClass("active");var h=d.hideDelay;c&&(h=0),d.hideTimer=setTimeout(g,h)},destroy:function(){this.button.removeData("popbox")},widget:function(){return this}}),a(document).on(b.toggleEvent+".popbox","[data-popbox]",function(){var b=a(this).popbox("widget");"hover"!=b.toggle&&(b.enabled?b.hide():b.show())
}).on("mouseover.popbox","[data-popbox]",function(){var b=a(this).popbox("widget");"hover"!=b.toggle||/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||b.show()}).on("mouseout.popbox","[data-popbox]",function(){var b=a(this).popbox("widget");"hover"==b.toggle&&b.hide()}).on("mouseover.popbox.tooltip","[data-popbox-tooltip]",function(){var a=b.get(this);a&&"hover"===a.toggle&&(a.locked=!0,clearTimeout(a.hideTimer))}).on("mouseout.popbox.tooltip","[data-popbox-tooltip]",function(){var a=b.get(this);
a&&"hover"===a.toggle&&(a.locked=!1,a.hide())}).on("click.popbox.close","[data-popbox-close]",function(){var c=b.get(a(this).parents("[data-popbox-tooltip]"));c&&c.hide()})};c(),b.resolveWith(c)})};FD40.module("popbox",a)}(),function(){var a=function(a){var b=this,c=a,d=function(){!function(a){"use strict";function c(b){return!b.nodeName||-1!==a.inArray(b.nodeName.toLowerCase(),["iframe","#document","html","body"])}function d(b){return a.isFunction(b)||a.isPlainObject(b)?b:{top:b,left:b}}var b=a.scrollTo=function(b,c,d){return a(window).scrollTo(b,c,d)
};return b.defaults={axis:"xy",duration:0,limit:!0},a.fn.scrollTo=function(e,f,g){"object"==typeof f&&(g=f,f=0),"function"==typeof g&&(g={onAfter:g}),"max"===e&&(e=9e9),g=a.extend({},b.defaults,g),f=f||g.duration;var h=g.queue&&g.axis.length>1;return h&&(f/=2),g.offset=d(g.offset),g.over=d(g.over),this.each(function(){function p(b){var c=a.extend({},g,{queue:!0,duration:f,complete:b&&function(){b.call(j,l,g)}});k.animate(m,c)}if(null!==e){var n,i=c(this),j=i?this.contentWindow||window:this,k=a(j),l=e,m={};switch(typeof l){case"number":case"string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(l)){l=d(l);
break}l=i?a(l):a(l,j);case"object":if(0===l.length)return;(l.is||l.style)&&(n=(l=a(l)).offset())}var o=a.isFunction(g.offset)&&g.offset(j,l)||g.offset;a.each(g.axis.split(""),function(a,c){var d="x"===c?"Left":"Top",e=d.toLowerCase(),f="scroll"+d,q=k[f](),r=b.max(j,c);if(n)m[f]=n[e]+(i?0:q-k.offset()[e]),g.margin&&(m[f]-=parseInt(l.css("margin"+d),10)||0,m[f]-=parseInt(l.css("border"+d+"Width"),10)||0),m[f]+=o[e]||0,g.over[e]&&(m[f]+=l["x"===c?"width":"height"]()*g.over[e]);else{var s=l[e];m[f]=s.slice&&"%"===s.slice(-1)?parseFloat(s)/100*r:s
}g.limit&&/^\d+$/.test(m[f])&&(m[f]=m[f]<=0?0:Math.min(m[f],r)),!a&&g.axis.length>1&&(q===m[f]?m={}:h&&(p(g.onAfterFirst),m={}))}),p(g.onAfter)}})},a.fn.scrollIntoView=function(b){var b=a(b);if(!(b.length<1)){var c=this.offset(),d=this.height(),e=c.top,f=e+d,g=b.offset(),h=b.height(),i=g.top,j=i+h;return j>f?this.scrollTo(b):e>i?this.scrollTo(b,{offset:-1*(d-h)}):void 0}},b.max=function(b,d){var e="x"===d?"Width":"Height",f="scroll"+e;if(!c(b))return b[f]-a(b)[e.toLowerCase()]();var g="client"+e,h=b.ownerDocument||b.document,i=h.documentElement,j=h.body;
return Math.max(i[f],j[f])-Math.min(i[g],j[g])},a.Tween.propHooks.scrollLeft=a.Tween.propHooks.scrollTop={get:function(b){return a(b.elem)[b.prop]()},set:function(b){var c=this.get(b);if(b.options.interrupt&&b._last&&b._last!==c)return a(b.elem).stop();var d=Math.round(b.now);c!==d&&(a(b.elem)[b.prop](d),b._last=this.get(b))}},b}(c)};d(),b.resolveWith(d)};FD40.module("scrollTo",a)}(),function(){var a=function(a){var b=this,c=function(){var b=a;!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof c?a(require("jquery")):a(b)
}(function(b){var c=function(){if(b&&b.fn&&b.fn.select2&&b.fn.select2.amd)var c=b.fn.select2.amd;var c;return function(){if(!c||!c.requirejs){c?b=c:c={};var a,b,d;!function(c){function p(a,b){return m.call(a,b)}function q(a,b){var c,d,e,f,g,h,i,j,l,m,n,p=b&&b.split("/"),q=k.map,r=q&&q["*"]||{};if(a&&"."===a.charAt(0))if(b){for(a=a.split("/"),g=a.length-1,k.nodeIdCompat&&o.test(a[g])&&(a[g]=a[g].replace(o,"")),a=p.slice(0,p.length-1).concat(a),l=0;l<a.length;l+=1)if(n=a[l],"."===n)a.splice(l,1),l-=1;else if(".."===n){if(1===l&&(".."===a[2]||".."===a[0]))break;
l>0&&(a.splice(l-1,2),l-=2)}a=a.join("/")}else 0===a.indexOf("./")&&(a=a.substring(2));if((p||r)&&q){for(c=a.split("/"),l=c.length;l>0;l-=1){if(d=c.slice(0,l).join("/"),p)for(m=p.length;m>0;m-=1)if(e=q[p.slice(0,m).join("/")],e&&(e=e[d])){f=e,h=l;break}if(f)break;!i&&r&&r[d]&&(i=r[d],j=l)}!f&&i&&(f=i,h=j),f&&(c.splice(0,h,f),a=c.join("/"))}return a}function r(a,b){return function(){var d=n.call(arguments,0);return"string"!=typeof d[0]&&1===d.length&&d.push(null),f.apply(c,d.concat([a,b]))}}function s(a){return function(b){return q(b,a)
}}function t(a){return function(b){i[a]=b}}function u(a){if(p(j,a)){var b=j[a];delete j[a],l[a]=!0,e.apply(c,b)}if(!p(i,a)&&!p(l,a))throw new Error("No "+a);return i[a]}function v(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function w(a){return function(){return k&&k.config&&k.config[a]||{}}}var e,f,g,h,i={},j={},k={},l={},m=Object.prototype.hasOwnProperty,n=[].slice,o=/\.js$/;g=function(a,b){var c,d=v(a),e=d[0];return a=d[1],e&&(e=q(e,b),c=u(e)),e?a=c&&c.normalize?c.normalize(a,s(b)):q(a,b):(a=q(a,b),d=v(a),e=d[0],a=d[1],e&&(c=u(e))),{f:e?e+"!"+a:a,n:a,pr:e,p:c}
},h={require:function(a){return r(a)},exports:function(a){var b=i[a];return"undefined"!=typeof b?b:i[a]={}},module:function(a){return{id:a,uri:"",exports:i[a],config:w(a)}}},e=function(a,b,d,e){var f,k,m,n,o,v,q=[],s=typeof d;if(e=e||a,"undefined"===s||"function"===s){for(b=!b.length&&d.length?["require","exports","module"]:b,o=0;o<b.length;o+=1)if(n=g(b[o],e),k=n.f,"require"===k)q[o]=h.require(a);else if("exports"===k)q[o]=h.exports(a),v=!0;else if("module"===k)f=q[o]=h.module(a);else if(p(i,k)||p(j,k)||p(l,k))q[o]=u(k);
else{if(!n.p)throw new Error(a+" missing "+k);n.p.load(n.n,r(e,!0),t(k),{}),q[o]=i[k]}m=d?d.apply(i[a],q):void 0,a&&(f&&f.exports!==c&&f.exports!==i[a]?i[a]=f.exports:m===c&&v||(i[a]=m))}else a&&(i[a]=d)},a=b=f=function(a,b,d,i,j){if("string"==typeof a)return h[a]?h[a](b):u(g(a,b).f);if(!a.splice){if(k=a,k.deps&&f(k.deps,k.callback),!b)return;b.splice?(a=b,b=d,d=null):a=c}return b=b||function(){},"function"==typeof d&&(d=i,i=j),i?e(c,a,b,d):setTimeout(function(){e(c,a,b,d)},4),f},f.config=function(a){return f(a)
},a._defined=i,d=function(a,b,c){if("string"!=typeof a)throw new Error("See almond README: incorrect module build, no module name");b.splice||(c=b,b=[]),p(i,a)||p(j,a)||(j[a]=[a,b,c])},d.amd={jQuery:!0}}(),c.requirejs=a,c.require=b,c.define=d}}(),c.define("almond",function(){}),c.define("jquery",[],function(){var c=b||a;return null==c&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),c
}),c.define("select2/utils",["jquery"],function(a){function c(a){var b=a.prototype,c=[];for(var d in b){var e=b[d];"function"==typeof e&&"constructor"!==d&&c.push(d)}return c}var b={};b.Extend=function(a,b){function d(){this.constructor=a}var c={}.hasOwnProperty;for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},b.Decorate=function(a,b){function f(){var c=Array.prototype.unshift,d=b.prototype.constructor.length,e=a.prototype.constructor;d>0&&(c.call(arguments,a.prototype.constructor),e=b.prototype.constructor),e.apply(this,arguments)
}function g(){this.constructor=f}var d=c(b),e=c(a);b.displayName=a.displayName,f.prototype=new g;for(var h=0;h<e.length;h++){var i=e[h];f.prototype[i]=a.prototype[i]}for(var j=(function(a){var c=function(){};a in f.prototype&&(c=f.prototype[a]);var d=b.prototype[a];return function(){var a=Array.prototype.unshift;return a.call(arguments,c),d.apply(this,arguments)}}),k=0;k<d.length;k++){var l=d[k];f.prototype[l]=j(l)}return f};var d=function(){this.listeners={}};return d.prototype.on=function(a,b){this.listeners=this.listeners||{},a in this.listeners?this.listeners[a].push(b):this.listeners[a]=[b]
},d.prototype.trigger=function(a){var b=Array.prototype.slice,c=b.call(arguments,1);this.listeners=this.listeners||{},null==c&&(c=[]),0===c.length&&c.push({}),c[0]._type=a,a in this.listeners&&this.invoke(this.listeners[a],b.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},d.prototype.invoke=function(a,b){for(var c=0,d=a.length;d>c;c++)a[c].apply(this,b)},b.Observable=d,b.generateChars=function(a){for(var b="",c=0;a>c;c++){var d=Math.floor(36*Math.random());b+=d.toString(36)
}return b},b.bind=function(a,b){return function(){a.apply(b,arguments)}},b._convertData=function(a){for(var b in a){var c=b.split("-"),d=a;if(1!==c.length){for(var e=0;e<c.length;e++){var f=c[e];f=f.substring(0,1).toLowerCase()+f.substring(1),f in d||(d[f]={}),e==c.length-1&&(d[f]=a[b]),d=d[f]}delete a[b]}}return a},b.hasScroll=function(b,c){var d=a(c),e=c.style.overflowX,f=c.style.overflowY;return e!==f||"hidden"!==f&&"visible"!==f?"scroll"===e||"scroll"===f?!0:d.innerHeight()<c.scrollHeight||d.innerWidth()<c.scrollWidth:!1
},b.escapeMarkup=function(a){var b={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof a?a:String(a).replace(/[&<>"'\/\\]/g,function(a){return b[a]})},b.appendMany=function(b,c){if("1.7"===a.fn.jquery.substr(0,3)){var d=a();a.map(c,function(a){d=d.add(a)}),c=d}b.append(c)},b}),c.define("select2/results",["jquery","./utils"],function(a,b){function c(a,b,d){this.$element=a,this.data=d,this.options=b,c.__super__.constructor.call(this)}return b.Extend(c,b.Observable),c.prototype.render=function(){var b=a('<ul class="select2-results__options" role="tree"></ul>');
return this.options.get("multiple")&&b.attr("aria-multiselectable","true"),this.$results=b,b},c.prototype.clear=function(){this.$results.empty()},c.prototype.displayMessage=function(b){var c=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var d=a('<li role="treeitem" aria-live="assertive" class="select2-results__option"></li>'),e=this.options.get("translations").get(b.message);d.append(c(e(b.args))),d[0].className+=" select2-results__message",this.$results.append(d)},c.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()
},c.prototype.append=function(a){this.hideLoading();var b=[];if(null==a.results||0===a.results.length)return 0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"}),void 0;a.results=this.sort(a.results);for(var c=0;c<a.results.length;c++){var d=a.results[c],e=this.option(d);b.push(e)}this.$results.append(b)},c.prototype.position=function(a,b){var c=b.find(".select2-results");c.append(a)},c.prototype.sort=function(a){var b=this.options.get("sorter");return b(a)},c.prototype.highlightFirstItem=function(){var a=this.$results.find(".select2-results__option[aria-selected]"),b=a.filter("[aria-selected=true]");
b.length>0?b.first().trigger("mouseenter"):a.first().trigger("mouseenter"),this.ensureHighlightVisible()},c.prototype.setClasses=function(){var b=this;this.data.current(function(c){var d=a.map(c,function(a){return a.id.toString()}),e=b.$results.find(".select2-results__option[aria-selected]");e.each(function(){var b=a(this),c=a.data(this,"data"),e=""+c.id;null!=c.element&&c.element.selected||null==c.element&&a.inArray(e,d)>-1?b.attr("aria-selected","true"):b.attr("aria-selected","false")})})},c.prototype.showLoading=function(a){this.hideLoading();
var b=this.options.get("translations").get("searching"),c={disabled:!0,loading:!0,text:b(a)},d=this.option(c);d.className+=" loading-results",this.$results.prepend(d)},c.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},c.prototype.option=function(b){var c=document.createElement("li");c.className="select2-results__option";var d={role:"treeitem","aria-selected":"false"};b.disabled&&(delete d["aria-selected"],d["aria-disabled"]="true"),null==b.id&&delete d["aria-selected"],null!=b._resultId&&(c.id=b._resultId),b.title&&(c.title=b.title),b.children&&(d.role="group",d["aria-label"]=b.text,delete d["aria-selected"]);
for(var e in d){var f=d[e];c.setAttribute(e,f)}if(b.children){var g=a(c),h=document.createElement("strong");h.className="select2-results__group";{a(h)}this.template(b,h);for(var j=[],k=0;k<b.children.length;k++){var l=b.children[k],m=this.option(l);j.push(m)}var n=a("<ul></ul>",{"class":"select2-results__options select2-results__options--nested"});n.append(j),g.append(h),g.append(n)}else this.template(b,c);return a.data(c,"data",b),c},c.prototype.bind=function(b){var d=this,e=b.id+"-results";this.$results.attr("id",e),b.on("results:all",function(a){d.clear(),d.append(a.data),b.isOpen()&&(d.setClasses(),d.highlightFirstItem())
}),b.on("results:append",function(a){d.append(a.data),b.isOpen()&&d.setClasses()}),b.on("query",function(a){d.hideMessages(),d.showLoading(a)}),b.on("select",function(){b.isOpen()&&(d.setClasses(),d.highlightFirstItem())}),b.on("unselect",function(){b.isOpen()&&(d.setClasses(),d.highlightFirstItem())}),b.on("open",function(){d.$results.attr("aria-expanded","true"),d.$results.attr("aria-hidden","false"),d.setClasses(),d.ensureHighlightVisible()}),b.on("close",function(){d.$results.attr("aria-expanded","false"),d.$results.attr("aria-hidden","true"),d.$results.removeAttr("aria-activedescendant")
}),b.on("results:toggle",function(){var a=d.getHighlightedResults();0!==a.length&&a.trigger("mouseup")}),b.on("results:select",function(){var a=d.getHighlightedResults();if(0!==a.length){var b=a.data("data");"true"==a.attr("aria-selected")?d.trigger("close",{}):d.trigger("select",{data:b})}}),b.on("results:previous",function(){var a=d.getHighlightedResults(),b=d.$results.find("[aria-selected]"),c=b.index(a);if(0!==c){var e=c-1;0===a.length&&(e=0);var f=b.eq(e);f.trigger("mouseenter");var g=d.$results.offset().top,h=f.offset().top,i=d.$results.scrollTop()+(h-g);
0===e?d.$results.scrollTop(0):0>h-g&&d.$results.scrollTop(i)}}),b.on("results:next",function(){var a=d.getHighlightedResults(),b=d.$results.find("[aria-selected]"),c=b.index(a),e=c+1;if(!(e>=b.length)){var f=b.eq(e);f.trigger("mouseenter");var g=d.$results.offset().top+d.$results.outerHeight(!1),h=f.offset().top+f.outerHeight(!1),i=d.$results.scrollTop()+h-g;0===e?d.$results.scrollTop(0):h>g&&d.$results.scrollTop(i)}}),b.on("results:focus",function(a){a.element.addClass("select2-results__option--highlighted")
}),b.on("results:message",function(a){d.displayMessage(a)}),a.fn.mousewheel&&this.$results.on("mousewheel",function(a){var b=d.$results.scrollTop(),c=d.$results.get(0).scrollHeight-b+a.deltaY,e=a.deltaY>0&&b-a.deltaY<=0,f=a.deltaY<0&&c<=d.$results.height();e?(d.$results.scrollTop(0),a.preventDefault(),a.stopPropagation()):f&&(d.$results.scrollTop(d.$results.get(0).scrollHeight-d.$results.height()),a.preventDefault(),a.stopPropagation())}),this.$results.on("mouseup",".select2-results__option[aria-selected]",function(b){var c=a(this),e=c.data("data");
return"true"===c.attr("aria-selected")?(d.options.get("multiple")?d.trigger("unselect",{originalEvent:b,data:e}):d.trigger("close",{}),void 0):(d.trigger("select",{originalEvent:b,data:e}),void 0)}),this.$results.on("mouseenter",".select2-results__option[aria-selected]",function(){var c=a(this).data("data");d.getHighlightedResults().removeClass("select2-results__option--highlighted"),d.trigger("results:focus",{data:c,element:a(this)})})},c.prototype.getHighlightedResults=function(){var a=this.$results.find(".select2-results__option--highlighted");
return a},c.prototype.destroy=function(){this.$results.remove()},c.prototype.ensureHighlightVisible=function(){var a=this.getHighlightedResults();if(0!==a.length){var b=this.$results.find("[aria-selected]"),c=b.index(a),d=this.$results.offset().top,e=a.offset().top,f=this.$results.scrollTop()+(e-d),g=e-d;f-=2*a.outerHeight(!1),2>=c?this.$results.scrollTop(0):(g>this.$results.outerHeight()||0>g)&&this.$results.scrollTop(f)}},c.prototype.template=function(b,c){var d=this.options.get("templateResult"),e=this.options.get("escapeMarkup"),f=d(b,c);
null==f?c.style.display="none":"string"==typeof f?c.innerHTML=e(f):a(c).append(f)},c}),c.define("select2/keys",[],function(){var a={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46};return a}),c.define("select2/selection/base",["jquery","../utils","../keys"],function(a,b,c){function d(a,b){this.$element=a,this.options=b,d.__super__.constructor.call(this)}return b.Extend(d,b.Observable),d.prototype.render=function(){var b=a('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');
return this._tabindex=0,null!=this.$element.data("old-tabindex")?this._tabindex=this.$element.data("old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),b.attr("title",this.$element.attr("title")),b.attr("tabindex",this._tabindex),this.$selection=b,b},d.prototype.bind=function(a){var d=this,f=(a.id+"-container",a.id+"-results");this.container=a,this.$selection.on("focus",function(a){d.trigger("focus",a)}),this.$selection.on("blur",function(a){d._handleBlur(a)}),this.$selection.on("keydown",function(a){d.trigger("keypress",a),a.which===c.SPACE&&a.preventDefault()
}),a.on("results:focus",function(a){d.$selection.attr("aria-activedescendant",a.data._resultId)}),a.on("selection:update",function(a){d.update(a.data)}),a.on("open",function(){d.$selection.attr("aria-expanded","true"),d.$selection.attr("aria-owns",f),d._attachCloseHandler(a)}),a.on("close",function(){d.$selection.attr("aria-expanded","false"),d.$selection.removeAttr("aria-activedescendant"),d.$selection.removeAttr("aria-owns"),d.$selection.focus(),d._detachCloseHandler(a)}),a.on("enable",function(){d.$selection.attr("tabindex",d._tabindex)
}),a.on("disable",function(){d.$selection.attr("tabindex","-1")})},d.prototype._handleBlur=function(b){var c=this;window.setTimeout(function(){document.activeElement==c.$selection[0]||a.contains(c.$selection[0],document.activeElement)||c.trigger("blur",b)},1)},d.prototype._attachCloseHandler=function(b){a(document.body).on("mousedown.select2."+b.id,function(b){var c=a(b.target),d=c.closest(".select2"),e=a(".select2.select2-container--open");e.each(function(){var b=a(this);if(this!=d[0]){var c=b.data("element");
c.select2("close")}})})},d.prototype._detachCloseHandler=function(b){a(document.body).off("mousedown.select2."+b.id)},d.prototype.position=function(a,b){var c=b.find(".selection");c.append(a)},d.prototype.destroy=function(){this._detachCloseHandler(this.container)},d.prototype.update=function(){throw new Error("The `update` method must be defined in child classes.")},d}),c.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(a,b,c){function e(){e.__super__.constructor.apply(this,arguments)
}return c.Extend(e,b),e.prototype.render=function(){var a=e.__super__.render.call(this);return a.addClass("select2-selection--single"),a.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),a},e.prototype.bind=function(a){var c=this;e.__super__.bind.apply(this,arguments);var d=a.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",d),this.$selection.attr("aria-labelledby",d),this.$selection.on("mousedown",function(a){1===a.which&&c.trigger("toggle",{originalEvent:a})
}),this.$selection.on("focus",function(){}),this.$selection.on("blur",function(){}),a.on("focus",function(){a.isOpen()||c.$selection.focus()}),a.on("selection:update",function(a){c.update(a.data)})},e.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},e.prototype.display=function(a,b){var c=this.options.get("templateSelection"),d=this.options.get("escapeMarkup");return d(c(a,b))},e.prototype.selectionContainer=function(){return a("<span></span>")},e.prototype.update=function(a){if(0===a.length)return this.clear(),void 0;
var b=a[0],c=this.$selection.find(".select2-selection__rendered"),d=this.display(b,c);c.empty().append(d),c.prop("title",b.title||b.text)},e}),c.define("select2/selection/multiple",["jquery","./base","../utils"],function(a,b,c){function d(){d.__super__.constructor.apply(this,arguments)}return c.Extend(d,b),d.prototype.render=function(){var a=d.__super__.render.call(this);return a.addClass("select2-selection--multiple"),a.html('<ul class="select2-selection__rendered"></ul>'),a},d.prototype.bind=function(){var e=this;
d.__super__.bind.apply(this,arguments),this.$selection.on("click",function(a){e.trigger("toggle",{originalEvent:a})}),this.$selection.on("click",".select2-selection__choice__remove",function(b){if(!e.options.get("disabled")){var c=a(this),d=c.parent(),f=d.data("data");e.trigger("unselect",{originalEvent:b,data:f})}})},d.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},d.prototype.display=function(a,b){var c=this.options.get("templateSelection"),d=this.options.get("escapeMarkup");
return d(c(a,b))},d.prototype.selectionContainer=function(){var b=a('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span></li>');return b},d.prototype.update=function(a){if(this.clear(),0!==a.length){for(var b=[],d=0;d<a.length;d++){var e=a[d],f=this.selectionContainer(),g=this.display(e,f);f.append(g),f.prop("title",e.title||e.text),f.data("data",e),b.push(f)}var h=this.$selection.find(".select2-selection__rendered");c.appendMany(h,b)}},d}),c.define("select2/selection/placeholder",["../utils"],function(){function b(a,b,c){this.placeholder=this.normalizePlaceholder(c.get("placeholder")),a.call(this,b,c)
}return b.prototype.normalizePlaceholder=function(a,b){return"string"==typeof b&&(b={id:"",text:b}),b},b.prototype.createPlaceholder=function(a,b){var c=this.selectionContainer();return c.html(this.display(b)),c.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),c},b.prototype.update=function(a,b){var c=1==b.length&&b[0].id!=this.placeholder.id,d=b.length>1;if(d||c)return a.call(this,b);this.clear();var e=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(e)
},b}),c.define("select2/selection/allowClear",["jquery","../keys"],function(a,b){function c(){}return c.prototype.bind=function(a,b,c){var d=this;a.call(this,b,c),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",function(a){d._handleClear(a)}),b.on("keypress",function(a){d._handleKeyboardClear(a,b)})},c.prototype._handleClear=function(a,b){if(!this.options.get("disabled")){var c=this.$selection.find(".select2-selection__clear");
if(0!==c.length){b.stopPropagation();for(var d=c.data("data"),e=0;e<d.length;e++){var f={data:d[e]};if(this.trigger("unselect",f),f.prevented)return}this.$element.val(this.placeholder.id).trigger("change"),this.trigger("toggle",{})}}},c.prototype._handleKeyboardClear=function(a,c,d){d.isOpen()||(c.which==b.DELETE||c.which==b.BACKSPACE)&&this._handleClear(c)},c.prototype.update=function(b,c){if(b.call(this,c),!(this.$selection.find(".select2-selection__placeholder").length>0||0===c.length)){var d=a('<span class="select2-selection__clear">&times;</span>');
d.data("data",c),this.$selection.find(".select2-selection__rendered").prepend(d)}},c}),c.define("select2/selection/search",["jquery","../utils","../keys"],function(a,b,c){function d(a,b,c){a.call(this,b,c)}return d.prototype.render=function(b){var c=a('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" aria-autocomplete="list" /></li>');this.$searchContainer=c,this.$search=c.find("input");
var d=b.call(this);return this._transferTabIndex(),d},d.prototype.bind=function(a,b,d){var e=this;a.call(this,b,d),b.on("open",function(){e.$search.trigger("focus")}),b.on("close",function(){e.$search.val(""),e.$search.removeAttr("aria-activedescendant"),e.$search.trigger("focus")}),b.on("enable",function(){e.$search.prop("disabled",!1),e._transferTabIndex()}),b.on("disable",function(){e.$search.prop("disabled",!0)}),b.on("focus",function(){e.$search.trigger("focus")}),b.on("results:focus",function(a){e.$search.attr("aria-activedescendant",a.id)
}),this.$selection.on("focusin",".select2-search--inline",function(a){e.trigger("focus",a)}),this.$selection.on("focusout",".select2-search--inline",function(a){e._handleBlur(a)}),this.$selection.on("keydown",".select2-search--inline",function(a){a.stopPropagation(),e.trigger("keypress",a),e._keyUpPrevented=a.isDefaultPrevented();var b=a.which;if(b===c.BACKSPACE&&""===e.$search.val()){var d=e.$searchContainer.prev(".select2-selection__choice");if(d.length>0){var f=d.data("data");e.searchRemoveChoice(f),a.preventDefault()
}}});var f=document.documentMode,g=f&&11>=f;this.$selection.on("input.searchcheck",".select2-search--inline",function(){return g?(e.$selection.off("input.search input.searchcheck"),void 0):(e.$selection.off("keyup.search"),void 0)}),this.$selection.on("keyup.search input.search",".select2-search--inline",function(a){if(g&&"input"===a.type)return e.$selection.off("input.search input.searchcheck"),void 0;var b=a.which;b!=c.SHIFT&&b!=c.CTRL&&b!=c.ALT&&b!=c.TAB&&e.handleSearch(a)})},d.prototype._transferTabIndex=function(){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")
},d.prototype.createPlaceholder=function(a,b){this.$search.attr("placeholder",b.text)},d.prototype.update=function(a,b){var c=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),a.call(this,b),this.$selection.find(".select2-selection__rendered").append(this.$searchContainer),this.resizeSearch(),c&&this.$search.focus()},d.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var a=this.$search.val();this.trigger("query",{term:a})}this._keyUpPrevented=!1},d.prototype.searchRemoveChoice=function(a,b){this.trigger("unselect",{data:b}),this.$search.val(b.text),this.handleSearch()
},d.prototype.resizeSearch=function(){this.$search.css("width","25px");var a="";if(""!==this.$search.attr("placeholder"))a=this.$selection.find(".select2-selection__rendered").innerWidth();else{var b=this.$search.val().length+1;a=.75*b+"em"}this.$search.css("width",a)},d}),c.define("select2/selection/eventRelay",["jquery"],function(a){function b(){}return b.prototype.bind=function(b,c,d){var e=this,f=["open","opening","close","closing","select","selecting","unselect","unselecting"],g=["opening","closing","selecting","unselecting"];
b.call(this,c,d),c.on("*",function(b,c){if(-1!==a.inArray(b,f)){c=c||{};var d=a.Event("select2:"+b,{params:c});e.$element.trigger(d),-1!==a.inArray(b,g)&&(c.prevented=d.isDefaultPrevented())}})},b}),c.define("select2/translation",["jquery","require"],function(a,b){function c(a){this.dict=a||{}}return c.prototype.all=function(){return this.dict},c.prototype.get=function(a){return this.dict[a]},c.prototype.extend=function(b){this.dict=a.extend({},b.all(),this.dict)},c._cache={},c.loadPath=function(a){if(!(a in c._cache)){var d=b(a);
c._cache[a]=d}return new c(c._cache[a])},c}),c.define("select2/diacritics",[],function(){var a={"\u24b6":"A",\uff21:"A",\u00c0:"A",\u00c1:"A",\u00c2:"A",\u1ea6:"A",\u1ea4:"A",\u1eaa:"A",\u1ea8:"A",\u00c3:"A",\u0100:"A",\u0102:"A",\u1eb0:"A",\u1eae:"A",\u1eb4:"A",\u1eb2:"A",\u0226:"A",\u01e0:"A",\u00c4:"A",\u01de:"A",\u1ea2:"A",\u00c5:"A",\u01fa:"A",\u01cd:"A",\u0200:"A",\u0202:"A",\u1ea0:"A",\u1eac:"A",\u1eb6:"A",\u1e00:"A",\u0104:"A",\u023a:"A",\u2c6f:"A",\ua732:"AA",\u00c6:"AE",\u01fc:"AE",\u01e2:"AE",\ua734:"AO",\ua736:"AU",\ua738:"AV",\ua73a:"AV",\ua73c:"AY","\u24b7":"B",\uff22:"B",\u1e02:"B",\u1e04:"B",\u1e06:"B",\u0243:"B",\u0182:"B",\u0181:"B","\u24b8":"C",\uff23:"C",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u00c7:"C",\u1e08:"C",\u0187:"C",\u023b:"C",\ua73e:"C","\u24b9":"D",\uff24:"D",\u1e0a:"D",\u010e:"D",\u1e0c:"D",\u1e10:"D",\u1e12:"D",\u1e0e:"D",\u0110:"D",\u018b:"D",\u018a:"D",\u0189:"D",\ua779:"D",\u01f1:"DZ",\u01c4:"DZ",\u01f2:"Dz",\u01c5:"Dz","\u24ba":"E",\uff25:"E",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u1ec0:"E",\u1ebe:"E",\u1ec4:"E",\u1ec2:"E",\u1ebc:"E",\u0112:"E",\u1e14:"E",\u1e16:"E",\u0114:"E",\u0116:"E",\u00cb:"E",\u1eba:"E",\u011a:"E",\u0204:"E",\u0206:"E",\u1eb8:"E",\u1ec6:"E",\u0228:"E",\u1e1c:"E",\u0118:"E",\u1e18:"E",\u1e1a:"E",\u0190:"E",\u018e:"E","\u24bb":"F",\uff26:"F",\u1e1e:"F",\u0191:"F",\ua77b:"F","\u24bc":"G",\uff27:"G",\u01f4:"G",\u011c:"G",\u1e20:"G",\u011e:"G",\u0120:"G",\u01e6:"G",\u0122:"G",\u01e4:"G",\u0193:"G","\ua7a0":"G",\ua77d:"G",\ua77e:"G","\u24bd":"H",\uff28:"H",\u0124:"H",\u1e22:"H",\u1e26:"H",\u021e:"H",\u1e24:"H",\u1e28:"H",\u1e2a:"H",\u0126:"H",\u2c67:"H",\u2c75:"H","\ua78d":"H","\u24be":"I",\uff29:"I",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u0128:"I",\u012a:"I",\u012c:"I",\u0130:"I",\u00cf:"I",\u1e2e:"I",\u1ec8:"I",\u01cf:"I",\u0208:"I",\u020a:"I",\u1eca:"I",\u012e:"I",\u1e2c:"I",\u0197:"I","\u24bf":"J",\uff2a:"J",\u0134:"J",\u0248:"J","\u24c0":"K",\uff2b:"K",\u1e30:"K",\u01e8:"K",\u1e32:"K",\u0136:"K",\u1e34:"K",\u0198:"K",\u2c69:"K",\ua740:"K",\ua742:"K",\ua744:"K","\ua7a2":"K","\u24c1":"L",\uff2c:"L",\u013f:"L",\u0139:"L",\u013d:"L",\u1e36:"L",\u1e38:"L",\u013b:"L",\u1e3c:"L",\u1e3a:"L",\u0141:"L",\u023d:"L",\u2c62:"L",\u2c60:"L",\ua748:"L",\ua746:"L",\ua780:"L",\u01c7:"LJ",\u01c8:"Lj","\u24c2":"M",\uff2d:"M",\u1e3e:"M",\u1e40:"M",\u1e42:"M",\u2c6e:"M",\u019c:"M","\u24c3":"N",\uff2e:"N",\u01f8:"N",\u0143:"N",\u00d1:"N",\u1e44:"N",\u0147:"N",\u1e46:"N",\u0145:"N",\u1e4a:"N",\u1e48:"N",\u0220:"N",\u019d:"N","\ua790":"N","\ua7a4":"N",\u01ca:"NJ",\u01cb:"Nj","\u24c4":"O",\uff2f:"O",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u1ed2:"O",\u1ed0:"O",\u1ed6:"O",\u1ed4:"O",\u00d5:"O",\u1e4c:"O",\u022c:"O",\u1e4e:"O",\u014c:"O",\u1e50:"O",\u1e52:"O",\u014e:"O",\u022e:"O",\u0230:"O",\u00d6:"O",\u022a:"O",\u1ece:"O",\u0150:"O",\u01d1:"O",\u020c:"O",\u020e:"O",\u01a0:"O",\u1edc:"O",\u1eda:"O",\u1ee0:"O",\u1ede:"O",\u1ee2:"O",\u1ecc:"O",\u1ed8:"O",\u01ea:"O",\u01ec:"O",\u00d8:"O",\u01fe:"O",\u0186:"O",\u019f:"O",\ua74a:"O",\ua74c:"O",\u01a2:"OI",\ua74e:"OO",\u0222:"OU","\u24c5":"P",\uff30:"P",\u1e54:"P",\u1e56:"P",\u01a4:"P",\u2c63:"P",\ua750:"P",\ua752:"P",\ua754:"P","\u24c6":"Q",\uff31:"Q",\ua756:"Q",\ua758:"Q",\u024a:"Q","\u24c7":"R",\uff32:"R",\u0154:"R",\u1e58:"R",\u0158:"R",\u0210:"R",\u0212:"R",\u1e5a:"R",\u1e5c:"R",\u0156:"R",\u1e5e:"R",\u024c:"R",\u2c64:"R",\ua75a:"R","\ua7a6":"R",\ua782:"R","\u24c8":"S",\uff33:"S",\u1e9e:"S",\u015a:"S",\u1e64:"S",\u015c:"S",\u1e60:"S",\u0160:"S",\u1e66:"S",\u1e62:"S",\u1e68:"S",\u0218:"S",\u015e:"S","\u2c7e":"S","\ua7a8":"S",\ua784:"S","\u24c9":"T",\uff34:"T",\u1e6a:"T",\u0164:"T",\u1e6c:"T",\u021a:"T",\u0162:"T",\u1e70:"T",\u1e6e:"T",\u0166:"T",\u01ac:"T",\u01ae:"T",\u023e:"T",\ua786:"T",\ua728:"TZ","\u24ca":"U",\uff35:"U",\u00d9:"U",\u00da:"U",\u00db:"U",\u0168:"U",\u1e78:"U",\u016a:"U",\u1e7a:"U",\u016c:"U",\u00dc:"U",\u01db:"U",\u01d7:"U",\u01d5:"U",\u01d9:"U",\u1ee6:"U",\u016e:"U",\u0170:"U",\u01d3:"U",\u0214:"U",\u0216:"U",\u01af:"U",\u1eea:"U",\u1ee8:"U",\u1eee:"U",\u1eec:"U",\u1ef0:"U",\u1ee4:"U",\u1e72:"U",\u0172:"U",\u1e76:"U",\u1e74:"U",\u0244:"U","\u24cb":"V",\uff36:"V",\u1e7c:"V",\u1e7e:"V",\u01b2:"V",\ua75e:"V",\u0245:"V",\ua760:"VY","\u24cc":"W",\uff37:"W",\u1e80:"W",\u1e82:"W",\u0174:"W",\u1e86:"W",\u1e84:"W",\u1e88:"W",\u2c72:"W","\u24cd":"X",\uff38:"X",\u1e8a:"X",\u1e8c:"X","\u24ce":"Y",\uff39:"Y",\u1ef2:"Y",\u00dd:"Y",\u0176:"Y",\u1ef8:"Y",\u0232:"Y",\u1e8e:"Y",\u0178:"Y",\u1ef6:"Y",\u1ef4:"Y",\u01b3:"Y",\u024e:"Y",\u1efe:"Y","\u24cf":"Z",\uff3a:"Z",\u0179:"Z",\u1e90:"Z",\u017b:"Z",\u017d:"Z",\u1e92:"Z",\u1e94:"Z",\u01b5:"Z",\u0224:"Z","\u2c7f":"Z",\u2c6b:"Z",\ua762:"Z","\u24d0":"a",\uff41:"a",\u1e9a:"a",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u1ea7:"a",\u1ea5:"a",\u1eab:"a",\u1ea9:"a",\u00e3:"a",\u0101:"a",\u0103:"a",\u1eb1:"a",\u1eaf:"a",\u1eb5:"a",\u1eb3:"a",\u0227:"a",\u01e1:"a",\u00e4:"a",\u01df:"a",\u1ea3:"a",\u00e5:"a",\u01fb:"a",\u01ce:"a",\u0201:"a",\u0203:"a",\u1ea1:"a",\u1ead:"a",\u1eb7:"a",\u1e01:"a",\u0105:"a",\u2c65:"a",\u0250:"a",\ua733:"aa",\u00e6:"ae",\u01fd:"ae",\u01e3:"ae",\ua735:"ao",\ua737:"au",\ua739:"av",\ua73b:"av",\ua73d:"ay","\u24d1":"b",\uff42:"b",\u1e03:"b",\u1e05:"b",\u1e07:"b",\u0180:"b",\u0183:"b",\u0253:"b","\u24d2":"c",\uff43:"c",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u00e7:"c",\u1e09:"c",\u0188:"c",\u023c:"c",\ua73f:"c",\u2184:"c","\u24d3":"d",\uff44:"d",\u1e0b:"d",\u010f:"d",\u1e0d:"d",\u1e11:"d",\u1e13:"d",\u1e0f:"d",\u0111:"d",\u018c:"d",\u0256:"d",\u0257:"d",\ua77a:"d",\u01f3:"dz",\u01c6:"dz","\u24d4":"e",\uff45:"e",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u1ec1:"e",\u1ebf:"e",\u1ec5:"e",\u1ec3:"e",\u1ebd:"e",\u0113:"e",\u1e15:"e",\u1e17:"e",\u0115:"e",\u0117:"e",\u00eb:"e",\u1ebb:"e",\u011b:"e",\u0205:"e",\u0207:"e",\u1eb9:"e",\u1ec7:"e",\u0229:"e",\u1e1d:"e",\u0119:"e",\u1e19:"e",\u1e1b:"e",\u0247:"e",\u025b:"e",\u01dd:"e","\u24d5":"f",\uff46:"f",\u1e1f:"f",\u0192:"f",\ua77c:"f","\u24d6":"g",\uff47:"g",\u01f5:"g",\u011d:"g",\u1e21:"g",\u011f:"g",\u0121:"g",\u01e7:"g",\u0123:"g",\u01e5:"g",\u0260:"g","\ua7a1":"g",\u1d79:"g",\ua77f:"g","\u24d7":"h",\uff48:"h",\u0125:"h",\u1e23:"h",\u1e27:"h",\u021f:"h",\u1e25:"h",\u1e29:"h",\u1e2b:"h",\u1e96:"h",\u0127:"h",\u2c68:"h",\u2c76:"h",\u0265:"h",\u0195:"hv","\u24d8":"i",\uff49:"i",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u0129:"i",\u012b:"i",\u012d:"i",\u00ef:"i",\u1e2f:"i",\u1ec9:"i",\u01d0:"i",\u0209:"i",\u020b:"i",\u1ecb:"i",\u012f:"i",\u1e2d:"i",\u0268:"i",\u0131:"i","\u24d9":"j",\uff4a:"j",\u0135:"j",\u01f0:"j",\u0249:"j","\u24da":"k",\uff4b:"k",\u1e31:"k",\u01e9:"k",\u1e33:"k",\u0137:"k",\u1e35:"k",\u0199:"k",\u2c6a:"k",\ua741:"k",\ua743:"k",\ua745:"k","\ua7a3":"k","\u24db":"l",\uff4c:"l",\u0140:"l",\u013a:"l",\u013e:"l",\u1e37:"l",\u1e39:"l",\u013c:"l",\u1e3d:"l",\u1e3b:"l",\u017f:"l",\u0142:"l",\u019a:"l",\u026b:"l",\u2c61:"l",\ua749:"l",\ua781:"l",\ua747:"l",\u01c9:"lj","\u24dc":"m",\uff4d:"m",\u1e3f:"m",\u1e41:"m",\u1e43:"m",\u0271:"m",\u026f:"m","\u24dd":"n",\uff4e:"n",\u01f9:"n",\u0144:"n",\u00f1:"n",\u1e45:"n",\u0148:"n",\u1e47:"n",\u0146:"n",\u1e4b:"n",\u1e49:"n",\u019e:"n",\u0272:"n",\u0149:"n","\ua791":"n","\ua7a5":"n",\u01cc:"nj","\u24de":"o",\uff4f:"o",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u1ed3:"o",\u1ed1:"o",\u1ed7:"o",\u1ed5:"o",\u00f5:"o",\u1e4d:"o",\u022d:"o",\u1e4f:"o",\u014d:"o",\u1e51:"o",\u1e53:"o",\u014f:"o",\u022f:"o",\u0231:"o",\u00f6:"o",\u022b:"o",\u1ecf:"o",\u0151:"o",\u01d2:"o",\u020d:"o",\u020f:"o",\u01a1:"o",\u1edd:"o",\u1edb:"o",\u1ee1:"o",\u1edf:"o",\u1ee3:"o",\u1ecd:"o",\u1ed9:"o",\u01eb:"o",\u01ed:"o",\u00f8:"o",\u01ff:"o",\u0254:"o",\ua74b:"o",\ua74d:"o",\u0275:"o",\u01a3:"oi",\u0223:"ou",\ua74f:"oo","\u24df":"p",\uff50:"p",\u1e55:"p",\u1e57:"p",\u01a5:"p",\u1d7d:"p",\ua751:"p",\ua753:"p",\ua755:"p","\u24e0":"q",\uff51:"q",\u024b:"q",\ua757:"q",\ua759:"q","\u24e1":"r",\uff52:"r",\u0155:"r",\u1e59:"r",\u0159:"r",\u0211:"r",\u0213:"r",\u1e5b:"r",\u1e5d:"r",\u0157:"r",\u1e5f:"r",\u024d:"r",\u027d:"r",\ua75b:"r","\ua7a7":"r",\ua783:"r","\u24e2":"s",\uff53:"s",\u00df:"s",\u015b:"s",\u1e65:"s",\u015d:"s",\u1e61:"s",\u0161:"s",\u1e67:"s",\u1e63:"s",\u1e69:"s",\u0219:"s",\u015f:"s",\u023f:"s","\ua7a9":"s",\ua785:"s",\u1e9b:"s","\u24e3":"t",\uff54:"t",\u1e6b:"t",\u1e97:"t",\u0165:"t",\u1e6d:"t",\u021b:"t",\u0163:"t",\u1e71:"t",\u1e6f:"t",\u0167:"t",\u01ad:"t",\u0288:"t",\u2c66:"t",\ua787:"t",\ua729:"tz","\u24e4":"u",\uff55:"u",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u0169:"u",\u1e79:"u",\u016b:"u",\u1e7b:"u",\u016d:"u",\u00fc:"u",\u01dc:"u",\u01d8:"u",\u01d6:"u",\u01da:"u",\u1ee7:"u",\u016f:"u",\u0171:"u",\u01d4:"u",\u0215:"u",\u0217:"u",\u01b0:"u",\u1eeb:"u",\u1ee9:"u",\u1eef:"u",\u1eed:"u",\u1ef1:"u",\u1ee5:"u",\u1e73:"u",\u0173:"u",\u1e77:"u",\u1e75:"u",\u0289:"u","\u24e5":"v",\uff56:"v",\u1e7d:"v",\u1e7f:"v",\u028b:"v",\ua75f:"v",\u028c:"v",\ua761:"vy","\u24e6":"w",\uff57:"w",\u1e81:"w",\u1e83:"w",\u0175:"w",\u1e87:"w",\u1e85:"w",\u1e98:"w",\u1e89:"w",\u2c73:"w","\u24e7":"x",\uff58:"x",\u1e8b:"x",\u1e8d:"x","\u24e8":"y",\uff59:"y",\u1ef3:"y",\u00fd:"y",\u0177:"y",\u1ef9:"y",\u0233:"y",\u1e8f:"y",\u00ff:"y",\u1ef7:"y",\u1e99:"y",\u1ef5:"y",\u01b4:"y",\u024f:"y",\u1eff:"y","\u24e9":"z",\uff5a:"z",\u017a:"z",\u1e91:"z",\u017c:"z",\u017e:"z",\u1e93:"z",\u1e95:"z",\u01b6:"z",\u0225:"z",\u0240:"z",\u2c6c:"z",\ua763:"z",\u0386:"\u0391",\u0388:"\u0395",\u0389:"\u0397",\u038a:"\u0399",\u03aa:"\u0399",\u038c:"\u039f",\u038e:"\u03a5",\u03ab:"\u03a5",\u038f:"\u03a9",\u03ac:"\u03b1",\u03ad:"\u03b5",\u03ae:"\u03b7",\u03af:"\u03b9",\u03ca:"\u03b9",\u0390:"\u03b9",\u03cc:"\u03bf",\u03cd:"\u03c5",\u03cb:"\u03c5",\u03b0:"\u03c5",\u03c9:"\u03c9",\u03c2:"\u03c3"};
return a}),c.define("select2/data/base",["../utils"],function(a){function b(){b.__super__.constructor.call(this)}return a.Extend(b,a.Observable),b.prototype.current=function(){throw new Error("The `current` method must be defined in child classes.")},b.prototype.query=function(){throw new Error("The `query` method must be defined in child classes.")},b.prototype.bind=function(){},b.prototype.destroy=function(){},b.prototype.generateResultId=function(b,c){var d=b.id+"-result-";return d+=a.generateChars(4),d+=null!=c.id?"-"+c.id.toString():"-"+a.generateChars(4)
},b}),c.define("select2/data/select",["./base","../utils","jquery"],function(a,b,c){function d(a,b){this.$element=a,this.options=b,d.__super__.constructor.call(this)}return b.Extend(d,a),d.prototype.current=function(a){var b=[],d=this;this.$element.find(":selected").each(function(){var a=c(this),e=d.item(a);b.push(e)}),a(b)},d.prototype.select=function(a){var b=this;if(a.selected=!0,c(a.element).is("option"))return a.element.selected=!0,this.$element.trigger("change"),void 0;if(this.$element.prop("multiple"))this.current(function(d){var e=[];
a=[a],a.push.apply(a,d);for(var f=0;f<a.length;f++){var g=a[f].id;-1===c.inArray(g,e)&&e.push(g)}b.$element.val(e),b.$element.trigger("change")});else{var d=a.id;this.$element.val(d),this.$element.trigger("change")}},d.prototype.unselect=function(a){var b=this;if(this.$element.prop("multiple"))return a.selected=!1,c(a.element).is("option")?(a.element.selected=!1,this.$element.trigger("change"),void 0):(this.current(function(d){for(var e=[],f=0;f<d.length;f++){var g=d[f].id;g!==a.id&&-1===c.inArray(g,e)&&e.push(g)
}b.$element.val(e),b.$element.trigger("change")}),void 0)},d.prototype.bind=function(a){var c=this;this.container=a,a.on("select",function(a){c.select(a.data)}),a.on("unselect",function(a){c.unselect(a.data)})},d.prototype.destroy=function(){this.$element.find("*").each(function(){c.removeData(this,"data")})},d.prototype.query=function(a,b){var d=[],e=this,f=this.$element.children();f.each(function(){var b=c(this);if(b.is("option")||b.is("optgroup")){var f=e.item(b),g=e.matches(a,f);null!==g&&d.push(g)}}),b({results:d})
},d.prototype.addOptions=function(a){b.appendMany(this.$element,a)},d.prototype.option=function(a){var b;a.children?(b=document.createElement("optgroup"),b.label=a.text):(b=document.createElement("option"),void 0!==b.textContent?b.textContent=a.text:b.innerText=a.text),a.id&&(b.value=a.id),a.disabled&&(b.disabled=!0),a.selected&&(b.selected=!0),a.title&&(b.title=a.title);var d=c(b),e=this._normalizeItem(a);return e.element=b,c.data(b,"data",e),d},d.prototype.item=function(a){var b={};if(b=c.data(a[0],"data"),null!=b)return b;
if(a.is("option"))b={id:a.val(),text:a.text(),disabled:a.prop("disabled"),selected:a.prop("selected"),title:a.prop("title")};else if(a.is("optgroup")){b={text:a.prop("label"),children:[],title:a.prop("title")};for(var d=a.children("option"),e=[],f=0;f<d.length;f++){var g=c(d[f]),h=this.item(g);e.push(h)}b.children=e}return b=this._normalizeItem(b),b.element=a[0],c.data(a[0],"data",b),b},d.prototype._normalizeItem=function(a){c.isPlainObject(a)||(a={id:a,text:a}),a=c.extend({},{text:""},a);var b={selected:!1,disabled:!1};
return null!=a.id&&(a.id=a.id.toString()),null!=a.text&&(a.text=a.text.toString()),null==a._resultId&&a.id&&null!=this.container&&(a._resultId=this.generateResultId(this.container,a)),c.extend({},b,a)},d.prototype.matches=function(a,b){var c=this.options.get("matcher");return c(a,b)},d}),c.define("select2/data/array",["./select","../utils","jquery"],function(a,b,c){function d(a,b){var c=b.get("data")||[];d.__super__.constructor.call(this,a,b),this.addOptions(this.convertToOptions(c))}return b.Extend(d,a),d.prototype.select=function(a){var b=this.$element.find("option").filter(function(b,c){return c.value==a.id.toString()
});0===b.length&&(b=this.option(a),this.addOptions(b)),d.__super__.select.call(this,a)},d.prototype.convertToOptions=function(a){function h(a){return function(){return c(this).val()==a.id}}for(var d=this,e=this.$element.find("option"),f=e.map(function(){return d.item(c(this)).id}).get(),g=[],i=0;i<a.length;i++){var j=this._normalizeItem(a[i]);if(c.inArray(j.id,f)>=0){var k=e.filter(h(j)),l=this.item(k),m=c.extend(!0,{},j,l),n=this.option(m);k.replaceWith(n)}else{var o=this.option(j);if(j.children){var p=this.convertToOptions(j.children);
b.appendMany(o,p)}g.push(o)}}return g},d}),c.define("select2/data/ajax",["./array","../utils","jquery"],function(a,b,c){function d(a,b){this.ajaxOptions=this._applyDefaults(b.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),d.__super__.constructor.call(this,a,b)}return b.Extend(d,a),d.prototype._applyDefaults=function(a){var b={data:function(a){return c.extend({},a,{q:a.term})},transport:function(a,b,d){var e=c.ajax(a);return e.then(b),e.fail(d),e}};return c.extend({},b,a,!0)
},d.prototype.processResults=function(a){return a},d.prototype.query=function(a,b){function g(){var d=f.transport(f,function(d){var f=e.processResults(d,a);e.options.get("debug")&&window.console&&console.error&&(f&&f.results&&c.isArray(f.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),b(f)},function(){d.status&&"0"===d.status||e.trigger("results:message",{message:"errorLoading"})});e._request=d}var e=this;null!=this._request&&(c.isFunction(this._request.abort)&&this._request.abort(),this._request=null);
var f=c.extend({type:"GET"},this.ajaxOptions);"function"==typeof f.url&&(f.url=f.url.call(this.$element,a)),"function"==typeof f.data&&(f.data=f.data.call(this.$element,a)),this.ajaxOptions.delay&&null!=a.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(g,this.ajaxOptions.delay)):g()},d}),c.define("select2/data/tags",["jquery"],function(a){function b(b,c,d){var e=d.get("tags"),f=d.get("createTag");void 0!==f&&(this.createTag=f);var g=d.get("insertTag");if(void 0!==g&&(this.insertTag=g),b.call(this,c,d),a.isArray(e))for(var h=0;h<e.length;h++){var i=e[h],j=this._normalizeItem(i),k=this.option(j);
this.$element.append(k)}}return b.prototype.query=function(a,b,c){function e(a,f){for(var g=a.results,h=0;h<g.length;h++){var i=g[h],j=null!=i.children&&!e({results:i.children},!0),k=i.text===b.term;if(k||j)return f?!1:(a.data=g,c(a),void 0)}if(f)return!0;var l=d.createTag(b);if(null!=l){var m=d.option(l);m.attr("data-select2-tag",!0),d.addOptions([m]),d.insertTag(g,l)}a.results=g,c(a)}var d=this;return this._removeOldTags(),null==b.term||null!=b.page?(a.call(this,b,c),void 0):(a.call(this,b,e),void 0)},b.prototype.createTag=function(b,c){var d=a.trim(c.term);
return""===d?null:{id:d,text:d}},b.prototype.insertTag=function(a,b,c){b.unshift(c)},b.prototype._removeOldTags=function(){var d=(this._lastTag,this.$element.find("option[data-select2-tag]"));d.each(function(){this.selected||a(this).remove()})},b}),c.define("select2/data/tokenizer",["jquery"],function(a){function b(a,b,c){var d=c.get("tokenizer");void 0!==d&&(this.tokenizer=d),a.call(this,b,c)}return b.prototype.bind=function(a,b,c){a.call(this,b,c),this.$search=b.dropdown.$search||b.selection.$search||c.find(".select2-search__field")
},b.prototype.query=function(b,c,d){function f(b){var c=e._normalizeItem(b),d=e.$element.find("option").filter(function(){return a(this).val()===c.id});if(!d.length){var f=e.option(c);f.attr("data-select2-tag",!0),e._removeOldTags(),e.addOptions([f])}g(c)}function g(a){e.trigger("select",{data:a})}var e=this;c.term=c.term||"";var h=this.tokenizer(c,this.options,f);h.term!==c.term&&(this.$search.length&&(this.$search.val(h.term),this.$search.focus()),c.term=h.term),b.call(this,c,d)},b.prototype.tokenizer=function(b,c,d,e){for(var f=d.get("tokenSeparators")||[],g=c.term,h=0,i=this.createTag||function(a){return{id:a.term,text:a.term}
};h<g.length;){var j=g[h];if(-1!==a.inArray(j,f)){var k=g.substr(0,h),l=a.extend({},c,{term:k}),m=i(l);null!=m?(e(m),g=g.substr(h+1)||"",h=0):h++}else h++}return{term:g}},b}),c.define("select2/data/minimumInputLength",[],function(){function a(a,b,c){this.minimumInputLength=c.get("minimumInputLength"),a.call(this,b,c)}return a.prototype.query=function(a,b,c){return b.term=b.term||"",b.term.length<this.minimumInputLength?(this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:b.term,params:b}}),void 0):(a.call(this,b,c),void 0)
},a}),c.define("select2/data/maximumInputLength",[],function(){function a(a,b,c){this.maximumInputLength=c.get("maximumInputLength"),a.call(this,b,c)}return a.prototype.query=function(a,b,c){return b.term=b.term||"",this.maximumInputLength>0&&b.term.length>this.maximumInputLength?(this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:b.term,params:b}}),void 0):(a.call(this,b,c),void 0)},a}),c.define("select2/data/maximumSelectionLength",[],function(){function a(a,b,c){this.maximumSelectionLength=c.get("maximumSelectionLength"),a.call(this,b,c)
}return a.prototype.query=function(a,b,c){var d=this;this.current(function(e){var f=null!=e?e.length:0;return d.maximumSelectionLength>0&&f>=d.maximumSelectionLength?(d.trigger("results:message",{message:"maximumSelected",args:{maximum:d.maximumSelectionLength}}),void 0):(a.call(d,b,c),void 0)})},a}),c.define("select2/dropdown",["jquery","./utils"],function(a,b){function c(a,b){this.$element=a,this.options=b,c.__super__.constructor.call(this)}return b.Extend(c,b.Observable),c.prototype.render=function(){var b=a('<span class="select2-dropdown"><span class="select2-results"></span></span>');
return b.attr("dir",this.options.get("dir")),this.$dropdown=b,b},c.prototype.bind=function(){},c.prototype.position=function(){},c.prototype.destroy=function(){this.$dropdown.remove()},c}),c.define("select2/dropdown/search",["jquery","../utils"],function(a){function c(){}return c.prototype.render=function(b){var c=b.call(this),d=a('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /></span>');
return this.$searchContainer=d,this.$search=d.find("input"),c.prepend(d),c},c.prototype.bind=function(b,c,d){var e=this;b.call(this,c,d),this.$search.on("keydown",function(a){e.trigger("keypress",a),e._keyUpPrevented=a.isDefaultPrevented()}),this.$search.on("input",function(){a(this).off("keyup")}),this.$search.on("keyup input",function(a){e.handleSearch(a)}),c.on("open",function(){e.$search.attr("tabindex",0),e.$search.focus(),window.setTimeout(function(){e.$search.focus()},0)}),c.on("close",function(){e.$search.attr("tabindex",-1),e.$search.val("")
}),c.on("focus",function(){c.isOpen()&&e.$search.focus()}),c.on("results:all",function(a){if(null==a.query.term||""===a.query.term){var b=e.showSearch(a);b?e.$searchContainer.removeClass("select2-search--hide"):e.$searchContainer.addClass("select2-search--hide")}})},c.prototype.handleSearch=function(){if(!this._keyUpPrevented){var b=this.$search.val();this.trigger("query",{term:b})}this._keyUpPrevented=!1},c.prototype.showSearch=function(){return!0},c}),c.define("select2/dropdown/hidePlaceholder",[],function(){function a(a,b,c,d){this.placeholder=this.normalizePlaceholder(c.get("placeholder")),a.call(this,b,c,d)
}return a.prototype.append=function(a,b){b.results=this.removePlaceholder(b.results),a.call(this,b)},a.prototype.normalizePlaceholder=function(a,b){return"string"==typeof b&&(b={id:"",text:b}),b},a.prototype.removePlaceholder=function(a,b){for(var c=b.slice(0),d=b.length-1;d>=0;d--){var e=b[d];this.placeholder.id===e.id&&c.splice(d,1)}return c},a}),c.define("select2/dropdown/infiniteScroll",["jquery"],function(a){function b(a,b,c,d){this.lastParams={},a.call(this,b,c,d),this.$loadingMore=this.createLoadingMore(),this.loading=!1
}return b.prototype.append=function(a,b){this.$loadingMore.remove(),this.loading=!1,a.call(this,b),this.showLoadingMore(b)&&this.$results.append(this.$loadingMore)},b.prototype.bind=function(b,c,d){var e=this;b.call(this,c,d),c.on("query",function(a){e.lastParams=a,e.loading=!0}),c.on("query:append",function(a){e.lastParams=a,e.loading=!0}),this.$results.on("scroll",function(){var b=a.contains(document.documentElement,e.$loadingMore[0]);if(!e.loading&&b){var c=e.$results.offset().top+e.$results.outerHeight(!1),d=e.$loadingMore.offset().top+e.$loadingMore.outerHeight(!1);
c+50>=d&&e.loadMore()}})},b.prototype.loadMore=function(){this.loading=!0;var b=a.extend({},{page:1},this.lastParams);b.page++,this.trigger("query:append",b)},b.prototype.showLoadingMore=function(a,b){return b.pagination&&b.pagination.more},b.prototype.createLoadingMore=function(){var b=a('<li class="select2-results__option select2-results__option--load-more"role="treeitem" aria-disabled="true"></li>'),c=this.options.get("translations").get("loadingMore");return b.html(c(this.lastParams)),b},b}),c.define("select2/dropdown/attachBody",["jquery","../utils"],function(a,b){function c(b,c,d){this.$dropdownParent=d.get("dropdownParent")||a(document.body),b.call(this,c,d)
}return c.prototype.bind=function(a,b,c){var d=this,e=!1;a.call(this,b,c),b.on("open",function(){d._showDropdown(),d._attachPositioningHandler(b),e||(e=!0,b.on("results:all",function(){d._positionDropdown(),d._resizeDropdown()}),b.on("results:append",function(){d._positionDropdown(),d._resizeDropdown()}))}),b.on("close",function(){d._hideDropdown(),d._detachPositioningHandler(b)}),this.$dropdownContainer.on("mousedown",function(a){a.stopPropagation()})},c.prototype.destroy=function(a){a.call(this),this.$dropdownContainer.remove()
},c.prototype.position=function(a,b,c){b.attr("class",c.attr("class")),b.removeClass("select2"),b.addClass("select2-container--open"),b.css({position:"absolute",top:-999999}),this.$container=c},c.prototype.render=function(b){var c=a("<span></span>"),d=b.call(this);return c.append(d),this.$dropdownContainer=c,c},c.prototype._hideDropdown=function(){this.$dropdownContainer.detach()},c.prototype._attachPositioningHandler=function(c,d){var e=this,f="scroll.select2."+d.id,g="resize.select2."+d.id,h="orientationchange.select2."+d.id,i=this.$container.parents().filter(b.hasScroll);
i.each(function(){a(this).data("select2-scroll-position",{x:a(this).scrollLeft(),y:a(this).scrollTop()})}),i.on(f,function(){var c=a(this).data("select2-scroll-position");a(this).scrollTop(c.y)}),a(window).on(f+" "+g+" "+h,function(){e._positionDropdown(),e._resizeDropdown()})},c.prototype._detachPositioningHandler=function(c,d){var e="scroll.select2."+d.id,f="resize.select2."+d.id,g="orientationchange.select2."+d.id,h=this.$container.parents().filter(b.hasScroll);h.off(e),a(window).off(e+" "+f+" "+g)},c.prototype._positionDropdown=function(){var b=a(window),c=this.$dropdown.hasClass("select2-dropdown--above"),d=this.$dropdown.hasClass("select2-dropdown--below"),e=null,f=this.$container.offset();
f.bottom=f.top+this.$container.outerHeight(!1);var g={height:this.$container.outerHeight(!1)};g.top=f.top,g.bottom=f.top+g.height;var h={height:this.$dropdown.outerHeight(!1)},i={top:b.scrollTop(),bottom:b.scrollTop()+b.height()},j=i.top<f.top-h.height,k=i.bottom>f.bottom+h.height,l={left:f.left,top:g.bottom},m=this.$dropdownParent;"static"===m.css("position")&&(m=m.offsetParent());var n=m.offset();l.top-=n.top,l.left-=n.left,c||d||(e="below"),k||!j||c?!j&&k&&c&&(e="below"):e="above",("above"==e||c&&"below"!==e)&&(l.top=g.top-n.top-h.height),null!=e&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+e),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+e)),this.$dropdownContainer.css(l)
},c.prototype._resizeDropdown=function(){var a={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(a.minWidth=a.width,a.position="relative",a.width="auto"),this.$dropdown.css(a)},c.prototype._showDropdown=function(){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},c}),c.define("select2/dropdown/minimumResultsForSearch",[],function(){function a(b){for(var c=0,d=0;d<b.length;d++){var e=b[d];e.children?c+=a(e.children):c++}return c
}function b(a,b,c,d){this.minimumResultsForSearch=c.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),a.call(this,b,c,d)}return b.prototype.showSearch=function(b,c){return a(c.data.results)<this.minimumResultsForSearch?!1:b.call(this,c)},b}),c.define("select2/dropdown/selectOnClose",[],function(){function a(){}return a.prototype.bind=function(a,b,c){var d=this;a.call(this,b,c),b.on("close",function(a){d._handleSelectOnClose(a)})},a.prototype._handleSelectOnClose=function(a,b){if(b&&null!=b.originalSelect2Event){var c=b.originalSelect2Event;
if("select"===c._type||"unselect"===c._type)return}var d=this.getHighlightedResults();if(!(d.length<1)){var e=d.data("data");null!=e.element&&e.element.selected||null==e.element&&e.selected||this.trigger("select",{data:e})}},a}),c.define("select2/dropdown/closeOnSelect",[],function(){function a(){}return a.prototype.bind=function(a,b,c){var d=this;a.call(this,b,c),b.on("select",function(a){d._selectTriggered(a)}),b.on("unselect",function(a){d._selectTriggered(a)})},a.prototype._selectTriggered=function(a,b){var c=b.originalEvent;
c&&c.ctrlKey||this.trigger("close",{originalEvent:c,originalSelect2Event:b})},a}),c.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(a){var b=a.input.length-a.maximum,c="Please delete "+b+" character";return 1!=b&&(c+="s"),c},inputTooShort:function(a){var b=a.minimum-a.input.length,c="Please enter "+b+" or more characters";return c},loadingMore:function(){return"Loading more results\u2026"},maximumSelected:function(a){var b="You can only select "+a.maximum+" item";
return 1!=a.maximum&&(b+="s"),b},noResults:function(){return"No results found"},searching:function(){return"Searching\u2026"}}}),c.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C){function D(){this.reset()
}D.prototype.apply=function(l){if(l=a.extend(!0,{},this.defaults,l),null==l.dataAdapter){if(l.dataAdapter=null!=l.ajax?o:null!=l.data?n:m,l.minimumInputLength>0&&(l.dataAdapter=j.Decorate(l.dataAdapter,r)),l.maximumInputLength>0&&(l.dataAdapter=j.Decorate(l.dataAdapter,s)),l.maximumSelectionLength>0&&(l.dataAdapter=j.Decorate(l.dataAdapter,t)),l.tags&&(l.dataAdapter=j.Decorate(l.dataAdapter,p)),(null!=l.tokenSeparators||null!=l.tokenizer)&&(l.dataAdapter=j.Decorate(l.dataAdapter,q)),null!=l.query){var C=b(l.amdBase+"compat/query");
l.dataAdapter=j.Decorate(l.dataAdapter,C)}if(null!=l.initSelection){var D=b(l.amdBase+"compat/initSelection");l.dataAdapter=j.Decorate(l.dataAdapter,D)}}if(null==l.resultsAdapter&&(l.resultsAdapter=c,null!=l.ajax&&(l.resultsAdapter=j.Decorate(l.resultsAdapter,x)),null!=l.placeholder&&(l.resultsAdapter=j.Decorate(l.resultsAdapter,w)),l.selectOnClose&&(l.resultsAdapter=j.Decorate(l.resultsAdapter,A))),null==l.dropdownAdapter){if(l.multiple)l.dropdownAdapter=u;else{var E=j.Decorate(u,v);l.dropdownAdapter=E}if(0!==l.minimumResultsForSearch&&(l.dropdownAdapter=j.Decorate(l.dropdownAdapter,z)),l.closeOnSelect&&(l.dropdownAdapter=j.Decorate(l.dropdownAdapter,B)),null!=l.dropdownCssClass||null!=l.dropdownCss||null!=l.adaptDropdownCssClass){var F=b(l.amdBase+"compat/dropdownCss");
l.dropdownAdapter=j.Decorate(l.dropdownAdapter,F)}l.dropdownAdapter=j.Decorate(l.dropdownAdapter,y)}if(null==l.selectionAdapter){if(l.selectionAdapter=l.multiple?e:d,null!=l.placeholder&&(l.selectionAdapter=j.Decorate(l.selectionAdapter,f)),l.allowClear&&(l.selectionAdapter=j.Decorate(l.selectionAdapter,g)),l.multiple&&(l.selectionAdapter=j.Decorate(l.selectionAdapter,h)),null!=l.containerCssClass||null!=l.containerCss||null!=l.adaptContainerCssClass){var G=b(l.amdBase+"compat/containerCss");l.selectionAdapter=j.Decorate(l.selectionAdapter,G)
}l.selectionAdapter=j.Decorate(l.selectionAdapter,i)}if("string"==typeof l.language)if(l.language.indexOf("-")>0){var H=l.language.split("-"),I=H[0];l.language=[l.language,I]}else l.language=[l.language];if(a.isArray(l.language)){var J=new k;l.language.push("en");for(var K=l.language,L=0;L<K.length;L++){var M=K[L],N={};try{N=k.loadPath(M)}catch(O){try{M=this.defaults.amdLanguageBase+M,N=k.loadPath(M)}catch(P){l.debug&&window.console&&console.warn&&console.warn('Select2: The language file for "'+M+'" could not be automatically loaded. A fallback will be used instead.');
continue}}J.extend(N)}l.translations=J}else{var Q=k.loadPath(this.defaults.amdLanguageBase+"en"),R=new k(l.language);R.extend(Q),l.translations=R}return l},D.prototype.reset=function(){function b(a){function b(a){return l[a]||a}return a.replace(/[^\u0000-\u007E]/g,b)}function c(d,e){if(""===a.trim(d.term))return e;if(e.children&&e.children.length>0){for(var f=a.extend(!0,{},e),g=e.children.length-1;g>=0;g--){var h=e.children[g],i=c(d,h);null==i&&f.children.splice(g,1)}return f.children.length>0?f:c(d,f)}var j=b(e.text).toUpperCase(),k=b(d.term).toUpperCase();
return j.indexOf(k)>-1?e:null}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:j.escapeMarkup,language:C,matcher:c,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,sorter:function(a){return a},templateResult:function(a){return a.text},templateSelection:function(a){return a.text},theme:"default",width:"resolve"}},D.prototype.set=function(b,c){var d=a.camelCase(b),e={};e[d]=c;var f=j._convertData(e);
a.extend(this.defaults,f)};var E=new D;return E}),c.define("select2/options",["require","jquery","./defaults","./utils"],function(a,b,c,d){function e(b,e){if(this.options=b,null!=e&&this.fromElement(e),this.options=c.apply(this.options),e&&e.is("input")){var f=a(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=d.Decorate(this.options.dataAdapter,f)}}return e.prototype.fromElement=function(a){var c=["select2"];null==this.options.multiple&&(this.options.multiple=a.prop("multiple")),null==this.options.disabled&&(this.options.disabled=a.prop("disabled")),null==this.options.language&&(a.prop("lang")?this.options.language=a.prop("lang").toLowerCase():a.closest("[lang]").prop("lang")&&(this.options.language=a.closest("[lang]").prop("lang"))),null==this.options.dir&&(this.options.dir=a.prop("dir")?a.prop("dir"):a.closest("[dir]").prop("dir")?a.closest("[dir]").prop("dir"):"ltr"),a.prop("disabled",this.options.disabled),a.prop("multiple",this.options.multiple),a.data("select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),a.data("data",a.data("select2Tags")),a.data("tags",!0)),a.data("ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),a.attr("ajax--url",a.data("ajaxUrl")),a.data("ajax--url",a.data("ajaxUrl")));
var e={};e=b.fn.jquery&&"1."==b.fn.jquery.substr(0,2)&&a[0].dataset?b.extend(!0,{},a[0].dataset,a.data()):a.data();var f=b.extend(!0,{},e);f=d._convertData(f);for(var g in f)b.inArray(g,c)>-1||(b.isPlainObject(this.options[g])?b.extend(this.options[g],f[g]):this.options[g]=f[g]);return this},e.prototype.get=function(a){return this.options[a]},e.prototype.set=function(a,b){this.options[a]=b},e}),c.define("select2/core",["jquery","./options","./utils","./keys"],function(a,b,c,d){var e=function(a,c){null!=a.data("select2")&&a.data("select2").destroy(),this.$element=a,this.id=this._generateId(a),c=c||{},this.options=new b(c,a),e.__super__.constructor.call(this);
var d=a.attr("tabindex")||0;a.data("old-tabindex",d),a.attr("tabindex","-1");var f=this.options.get("dataAdapter");this.dataAdapter=new f(a,this.options);var g=this.render();this._placeContainer(g);var h=this.options.get("selectionAdapter");this.selection=new h(a,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,g);var i=this.options.get("dropdownAdapter");this.dropdown=new i(a,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,g);
var j=this.options.get("resultsAdapter");this.results=new j(a,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var k=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current(function(a){k.trigger("selection:update",{data:a})}),a.addClass("select2-hidden-accessible"),a.attr("aria-hidden","true"),this._syncAttributes(),a.data("select2",this)
};return c.Extend(e,c.Observable),e.prototype._generateId=function(a){var b="";return b=null!=a.attr("id")?a.attr("id"):null!=a.attr("name")?a.attr("name")+"-"+c.generateChars(2):c.generateChars(4),b=b.replace(/(:|\.|\[|\]|,)/g,""),b="select2-"+b},e.prototype._placeContainer=function(a){a.insertAfter(this.$element);var b=this._resolveWidth(this.$element,this.options.get("width"));null!=b&&a.css("width",b)},e.prototype._resolveWidth=function(a,b){var c=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;
if("resolve"==b){var d=this._resolveWidth(a,"style");return null!=d?d:this._resolveWidth(a,"element")}if("element"==b){var e=a.outerWidth(!1);return 0>=e?"auto":e+"px"}if("style"==b){var f=a.attr("style");if("string"!=typeof f)return null;for(var g=f.split(";"),h=0,i=g.length;i>h;h+=1){var j=g[h].replace(/\s/g,""),k=j.match(c);if(null!==k&&k.length>=1)return k[1]}return null}return b},e.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)
},e.prototype._registerDomEvents=function(){var b=this;this.$element.on("change.select2",function(){b.dataAdapter.current(function(a){b.trigger("selection:update",{data:a})})}),this.$element.on("focus.select2",function(a){b.trigger("focus",a)}),this._syncA=c.bind(this._syncAttributes,this),this._syncS=c.bind(this._syncSubtree,this),this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._syncA);var d=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;
null!=d?(this._observer=new d(function(c){a.each(c,b._syncA),a.each(c,b._syncS)}),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})):this.$element[0].addEventListener&&(this.$element[0].addEventListener("DOMAttrModified",b._syncA,!1),this.$element[0].addEventListener("DOMNodeInserted",b._syncS,!1),this.$element[0].addEventListener("DOMNodeRemoved",b._syncS,!1))},e.prototype._registerDataEvents=function(){var a=this;this.dataAdapter.on("*",function(b,c){a.trigger(b,c)})},e.prototype._registerSelectionEvents=function(){var b=this,c=["toggle","focus"];
this.selection.on("toggle",function(){b.toggleDropdown()}),this.selection.on("focus",function(a){b.focus(a)}),this.selection.on("*",function(d,e){-1===a.inArray(d,c)&&b.trigger(d,e)})},e.prototype._registerDropdownEvents=function(){var a=this;this.dropdown.on("*",function(b,c){a.trigger(b,c)})},e.prototype._registerResultsEvents=function(){var a=this;this.results.on("*",function(b,c){a.trigger(b,c)})},e.prototype._registerEvents=function(){var a=this;this.on("open",function(){a.$container.addClass("select2-container--open")
}),this.on("close",function(){a.$container.removeClass("select2-container--open")}),this.on("enable",function(){a.$container.removeClass("select2-container--disabled")}),this.on("disable",function(){a.$container.addClass("select2-container--disabled")}),this.on("blur",function(){a.$container.removeClass("select2-container--focus")}),this.on("query",function(b){a.isOpen()||a.trigger("open",{}),this.dataAdapter.query(b,function(c){a.trigger("results:all",{data:c,query:b})})}),this.on("query:append",function(b){this.dataAdapter.query(b,function(c){a.trigger("results:append",{data:c,query:b})
})}),this.on("keypress",function(b){var c=b.which;a.isOpen()?c===d.ESC||c===d.TAB||c===d.UP&&b.altKey?(a.close(),b.preventDefault()):c===d.ENTER?(a.trigger("results:select",{}),b.preventDefault()):c===d.SPACE&&b.ctrlKey?(a.trigger("results:toggle",{}),b.preventDefault()):c===d.UP?(a.trigger("results:previous",{}),b.preventDefault()):c===d.DOWN&&(a.trigger("results:next",{}),b.preventDefault()):(c===d.ENTER||c===d.SPACE||c===d.DOWN&&b.altKey)&&(a.open(),b.preventDefault())})},e.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.options.get("disabled")?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})
},e.prototype._syncSubtree=function(a,b){var c=!1,d=this;if(!a||!a.target||"OPTION"===a.target.nodeName||"OPTGROUP"===a.target.nodeName){if(b)if(b.addedNodes&&b.addedNodes.length>0)for(var e=0;e<b.addedNodes.length;e++){var f=b.addedNodes[e];f.selected&&(c=!0)}else b.removedNodes&&b.removedNodes.length>0&&(c=!0);else c=!0;c&&this.dataAdapter.current(function(a){d.trigger("selection:update",{data:a})})}},e.prototype.trigger=function(a,b){var c=e.__super__.trigger,d={open:"opening",close:"closing",select:"selecting",unselect:"unselecting"};
if(void 0===b&&(b={}),a in d){var f=d[a],g={prevented:!1,name:a,args:b};if(c.call(this,f,g),g.prevented)return b.prevented=!0,void 0}c.call(this,a,b)},e.prototype.toggleDropdown=function(){this.options.get("disabled")||(this.isOpen()?this.close():this.open())},e.prototype.open=function(){this.isOpen()||this.trigger("query",{})},e.prototype.close=function(){this.isOpen()&&this.trigger("close",{})},e.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},e.prototype.hasFocus=function(){return this.$container.hasClass("select2-container--focus")
},e.prototype.focus=function(){this.hasFocus()||(this.$container.addClass("select2-container--focus"),this.trigger("focus",{}))},e.prototype.enable=function(a){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),(null==a||0===a.length)&&(a=[!0]);var b=!a[0];this.$element.prop("disabled",b)},e.prototype.data=function(){this.options.get("debug")&&arguments.length>0&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');
var a=[];return this.dataAdapter.current(function(b){a=b}),a},e.prototype.val=function(b){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==b||0===b.length)return this.$element.val();var c=b[0];a.isArray(c)&&(c=a.map(c,function(a){return a.toString()})),this.$element.val(c).trigger("change")},e.prototype.destroy=function(){this.$container.remove(),this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._syncA),null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&(this.$element[0].removeEventListener("DOMAttrModified",this._syncA,!1),this.$element[0].removeEventListener("DOMNodeInserted",this._syncS,!1),this.$element[0].removeEventListener("DOMNodeRemoved",this._syncS,!1)),this._syncA=null,this._syncS=null,this.$element.off(".select2"),this.$element.attr("tabindex",this.$element.data("old-tabindex")),this.$element.removeClass("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null
},e.prototype.render=function(){var b=a('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return b.attr("dir",this.options.get("dir")),this.$container=b,this.$container.addClass("select2-container--"+this.options.get("theme")),b.data("element",this.$element),b},e}),c.define("jquery-mousewheel",["jquery"],function(a){return a}),c.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults"],function(a,b,c,d){if(null==a.fn.select2){var e=["open","close","destroy"];
a.fn.select2=function(b){if(b=b||{},"object"==typeof b)return this.each(function(){{var d=a.extend(!0,{},b);new c(a(this),d)}}),this;if("string"==typeof b){var d,f=Array.prototype.slice.call(arguments,1);return this.each(function(){var c=a(this).data("select2");null==c&&window.console&&console.error&&console.error("The select2('"+b+"') method was called on an element that is not using Select2."),d=c[b].apply(c,f)}),a.inArray(b,e)>-1?this:d}throw new Error("Invalid arguments for Select2: "+b)}}return null==a.fn.select2.defaults&&(a.fn.select2.defaults=d),c
}),{define:c.define,require:c.require}}(),d=c.require("jquery.select2");return b.fn.select2.amd=c,d})};c(),b.resolveWith(c)};FD40.module("select2",a)}(),function(){var a=function(a){var b=a,c=this,d=function(){!function(a,b,c){"use strict";function B(b,d,e){function Db(c){var d=0,e=Z.length;if(R.old=a.extend({},R),P=M?0:N[K.horizontal?"width":"height"](),U=S[K.horizontal?"width":"height"](),Q=M?b:O[K.horizontal?"outerWidth":"outerHeight"](),Z.length=0,R.start=0,R.end=y(Q-P,0),ib){d=_.length,$=O.children(K.itemSelector),_.length=0;
var l,f=H(O,K.horizontal?"paddingLeft":"paddingTop"),g=H(O,K.horizontal?"paddingRight":"paddingBottom"),h="border-box"===a($).css("boxSizing"),i="none"!==$.css("float"),j=0,k=$.length-1;Q=0,$.each(function(b,c){var d=a(c),e=c.getBoundingClientRect(),h=x(K.horizontal?e.width||e.right-e.left:e.height||e.bottom-e.top),m=H(d,K.horizontal?"marginLeft":"marginTop"),n=H(d,K.horizontal?"marginRight":"marginBottom"),o=h+m+n,p=!m||!n,q={};q.el=c,q.size=p?h:o,q.half=q.size/2,q.start=Q+(p?m:0),q.center=q.start-x(P/2-q.size/2),q.end=q.start-P+q.size,b||(Q+=f),Q+=o,K.horizontal||i||n&&m&&b>0&&(Q-=z(m,n)),b===k&&(q.end+=g,Q+=g,j=p?n:0),_.push(q),l=q
}),O[0].style[K.horizontal?"width":"height"]=(h?Q:Q-f-g)+"px",Q-=j,_.length?(R.start=_[0][gb?"center":"start"],R.end=gb?l.center:Q>P?l.end:R.start):R.start=R.end=0}if(R.center=x(R.end/2+R.start/2),Ob(),T.length&&U>0&&(K.dynamicHandle?(V=R.start===R.end?U:x(U*P/Q),V=I(V,K.minHandleSize,U),T[0].style[K.horizontal?"width":"height"]=V+"px"):V=T[K.horizontal?"outerWidth":"outerHeight"](),W.end=U-V,xb||Gb()),!M&&P>0){var m=R.start,n="";if(ib)a.each(_,function(a,b){gb?Z.push(b.center):b.start+b.size>m&&m<=R.end&&(m=b.start,Z.push(m),m+=P,m>R.end&&m<R.end+P&&Z.push(R.end))
});else for(;m-P<R.end;)Z.push(m),m+=P;if(X[0]&&e!==Z.length){for(var o=0;o<Z.length;o++)n+=K.pageBuilder.call(L,o);Y=X.html(n).children(),Y.eq(ab.activePage).addClass(K.activeClass)}}if(ab.slideeSize=Q,ab.frameSize=P,ab.sbSize=U,ab.handleSize=V,ib){c&&null!=K.startAt&&(Mb(K.startAt),L[hb?"toCenter":"toStart"](K.startAt));var p=_[ab.activeItem];Eb(hb&&p?p.center:I(R.dest,R.start,R.end))}else c?null!=K.startAt&&Eb(K.startAt,1):Eb(I(R.dest,R.start,R.end));hc("load")}function Eb(a,b,c){if(ib&&vb.released&&!c){var d=Nb(a),e=a>R.start&&a<R.end;
hb?(e&&(a=_[d.centerItem].center),gb&&K.activateMiddle&&Mb(d.centerItem)):e&&(a=_[d.firstItem].start)}vb.init&&vb.slidee&&K.elasticBounds?a>R.end?a=R.end+(a-R.end)/6:a<R.start&&(a=R.start+(a-R.start)/6):a=I(a,R.start,R.end),tb.start=+new Date,tb.time=0,tb.from=R.cur,tb.to=a,tb.delta=a-R.cur,tb.tweesing=vb.tweese||vb.init&&!vb.slidee,tb.immediate=!tb.tweesing&&(b||vb.init&&vb.slidee||!K.speed),vb.tweese=0,a!==R.dest&&(R.dest=a,hc("change"),xb||Fb()),Sb(),Ob(),Pb(),Hb()}function Fb(){if(L.initialized){if(!xb)return xb=h(Fb),vb.released&&hc("moveStart"),void 0;
tb.immediate?R.cur=tb.to:tb.tweesing?(tb.tweeseDelta=tb.to-R.cur,u(tb.tweeseDelta)<.1?R.cur=tb.to:R.cur+=tb.tweeseDelta*(vb.released?K.swingSpeed:K.syncSpeed)):(tb.time=z(+new Date-tb.start,K.speed),R.cur=tb.from+tb.delta*a.easing[K.easing](tb.time/K.speed,tb.time,0,1,K.speed)),tb.to===R.cur?(R.cur=tb.to,vb.tweese=xb=0):xb=h(Fb),hc("move"),M||(i?O[0].style[i]=j+(K.horizontal?"translateX":"translateY")+"("+-R.cur+"px)":O[0].style[K.horizontal?"left":"top"]=-x(R.cur)+"px"),!xb&&vb.released&&hc("moveEnd"),Gb()}}function Gb(){T.length&&(W.cur=R.start===R.end?0:((vb.init&&!vb.slidee?R.dest:R.cur)-R.start)/(R.end-R.start)*W.end,W.cur=I(x(W.cur),W.start,W.end),sb.hPos!==W.cur&&(sb.hPos=W.cur,i?T[0].style[i]=j+(K.horizontal?"translateX":"translateY")+"("+W.cur+"px)":T[0].style[K.horizontal?"left":"top"]=W.cur+"px"))
}function Hb(){Y[0]&&sb.page!==ab.activePage&&(sb.page=ab.activePage,Y.removeClass(K.activeClass).eq(ab.activePage).addClass(K.activeClass),hc("activePage",sb.page))}function Ib(){ub.speed&&R.cur!==(ub.speed>0?R.end:R.start)||L.stop(),Ab=vb.init?h(Ib):0,ub.now=+new Date,ub.pos=R.cur+(ub.now-ub.lastTime)/1e3*ub.speed,Eb(vb.init?ub.pos:x(ub.pos)),vb.init||R.cur!==R.dest||hc("moveEnd"),ub.lastTime=ub.now}function Jb(a,b,d){if("boolean"===C(b)&&(d=b,b=c),b===c)Eb(R[a],d);else{if(hb&&"center"!==a)return;var e=L.getPos(b);
e&&Eb(e[a],d,!hb)}}function Kb(a){return null!=a?G(a)?a>=0&&a<_.length?a:-1:$.index(a):-1}function Lb(a){return Kb(G(a)&&0>a?a+_.length:a)}function Mb(a,b){var c=Kb(a);return!ib||0>c?!1:((sb.active!==c||b)&&($.eq(ab.activeItem).removeClass(K.activeClass),$.eq(c).addClass(K.activeClass),sb.active=ab.activeItem=c,Pb(),hc("active",c)),c)}function Nb(a){a=I(G(a)?a:R.dest,R.start,R.end);var b={},c=gb?0:P/2;if(!M)for(var d=0,e=Z.length;e>d;d++){if(a>=R.end||d===Z.length-1){b.activePage=Z.length-1;break}if(a<=Z[d]+c){b.activePage=d;
break}}if(ib){for(var f=!1,g=!1,h=!1,i=0,j=_.length;j>i;i++)if(f===!1&&a<=_[i].start+_[i].half&&(f=i),h===!1&&a<=_[i].center+_[i].half&&(h=i),i===j-1||a<=_[i].end+_[i].half){g=i;break}b.firstItem=G(f)?f:0,b.centerItem=G(h)?h:b.firstItem,b.lastItem=G(g)?g:b.centerItem}return b}function Ob(b){a.extend(ab,Nb(b))}function Pb(){var a=R.dest<=R.start,b=R.dest>=R.end,c=(a?1:0)|(b?2:0);if(sb.slideePosState!==c&&(sb.slideePosState=c,pb.is("button,input")&&pb.prop("disabled",a),qb.is("button,input")&&qb.prop("disabled",b),pb.add(mb)[a?"addClass":"removeClass"](K.disabledClass),qb.add(lb)[b?"addClass":"removeClass"](K.disabledClass)),sb.fwdbwdState!==c&&vb.released&&(sb.fwdbwdState=c,mb.is("button,input")&&mb.prop("disabled",a),lb.is("button,input")&&lb.prop("disabled",b)),ib&&null!=ab.activeItem){var d=0===ab.activeItem,e=ab.activeItem>=_.length-1,f=(d?1:0)|(e?2:0);
sb.itemsButtonState!==f&&(sb.itemsButtonState=f,nb.is("button,input")&&nb.prop("disabled",d),ob.is("button,input")&&ob.prop("disabled",e),nb[d?"addClass":"removeClass"](K.disabledClass),ob[e?"addClass":"removeClass"](K.disabledClass))}}function Qb(a,b,c){if(a=Lb(a),b=Lb(b),a>-1&&b>-1&&a!==b&&(!c||b!==a-1)&&(c||b!==a+1)){$.eq(a)[c?"insertAfter":"insertBefore"](_[b].el);var d=b>a?a:c?b:b-1,e=a>b?a:c?b+1:b,f=a>b;null!=ab.activeItem&&(a===ab.activeItem?sb.active=ab.activeItem=c?f?b+1:b:f?b:b-1:ab.activeItem>d&&ab.activeItem<e&&(sb.active=ab.activeItem+=f?1:-1)),Db()
}}function Rb(a,b){for(var c=0,d=rb[a].length;d>c;c++)if(rb[a][c]===b)return c;return-1}function Sb(){vb.released&&!L.isPaused&&L.resume()}function Tb(a){return x(I(a,W.start,W.end)/W.end*(R.end-R.start))+R.start}function Ub(){vb.history[0]=vb.history[1],vb.history[1]=vb.history[2],vb.history[2]=vb.history[3],vb.history[3]=vb.delta}function Vb(a){vb.released=0,vb.source=a,vb.slidee="slidee"===a}function Wb(b){var c="touchstart"===b.type,d=b.data.source,e="slidee"===d;vb.init||!c&&Zb(b.target)||("handle"!==d||K.dragHandle&&W.start!==W.end)&&(!e||(c?K.touchDragging:K.mouseDragging&&b.which<2))&&(c||D(b),Vb(d),vb.init=0,vb.$source=a(b.target),vb.touch=c,vb.pointer=c?b.originalEvent.touches[0]:b,vb.initX=vb.pointer.pageX,vb.initY=vb.pointer.pageY,vb.initPos=e?R.cur:W.cur,vb.start=+new Date,vb.time=0,vb.path=0,vb.delta=0,vb.locked=0,vb.history=[0,0,0,0],vb.pathToLock=e?c?30:10:0,k.on(c?n:m,Xb),L.pause(1),(e?O:T).addClass(K.draggedClass),hc("moveStart"),e&&(yb=setInterval(Ub,10)))
}function Xb(a){if(vb.released="mouseup"===a.type||"touchend"===a.type,vb.pointer=vb.touch?a.originalEvent[vb.released?"changedTouches":"touches"][0]:a,vb.pathX=vb.pointer.pageX-vb.initX,vb.pathY=vb.pointer.pageY-vb.initY,vb.path=v(w(vb.pathX,2)+w(vb.pathY,2)),vb.delta=K.horizontal?vb.pathX:vb.pathY,vb.released||!(vb.path<1)){if(!vb.init){if(vb.path<K.dragThreshold)return vb.released?Yb():c;if(!(K.horizontal?u(vb.pathX)>u(vb.pathY):u(vb.pathX)<u(vb.pathY)))return Yb();vb.init=1}D(a),!vb.locked&&vb.path>vb.pathToLock&&vb.slidee&&(vb.locked=1,vb.$source.on(p,E)),vb.released&&(Yb(),K.releaseSwing&&vb.slidee&&(vb.swing=(vb.delta-vb.history[0])/40*300,vb.delta+=vb.swing,vb.tweese=u(vb.swing)>10)),Eb(vb.slidee?x(vb.initPos-vb.delta):Tb(vb.initPos+vb.delta))
}}function Yb(){clearInterval(yb),vb.released=!0,k.off(vb.touch?n:m,Xb),(vb.slidee?O:T).removeClass(K.draggedClass),setTimeout(function(){vb.$source.off(p,E)}),R.cur===R.dest&&vb.init&&hc("moveEnd"),L.resume(1),vb.init=0}function Zb(b){return~a.inArray(b.nodeName,r)||a(b).is(K.interactive)}function $b(){L.stop(),k.off("mouseup",$b)}function _b(a){switch(D(a),this){case lb[0]:case mb[0]:L.moveBy(lb.is(this)?K.moveBy:-K.moveBy),k.on("mouseup",$b);break;case nb[0]:L.prev();break;case ob[0]:L.next();break;case pb[0]:L.prevPage();
break;case qb[0]:L.nextPage()}}function ac(a){return wb.curDelta=(K.horizontal?a.deltaY||a.deltaX:a.deltaY)||-a.wheelDelta,wb.curDelta/=1===a.deltaMode?3:100,ib?(t=+new Date,wb.last<t-wb.resetTime&&(wb.delta=0),wb.last=t,wb.delta+=wb.curDelta,u(wb.delta)<1?wb.finalDelta=0:(wb.finalDelta=x(wb.delta/1),wb.delta%=1),wb.finalDelta):wb.curDelta}function bc(a){a.originalEvent[f]=L;var b=+new Date;if(A+K.scrollHijack>b&&jb[0]!==document&&jb[0]!==window)return A=b,void 0;if(K.scrollBy&&R.start!==R.end){var c=ac(a.originalEvent);
(K.scrollTrap||c>0&&R.dest<R.end||0>c&&R.dest>R.start)&&D(a,1),L.slideBy(K.scrollBy*c)}}function cc(a){K.clickBar&&a.target===S[0]&&(D(a),Eb(Tb((K.horizontal?a.pageX-S.offset().left:a.pageY-S.offset().top)-V/2)))}function dc(a){if(K.keyboardNavBy)switch(a.which){case K.horizontal?37:38:D(a),L["pages"===K.keyboardNavBy?"prevPage":"prev"]();break;case K.horizontal?39:40:D(a),L["pages"===K.keyboardNavBy?"nextPage":"next"]()}}function ec(a){return Zb(this)?(a.originalEvent[f+"ignore"]=!0,void 0):(this.parentNode!==O[0]||a.originalEvent[f+"ignore"]||L.activate(this),void 0)
}function fc(){this.parentNode===X[0]&&L.activatePage(Y.index(this))}function gc(a){K.pauseOnHover&&L["mouseenter"===a.type?"pause":"resume"](2)}function hc(a,b){if(rb[a]){for(Cb=rb[a].length,s.length=0,Bb=0;Cb>Bb;Bb++)s.push(rb[a][Bb]);for(Bb=0;Cb>Bb;Bb++)s[Bb].call(L,a,b)}}if(!(this instanceof B))return new B(b,d,e);var Bb,Cb,K=a.extend({},B.defaults,d),L=this,M=G(b),N=a(b),O=K.slidee?a(K.slidee).eq(0):N.children().eq(0),P=0,Q=0,R={start:0,center:0,end:0,cur:0,dest:0},S=a(K.scrollBar).eq(0),T=S.children().eq(0),U=0,V=0,W={start:0,end:0,cur:0},X=a(K.pagesBar),Y=0,Z=[],$=0,_=[],ab={firstItem:0,lastItem:0,centerItem:0,activeItem:null,activePage:0},bb=new J(N[0]),cb=new J(O[0]),db=new J(S[0]),eb=new J(T[0]),fb="basic"===K.itemNav,gb="forceCentered"===K.itemNav,hb="centered"===K.itemNav||gb,ib=!M&&(fb||hb||gb),jb=K.scrollSource?a(K.scrollSource):N,kb=K.dragSource?a(K.dragSource):N,lb=a(K.forward),mb=a(K.backward),nb=a(K.prev),ob=a(K.next),pb=a(K.prevPage),qb=a(K.nextPage),rb={},sb={},tb={},ub={},vb={released:1},wb={last:0,delta:0,resetTime:200},xb=0,yb=0,zb=0,Ab=0;
M||(b=N[0]),L.initialized=0,L.frame=b,L.slidee=O[0],L.pos=R,L.rel=ab,L.items=_,L.pages=Z,L.isPaused=0,L.options=K,L.dragging=vb,L.reload=function(){Db()},L.getPos=function(a){if(ib){var b=Kb(a);return-1!==b?_[b]:!1}var c=O.find(a).eq(0);if(c[0]){var d=K.horizontal?c.offset().left-O.offset().left:c.offset().top-O.offset().top,e=c[K.horizontal?"outerWidth":"outerHeight"]();return{start:d,center:d-P/2+e/2,end:d-P+e,size:e}}return!1},L.moveBy=function(a){ub.speed=a,!vb.init&&ub.speed&&R.cur!==(ub.speed>0?R.end:R.start)&&(ub.lastTime=+new Date,ub.startPos=R.cur,Vb("button"),vb.init=1,hc("moveStart"),g(Ab),Ib())
},L.stop=function(){"button"===vb.source&&(vb.init=0,vb.released=1)},L.prev=function(){L.activate(null==ab.activeItem?0:ab.activeItem-1)},L.next=function(){L.activate(null==ab.activeItem?0:ab.activeItem+1)},L.prevPage=function(){L.activatePage(ab.activePage-1)},L.nextPage=function(){L.activatePage(ab.activePage+1)},L.slideBy=function(a,b){a&&(ib?L[hb?"toCenter":"toStart"](I((hb?ab.centerItem:ab.firstItem)+K.scrollBy*a,0,_.length)):Eb(R.dest+a,b))},L.slideTo=function(a,b){Eb(a,b)},L.toStart=function(a,b){Jb("start",a,b)
},L.toEnd=function(a,b){Jb("end",a,b)},L.toCenter=function(a,b){Jb("center",a,b)},L.getIndex=Kb,L.activate=function(a,b){var c=Mb(a);K.smart&&c!==!1&&(hb?L.toCenter(c,b):c>=ab.lastItem?L.toStart(c,b):c<=ab.firstItem?L.toEnd(c,b):Sb())},L.activatePage=function(a,b){G(a)&&Eb(Z[I(a,0,Z.length-1)],b)},L.resume=function(a){K.cycleBy&&K.cycleInterval&&("items"!==K.cycleBy||_[0]&&null!=ab.activeItem)&&!(a<L.isPaused)&&(L.isPaused=0,zb?zb=clearTimeout(zb):hc("resume"),zb=setTimeout(function(){switch(hc("cycle"),K.cycleBy){case"items":L.activate(ab.activeItem>=_.length-1?0:ab.activeItem+1);
break;case"pages":L.activatePage(ab.activePage>=Z.length-1?0:ab.activePage+1)}},K.cycleInterval))},L.pause=function(a){a<L.isPaused||(L.isPaused=a||100,zb&&(zb=clearTimeout(zb),hc("pause")))},L.toggle=function(){L[zb?"pause":"resume"]()},L.set=function(b,c){a.isPlainObject(b)?a.extend(K,b):K.hasOwnProperty(b)&&(K[b]=c)},L.add=function(b,c){var d=a(b);ib?(null==c||!_[0]||c>=_.length?d.appendTo(O):_.length&&d.insertBefore(_[c].el),null!=ab.activeItem&&c<=ab.activeItem&&(sb.active=ab.activeItem+=d.length)):O.append(d),Db()
},L.remove=function(b){if(ib){var c=Lb(b);if(c>-1){$.eq(c).remove();var d=c===ab.activeItem;null!=ab.activeItem&&c<ab.activeItem&&(sb.active=--ab.activeItem),Db(),d&&(sb.active=null,L.activate(ab.activeItem))}}else a(b).remove(),Db()},L.moveAfter=function(a,b){Qb(a,b,1)},L.moveBefore=function(a,b){Qb(a,b)},L.on=function(a,b){if("object"===C(a))for(var c in a)a.hasOwnProperty(c)&&L.on(c,a[c]);else if("function"===C(b))for(var d=a.split(" "),e=0,f=d.length;f>e;e++)rb[d[e]]=rb[d[e]]||[],-1===Rb(d[e],b)&&rb[d[e]].push(b);
else if("array"===C(b))for(var g=0,h=b.length;h>g;g++)L.on(a,b[g])},L.one=function(a,b){function c(){b.apply(L,arguments),L.off(a,c)}L.on(a,c)},L.off=function(a,b){if(b instanceof Array)for(var c=0,d=b.length;d>c;c++)L.off(a,b[c]);else for(var e=a.split(" "),f=0,g=e.length;g>f;f++)if(rb[e[f]]=rb[e[f]]||[],null==b)rb[e[f]].length=0;else{var h=Rb(e[f],b);-1!==h&&rb[e[f]].splice(h,1)}},L.destroy=function(){return B.removeInstance(b),jb.add(T).add(S).add(X).add(lb).add(mb).add(nb).add(ob).add(pb).add(qb).off("."+f),k.off("keydown",dc),nb.add(ob).add(pb).add(qb).removeClass(K.disabledClass),$&&null!=ab.activeItem&&$.eq(ab.activeItem).removeClass(K.activeClass),X.empty(),M||(N.off("."+f),bb.restore(),cb.restore(),db.restore(),eb.restore(),a.removeData(b,f)),_.length=Z.length=0,sb={},L.initialized=0,L
},L.init=function(){if(!L.initialized){if(B.getInstance(b))throw new Error("There is already a Sly instance on this element");B.storeInstance(b,L),L.on(e);var a=["overflow","position"],c=["position","webkitTransform","msTransform","transform","left","top","width","height"];bb.save.apply(bb,a),db.save.apply(db,a),cb.save.apply(cb,c),eb.save.apply(eb,c);var d=T;return M||(d=d.add(O),N.css("overflow","hidden"),i||"static"!==N.css("position")||N.css("position","relative")),i?j&&d.css(i,j):("static"===S.css("position")&&S.css("position","relative"),d.css({position:"absolute"})),K.forward&&lb.on(q,_b),K.backward&&mb.on(q,_b),K.prev&&nb.on(p,_b),K.next&&ob.on(p,_b),K.prevPage&&pb.on(p,_b),K.nextPage&&qb.on(p,_b),jb.on(o,bc),S[0]&&S.on(p,cc),ib&&K.activateOn&&N.on(K.activateOn+"."+f,"*",ec),X[0]&&K.activatePageOn&&X.on(K.activatePageOn+"."+f,"*",fc),kb.on(l,{source:"slidee"},Wb),T&&T.on(l,{source:"handle"},Wb),k.on("keydown",dc),M||(N.on("mouseenter."+f+" mouseleave."+f,gc),N.on("scroll."+f,F)),L.initialized=1,Db(!0),K.cycleBy&&!M&&L[K.startPaused?"pause":"resume"](),L
}}}function C(a){return null==a?String(a):"object"==typeof a||"function"==typeof a?Object.prototype.toString.call(a).match(/\s([a-z]+)/i)[1].toLowerCase()||"object":typeof a}function D(a,b){}function E(b){D(b,1),a(this).off(b.type,E)}function F(){this.scrollLeft=0,this.scrollTop=0}function G(a){return!isNaN(parseFloat(a))&&isFinite(a)}function H(a,b){return 0|x(String(a.css(b)).replace(/[^\-0-9.]/g,""))}function I(a,b,c){return b>a?b:a>c?c:a}function J(a){var b={};return b.style={},b.save=function(){if(a&&a.nodeType){for(var c=0;c<arguments.length;c++)b.style[arguments[c]]=a.style[arguments[c]];
return b}},b.restore=function(){if(a&&a.nodeType){for(var c in b.style)b.style.hasOwnProperty(c)&&(a.style[c]=b.style[c]);return b}},b}var i,j,t,d="sly",e="Sly",f=d,g=b.cancelAnimationFrame||b.cancelRequestAnimationFrame,h=b.requestAnimationFrame,k=a(document),l="touchstart."+f+" mousedown."+f,m="mousemove."+f+" mouseup."+f,n="touchmove."+f+" touchend."+f,o=(document.implementation.hasFeature("Event.wheel","3.0")?"wheel.":"mousewheel.")+f,p="click."+f,q="mousedown."+f,r=["INPUT","SELECT","BUTTON","TEXTAREA"],s=[],u=Math.abs,v=Math.sqrt,w=Math.pow,x=Math.round,y=Math.max,z=Math.min,A=0;
k.on(o,function(a){var b=a.originalEvent[f],c=+new Date;(!b||b.options.scrollHijack<c-A)&&(A=c)}),B.getInstance=function(b){return a.data(b,f)},B.storeInstance=function(b,c){return a.data(b,f,c)},B.removeInstance=function(b){return a.removeData(b,f)},function(a){function c(a){var c=(new Date).getTime(),d=Math.max(0,16-(c-b)),e=setTimeout(a,d);return b=c,e}h=a.requestAnimationFrame||a.webkitRequestAnimationFrame||c;var b=(new Date).getTime(),d=a.cancelAnimationFrame||a.webkitCancelAnimationFrame||a.clearTimeout;
g=function(b){d.call(a,b)}}(window),function(){function c(c){for(var d=0,e=a.length;e>d;d++){var f=a[d]?a[d]+c.charAt(0).toUpperCase()+c.slice(1):c;if(null!=b.style[f])return f}}var a=["","Webkit","Moz","ms","O"],b=document.createElement("div");i=c("transform"),j=c("perspective")?"translateZ(0) ":""}(),b[e]=B,a.fn[d]=function(b,c){var d,e;return a.isPlainObject(b)||(("string"===C(b)||b===!1)&&(d=b===!1?"destroy":b,e=Array.prototype.slice.call(arguments,1)),b={}),this.each(function(a,f){var g=B.getInstance(f);
g||d?g&&d&&g[d]&&g[d].apply(g,e):g=new B(f,b,c).init()})},B.defaults={slidee:null,horizontal:!1,itemNav:null,itemSelector:null,smart:!1,activateOn:null,activateMiddle:!1,scrollSource:null,scrollBy:0,scrollHijack:300,scrollTrap:!1,dragSource:null,mouseDragging:!1,touchDragging:!1,releaseSwing:!1,swingSpeed:.2,elasticBounds:!1,dragThreshold:3,interactive:null,scrollBar:null,dragHandle:!1,dynamicHandle:!1,minHandleSize:50,clickBar:!1,syncSpeed:.5,pagesBar:null,activatePageOn:null,pageBuilder:function(a){return"<li>"+(a+1)+"</li>"
},forward:null,backward:null,prev:null,next:null,prevPage:null,nextPage:null,cycleBy:null,cycleInterval:5e3,pauseOnHover:!1,startPaused:!1,moveBy:300,speed:0,easing:"swing",startAt:null,keyboardNavBy:null,draggedClass:"dragged",activeClass:"active",disabledClass:"disabled"}}(b,window)};d(),c.resolveWith(d)};FD40.module("sly",a)}(),function(){var a=function(a){var b=this;a.require().script("autosize.input","scrollTo","ui/position").done(function(){var c=function(){var b={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,ENTER:13,ESCAPE:27,LEFT:37,RIGHT:39,SPACE:32,TAB:9,UP:38};
a.template("textboxlist/item",'<div class="textboxlist-item[%== (this.locked) ? " is-locked" : "" %]" data-textboxlist-item><span class="textboxlist-itemContent" data-textboxlist-itemContent>[%== html %]</span><div class="textboxlist-itemRemoveButton" data-textboxlist-itemRemoveButton><i class="fa fa-times"></i></a></div>'),a.template("textboxlist/itemContent",'[%= title %]<input type="hidden" name="[%= name %]" value="[%= id %]"/>'),a.Controller("Textboxlist",{pluginName:"textboxlist",hostname:"textboxlist",defaultOptions:{view:{item:"textboxlist/item",itemContent:"textboxlist/itemContent"},plugin:{},name:"items[]",unique:!0,caseSensitive:!1,max:null,ignoreLocked:!1,filterItem:null,"{item}":"[data-textboxlist-item]","{itemContent}":"[data-textboxlist-itemContent]","{itemRemoveButton}":"[data-textboxlist-itemRemoveButton]","{textField}":"[data-textboxlist-textField]"}},function(c){return{init:function(){var d=c.textField();
d.autosizeInput(),d.data("placeholderText",d.attr("placeholder"));var e=d.data("textboxlistName");e&&(c.options.name=e),c.item().each(function(){var b=a(this),d=b.find(c.itemContent.selector);c.createItem({id:b.data("id")||function(){var c=a.uid("item-");return b.data("id",c),c}(),value:b.data("value"),title:b.data("title")||a.trim(d.text()),locked:b.hasClass("is-locked"),html:d.html()})}),(c.options.plugin.autocomplete||c.element.data("query"))&&c.addPlugin("autocomplete"),c.on("keypress",c.textField(),function(a){return a.keyCode==b.ENTER?a.preventDefault():void 0
})},setLayout:function(){var a=c.textField(),b=a.data("placeholderText");c.item().length>0&&(b=""),a.attr("placeholder",b).data("autosizeInputInstance").update()},enable:function(){c.element.removeClass("disabled"),c.textField().enabled(!0)},disable:function(){c.element.addClass("disabled"),c.textField().disabled(!0)},items:{},itemsByTitle:{},get:function(a){var b=c.getItemKey(a);return c.itemsByTitle.hasOwnProperty(b)?c.itemsByTitle[b]:void 0},getItemKey:function(a){return c.options.caseSensitive?a:a.toLowerCase()
},filterItem:function(b){var d=c.options,e=d.filterItem;a.isFunction(e)&&(b=e.call(c,b));var f=c.itemsByTitle;if(a.isString(b)&&""!==b){var g=b,h=c.getItemKey(g);b=f.hasOwnProperty(h)?c.itemsByTitle[h]:{id:a.uid("item-"),title:g,key:c.getItemKey(g),locked:!1}}return b.name=b.name||c.options.name,b.html=b.html||c.view.itemContent(!0,b),b},createItem:function(a){a.key=c.getItemKey(a.title),c.items[a.id]=a,c.itemsByTitle[a.key]=a},deleteItem:function(a){var b=c.items[a];c.item().filterBy("id",a).remove(),delete c.items[a];
var d=c.options.caseSensitive?b.title:b.title.toLowerCase();delete c.itemsByTitle[d]},addItem:function(b,d){if(b){var e=c.options,f=e.max;if((d||null===f||!((e.ignoreLocked?c.item(":not(.is-locked)"):c.item()).length>=f))&&(b=c.filterItem(b),a.isPlainObject(b))){var g,h=c.item().filterBy("id",b.id);if(e.unique&&h.length>0&&(g=h),g||(g=c.view.item(b).addClass(b.className||"").attr("data-id",b.id)),c.createItem(b),b.locked){var i=c.item(".is-locked:last");i.length>0?g.insertAfter(i):g.prependTo(c.element)}else g.insertBefore(c.textField());
return c.trigger("addItem",[b]),c.trigger("listChange"),b}}},removeItem:function(a){var b=c.items[a];c.deleteItem(a),c.trigger("removeItem",[b]),c.trigger("listChange")},clearItems:function(){c.item().each(function(){c.removeItem(a(this).data("id"))})},getAddedItems:function(){var b=[];return c.item().each(function(){var d=a(this),e=d.data("id");b.push(c.items[e])}),b},"{self} addItem":function(){c.setLayout()},"{self} removeItem":function(){c.setLayout()},"{itemRemoveButton} click":function(a){var b=a.parents(c.item.selector);
c.removeItem(b.data("id"))},"{textField} keydown":function(a,c){var d=c.keyCode;a.data("realEnterKey",d==b.ENTER)},"{textField} keypress":function(d,e){var f=d.data("realEnterKey"),g=e.keyCode==b.ENTER;d.data("realEnterKey",f&&g);var h=a.trim(c.textField().val());switch(e.keyCode){case b.ENTER:if(d.data("realEnterKey")){var e=c.trigger("useItem",[h]),i=e.item;if(void 0===i&&(i=h),i===!1||null===i)return;if(a.isPlainObject(i))c.addItem(i);else{var i=i.split(",");a.each(i,function(a,b){c.addItem(b)})}d.val("")
}}},"{textField} keyup":function(d,e){var f=a.trim(c.textField().val()),g="canRemoveItemUsingBackspace";switch(e.keyCode){case b.BACKSPACE:if(""===f)if(c[g]){var h=d.prev(c.item.selector);if(h.length>0){var i=h.data("id"),f=c.items[i];!f.locked&&c.removeItem(i)}}else c[g]=!0;break;default:c[g]=!1}},"{self} click":function(a,b){var d=c.textField();d.is(b.target)||d.focus()},"{textField} focusin":function(){c.activated||(c.activated=!0,c.trigger("textboxlistActivate"))},"{self} mousedown":function(){c.focusing=!0
},"{self} mouseup":function(){c.focusing=!1},"{self} focusout":function(){c.focusing||(c.activated=!1,c.deactivateTimer=setTimeout(function(){c.activated||c.trigger("textboxlistDeactivate")},1))}}}),a(document).on("click.textboxlist.data-api","[data-textboxlist]",function(){a(this).addController(a.Controller.Textboxlist).textField().focus()}).on("focus.textboxlist.data-api","[data-textboxlist] [data-textboxlist-textField]",function(){a(this).parents("[data-textboxlist]").addController(a.Controller.Textboxlist)
}),a.template("textboxlist/menu",'<div id="es" class="textboxlist-autocomplete" data-textboxlist-autocomplete><b><b></b></b><div class="textboxlist-autocomplete-inner" data-textboxlist-autocomplete-viewport><div class="textboxlist-autocomplete-loading" data-textboxlist-autocomplete-loading></div><div class="textboxlist-autocomplete-empty" data-textboxlist-autocomplete-empty></div><ul class="textboxlist-menu" data-textboxlist-menu></ul></div></div>'),a.template("textboxlist/menuItem",'<li class="textboxlist-menuItem" data-textboxlist-menuItem>[%== html %]</li>'),a.template("textboxlist/loadingHint",'<i class="o-loader o-loader--sm is-active"></i>'),a.template("textboxlist/emptyHint",'<span class="textboxlist-autocomplete-empty-text">No items found.</span>'),a.Controller("Textboxlist.Autocomplete",{defaultOptions:{view:{menu:"textboxlist/menu",menuItem:"textboxlist/menuItem",loadingHint:"textboxlist/loadingHint",emptyHint:"textboxlist/emptyHint"},cache:!0,minLength:1,limit:10,highlight:!0,caseSensitive:!1,exclusive:!1,query:null,position:{my:"left top",at:"left bottom",collision:"none"},filterItem:null,showEmptyHint:!1,showLoadingHint:!1,id:"es",component:"",modifier:"",shadow:!1,sticky:!1,animation:!1,emptyMessage:"No items found.","{menu}":"[data-textboxlist-menu]","{menuItem}":"[data-textboxlist-menuItem]","{viewport}":"[data-textboxlist-autocomplete-viewport]","{loadingHint}":"[data-textboxlist-autocomplete-loading]","{emptyHint}":"[data-textboxlist-autocomplete-empty]"}},function(c,d){return{init:function(){if(!c.element.data(c.Class.fullName))return c.destroy(),c.view.menu().attr("id",d.id).addClass(d.component).addClass(d.modifier).addClass(d.shadow?"has-shadow":"").addClass(d.animation?"has-animation":"").addClass(d.sticky?"is-sticky":"").addClass(c.textboxlist.options.component).appendTo("body").data(c.Class.fullName,!0).addController(c.Class,c.options),void 0;
var a=c.textboxlist;a.autocomplete=c,a.pluginInstances.autocomplete=c,c.options.position.of=c.textboxlist.element,c.initQuery(),c.view.loadingHint().appendTo(c.loadingHint());var b=c.view.emptyHint();b.html(d.emptyMessage).appendTo(c.emptyHint()),c.element.detach()},initQuery:function(){var b=c.options.query||c.textboxlist.element.data("query");if(a.isUrl(b)){var d=b;return c.query=function(b){return a.ajax(d+b)},void 0}if(a.isFunction(b)){var e=b;return c.query=function(a){return e.call(c,a)},void 0}if(a.isArray(b)){var f=b;
return c.query=function(b){var c=a.Deferred(),b=b.toLowerCase();return setTimeout(function(){var d=a.grep(f,function(a){return a.title.toLowerCase().indexOf(b)>-1});c.resolve(d)},0),c},void 0}},setLayout:function(){c.hidden||c.element.css({opacity:1,width:c.textboxlist.element.outerWidth()}).position(c.options.position)},"{window} resize":a.debounce(function(){c.element.css("opacity",0),c.setLayout()},250),"{window} scroll":a.debounce(function(){c.element.css("opacity",0),c.setLayout()},250),"{window} dialogTransitionStart":function(){c.hidden=!0,c.element.css("opacity",0)
},"{window} dialogTransitionEnd":function(){c.hidden=!1,c.setLayout()},show:function(){clearTimeout(c.sleep),c.element.appendTo("body").show(),c.hidden=!1,c.setLayout()},hide:function(){c.element.hide();var b=c.menuItem(),d=b.filter(".active");d.length>0&&(c.lastItem={keyword:a.trim(c.textboxlist.textField().val()),item:d.data("item")}),b.removeClass("active"),c.render.reset(),c.hidden=!0,clearTimeout(c.sleep),c.sleep=setTimeout(function(){c.element.detach()},3e3)},queries:{},populated:!1,populate:function(b){c.populated=!1;
var d=c.element,e=c.options;d.removeClass("loading empty"),e.showLoadingHint&&c.hide();var f=c.trigger("populateKeyword",[b]);f.keyword&&(b=f.keyword);var g=e.caseSensitive?b:b.toLowerCase(),h=c.queries[g],i=!a.isDeferred(h)||!c.options.cache,j=function(){e.showLoadingHint&&(d.addClass("loading"),c.show()),(i||!i&&"rejected"==h.state())&&(h=c.queries[g]=c.query(b)),h.done(c.render(function(a){return[a,b]})).fail(function(){c.hide()}).always(function(){d.removeClass("loading")}),c.trigger("queryKeyword",[h,b])
};i?(clearTimeout(c.queryTask),c.queryTask=setTimeout(j,250)):j()},populateTask:null,populateFromTextField:function(){clearTimeout(c.populateTask),c.populateTask=setTimeout(function(){var b=c.textboxlist.textField(),d=a.trim(b.val());""===d||d.length<c.options.minLength?c.hide():c.populate(d)},1)},render:a.Enqueue(function(b,d){a.isArray(b)||(b=[]);var e=c.textboxlist,f=c,g=c.element,h=c.options,i=c.menu();if(b.length<1)return h.showEmptyHint?(i.empty(),g.addClass("empty"),e.trigger("renderMenu",[i,f,e]),c.show()):c.hide(),void 0;
g.removeClass("empty"),h.cache&&i.data("keyword")===d||(i.empty(),a.each(b,function(b,g){if(!a.isPlainObject(g))var g={html:g};e.trigger("filterItem",[g,f,e]);var j=h.filterItem;if(a.isFunction(j)&&(g=j.call(c,g,d)),!a.isPlainObject(g)||g.discard)return console.log("discarding?"),void 0;var k=g.menuHtml||g.title;c.view.menuItem({html:k}).addClass(g.className||"").data("item",g).appendTo(i)}),i.data("keyword",d));var j=c.menuItem();return e.trigger("filterMenu",[i,j,f,e]),j.filter(":not(.hidden)").length<1&&(g.addClass("empty"),!h.showEmptyHint)?c.hide():(h.exclusive&&c.menuItem(":not(.hidden):first").addClass("active"),e.trigger("renderMenu",[i,f,e]),c.show(),void 0)
}),"{textboxlist.textField} keydown":function(a,d){clearTimeout(c.sleep);var e=c.menuItem(".active:not(.hidden)");e.length<1&&(e=!1);c.textboxlist.textField();switch(d.keyCode){case b.UP:c.menuItem().removeClass("active"),e?e.prev(c.menuItem.selector+":not(.hidden)").addClass("active"):c.menuItem(":not(.hidden):last").addClass("active");var f=c.menuItem(":not(.hidden):last");d.preventDefault();break;case b.DOWN:c.menuItem().removeClass("active"),e?e.next(c.menuItem.selector+":not(.hidden)").addClass("active"):c.menuItem(":not(.hidden):first").addClass("active");
var f=c.menuItem(":not(.hidden):first");d.preventDefault();break;case b.ESCAPE:c.hide();break;case b.ENTER:break;default:c.populateFromTextField()}var e=c.menuItem(".active:not(.hidden)");if(e.length<1){if(d.keyCode!=b.DOWN&&d.keyCode!=b.UP)return;var e=f;e.addClass("active")}c.viewport().scrollIntoView(e)},"{textboxlist} textboxlistActivate":function(){c.populateFromTextField()},"{textboxlist} textboxlistDeactivate":function(){setTimeout(function(){c.hide()},150)},"{textboxlist} destroyed":function(){c.element.remove()
},"{textboxlist} useItem":function(a,b,d){var e=c.options.exclusive;if(e&&(b.item=!1),c.hidden){var f=c.lastItem;return e&&f&&f.keyword==d&&(b.item=f.item),void 0}var g=c.menuItem(".active");if(g.length>0){var h=g.data("item");b.item=h}c.hide()},"{menuItem} mousedown":function(){c.textboxlist.focusing=!0},"{menuItem} mouseup":function(){c.textboxlist.focusing=!1},"{menuItem} click":function(a){c.hide();var b=a.data("item");c.textboxlist.addItem(b);var d=c.textboxlist.textField().val("");setTimeout(function(){d.focus()
},150)},"{menuItem} mouseover":function(a){c.menuItem().removeClass("active"),a.addClass("active")},"{menuItem} mouseout":function(){c.menuItem().removeClass("active")}}})};c(),b.resolveWith(c)})};FD40.module("textboxlist",a)}(),function(){var a=function(a){var b=a,c=this,d=function(){"function"!=typeof Object.create&&(Object.create=function(a){function b(){}return b.prototype=a,new b}),function(a,b){"use strict";var e={_positionClasses:["bottom-left","bottom-right","top-right","top-left","bottom-center","top-center","mid-center"],_defaultIcons:["success","error","info","warning"],init:function(b){this.prepareOptions(b,a.toast.options),this.process()
},prepareOptions:function(b,c){var d={};"string"==typeof b||b instanceof Array?d.text=b:d=b,this.options=a.extend({},c,d)},process:function(){this.setup(),this.addToDom(),this.position(),this.bindToast(),this.animate()},setup:function(){var b="";if(this._toastEl=this._toastEl||a("<div></div>",{"class":"jq-toast-single"}),b+='<span class="jq-toast-loader"></span>',this.options.allowToastClose&&(b+='<span class="close-jq-toast-single">&times;</span>'),this.options.text instanceof Array){this.options.heading&&(b+='<h2 class="jq-toast-heading">'+this.options.heading+"</h2>"),b+='<ul class="jq-toast-ul">';
for(var c=0;c<this.options.text.length;c++)b+='<li class="jq-toast-li" id="jq-toast-item-'+c+'">'+this.options.text[c]+"</li>";b+="</ul>"}else this.options.heading&&(b+='<h2 class="jq-toast-heading">'+this.options.heading+"</h2>"),b+=this.options.text;this._toastEl.html(b),this.options.bgColor!==!1&&this._toastEl.css("background-color",this.options.bgColor),this.options.textColor!==!1&&this._toastEl.css("color",this.options.textColor),this.options.textAlign&&this._toastEl.css("text-align",this.options.textAlign),this.options.icon!==!1&&(this._toastEl.addClass("jq-has-icon"),-1!==a.inArray(this.options.icon,this._defaultIcons)&&this._toastEl.addClass("jq-icon-"+this.options.icon)),this.options.class!==!1&&this._toastEl.addClass(this.options.class)
},position:function(){"string"==typeof this.options.position&&-1!==a.inArray(this.options.position,this._positionClasses)?"bottom-center"===this.options.position?this._container.css({left:a(b).outerWidth()/2-this._container.outerWidth()/2,bottom:20}):"top-center"===this.options.position?this._container.css({left:a(b).outerWidth()/2-this._container.outerWidth()/2,top:20}):"mid-center"===this.options.position?this._container.css({left:a(b).outerWidth()/2-this._container.outerWidth()/2,top:a(b).outerHeight()/2-this._container.outerHeight()/2}):this._container.addClass(this.options.position):"object"==typeof this.options.position?this._container.css({top:this.options.position.top?this.options.position.top:"auto",bottom:this.options.position.bottom?this.options.position.bottom:"auto",left:this.options.position.left?this.options.position.left:"auto",right:this.options.position.right?this.options.position.right:"auto"}):this._container.addClass("bottom-left")
},bindToast:function(){var a=this;this._toastEl.on("afterShown",function(){a.processLoader()}),this._toastEl.find(".close-jq-toast-single").on("click",function(b){b.preventDefault(),"fade"===a.options.showHideTransition?(a._toastEl.trigger("beforeHide"),a._toastEl.fadeOut(function(){a._toastEl.trigger("afterHidden")})):"slide"===a.options.showHideTransition?(a._toastEl.trigger("beforeHide"),a._toastEl.slideUp(function(){a._toastEl.trigger("afterHidden")})):(a._toastEl.trigger("beforeHide"),a._toastEl.hide(function(){a._toastEl.trigger("afterHidden")
}))}),"function"==typeof this.options.beforeShow&&this._toastEl.on("beforeShow",function(){a.options.beforeShow(a._toastEl)}),"function"==typeof this.options.afterShown&&this._toastEl.on("afterShown",function(){a.options.afterShown(a._toastEl)}),"function"==typeof this.options.beforeHide&&this._toastEl.on("beforeHide",function(){a.options.beforeHide(a._toastEl)}),"function"==typeof this.options.afterHidden&&this._toastEl.on("afterHidden",function(){a.options.afterHidden(a._toastEl)}),"function"==typeof this.options.onClick&&this._toastEl.on("click",function(){a.options.onClick(a._toastEl)
})},addToDom:function(){var b=a(".jq-toast-wrap");if(0===b.length?(b=a("<div></div>",{"class":"jq-toast-wrap",role:"alert","aria-live":"polite"}),a("body").append(b)):(!this.options.stack||isNaN(parseInt(this.options.stack,10)))&&b.empty(),b.find(".jq-toast-single:hidden").remove(),b.append(this._toastEl),this.options.stack&&!isNaN(parseInt(this.options.stack),10)){var c=b.find(".jq-toast-single").length,d=c-this.options.stack;d>0&&a(".jq-toast-wrap").find(".jq-toast-single").slice(0,d).remove()}this._container=b
},canAutoHide:function(){return this.options.hideAfter!==!1&&!isNaN(parseInt(this.options.hideAfter,10))},processLoader:function(){if(!this.canAutoHide()||this.options.loader===!1)return!1;var a=this._toastEl.find(".jq-toast-loader"),b=(this.options.hideAfter-400)/1e3+"s",c=this.options.loaderBg,d=a.attr("style")||"";d=d.substring(0,d.indexOf("-webkit-transition")),d+="-webkit-transition: width "+b+" ease-in; 					  -o-transition: width "+b+" ease-in; 					  transition: width "+b+" ease-in; 					  background-color: "+c+";",a.attr("style",d).addClass("jq-toast-loaded")
},animate:function(){var a=this;if(this._toastEl.hide(),this._toastEl.trigger("beforeShow"),"fade"===this.options.showHideTransition.toLowerCase()?this._toastEl.fadeIn(function(){a._toastEl.trigger("afterShown")}):"slide"===this.options.showHideTransition.toLowerCase()?this._toastEl.slideDown(function(){a._toastEl.trigger("afterShown")}):this._toastEl.show(function(){a._toastEl.trigger("afterShown")}),this.canAutoHide()){var a=this;b.setTimeout(function(){"fade"===a.options.showHideTransition.toLowerCase()?(a._toastEl.trigger("beforeHide"),a._toastEl.fadeOut(function(){a._toastEl.trigger("afterHidden")
})):"slide"===a.options.showHideTransition.toLowerCase()?(a._toastEl.trigger("beforeHide"),a._toastEl.slideUp(function(){a._toastEl.trigger("afterHidden")})):(a._toastEl.trigger("beforeHide"),a._toastEl.hide(function(){a._toastEl.trigger("afterHidden")}))},this.options.hideAfter)}},reset:function(b){"all"===b?a(".jq-toast-wrap").remove():this._toastEl.remove()},update:function(a){this.prepareOptions(a,this.options),this.setup(),this.bindToast()},close:function(){this._toastEl.find(".close-jq-toast-single").click()
}};a.toast=function(a){var b=Object.create(e);return b.init(a,this),{reset:function(a){b.reset(a)},update:function(a){b.update(a)},close:function(){b.close()}}},a.toast.options={text:"",heading:"",showHideTransition:"fade",allowToastClose:!0,hideAfter:3e3,loader:!0,loaderBg:"#9EC600",stack:5,position:"bottom-left",bgColor:!1,textColor:!1,textAlign:"left",icon:!1,beforeShow:function(){},afterShown:function(){},beforeHide:function(){},afterHidden:function(){},onClick:function(){}}}(b,window,document)};d(),c.resolveWith(d)
};FD40.module("toast",a)}(),function(){var a=function(a){var b=this,c=a,d=function(){!function(a,b){function e(b,c){var d,e,g,h=b.nodeName.toLowerCase();return"area"===h?(d=b.parentNode,e=d.name,b.href&&e&&"map"===d.nodeName.toLowerCase()?(g=a("img[usemap=#"+e+"]")[0],!!g&&f(g)):!1):(/input|select|textarea|button|object/.test(h)?!b.disabled:"a"===h?b.href||c:c)&&f(b)}function f(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return"hidden"===a.css(this,"visibility")}).length}var c=0,d=/^ui-id-\d+$/;
a.ui=a.ui||{},a.extend(a.ui,{version:"1.10.4pre",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),a.fn.extend({focus:function(b){return function(c,d){return"number"==typeof c?this.each(function(){var b=this;setTimeout(function(){a(b).focus(),d&&d.call(b)},c)}):b.apply(this,arguments)}}(a.fn.focus),scrollParent:function(){var b;
return b=a.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.css(this,"position"))&&/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);
if(this.length)for(var e,f,d=a(this[0]);d.length&&d[0]!==document;){if(e=d.css("position"),("absolute"===e||"relative"===e||"fixed"===e)&&(f=parseInt(d.css("zIndex"),10),!isNaN(f)&&0!==f))return f;d=d.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++c)})},removeUniqueId:function(){return this.each(function(){d.test(this.id)&&a(this).removeAttr("id")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)
}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return e(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var c=a.attr(b,"tabindex"),d=isNaN(c);return(d||c>=0)&&e(b,!d)}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(c,d){function h(b,c,d,f){return a.each(e,function(){c-=parseFloat(a.css(b,"padding"+this))||0,d&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0),f&&(c-=parseFloat(a.css(b,"margin"+this))||0)}),c}var e="Width"===d?["Left","Right"]:["Top","Bottom"],f=d.toLowerCase(),g={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};
a.fn["inner"+d]=function(c){return c===b?g["inner"+d].call(this):this.each(function(){a(this).css(f,h(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return"number"!=typeof b?g["outer"+d].call(this,b):this.each(function(){a(this).css(f,h(this,b,!0,c)+"px")})}}),a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}),a("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(a.fn.removeData=function(b){return function(c){return arguments.length?b.call(this,a.camelCase(c)):b.call(this)
}}(a.fn.removeData)),a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),a.support.selectstart="onselectstart"in document.createElement("div"),a.fn.extend({disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.extend(a.ui,{plugin:{add:function(b,c,d){var e,f=a.ui[b].prototype;for(e in d)f.plugins[e]=f.plugins[e]||[],f.plugins[e].push([c,d[e]])
},call:function(a,b,c){var d,e=a.plugins[b];if(e&&a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType)for(d=0;d<e.length;d++)a.options[e[d][0]]&&e[d][1].apply(a.element,c)}},hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)}}),a(function(){a("body > [id=es].ui").length>0||a(document.createElement("div")).attr("id","es").addClass("ui").css({position:"absolute",top:0,left:0,overflow:"visible",width:0,height:0,zIndex:10002}).appendTo("body")
})}(c)};d(),b.resolveWith(d)};FD40.module("ui/core",a)}(),function(){var a=function(a){var b=this,c=a;a.require().script("ui/widget").done(function(){var a=function(){!function(a){var c=!1;a(document).mouseup(function(){c=!1}),a.widget("ui.mouse",{version:"1.10.4pre",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a,c){return b._mouseDown(c||a)}).bind("click."+this.widgetName,function(c){return!0===a.data(c.target,b.widgetName+".preventClickEvent")?(a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1):void 0
}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(b){if(!c){this._mouseStarted&&this._mouseUp(b),this._mouseDownEvent=b;var d=this,e=1===b.which,f="string"==typeof this.options.cancel&&b.target.nodeName?a(b.target).closest(this.options.cancel).length:!1;return e&&!f&&this._mouseCapture(b)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0
},this.options.delay)),this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(b)!==!1,!this._mouseStarted)?(b.preventDefault(),!0):(!0===a.data(b.target,this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return d._mouseMove(a)},this._mouseUpDelegate=function(a){return d._mouseUp(a)},a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),b.preventDefault(),c=!0,!0)):!0
}},_mouseMove:function(b){return a.ui.ie&&(!document.documentMode||document.documentMode<9)&&!b.button?this._mouseUp(b):this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted)},_mouseUp:function(b){return a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),!1
},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(c)};a(),b.resolveWith(a)})};FD40.module("ui/mouse",a)}(),function(){var a=function(a){var b=this,c=a,d=function(){!function(a,b){function m(a,b,c){return[parseFloat(a[0])*(k.test(a[0])?b/100:1),parseFloat(a[1])*(k.test(a[1])?c/100:1)]
}function n(b,c){return parseInt(a.css(b,c),10)||0}function o(b){var c=b[0];return 9===c.nodeType?{width:b.width(),height:b.height(),offset:{top:0,left:0}}:a.isWindow(c)?{width:b.width(),height:b.height(),offset:{top:b.scrollTop(),left:b.scrollLeft()}}:c.preventDefault?{width:0,height:0,offset:{top:c.pageY,left:c.pageX}}:{width:b.outerWidth(),height:b.outerHeight(),offset:b.offset()}}a.ui=a.ui||{};var c,d=Math.max,e=Math.abs,f=Math.round,g=/left|center|right/,h=/top|center|bottom/,i=/[\+\-]\d+(\.[\d]+)?%?/,j=/^\w+/,k=/%$/,l=a.fn.position;
a.position={scrollbarWidth:function(){if(c!==b)return c;var d,e,f=a("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),g=f.children()[0];return a("body").append(f),d=g.offsetWidth,f.css("overflow","scroll"),e=g.offsetWidth,d===e&&(e=f[0].clientWidth),f.remove(),c=d-e},getScrollInfo:function(b){var c=b.isWindow?"":b.element.css("overflow-x"),d=b.isWindow?"":b.element.css("overflow-y"),e="scroll"===c||"auto"===c&&b.width<b.element[0].scrollWidth,f="scroll"===d||"auto"===d&&b.height<b.element[0].scrollHeight;
return{width:f?a.position.scrollbarWidth():0,height:e?a.position.scrollbarWidth():0}},getWithinInfo:function(b){var c=a(b||window),d=a.isWindow(c[0]);return{element:c,isWindow:d,offset:c.offset()||{left:0,top:0},scrollLeft:c.scrollLeft(),scrollTop:c.scrollTop(),width:d?c.width():c.outerWidth(),height:d?c.height():c.outerHeight()}}},a.fn.position=function(b){if(!b||!b.of)return l.apply(this,arguments);b=a.extend({},b);var c,k,p,q,r,s,t=a(b.of),u=a.position.getWithinInfo(b.within),v=a.position.getScrollInfo(u),w=(b.collision||"flip").split(" "),x={};
return s=o(t),t[0].preventDefault&&(b.at="left top"),k=s.width,p=s.height,q=s.offset,r=a.extend({},q),a.each(["my","at"],function(){var c,d,a=(b[this]||"").split(" ");1===a.length&&(a=g.test(a[0])?a.concat(["center"]):h.test(a[0])?["center"].concat(a):["center","center"]),a[0]=g.test(a[0])?a[0]:"center",a[1]=h.test(a[1])?a[1]:"center",c=i.exec(a[0]),d=i.exec(a[1]),x[this]=[c?c[0]:0,d?d[0]:0],b[this]=[j.exec(a[0])[0],j.exec(a[1])[0]]}),1===w.length&&(w[1]=w[0]),"right"===b.at[0]?r.left+=k:"center"===b.at[0]&&(r.left+=k/2),"bottom"===b.at[1]?r.top+=p:"center"===b.at[1]&&(r.top+=p/2),c=m(x.at,k,p),r.left+=c[0],r.top+=c[1],this.each(function(){var g,h,i=a(this),j=i.outerWidth(),l=i.outerHeight(),o=n(this,"marginLeft"),s=n(this,"marginTop"),y=j+o+n(this,"marginRight")+v.width,z=l+s+n(this,"marginBottom")+v.height,A=a.extend({},r),B=m(x.my,i.outerWidth(),i.outerHeight());
"right"===b.my[0]?A.left-=j:"center"===b.my[0]&&(A.left-=j/2),"bottom"===b.my[1]?A.top-=l:"center"===b.my[1]&&(A.top-=l/2),A.left+=B[0],A.top+=B[1],a.support.offsetFractions||(A.left=f(A.left),A.top=f(A.top)),g={marginLeft:o,marginTop:s},a.each(["left","top"],function(d,e){a.ui.position[w[d]]&&a.ui.position[w[d]][e](A,{targetWidth:k,targetHeight:p,elemWidth:j,elemHeight:l,collisionPosition:g,collisionWidth:y,collisionHeight:z,offset:[c[0]+B[0],c[1]+B[1]],my:b.my,at:b.at,within:u,elem:i})}),b.using&&(h=function(a){var c=q.left-A.left,f=c+k-j,g=q.top-A.top,h=g+p-l,m={target:{element:t,left:q.left,top:q.top,width:k,height:p},element:{element:i,left:A.left,top:A.top,width:j,height:l},horizontal:0>f?"left":c>0?"right":"center",vertical:0>h?"top":g>0?"bottom":"middle"};
j>k&&e(c+f)<k&&(m.horizontal="center"),l>p&&e(g+h)<p&&(m.vertical="middle"),m.important=d(e(c),e(f))>d(e(g),e(h))?"horizontal":"vertical",b.using.call(this,a,m)}),i.offset(a.extend(A,{using:h}))})},a.ui.position={fit:{left:function(a,b){var j,c=b.within,e=c.isWindow?c.scrollLeft:c.offset.left,f=c.width,g=a.left-b.collisionPosition.marginLeft,h=e-g,i=g+b.collisionWidth-f-e;b.collisionWidth>f?h>0&&0>=i?(j=a.left+h+b.collisionWidth-f-e,a.left+=h-j):a.left=i>0&&0>=h?e:h>i?e+f-b.collisionWidth:e:h>0?a.left+=h:i>0?a.left-=i:a.left=d(a.left-g,a.left)
},top:function(a,b){var j,c=b.within,e=c.isWindow?c.scrollTop:c.offset.top,f=b.within.height,g=a.top-b.collisionPosition.marginTop,h=e-g,i=g+b.collisionHeight-f-e;b.collisionHeight>f?h>0&&0>=i?(j=a.top+h+b.collisionHeight-f-e,a.top+=h-j):a.top=i>0&&0>=h?e:h>i?e+f-b.collisionHeight:e:h>0?a.top+=h:i>0?a.top-=i:a.top=d(a.top-g,a.top)}},flip:{left:function(a,b){var n,o,c=b.within,d=c.offset.left+c.scrollLeft,f=c.width,g=c.isWindow?c.scrollLeft:c.offset.left,h=a.left-b.collisionPosition.marginLeft,i=h-g,j=h+b.collisionWidth-f-g,k="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0,l="left"===b.at[0]?b.targetWidth:"right"===b.at[0]?-b.targetWidth:0,m=-2*b.offset[0];
0>i?(n=a.left+k+l+m+b.collisionWidth-f-d,(0>n||n<e(i))&&(a.left+=k+l+m)):j>0&&(o=a.left-b.collisionPosition.marginLeft+k+l+m-g,(o>0||e(o)<j)&&(a.left+=k+l+m))},top:function(a,b){var o,p,c=b.within,d=c.offset.top+c.scrollTop,f=c.height,g=c.isWindow?c.scrollTop:c.offset.top,h=a.top-b.collisionPosition.marginTop,i=h-g,j=h+b.collisionHeight-f-g,k="top"===b.my[1],l=k?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0,m="top"===b.at[1]?b.targetHeight:"bottom"===b.at[1]?-b.targetHeight:0,n=-2*b.offset[1];0>i?(p=a.top+l+m+n+b.collisionHeight-f-d,a.top+l+m+n>i&&(0>p||p<e(i))&&(a.top+=l+m+n)):j>0&&(o=a.top-b.collisionPosition.marginTop+l+m+n-g,a.top+l+m+n>j&&(o>0||e(o)<j)&&(a.top+=l+m+n))
}},flipfit:{left:function(){a.ui.position.flip.left.apply(this,arguments),a.ui.position.fit.left.apply(this,arguments)},top:function(){a.ui.position.flip.top.apply(this,arguments),a.ui.position.fit.top.apply(this,arguments)}}},function(){var b,c,d,e,f,g=document.getElementsByTagName("body")[0],h=document.createElement("div");b=document.createElement(g?"div":"body"),d={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},g&&a.extend(d,{position:"absolute",left:"-1000px",top:"-1000px"});for(f in d)b.style[f]=d[f];
b.appendChild(h),c=g||document.documentElement,c.insertBefore(b,c.firstChild),h.style.cssText="position: absolute; left: 10.7432222px;",e=a(h).offset().left,a.support.offsetFractions=e>10&&11>e,b.innerHTML="",c.removeChild(b)}()}(c)};d(),b.resolveWith(d)};FD40.module("ui/position",a)}(),function(){var a=function(a){var b=this,c=a;a.require().script("ui/core","ui/mouse","ui/widget").done(function(){var a=function(){!function(a){function c(a){return parseInt(a,10)||0}function d(a){return!isNaN(parseInt(a,10))}a.widget("ui.resizable",a.ui.mouse,{version:"1.10.4pre",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var b,c,d,e,f,g=this,h=this.options;
if(this.element.addClass("ui-resizable"),a.extend(this,{_aspectRatio:!!h.aspectRatio,aspectRatio:h.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:h.helper||h.ghost||h.animate?h.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(a("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=h.handles||(a(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),b=this.handles.split(","),this.handles={},c=0;c<b.length;c++)d=a.trim(b[c]),f="ui-resizable-"+d,e=a("<div class='ui-resizable-handle "+f+"'></div>"),e.css({zIndex:h.zIndex}),"se"===d&&e.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[d]=".ui-resizable-"+d,this.element.append(e);
this._renderAxis=function(b){var c,d,e,f;b=b||this.element;for(c in this.handles)this.handles[c].constructor===String&&(this.handles[c]=a(this.handles[c],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(d=a(this.handles[c],this.element),f=/sw|ne|nw|se|n|s/.test(c)?d.outerHeight():d.outerWidth(),e=["padding",/ne|nw|n/.test(c)?"Top":/se|sw|s/.test(c)?"Bottom":/^e$/.test(c)?"Right":"Left"].join(""),b.css(e,f),this._proportionallyResize()),a(this.handles[c]).length
},this._renderAxis(this.element),this._handles=a(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){g.resizing||(this.className&&(e=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),g.axis=e&&e[1]?e[1]:"se")}),h.autoHide&&(this._handles.hide(),a(this.element).addClass("ui-resizable-autohide").mouseenter(function(){h.disabled||(a(this).removeClass("ui-resizable-autohide"),g._handles.show())}).mouseleave(function(){h.disabled||g.resizing||(a(this).addClass("ui-resizable-autohide"),g._handles.hide())
})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var b,c=function(b){a(b).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(c(this.element),b=this.element,this.originalElement.css({position:b.css("position"),width:b.outerWidth(),height:b.outerHeight(),top:b.css("top"),left:b.css("left")}).insertAfter(b),b.remove()),this.originalElement.css("resize",this.originalResizeStyle),c(this.originalElement),this
},_mouseCapture:function(b){var c,d,e=!1;for(c in this.handles)d=a(this.handles[c])[0],(d===b.target||a.contains(d,b.target))&&(e=!0);return!this.options.disabled&&e},_mouseStart:function(b){var d,e,f,g=this.options,h=this.element.position(),i=this.element;return this.resizing=!0,/absolute/.test(i.css("position"))?i.css({position:"absolute",top:i.css("top"),left:i.css("left")}):i.is(".ui-draggable")&&i.css({position:"absolute",top:h.top,left:h.left}),this._renderProxy(),d=c(this.helper.css("left")),e=c(this.helper.css("top")),g.containment&&(d+=a(g.containment).scrollLeft()||0,e+=a(g.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:d,top:e},this.size=this._helper?{width:i.outerWidth(),height:i.outerHeight()}:{width:i.width(),height:i.height()},this.originalSize=this._helper?{width:i.outerWidth(),height:i.outerHeight()}:{width:i.width(),height:i.height()},this.originalPosition={left:d,top:e},this.sizeDiff={width:i.outerWidth()-i.width(),height:i.outerHeight()-i.height()},this.originalMousePosition={left:b.pageX,top:b.pageY},this.aspectRatio="number"==typeof g.aspectRatio?g.aspectRatio:this.originalSize.width/this.originalSize.height||1,f=a(".ui-resizable-"+this.axis).css("cursor"),a("body").css("cursor","auto"===f?this.axis+"-resize":f),i.addClass("ui-resizable-resizing"),this._propagate("start",b),!0
},_mouseDrag:function(b){var c,d=this.helper,e={},f=this.originalMousePosition,g=this.axis,h=this.position.top,i=this.position.left,j=this.size.width,k=this.size.height,l=b.pageX-f.left||0,m=b.pageY-f.top||0,n=this._change[g];return n?(c=n.apply(this,[b,l,m]),this._updateVirtualBoundaries(b.shiftKey),(this._aspectRatio||b.shiftKey)&&(c=this._updateRatio(c,b)),c=this._respectSize(c,b),this._updateCache(c),this._propagate("resize",b),this.position.top!==h&&(e.top=this.position.top+"px"),this.position.left!==i&&(e.left=this.position.left+"px"),this.size.width!==j&&(e.width=this.size.width+"px"),this.size.height!==k&&(e.height=this.size.height+"px"),d.css(e),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),a.isEmptyObject(e)||this._trigger("resize",b,this.ui()),!1):!1
},_mouseStop:function(b){this.resizing=!1;var c,d,e,f,g,h,i,j=this.options,k=this;return this._helper&&(c=this._proportionallyResizeElements,d=c.length&&/textarea/i.test(c[0].nodeName),e=d&&a.ui.hasScroll(c[0],"left")?0:k.sizeDiff.height,f=d?0:k.sizeDiff.width,g={width:k.helper.width()-f,height:k.helper.height()-e},h=parseInt(k.element.css("left"),10)+(k.position.left-k.originalPosition.left)||null,i=parseInt(k.element.css("top"),10)+(k.position.top-k.originalPosition.top)||null,j.animate||this.element.css(a.extend(g,{top:i,left:h})),k.helper.height(k.size.height),k.helper.width(k.size.width),this._helper&&!j.animate&&this._proportionallyResize()),a("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",b),this._helper&&this.helper.remove(),!1
},_updateVirtualBoundaries:function(a){var b,c,e,f,g,h=this.options;g={minWidth:d(h.minWidth)?h.minWidth:0,maxWidth:d(h.maxWidth)?h.maxWidth:1/0,minHeight:d(h.minHeight)?h.minHeight:0,maxHeight:d(h.maxHeight)?h.maxHeight:1/0},(this._aspectRatio||a)&&(b=g.minHeight*this.aspectRatio,e=g.minWidth/this.aspectRatio,c=g.maxHeight*this.aspectRatio,f=g.maxWidth/this.aspectRatio,b>g.minWidth&&(g.minWidth=b),e>g.minHeight&&(g.minHeight=e),c<g.maxWidth&&(g.maxWidth=c),f<g.maxHeight&&(g.maxHeight=f)),this._vBoundaries=g
},_updateCache:function(a){this.offset=this.helper.offset(),d(a.left)&&(this.position.left=a.left),d(a.top)&&(this.position.top=a.top),d(a.height)&&(this.size.height=a.height),d(a.width)&&(this.size.width=a.width)},_updateRatio:function(a){var b=this.position,c=this.size,e=this.axis;return d(a.height)?a.width=a.height*this.aspectRatio:d(a.width)&&(a.height=a.width/this.aspectRatio),"sw"===e&&(a.left=b.left+(c.width-a.width),a.top=null),"nw"===e&&(a.top=b.top+(c.height-a.height),a.left=b.left+(c.width-a.width)),a
},_respectSize:function(a){var b=this._vBoundaries,c=this.axis,e=d(a.width)&&b.maxWidth&&b.maxWidth<a.width,f=d(a.height)&&b.maxHeight&&b.maxHeight<a.height,g=d(a.width)&&b.minWidth&&b.minWidth>a.width,h=d(a.height)&&b.minHeight&&b.minHeight>a.height,i=this.originalPosition.left+this.originalSize.width,j=this.position.top+this.size.height,k=/sw|nw|w/.test(c),l=/nw|ne|n/.test(c);return g&&(a.width=b.minWidth),h&&(a.height=b.minHeight),e&&(a.width=b.maxWidth),f&&(a.height=b.maxHeight),g&&k&&(a.left=i-b.minWidth),e&&k&&(a.left=i-b.maxWidth),h&&l&&(a.top=j-b.minHeight),f&&l&&(a.top=j-b.maxHeight),a.width||a.height||a.left||!a.top?a.width||a.height||a.top||!a.left||(a.left=null):a.top=null,a
},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var a,b,c,d,e,f=this.helper||this.element;for(a=0;a<this._proportionallyResizeElements.length;a++){if(e=this._proportionallyResizeElements[a],!this.borderDif)for(this.borderDif=[],c=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],d=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")],b=0;b<c.length;b++)this.borderDif[b]=(parseInt(c[b],10)||0)+(parseInt(d[b],10)||0);
e.css({height:f.height()-this.borderDif[0]-this.borderDif[2]||0,width:f.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var b=this.element,c=this.options;this.elementOffset=b.offset(),this._helper?(this.helper=this.helper||a("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++c.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element
},_change:{e:function(a,b){return{width:this.originalSize.width+b}},w:function(a,b){var c=this.originalSize,d=this.originalPosition;return{left:d.left+b,width:c.width-b}},n:function(a,b,c){var d=this.originalSize,e=this.originalPosition;return{top:e.top+c,height:d.height-c}},s:function(a,b,c){return{height:this.originalSize.height+c}},se:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},sw:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,c,d]))
},ne:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},nw:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,c,d]))}},_propagate:function(b,c){a.ui.plugin.call(this,b,[c,this.ui()]),"resize"!==b&&this._trigger(b,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}
}}),a.ui.plugin.add("resizable","animate",{stop:function(b){var c=a(this).data("ui-resizable"),d=c.options,e=c._proportionallyResizeElements,f=e.length&&/textarea/i.test(e[0].nodeName),g=f&&a.ui.hasScroll(e[0],"left")?0:c.sizeDiff.height,h=f?0:c.sizeDiff.width,i={width:c.size.width-h,height:c.size.height-g},j=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null,k=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null;c.element.animate(a.extend(i,k&&j?{top:k,left:j}:{}),{duration:d.animateDuration,easing:d.animateEasing,step:function(){var d={width:parseInt(c.element.css("width"),10),height:parseInt(c.element.css("height"),10),top:parseInt(c.element.css("top"),10),left:parseInt(c.element.css("left"),10)};
e&&e.length&&a(e[0]).css({width:d.width,height:d.height}),c._updateCache(d),c._propagate("resize",b)}})}}),a.ui.plugin.add("resizable","containment",{start:function(){var b,d,e,f,g,h,i,j=a(this).data("ui-resizable"),k=j.options,l=j.element,m=k.containment,n=m instanceof a?m.get(0):/parent/.test(m)?l.parent().get(0):m;n&&(j.containerElement=a(n),/document/.test(m)||m===document?(j.containerOffset={left:0,top:0},j.containerPosition={left:0,top:0},j.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight}):(b=a(n),d=[],a(["Top","Right","Left","Bottom"]).each(function(a,e){d[a]=c(b.css("padding"+e))
}),j.containerOffset=b.offset(),j.containerPosition=b.position(),j.containerSize={height:b.innerHeight()-d[3],width:b.innerWidth()-d[1]},e=j.containerOffset,f=j.containerSize.height,g=j.containerSize.width,h=a.ui.hasScroll(n,"left")?n.scrollWidth:g,i=a.ui.hasScroll(n)?n.scrollHeight:f,j.parentData={element:n,left:e.left,top:e.top,width:h,height:i}))},resize:function(b){var c,d,e,f,g=a(this).data("ui-resizable"),h=g.options,i=g.containerOffset,j=g.position,k=g._aspectRatio||b.shiftKey,l={top:0,left:0},m=g.containerElement;
m[0]!==document&&/static/.test(m.css("position"))&&(l=i),j.left<(g._helper?i.left:0)&&(g.size.width=g.size.width+(g._helper?g.position.left-i.left:g.position.left-l.left),k&&(g.size.height=g.size.width/g.aspectRatio),g.position.left=h.helper?i.left:0),j.top<(g._helper?i.top:0)&&(g.size.height=g.size.height+(g._helper?g.position.top-i.top:g.position.top),k&&(g.size.width=g.size.height*g.aspectRatio),g.position.top=g._helper?i.top:0),g.offset.left=g.parentData.left+g.position.left,g.offset.top=g.parentData.top+g.position.top,c=Math.abs((g._helper?g.offset.left-l.left:g.offset.left-l.left)+g.sizeDiff.width),d=Math.abs((g._helper?g.offset.top-l.top:g.offset.top-i.top)+g.sizeDiff.height),e=g.containerElement.get(0)===g.element.parent().get(0),f=/relative|absolute/.test(g.containerElement.css("position")),e&&f&&(c-=g.parentData.left),c+g.size.width>=g.parentData.width&&(g.size.width=g.parentData.width-c,k&&(g.size.height=g.size.width/g.aspectRatio)),d+g.size.height>=g.parentData.height&&(g.size.height=g.parentData.height-d,k&&(g.size.width=g.size.height*g.aspectRatio))
},stop:function(){var b=a(this).data("ui-resizable"),c=b.options,d=b.containerOffset,e=b.containerPosition,f=b.containerElement,g=a(b.helper),h=g.offset(),i=g.outerWidth()-b.sizeDiff.width,j=g.outerHeight()-b.sizeDiff.height;b._helper&&!c.animate&&/relative/.test(f.css("position"))&&a(this).css({left:h.left-e.left-d.left,width:i,height:j}),b._helper&&!c.animate&&/static/.test(f.css("position"))&&a(this).css({left:h.left-e.left-d.left,width:i,height:j})}}),a.ui.plugin.add("resizable","alsoResize",{start:function(){var b=a(this).data("ui-resizable"),c=b.options,d=function(b){a(b).each(function(){var b=a(this);
b.data("ui-resizable-alsoresize",{width:parseInt(b.width(),10),height:parseInt(b.height(),10),left:parseInt(b.css("left"),10),top:parseInt(b.css("top"),10)})})};"object"!=typeof c.alsoResize||c.alsoResize.parentNode?d(c.alsoResize):c.alsoResize.length?(c.alsoResize=c.alsoResize[0],d(c.alsoResize)):a.each(c.alsoResize,function(a){d(a)})},resize:function(b,c){var d=a(this).data("ui-resizable"),e=d.options,f=d.originalSize,g=d.originalPosition,h={height:d.size.height-f.height||0,width:d.size.width-f.width||0,top:d.position.top-g.top||0,left:d.position.left-g.left||0},i=function(b,d){a(b).each(function(){var b=a(this),e=a(this).data("ui-resizable-alsoresize"),f={},g=d&&d.length?d:b.parents(c.originalElement[0]).length?["width","height"]:["width","height","top","left"];
a.each(g,function(a,b){var c=(e[b]||0)+(h[b]||0);c&&c>=0&&(f[b]=c||null)}),b.css(f)})};"object"!=typeof e.alsoResize||e.alsoResize.nodeType?i(e.alsoResize):a.each(e.alsoResize,function(a,b){i(a,b)})},stop:function(){a(this).removeData("resizable-alsoresize")}}),a.ui.plugin.add("resizable","ghost",{start:function(){var b=a(this).data("ui-resizable"),c=b.options,d=b.size;b.ghost=b.originalElement.clone(),b.ghost.css({opacity:.25,display:"block",position:"relative",height:d.height,width:d.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof c.ghost?c.ghost:""),b.ghost.appendTo(b.helper)
},resize:function(){var b=a(this).data("ui-resizable");b.ghost&&b.ghost.css({position:"relative",height:b.size.height,width:b.size.width})},stop:function(){var b=a(this).data("ui-resizable");b.ghost&&b.helper&&b.helper.get(0).removeChild(b.ghost.get(0))}}),a.ui.plugin.add("resizable","grid",{resize:function(){var b=a(this).data("ui-resizable"),c=b.options,d=b.size,e=b.originalSize,f=b.originalPosition,g=b.axis,h="number"==typeof c.grid?[c.grid,c.grid]:c.grid,i=h[0]||1,j=h[1]||1,k=Math.round((d.width-e.width)/i)*i,l=Math.round((d.height-e.height)/j)*j,m=e.width+k,n=e.height+l,o=c.maxWidth&&c.maxWidth<m,p=c.maxHeight&&c.maxHeight<n,q=c.minWidth&&c.minWidth>m,r=c.minHeight&&c.minHeight>n;
c.grid=h,q&&(m+=i),r&&(n+=j),o&&(m-=i),p&&(n-=j),/^(se|s|e)$/.test(g)?(b.size.width=m,b.size.height=n):/^(ne)$/.test(g)?(b.size.width=m,b.size.height=n,b.position.top=f.top-l):/^(sw)$/.test(g)?(b.size.width=m,b.size.height=n,b.position.left=f.left-k):(b.size.width=m,b.size.height=n,b.position.top=f.top-l,b.position.left=f.left-k)}})}(c)};a(),b.resolveWith(a)})};FD40.module("ui/resizable",a)}(),function(){var a=function(a){var b=this,c=a;a.require().script("ui/core","ui/mouse","ui/widget").done(function(){var a=function(){!function(a){var c=5;
a.widget("ui.slider",a.ui.mouse,{version:"1.10.4pre",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1
},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var b,c,d=this.options,e=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),f="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",g=[];for(c=d.values&&d.values.length||1,e.length>c&&(e.slice(c).remove(),e=e.slice(0,c)),b=e.length;c>b;b++)g.push(f);this.handles=e.add(a(g.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(b){a(this).data("ui-slider-handle-index",b)
})},_createRange:function(){var b=this.options,c="";b.range?(b.range===!0&&(b.values?b.values.length&&2!==b.values.length?b.values=[b.values[0],b.values[0]]:a.isArray(b.values)&&(b.values=b.values.slice(0)):b.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=a("<div></div>").appendTo(this.element),c="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(c+("min"===b.range||"max"===b.range?" ui-slider-range-"+b.range:""))):this.range=a([])
},_setupEvents:function(){var a=this.handles.add(this.range).filter("a");this._off(a),this._on(a,this._handleEvents),this._hoverable(a),this._focusable(a)},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(b){var c,d,e,f,g,h,i,j,k=this,l=this.options;return l.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),c={x:b.pageX,y:b.pageY},d=this._normValueFromMouse(c),e=this._valueMax()-this._valueMin()+1,this.handles.each(function(b){var c=Math.abs(d-k.values(b));
(e>c||e===c&&(b===k._lastChangedValue||k.values(b)===l.min))&&(e=c,f=a(this),g=b)}),h=this._start(b,g),h===!1?!1:(this._mouseSliding=!0,this._handleIndex=g,f.addClass("ui-state-active").focus(),i=f.offset(),j=!a(b.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=j?{left:0,top:0}:{left:b.pageX-i.left-f.width()/2,top:b.pageY-i.top-f.height()/2-(parseInt(f.css("borderTopWidth"),10)||0)-(parseInt(f.css("borderBottomWidth"),10)||0)+(parseInt(f.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(b,g,d),this._animateOff=!0,!0))
},_mouseStart:function(){return!0},_mouseDrag:function(a){var b={x:a.pageX,y:a.pageY},c=this._normValueFromMouse(b);return this._slide(a,this._handleIndex,c),!1},_mouseStop:function(a){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(a,this._handleIndex),this._change(a,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(a){var b,c,d,e,f;
return"horizontal"===this.orientation?(b=this.elementSize.width,c=a.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(b=this.elementSize.height,c=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),d=c/b,d>1&&(d=1),0>d&&(d=0),"vertical"===this.orientation&&(d=1-d),e=this._valueMax()-this._valueMin(),f=this._valueMin()+d*e,this._trimAlignValue(f)},_start:function(a,b){var c={handle:this.handles[b],value:this.value()};return this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("start",a,c)
},_slide:function(a,b,c){var d,e,f;this.options.values&&this.options.values.length?(d=this.values(b?0:1),2===this.options.values.length&&this.options.range===!0&&(0===b&&c>d||1===b&&d>c)&&(c=d),c!==this.values(b)&&(e=this.values(),e[b]=c,f=this._trigger("slide",a,{handle:this.handles[b],value:c,values:e}),d=this.values(b?0:1),f!==!1&&this.values(b,c,!0))):c!==this.value()&&(f=this._trigger("slide",a,{handle:this.handles[b],value:c}),f!==!1&&this.value(c))},_stop:function(a,b){var c={handle:this.handles[b],value:this.value()};
this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("stop",a,c)},_change:function(a,b){if(!this._keySliding&&!this._mouseSliding){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._lastChangedValue=b,this._trigger("change",a,c)}},value:function(a){return arguments.length?(this.options.value=this._trimAlignValue(a),this._refreshValue(),this._change(null,0),void 0):this._value()
},values:function(b,c){var d,e,f;if(arguments.length>1)return this.options.values[b]=this._trimAlignValue(c),this._refreshValue(),this._change(null,b),void 0;if(!arguments.length)return this._values();if(!a.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(b):this.value();for(d=this.options.values,e=arguments[0],f=0;f<d.length;f+=1)d[f]=this._trimAlignValue(e[f]),this._change(null,f);this._refreshValue()},_setOption:function(b,c){var d,e=0;switch("range"===b&&this.options.range===!0&&("min"===c?(this.options.value=this._values(0),this.options.values=null):"max"===c&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),a.isArray(this.options.values)&&(e=this.options.values.length),a.Widget.prototype._setOption.apply(this,arguments),b){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();
break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),d=0;e>d;d+=1)this._change(null,d);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var a=this.options.value;return a=this._trimAlignValue(a)},_values:function(a){var b,c,d;if(arguments.length)return b=this.options.values[a],b=this._trimAlignValue(b);
if(this.options.values&&this.options.values.length){for(c=this.options.values.slice(),d=0;d<c.length;d+=1)c[d]=this._trimAlignValue(c[d]);return c}return[]},_trimAlignValue:function(a){if(a<=this._valueMin())return this._valueMin();if(a>=this._valueMax())return this._valueMax();var b=this.options.step>0?this.options.step:1,c=(a-this._valueMin())%b,d=a-c;return 2*Math.abs(c)>=b&&(d+=c>0?b:-b),parseFloat(d.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var b,c,d,e,f,g=this.options.range,h=this.options,i=this,j=this._animateOff?!1:h.animate,k={};
this.options.values&&this.options.values.length?this.handles.each(function(d){c=(i.values(d)-i._valueMin())/(i._valueMax()-i._valueMin())*100,k["horizontal"===i.orientation?"left":"bottom"]=c+"%",a(this).stop(1,1)[j?"animate":"css"](k,h.animate),i.options.range===!0&&("horizontal"===i.orientation?(0===d&&i.range.stop(1,1)[j?"animate":"css"]({left:c+"%"},h.animate),1===d&&i.range[j?"animate":"css"]({width:c-b+"%"},{queue:!1,duration:h.animate})):(0===d&&i.range.stop(1,1)[j?"animate":"css"]({bottom:c+"%"},h.animate),1===d&&i.range[j?"animate":"css"]({height:c-b+"%"},{queue:!1,duration:h.animate}))),b=c
}):(d=this.value(),e=this._valueMin(),f=this._valueMax(),c=f!==e?(d-e)/(f-e)*100:0,k["horizontal"===this.orientation?"left":"bottom"]=c+"%",this.handle.stop(1,1)[j?"animate":"css"](k,h.animate),"min"===g&&"horizontal"===this.orientation&&this.range.stop(1,1)[j?"animate":"css"]({width:c+"%"},h.animate),"max"===g&&"horizontal"===this.orientation&&this.range[j?"animate":"css"]({width:100-c+"%"},{queue:!1,duration:h.animate}),"min"===g&&"vertical"===this.orientation&&this.range.stop(1,1)[j?"animate":"css"]({height:c+"%"},h.animate),"max"===g&&"vertical"===this.orientation&&this.range[j?"animate":"css"]({height:100-c+"%"},{queue:!1,duration:h.animate}))
},_handleEvents:{keydown:function(b){var d,e,f,g,h=a(b.target).data("ui-slider-handle-index");switch(b.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(b.preventDefault(),!this._keySliding&&(this._keySliding=!0,a(b.target).addClass("ui-state-active"),d=this._start(b,h),d===!1))return}switch(g=this.options.step,e=f=this.options.values&&this.options.values.length?this.values(h):this.value(),b.keyCode){case a.ui.keyCode.HOME:f=this._valueMin();
break;case a.ui.keyCode.END:f=this._valueMax();break;case a.ui.keyCode.PAGE_UP:f=this._trimAlignValue(e+(this._valueMax()-this._valueMin())/c);break;case a.ui.keyCode.PAGE_DOWN:f=this._trimAlignValue(e-(this._valueMax()-this._valueMin())/c);break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(e===this._valueMax())return;f=this._trimAlignValue(e+g);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(e===this._valueMin())return;f=this._trimAlignValue(e-g)}this._slide(b,h,f)},click:function(a){a.preventDefault()
},keyup:function(b){var c=a(b.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(b,c),this._change(b,c),a(b.target).removeClass("ui-state-active"))}}})}(c)};a(),b.resolveWith(a)})};FD40.module("ui/slider",a)}(),function(){var a=function(a){var b=this,c=a,d=function(){!function(a,b){var c=0,d=Array.prototype.slice,e=a.cleanData;a.cleanData=function(b){for(var d,c=0;null!=(d=b[c]);c++)try{a(d).triggerHandler("remove")}catch(f){}e(b)},a.widget=function(b,c,d){var e,f,g,h,i={},j=b.split(".")[0];
b=b.split(".")[1],e=j+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][e.toLowerCase()]=function(b){return!!a.data(b,e)},a[j]=a[j]||{},f=a[j][b],g=a[j][b]=function(a,b){return this._createWidget?(arguments.length&&this._createWidget(a,b),void 0):new g(a,b)},a.extend(g,f,{version:d.version,_proto:a.extend({},d),_childConstructors:[]}),h=new c,h.options=a.widget.extend({},h.options),a.each(d,function(b,d){return a.isFunction(d)?(i[b]=function(){var a=function(){return c.prototype[b].apply(this,arguments)},e=function(a){return c.prototype[b].apply(this,a)
};return function(){var f,b=this._super,c=this._superApply;return this._super=a,this._superApply=e,f=d.apply(this,arguments),this._super=b,this._superApply=c,f}}(),void 0):(i[b]=d,void 0)}),g.prototype=a.widget.extend(h,{widgetEventPrefix:f?h.widgetEventPrefix:b},i,{constructor:g,namespace:j,widgetName:b,widgetFullName:e}),f?(a.each(f._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,g,c._proto)}),delete f._childConstructors):c._childConstructors.push(g),a.widget.bridge(b,g)
},a.widget.extend=function(c){for(var h,i,e=d.call(arguments,1),f=0,g=e.length;g>f;f++)for(h in e[f])i=e[f][h],e[f].hasOwnProperty(h)&&i!==b&&(c[h]=a.isPlainObject(i)?a.isPlainObject(c[h])?a.widget.extend({},c[h],i):a.widget.extend({},i):i);return c},a.widget.bridge=function(c,e){var f=e.prototype.widgetFullName||c;a.fn[c]=function(g){var h="string"==typeof g,i=d.call(arguments,1),j=this;return g=!h&&i.length?a.widget.extend.apply(null,[g].concat(i)):g,h?this.each(function(){var d,e=a.data(this,f);return e?a.isFunction(e[g])&&"_"!==g.charAt(0)?(d=e[g].apply(e,i),d!==e&&d!==b?(j=d&&d.jquery?j.pushStack(d.get()):d,!1):void 0):a.error("no such method '"+g+"' for "+c+" widget instance"):a.error("cannot call methods on "+c+" prior to initialization; attempted to call method '"+g+"'")
}):this.each(function(){var b=a.data(this,f);b?b.option(g||{})._init():a.data(this,f,new e(g,this))}),j}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,d){d=a(d||this.defaultElement||this)[0],this.element=a(d),this.uuid=c++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=a.widget.extend({},this.options,this._getCreateOptions(),b),this.bindings=a(),this.hoverable=a(),this.focusable=a(),d!==this&&(a.data(d,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===d&&this.destroy()
}}),this.document=a(d.style?d.ownerDocument:d.document||d),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")
},_destroy:a.noop,widget:function(){return this.element},option:function(c,d){var f,g,h,e=c;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof c)if(e={},f=c.split("."),c=f.shift(),f.length){for(g=e[c]=a.widget.extend({},this.options[c]),h=0;h<f.length-1;h++)g[f[h]]=g[f[h]]||{},g=g[f[h]];if(c=f.pop(),d===b)return g[c]===b?null:g[c];g[c]=d}else{if(d===b)return this.options[c]===b?null:this.options[c];e[c]=d}return this._setOptions(e),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);
return this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(b,c,d){var e,f=this;"boolean"!=typeof b&&(d=c,c=b,b=!1),d?(c=e=a(c),this.bindings=this.bindings.add(c)):(d=c,c=this.element,e=this.widget()),a.each(d,function(d,g){function h(){return b||f.options.disabled!==!0&&!a(this).hasClass("ui-state-disabled")?("string"==typeof g?f[g]:g).apply(f,arguments):void 0
}"string"!=typeof g&&(h.guid=g.guid=g.guid||h.guid||a.guid++);var i=d.match(/^(\w+)\s*(.*)$/),j=i[1]+f.eventNamespace,k=i[2];k?e.delegate(k,j,h):c.bind(j,h)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,a.unbind(b).undelegate(b)},_delay:function(a,b){function c(){return("string"==typeof a?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")
},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);
return this.element.trigger(c,d),!(a.isFunction(g)&&g.apply(this.element[0],[c].concat(d))===!1||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"==typeof e&&(e={effect:e});var g,h=e?e===!0||"number"==typeof e?c:e.effect||c:b;e=e||{},"number"==typeof e&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&a.effects.effect[h]?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()
})}})}(c)};d(),b.resolveWith(d)};FD40.module("ui/widget",a)}(),function(){var a=function(a){var b=this,c=function(){!function(a,d){"function"==typeof define&&define.amd?define("wavesurfer",[],function(){return a.WaveSurfer=d()}):"object"==typeof c?b.exports=d():a.WaveSurfer=d()}(this,function(){"use strict";var a={defaultParams:{audioContext:null,audioRate:1,autoCenter:!0,backend:"WebAudio",barHeight:1,closeAudioContext:!1,container:null,cursorColor:"#333",cursorWidth:1,dragSelection:!0,fillParent:!0,forceDecode:!1,height:128,hideScrollbar:!1,interact:!0,loopSelection:!0,mediaContainer:null,mediaControls:!1,mediaType:"audio",minPxPerSec:20,partialRender:!1,pixelRatio:window.devicePixelRatio||screen.deviceXDPI/screen.logicalXDPI,progressColor:"#555",normalize:!1,renderer:"MultiCanvas",scrollParent:!1,skipLength:2,splitChannels:!1,waveColor:"#999"},init:function(b){if(this.params=a.util.extend({},this.defaultParams,b),this.container="string"==typeof b.container?document.querySelector(this.params.container):this.params.container,!this.container)throw new Error("Container element not found");
if(this.mediaContainer=null==this.params.mediaContainer?this.container:"string"==typeof this.params.mediaContainer?document.querySelector(this.params.mediaContainer):this.params.mediaContainer,!this.mediaContainer)throw new Error("Media Container element not found");this.savedVolume=0,this.isMuted=!1,this.tmpEvents=[],this.currentAjax=null,this.createDrawer(),this.createBackend(),this.createPeakCache(),this.isDestroyed=!1},createDrawer:function(){var b=this;this.drawer=Object.create(a.Drawer[this.params.renderer]),this.drawer.init(this.container,this.params),this.drawer.on("redraw",function(){b.drawBuffer(),b.drawer.progress(b.backend.getPlayedPercents())
}),this.drawer.on("click",function(a,c){setTimeout(function(){b.seekTo(c)},0)}),this.drawer.on("scroll",function(a){b.params.partialRender&&b.drawBuffer(),b.fireEvent("scroll",a)})},createBackend:function(){var b=this;this.backend&&this.backend.destroy(),"AudioElement"==this.params.backend&&(this.params.backend="MediaElement"),"WebAudio"!=this.params.backend||a.WebAudio.supportsWebAudio()||(this.params.backend="MediaElement"),this.backend=Object.create(a[this.params.backend]),this.backend.init(this.params),this.backend.on("finish",function(){b.fireEvent("finish")
}),this.backend.on("play",function(){b.fireEvent("play")}),this.backend.on("pause",function(){b.fireEvent("pause")}),this.backend.on("audioprocess",function(a){b.drawer.progress(b.backend.getPlayedPercents()),b.fireEvent("audioprocess",a)})},createPeakCache:function(){this.params.partialRender&&(this.peakCache=Object.create(a.PeakCache),this.peakCache.init())},getDuration:function(){return this.backend.getDuration()},getCurrentTime:function(){return this.backend.getCurrentTime()},play:function(a,b){this.fireEvent("interaction",this.play.bind(this,a,b)),this.backend.play(a,b)
},pause:function(){this.backend.isPaused()||this.backend.pause()},playPause:function(){this.backend.isPaused()?this.play():this.pause()},isPlaying:function(){return!this.backend.isPaused()},skipBackward:function(a){this.skip(-a||-this.params.skipLength)},skipForward:function(a){this.skip(a||this.params.skipLength)},skip:function(a){var b=this.getCurrentTime()||0,c=this.getDuration()||1;b=Math.max(0,Math.min(c,b+(a||0))),this.seekAndCenter(b/c)},seekAndCenter:function(a){this.seekTo(a),this.drawer.recenter(a)
},seekTo:function(a){this.fireEvent("interaction",this.seekTo.bind(this,a));var b=this.backend.isPaused();b||this.backend.pause();var c=this.params.scrollParent;this.params.scrollParent=!1,this.backend.seekTo(a*this.getDuration()),this.drawer.progress(this.backend.getPlayedPercents()),b||this.backend.play(),this.params.scrollParent=c,this.fireEvent("seek",a)},stop:function(){this.pause(),this.seekTo(0),this.drawer.progress(0)},setVolume:function(a){this.backend.setVolume(a)},getVolume:function(){return this.backend.getVolume()
},setPlaybackRate:function(a){this.backend.setPlaybackRate(a)},getPlaybackRate:function(){return this.backend.getPlaybackRate()},toggleMute:function(){this.setMute(!this.isMuted)},setMute:function(a){a!==this.isMuted&&(a?(this.savedVolume=this.backend.getVolume(),this.backend.setVolume(0),this.isMuted=!0):(this.backend.setVolume(this.savedVolume),this.isMuted=!1))},getMute:function(){return this.isMuted},getFilters:function(){return this.backend.filters||[]},toggleScroll:function(){this.params.scrollParent=!this.params.scrollParent,this.drawBuffer()
},toggleInteraction:function(){this.params.interact=!this.params.interact},drawBuffer:function(){var a=Math.round(this.getDuration()*this.params.minPxPerSec*this.params.pixelRatio),b=this.drawer.getWidth(),c=a,d=this.drawer.getScrollX(),e=Math.min(d+b,c);if(this.params.fillParent&&(!this.params.scrollParent||b>a)&&(c=b,d=0,e=c),this.params.partialRender)for(var f=this.peakCache.addRangeToPeakCache(c,d,e),g=0;g<f.length;g++){var h=this.backend.getPeaks(c,f[g][0],f[g][1]);this.drawer.drawPeaks(h,c,f[g][0],f[g][1])
}else{d=0,e=c;var h=this.backend.getPeaks(c,d,e);this.drawer.drawPeaks(h,c,d,e)}this.fireEvent("redraw",h,c)},zoom:function(a){this.params.minPxPerSec=a,this.params.scrollParent=!0,this.drawBuffer(),this.drawer.progress(this.backend.getPlayedPercents()),this.drawer.recenter(this.getCurrentTime()/this.getDuration()),this.fireEvent("zoom",a)},loadArrayBuffer:function(a){this.decodeArrayBuffer(a,function(a){this.isDestroyed||this.loadDecodedBuffer(a)}.bind(this))},loadDecodedBuffer:function(a){this.backend.load(a),this.drawBuffer(),this.fireEvent("ready")
},loadBlob:function(a){var b=this,c=new FileReader;c.addEventListener("progress",function(a){b.onProgress(a)}),c.addEventListener("load",function(a){b.loadArrayBuffer(a.target.result)}),c.addEventListener("error",function(){b.fireEvent("error","Error reading file")}),c.readAsArrayBuffer(a),this.empty()},load:function(a,b,c){switch(this.empty(),this.isMuted=!1,this.params.backend){case"WebAudio":return this.loadBuffer(a,b);case"MediaElement":return this.loadMediaElement(a,b,c)}},loadBuffer:function(a,b){var c=function(b){return b&&this.tmpEvents.push(this.once("ready",b)),this.getArrayBuffer(a,this.loadArrayBuffer.bind(this))
}.bind(this);return b?(this.backend.setPeaks(b),this.drawBuffer(),this.tmpEvents.push(this.once("interaction",c)),void 0):c()},loadMediaElement:function(a,b,c){var d=a;if("string"==typeof a)this.backend.load(d,this.mediaContainer,b,c);else{var e=a;this.backend.loadElt(e,b),d=e.src}this.tmpEvents.push(this.backend.once("canplay",function(){this.drawBuffer(),this.fireEvent("ready")}.bind(this)),this.backend.once("error",function(a){this.fireEvent("error",a)}.bind(this))),b&&this.backend.setPeaks(b),b&&!this.params.forceDecode||!this.backend.supportsWebAudio()||this.getArrayBuffer(d,function(a){this.decodeArrayBuffer(a,function(a){this.backend.buffer=a,this.backend.setPeaks(null),this.drawBuffer(),this.fireEvent("waveform-ready")
}.bind(this))}.bind(this))},decodeArrayBuffer:function(a,b){this.arraybuffer=a,this.backend.decodeArrayBuffer(a,function(c){this.isDestroyed||this.arraybuffer!=a||(b(c),this.arraybuffer=null)}.bind(this),this.fireEvent.bind(this,"error","Error decoding audiobuffer"))},getArrayBuffer:function(b,c){var d=this,e=a.util.ajax({url:b,responseType:"arraybuffer"});return this.currentAjax=e,this.tmpEvents.push(e.on("progress",function(a){d.onProgress(a)}),e.on("success",function(a){c(a),d.currentAjax=null}),e.on("error",function(a){d.fireEvent("error","XHR error: "+a.target.statusText),d.currentAjax=null
})),e},onProgress:function(a){if(a.lengthComputable)var b=a.loaded/a.total;else b=a.loaded/(a.loaded+1e6);this.fireEvent("loading",Math.round(100*b),a.target)},exportPCM:function(a,b,c){a=a||1024,b=b||1e4,c=c||!1;var d=this.backend.getPeaks(a,b),e=[].map.call(d,function(a){return Math.round(a*b)/b}),f=JSON.stringify(e);return c||window.open("data:application/json;charset=utf-8,"+encodeURIComponent(f)),f},exportImage:function(a,b){return a||(a="image/png"),b||(b=1),this.drawer.getImage(a,b)},cancelAjax:function(){this.currentAjax&&(this.currentAjax.xhr.abort(),this.currentAjax=null)
},clearTmpEvents:function(){this.tmpEvents.forEach(function(a){a.un()})},empty:function(){this.backend.isPaused()||(this.stop(),this.backend.disconnectSource()),this.cancelAjax(),this.clearTmpEvents(),this.drawer.progress(0),this.drawer.setWidth(0),this.drawer.drawPeaks({length:this.drawer.getWidth()},0)},destroy:function(){this.fireEvent("destroy"),this.cancelAjax(),this.clearTmpEvents(),this.unAll(),this.backend.destroy(),this.drawer.destroy(),this.isDestroyed=!0}};return a.create=function(b){var c=Object.create(a);
return c.init(b),c},a.util={extend:function(a){var b=Array.prototype.slice.call(arguments,1);return b.forEach(function(b){Object.keys(b).forEach(function(c){a[c]=b[c]})}),a},debounce:function(a,b,c){var d,e,f,g=function(){f=null,c||a.apply(e,d)};return function(){e=this,d=arguments;var h=c&&!f;clearTimeout(f),f=setTimeout(g,b),f||(f=setTimeout(g,b)),h&&a.apply(e,d)}},min:function(a){var b=+1/0;for(var c in a)a[c]<b&&(b=a[c]);return b},max:function(a){var b=-1/0;for(var c in a)a[c]>b&&(b=a[c]);return b},getId:function(){return"wavesurfer_"+Math.random().toString(32).substring(2)
},ajax:function(b){var c=Object.create(a.Observer),d=new XMLHttpRequest,e=!1;return d.open(b.method||"GET",b.url,!0),d.responseType=b.responseType||"json",d.addEventListener("progress",function(a){c.fireEvent("progress",a),a.lengthComputable&&a.loaded==a.total&&(e=!0)}),d.addEventListener("load",function(a){e||c.fireEvent("progress",a),c.fireEvent("load",a),200==d.status||206==d.status?c.fireEvent("success",d.response,a):c.fireEvent("error",a)}),d.addEventListener("error",function(a){c.fireEvent("error",a)}),d.send(),c.xhr=d,c
}},a.Observer={on:function(a,b){this.handlers||(this.handlers={});var c=this.handlers[a];return c||(c=this.handlers[a]=[]),c.push(b),{name:a,callback:b,un:this.un.bind(this,a,b)}},un:function(a,b){if(this.handlers){var c=this.handlers[a];if(c)if(b)for(var d=c.length-1;d>=0;d--)c[d]==b&&c.splice(d,1);else c.length=0}},unAll:function(){this.handlers=null},once:function(a,b){var c=this,d=function(){b.apply(this,arguments),setTimeout(function(){c.un(a,d)},0)};return this.on(a,d)},fireEvent:function(a){if(this.handlers){var b=this.handlers[a],c=Array.prototype.slice.call(arguments,1);
b&&b.forEach(function(a){a.apply(null,c)})}}},a.util.extend(a,a.Observer),a.WebAudio={scriptBufferSize:256,PLAYING_STATE:0,PAUSED_STATE:1,FINISHED_STATE:2,supportsWebAudio:function(){return!(!window.AudioContext&&!window.webkitAudioContext)},getAudioContext:function(){return a.WebAudio.audioContext||(a.WebAudio.audioContext=new(window.AudioContext||window.webkitAudioContext)),a.WebAudio.audioContext},getOfflineAudioContext:function(b){return a.WebAudio.offlineAudioContext||(a.WebAudio.offlineAudioContext=new(window.OfflineAudioContext||window.webkitOfflineAudioContext)(1,2,b)),a.WebAudio.offlineAudioContext
},init:function(b){this.params=b,this.ac=b.audioContext||this.getAudioContext(),this.lastPlay=this.ac.currentTime,this.startPosition=0,this.scheduledPause=null,this.states=[Object.create(a.WebAudio.state.playing),Object.create(a.WebAudio.state.paused),Object.create(a.WebAudio.state.finished)],this.createVolumeNode(),this.createScriptNode(),this.createAnalyserNode(),this.setState(this.PAUSED_STATE),this.setPlaybackRate(this.params.audioRate),this.setLength(0)},disconnectFilters:function(){this.filters&&(this.filters.forEach(function(a){a&&a.disconnect()
}),this.filters=null,this.analyser.connect(this.gainNode))},setState:function(a){this.state!==this.states[a]&&(this.state=this.states[a],this.state.init.call(this))},setFilter:function(){this.setFilters([].slice.call(arguments))},setFilters:function(a){this.disconnectFilters(),a&&a.length&&(this.filters=a,this.analyser.disconnect(),a.reduce(function(a,b){return a.connect(b),b},this.analyser).connect(this.gainNode))},createScriptNode:function(){this.scriptNode=this.ac.createScriptProcessor?this.ac.createScriptProcessor(this.scriptBufferSize):this.ac.createJavaScriptNode(this.scriptBufferSize),this.scriptNode.connect(this.ac.destination)
},addOnAudioProcess:function(){var a=this;this.scriptNode.onaudioprocess=function(){var b=a.getCurrentTime();b>=a.getDuration()?(a.setState(a.FINISHED_STATE),a.fireEvent("pause")):b>=a.scheduledPause?a.pause():a.state===a.states[a.PLAYING_STATE]&&a.fireEvent("audioprocess",b)}},removeOnAudioProcess:function(){this.scriptNode.onaudioprocess=null},createAnalyserNode:function(){this.analyser=this.ac.createAnalyser(),this.analyser.connect(this.gainNode)},createVolumeNode:function(){this.gainNode=this.ac.createGain?this.ac.createGain():this.ac.createGainNode(),this.gainNode.connect(this.ac.destination)
},setVolume:function(a){this.gainNode.gain.value=a},getVolume:function(){return this.gainNode.gain.value},decodeArrayBuffer:function(a,b,c){this.offlineAc||(this.offlineAc=this.getOfflineAudioContext(this.ac?this.ac.sampleRate:44100)),this.offlineAc.decodeAudioData(a,function(a){b(a)}.bind(this),c)},setPeaks:function(a){this.peaks=a},setLength:function(a){if(!this.mergedPeaks||a!=2*this.mergedPeaks.length-1+2){this.splitPeaks=[],this.mergedPeaks=[];for(var b=this.buffer?this.buffer.numberOfChannels:1,c=0;b>c;c++)this.splitPeaks[c]=[],this.splitPeaks[c][2*(a-1)]=0,this.splitPeaks[c][2*(a-1)+1]=0;
this.mergedPeaks[2*(a-1)]=0,this.mergedPeaks[2*(a-1)+1]=0}},getPeaks:function(a,b,c){if(this.peaks)return this.peaks;this.setLength(a);for(var d=this.buffer.length/a,e=~~(d/10)||1,f=this.buffer.numberOfChannels,g=0;f>g;g++)for(var h=this.splitPeaks[g],i=this.buffer.getChannelData(g),j=b;c>=j;j++){for(var k=~~(j*d),l=~~(k+d),m=0,n=0,o=k;l>o;o+=e){var p=i[o];p>n&&(n=p),m>p&&(m=p)}h[2*j]=n,h[2*j+1]=m,(0==g||n>this.mergedPeaks[2*j])&&(this.mergedPeaks[2*j]=n),(0==g||m<this.mergedPeaks[2*j+1])&&(this.mergedPeaks[2*j+1]=m)
}return this.params.splitChannels?this.splitPeaks:this.mergedPeaks},getPlayedPercents:function(){return this.state.getPlayedPercents.call(this)},disconnectSource:function(){this.source&&this.source.disconnect()},destroy:function(){this.isPaused()||this.pause(),this.unAll(),this.buffer=null,this.disconnectFilters(),this.disconnectSource(),this.gainNode.disconnect(),this.scriptNode.disconnect(),this.analyser.disconnect(),this.params.closeAudioContext&&("function"==typeof this.ac.close&&"closed"!=this.ac.state&&this.ac.close(),this.ac=null,this.params.audioContext?this.params.audioContext=null:a.WebAudio.audioContext=null,a.WebAudio.offlineAudioContext=null)
},load:function(a){this.startPosition=0,this.lastPlay=this.ac.currentTime,this.buffer=a,this.createSource()},createSource:function(){this.disconnectSource(),this.source=this.ac.createBufferSource(),this.source.start=this.source.start||this.source.noteGrainOn,this.source.stop=this.source.stop||this.source.noteOff,this.source.playbackRate.value=this.playbackRate,this.source.buffer=this.buffer,this.source.connect(this.analyser)},isPaused:function(){return this.state!==this.states[this.PLAYING_STATE]},getDuration:function(){return this.buffer?this.buffer.duration:0
},seekTo:function(a,b){return this.buffer?(this.scheduledPause=null,null==a&&(a=this.getCurrentTime(),a>=this.getDuration()&&(a=0)),null==b&&(b=this.getDuration()),this.startPosition=a,this.lastPlay=this.ac.currentTime,this.state===this.states[this.FINISHED_STATE]&&this.setState(this.PAUSED_STATE),{start:a,end:b}):void 0},getPlayedTime:function(){return(this.ac.currentTime-this.lastPlay)*this.playbackRate},play:function(a,b){if(this.buffer){this.createSource();var c=this.seekTo(a,b);a=c.start,b=c.end,this.scheduledPause=b,this.source.start(0,a,b-a),"suspended"==this.ac.state&&this.ac.resume&&this.ac.resume(),this.setState(this.PLAYING_STATE),this.fireEvent("play")
}},pause:function(){this.scheduledPause=null,this.startPosition+=this.getPlayedTime(),this.source&&this.source.stop(0),this.setState(this.PAUSED_STATE),this.fireEvent("pause")},getCurrentTime:function(){return this.state.getCurrentTime.call(this)},getPlaybackRate:function(){return this.playbackRate},setPlaybackRate:function(a){a=a||1,this.isPaused()?this.playbackRate=a:(this.pause(),this.playbackRate=a,this.play())}},a.WebAudio.state={},a.WebAudio.state.playing={init:function(){this.addOnAudioProcess()},getPlayedPercents:function(){var a=this.getDuration();
return this.getCurrentTime()/a||0},getCurrentTime:function(){return this.startPosition+this.getPlayedTime()}},a.WebAudio.state.paused={init:function(){this.removeOnAudioProcess()},getPlayedPercents:function(){var a=this.getDuration();return this.getCurrentTime()/a||0},getCurrentTime:function(){return this.startPosition}},a.WebAudio.state.finished={init:function(){this.removeOnAudioProcess(),this.fireEvent("finish")},getPlayedPercents:function(){return 1},getCurrentTime:function(){return this.getDuration()}},a.util.extend(a.WebAudio,a.Observer),a.MediaElement=Object.create(a.WebAudio),a.util.extend(a.MediaElement,{init:function(a){this.params=a,this.media={currentTime:0,duration:0,paused:!0,playbackRate:1,play:function(){},pause:function(){}},this.mediaType=a.mediaType.toLowerCase(),this.elementPosition=a.elementPosition,this.setPlaybackRate(this.params.audioRate),this.createTimer()
},createTimer:function(){var a=this,c=function(){if(!a.isPaused()){a.fireEvent("audioprocess",a.getCurrentTime());var b=window.requestAnimationFrame||window.webkitRequestAnimationFrame;b(c)}};this.on("play",c)},load:function(a,b,c,d){var f=document.createElement(this.mediaType);f.controls=this.params.mediaControls,f.autoplay=this.params.autoplay||!1,f.preload=null==d?"auto":d,f.src=a,f.style.width="100%";var g=b.querySelector(this.mediaType);g&&b.removeChild(g),b.appendChild(f),this._load(f,c)},loadElt:function(a,b){var d=a;
d.controls=this.params.mediaControls,d.autoplay=this.params.autoplay||!1,this._load(d,b)},_load:function(a,b){var c=this;"function"==typeof a.load&&a.load(),a.addEventListener("error",function(){c.fireEvent("error","Error loading media element")}),a.addEventListener("canplay",function(){c.fireEvent("canplay")}),a.addEventListener("ended",function(){c.fireEvent("finish")}),this.media=a,this.peaks=b,this.onPlayEnd=null,this.buffer=null,this.setPlaybackRate(this.playbackRate)},isPaused:function(){return!this.media||this.media.paused
},getDuration:function(){var a=(this.buffer||this.media).duration;return a>=1/0&&(a=this.media.seekable.end(0)),a},getCurrentTime:function(){return this.media&&this.media.currentTime},getPlayedPercents:function(){return this.getCurrentTime()/this.getDuration()||0},getPlaybackRate:function(){return this.playbackRate||this.media.playbackRate},setPlaybackRate:function(a){this.playbackRate=a||1,this.media.playbackRate=this.playbackRate},seekTo:function(a){null!=a&&(this.media.currentTime=a),this.clearPlayEnd()},play:function(a,b){this.seekTo(a),this.media.play(),b&&this.setPlayEnd(b),this.fireEvent("play")
},pause:function(){this.media&&this.media.pause(),this.clearPlayEnd(),this.fireEvent("pause")},setPlayEnd:function(a){var b=this;this.onPlayEnd=function(c){c>=a&&(b.pause(),b.seekTo(a))},this.on("audioprocess",this.onPlayEnd)},clearPlayEnd:function(){this.onPlayEnd&&(this.un("audioprocess",this.onPlayEnd),this.onPlayEnd=null)},getPeaks:function(b,c,d){return this.buffer?a.WebAudio.getPeaks.call(this,b,c,d):this.peaks||[]},getVolume:function(){return this.media.volume},setVolume:function(a){this.media.volume=a
},destroy:function(){this.pause(),this.unAll(),this.media&&this.media.parentNode&&this.media.parentNode.removeChild(this.media),this.media=null}}),a.AudioElement=a.MediaElement,a.Drawer={init:function(a,b){this.container=a,this.params=b,this.width=0,this.height=b.height*this.params.pixelRatio,this.lastPos=0,this.initDrawer(b),this.createWrapper(),this.createElements()},createWrapper:function(){this.wrapper=this.container.appendChild(document.createElement("wave")),this.style(this.wrapper,{display:"block",position:"relative",userSelect:"none",webkitUserSelect:"none",height:this.params.height+"px"}),(this.params.fillParent||this.params.scrollParent)&&this.style(this.wrapper,{width:"100%",overflowX:this.params.hideScrollbar?"hidden":"auto",overflowY:"hidden"}),this.setupWrapperEvents()
},handleEvent:function(a,b){!b&&a.preventDefault();var g,c=a.targetTouches?a.targetTouches[0].clientX:a.clientX,d=this.wrapper.getBoundingClientRect(),e=this.width,f=this.getWidth();return!this.params.fillParent&&f>e?(g=(c-d.left)*this.params.pixelRatio/e||0,g>1&&(g=1)):g=(c-d.left+this.wrapper.scrollLeft)/this.wrapper.scrollWidth||0,g},setupWrapperEvents:function(){var a=this;this.wrapper.addEventListener("click",function(b){var c=a.wrapper.offsetHeight-a.wrapper.clientHeight;if(0!=c){var d=a.wrapper.getBoundingClientRect();
if(b.clientY>=d.bottom-c)return}a.params.interact&&a.fireEvent("click",b,a.handleEvent(b))}),this.wrapper.addEventListener("scroll",function(b){a.fireEvent("scroll",b)})},drawPeaks:function(a,b,c,d){this.setWidth(b),this.params.barWidth?this.drawBars(a,0,c,d):this.drawWave(a,0,c,d)},style:function(a,b){return Object.keys(b).forEach(function(c){a.style[c]!==b[c]&&(a.style[c]=b[c])}),a},resetScroll:function(){null!==this.wrapper&&(this.wrapper.scrollLeft=0)},recenter:function(a){var b=this.wrapper.scrollWidth*a;
this.recenterOnPosition(b,!0)},recenterOnPosition:function(a,b){var c=this.wrapper.scrollLeft,d=~~(this.wrapper.clientWidth/2),e=a-d,f=e-c,g=this.wrapper.scrollWidth-this.wrapper.clientWidth;if(0!=g){if(!b&&f>=-d&&d>f){var h=5;f=Math.max(-h,Math.min(h,f)),e=c+f}e=Math.max(0,Math.min(g,e)),e!=c&&(this.wrapper.scrollLeft=e)}},getScrollX:function(){return Math.round(this.wrapper.scrollLeft*this.params.pixelRatio)},getWidth:function(){return Math.round(this.container.clientWidth*this.params.pixelRatio)},setWidth:function(a){this.width!=a&&(this.width=a,this.params.fillParent||this.params.scrollParent?this.style(this.wrapper,{width:""}):this.style(this.wrapper,{width:~~(this.width/this.params.pixelRatio)+"px"}),this.updateSize())
},setHeight:function(a){a!=this.height&&(this.height=a,this.style(this.wrapper,{height:~~(this.height/this.params.pixelRatio)+"px"}),this.updateSize())},progress:function(a){var b=1/this.params.pixelRatio,c=Math.round(a*this.width)*b;if(c<this.lastPos||c-this.lastPos>=b){if(this.lastPos=c,this.params.scrollParent&&this.params.autoCenter){var d=~~(this.wrapper.scrollWidth*a);this.recenterOnPosition(d)}this.updateProgress(c)}},destroy:function(){this.unAll(),this.wrapper&&(this.container.removeChild(this.wrapper),this.wrapper=null)
},initDrawer:function(){},createElements:function(){},updateSize:function(){},drawWave:function(){},clearWave:function(){},updateProgress:function(){}},a.util.extend(a.Drawer,a.Observer),a.Drawer.Canvas=Object.create(a.Drawer),a.util.extend(a.Drawer.Canvas,{createElements:function(){var a=this.wrapper.appendChild(this.style(document.createElement("canvas"),{position:"absolute",zIndex:1,left:0,top:0,bottom:0}));if(this.waveCc=a.getContext("2d"),this.progressWave=this.wrapper.appendChild(this.style(document.createElement("wave"),{position:"absolute",zIndex:2,left:0,top:0,bottom:0,overflow:"hidden",width:"0",display:"none",boxSizing:"border-box",borderRightStyle:"solid",borderRightWidth:this.params.cursorWidth+"px",borderRightColor:this.params.cursorColor})),this.params.waveColor!=this.params.progressColor){var b=this.progressWave.appendChild(document.createElement("canvas"));
this.progressCc=b.getContext("2d")}},updateSize:function(){var a=Math.round(this.width/this.params.pixelRatio);this.waveCc.canvas.width=this.width,this.waveCc.canvas.height=this.height,this.style(this.waveCc.canvas,{width:a+"px"}),this.style(this.progressWave,{display:"block"}),this.progressCc&&(this.progressCc.canvas.width=this.width,this.progressCc.canvas.height=this.height,this.style(this.progressCc.canvas,{width:a+"px"})),this.clearWave()},clearWave:function(){this.waveCc.clearRect(0,0,this.width,this.height),this.progressCc&&this.progressCc.clearRect(0,0,this.width,this.height)
},drawBars:function(b,c,d,e){var f=this;if(b[0]instanceof Array){var g=b;if(this.params.splitChannels)return this.setHeight(g.length*this.params.height*this.params.pixelRatio),g.forEach(function(a,b){f.drawBars(a,b,d,e)}),void 0;b=g[0]}var h=[].some.call(b,function(a){return 0>a}),i=1;h&&(i=2);var j=.5/this.params.pixelRatio,k=this.width,l=this.params.height*this.params.pixelRatio,m=l*c||0,n=l/2,o=b.length/i,p=this.params.barWidth*this.params.pixelRatio,q=Math.max(this.params.pixelRatio,~~(p/2)),r=p+q,s=1/this.params.barHeight;
if(this.params.normalize){var t=a.util.max(b),u=a.util.min(b);s=-u>t?-u:t}var v=o/k;this.waveCc.fillStyle=this.params.waveColor,this.progressCc&&(this.progressCc.fillStyle=this.params.progressColor),[this.waveCc,this.progressCc].forEach(function(a){if(a)for(var c=d/v;e/v>c;c+=r){var f=b[Math.floor(c*v*i)]||0,g=Math.round(f/s*n);a.fillRect(c+j,n-g+m,p+j,2*g)}},this)},drawWave:function(b,c,d,e){var f=this;if(b[0]instanceof Array){var g=b;if(this.params.splitChannels)return this.setHeight(g.length*this.params.height*this.params.pixelRatio),g.forEach(function(a,b){f.drawWave(a,b,d,e)
}),void 0;b=g[0]}var h=[].some.call(b,function(a){return 0>a});if(!h){for(var i=[],j=0,k=b.length;k>j;j++)i[2*j]=b[j],i[2*j+1]=-b[j];b=i}var l=.5/this.params.pixelRatio,m=this.params.height*this.params.pixelRatio,n=m*c||0,o=m/2,p=~~(b.length/2),q=1;this.params.fillParent&&this.width!=p&&(q=this.width/p);var r=1/this.params.barHeight;if(this.params.normalize){var s=a.util.max(b),t=a.util.min(b);r=-t>s?-t:s}this.waveCc.fillStyle=this.params.waveColor,this.progressCc&&(this.progressCc.fillStyle=this.params.progressColor),[this.waveCc,this.progressCc].forEach(function(a){if(a){a.beginPath(),a.moveTo(d*q+l,o+n);
for(var c=d;e>c;c++){var f=Math.round(b[2*c]/r*o);a.lineTo(c*q+l,o-f+n)}for(var c=e-1;c>=d;c--){var f=Math.round(b[2*c+1]/r*o);a.lineTo(c*q+l,o-f+n)}a.closePath(),a.fill(),a.fillRect(0,o+n-l,this.width,l)}},this)},updateProgress:function(a){this.style(this.progressWave,{width:a+"px"})},getImage:function(a,b){return this.waveCc.canvas.toDataURL(a,b)}}),a.Drawer.MultiCanvas=Object.create(a.Drawer),a.util.extend(a.Drawer.MultiCanvas,{initDrawer:function(a){if(this.maxCanvasWidth=null!=a.maxCanvasWidth?a.maxCanvasWidth:4e3,this.maxCanvasElementWidth=Math.round(this.maxCanvasWidth/this.params.pixelRatio),this.maxCanvasWidth<=1)throw"maxCanvasWidth must be greater than 1.";
if(this.maxCanvasWidth%2==1)throw"maxCanvasWidth must be an even number.";this.hasProgressCanvas=this.params.waveColor!=this.params.progressColor,this.halfPixel=.5/this.params.pixelRatio,this.canvases=[]},createElements:function(){this.progressWave=this.wrapper.appendChild(this.style(document.createElement("wave"),{position:"absolute",zIndex:2,left:0,top:0,bottom:0,overflow:"hidden",width:"0",display:"none",boxSizing:"border-box",borderRightStyle:"solid",borderRightWidth:this.params.cursorWidth+"px",borderRightColor:this.params.cursorColor})),this.addCanvas()
},updateSize:function(){for(var a=Math.round(this.width/this.params.pixelRatio),b=Math.ceil(a/this.maxCanvasElementWidth);this.canvases.length<b;)this.addCanvas();for(;this.canvases.length>b;)this.removeCanvas();for(var c in this.canvases){if(void 0===this.canvases[c].waveCtx)break;var d=this.maxCanvasWidth+2*Math.ceil(this.params.pixelRatio/2);c==this.canvases.length-1&&(d=this.width-this.maxCanvasWidth*(this.canvases.length-1)),this.updateDimensions(this.canvases[c],d,this.height),this.clearWaveForEntry(this.canvases[c])
}},addCanvas:function(){var a={},b=this.maxCanvasElementWidth*this.canvases.length;a.wave=this.wrapper.appendChild(this.style(document.createElement("canvas"),{position:"absolute",zIndex:1,left:b+"px",top:0,bottom:0,height:"100%"})),a.waveCtx=a.wave.getContext("2d"),this.hasProgressCanvas&&(a.progress=this.progressWave.appendChild(this.style(document.createElement("canvas"),{position:"absolute",left:b+"px",top:0,bottom:0,height:"100%"})),a.progressCtx=a.progress.getContext("2d")),this.canvases.push(a)},removeCanvas:function(){var a=this.canvases.pop();
a.wave.parentElement.removeChild(a.wave),this.hasProgressCanvas&&a.progress.parentElement.removeChild(a.progress)},updateDimensions:function(a,b,c){var d=Math.round(b/this.params.pixelRatio),e=Math.round(this.width/this.params.pixelRatio);a.start=a.waveCtx.canvas.offsetLeft/e||0,a.end=a.start+d/e,a.waveCtx.canvas.width=b,a.waveCtx.canvas.height=c,this.style(a.waveCtx.canvas,{width:d+"px"}),this.style(this.progressWave,{display:"block"}),this.hasProgressCanvas&&(a.progressCtx.canvas.width=b,a.progressCtx.canvas.height=c,this.style(a.progressCtx.canvas,{width:d+"px"}))
},clearWave:function(){for(var a in this.canvases)this.clearWaveForEntry(this.canvases[a])},clearWaveForEntry:function(a){a.waveCtx.clearRect(0,0,a.waveCtx.canvas.width,a.waveCtx.canvas.height),this.hasProgressCanvas&&a.progressCtx.clearRect(0,0,a.progressCtx.canvas.width,a.progressCtx.canvas.height)},drawBars:function(b,c,d,e){var f=this;if(b[0]instanceof Array){var g=b;if(this.params.splitChannels)return this.setHeight(g.length*this.params.height*this.params.pixelRatio),g.forEach(function(a,b){f.drawBars(a,b,d,e)
}),void 0;b=g[0]}var h=[].some.call(b,function(a){return 0>a}),i=1;h&&(i=2);var j=this.width,k=this.params.height*this.params.pixelRatio,l=k*c||0,m=k/2,n=b.length/i,o=this.params.barWidth*this.params.pixelRatio,p=Math.max(this.params.pixelRatio,~~(o/2)),q=o+p,r=1/this.params.barHeight;if(this.params.normalize){var s=a.util.max(b),t=a.util.min(b);r=-t>s?-t:s}for(var u=n/j,v=d/u;e/u>v;v+=q){var w=b[Math.floor(v*u*i)]||0,x=Math.round(w/r*m);this.fillRect(v+this.halfPixel,m-x+l,o+this.halfPixel,2*x)}},drawWave:function(b,c,d,e){var f=this;
if(b[0]instanceof Array){var g=b;if(this.params.splitChannels)return this.setHeight(g.length*this.params.height*this.params.pixelRatio),g.forEach(function(a,b){f.drawWave(a,b,d,e)}),void 0;b=g[0]}var h=[].some.call(b,function(a){return 0>a});if(!h){for(var i=[],j=0,k=b.length;k>j;j++)i[2*j]=b[j],i[2*j+1]=-b[j];b=i}var l=this.params.height*this.params.pixelRatio,m=l*c||0,n=l/2,o=1/this.params.barHeight;if(this.params.normalize){var p=a.util.max(b),q=a.util.min(b);o=-q>p?-q:p}this.drawLine(b,o,n,m,d,e),this.fillRect(0,n+m-this.halfPixel,this.width,this.halfPixel)
},drawLine:function(a,b,c,d,e,f){for(var g in this.canvases){var h=this.canvases[g];this.setFillStyles(h),this.drawLineToContext(h,h.waveCtx,a,b,c,d,e,f),this.drawLineToContext(h,h.progressCtx,a,b,c,d,e,f)}},drawLineToContext:function(a,b,c,d,e,f,g,h){if(b){var i=c.length/2,j=1;this.params.fillParent&&this.width!=i&&(j=this.width/i);var k=Math.round(i*a.start),l=Math.round(i*a.end);if(!(k>h||g>l)){var m=Math.max(k,g),n=Math.min(l,h);b.beginPath(),b.moveTo((m-k)*j+this.halfPixel,e+f);for(var o=m;n>o;o++){var p=c[2*o]||0,q=Math.round(p/d*e);
b.lineTo((o-k)*j+this.halfPixel,e-q+f)}for(var o=n-1;o>=m;o--){var p=c[2*o+1]||0,q=Math.round(p/d*e);b.lineTo((o-k)*j+this.halfPixel,e-q+f)}b.closePath(),b.fill()}}},fillRect:function(a,b,c,d){for(var e=Math.floor(a/this.maxCanvasWidth),f=Math.min(Math.ceil((a+c)/this.maxCanvasWidth)+1,this.canvases.length),g=e;f>g;g++){var h=this.canvases[g],i=g*this.maxCanvasWidth,j={x1:Math.max(a,g*this.maxCanvasWidth),y1:b,x2:Math.min(a+c,g*this.maxCanvasWidth+h.waveCtx.canvas.width),y2:b+d};j.x1<j.x2&&(this.setFillStyles(h),this.fillRectToContext(h.waveCtx,j.x1-i,j.y1,j.x2-j.x1,j.y2-j.y1),this.fillRectToContext(h.progressCtx,j.x1-i,j.y1,j.x2-j.x1,j.y2-j.y1))
}},fillRectToContext:function(a,b,c,d,e){a&&a.fillRect(b,c,d,e)},setFillStyles:function(a){a.waveCtx.fillStyle=this.params.waveColor,this.hasProgressCanvas&&(a.progressCtx.fillStyle=this.params.progressColor)},updateProgress:function(a){this.style(this.progressWave,{width:a+"px"})},getImage:function(a,b){var c=[];return this.canvases.forEach(function(d){c.push(d.wave.toDataURL(a,b))}),c.length>1?c:c[0]}}),a.Drawer.SplitWavePointPlot=Object.create(a.Drawer.Canvas),a.util.extend(a.Drawer.SplitWavePointPlot,{defaultPlotParams:{plotNormalizeTo:"whole",plotTimeStart:0,plotMin:0,plotMax:1,plotColor:"#f63",plotProgressColor:"#F00",plotPointHeight:2,plotPointWidth:2,plotSeparator:!0,plotSeparatorColor:"black",plotRangeDisplay:!1,plotRangeUnits:"",plotRangePrecision:4,plotRangeIgnoreOutliers:!1,plotRangeFontSize:12,plotRangeFontType:"Ariel",waveDrawMedianLine:!0,plotFileDelimiter:"	"},plotTimeStart:0,plotTimeEnd:-1,plotArrayLoaded:!1,plotArray:[],plotPoints:[],plotMin:0,plotMax:1,initDrawer:function(a){var b=this;
for(var c in this.defaultPlotParams)void 0===this.params[c]&&(this.params[c]=this.defaultPlotParams[c]);if(this.plotTimeStart=this.params.plotTimeStart,void 0!==this.params.plotTimeEnd&&(this.plotTimeEnd=this.params.plotTimeEnd),Array.isArray(a.plotArray))this.plotArray=a.plotArray,this.plotArrayLoaded=!0;else{var d=function(a){b.plotArray=a,b.plotArrayLoaded=!0,b.fireEvent("plot_array_loaded")};this.loadPlotArrayFromFile(a.plotFileUrl,d,this.params.plotFileDelimiter)}},drawPeaks:function(a,b,c,d){if(1==this.plotArrayLoaded)this.setWidth(b),this.splitChannels=!0,this.params.height=this.params.height/2,a[0]instanceof Array&&(a=a[0]),this.params.barWidth?this.drawBars(a,1,c,d):this.drawWave(a,1,c,d),this.params.height=2*this.params.height,this.calculatePlots(),this.drawPlots();
else{var e=this;e.on("plot-array-loaded",function(){e.drawPeaks(a,b,c,d)})}},drawPlots:function(){var a=this.params.height*this.params.pixelRatio/2,b=.5/this.params.pixelRatio;this.waveCc.fillStyle=this.params.plotColor,this.progressCc&&(this.progressCc.fillStyle=this.params.plotProgressColor);for(var c in this.plotPoints){var d=parseInt(c),e=a-this.params.plotPointHeight-this.plotPoints[c]*(a-this.params.plotPointHeight),f=this.params.plotPointHeight;this.waveCc.fillRect(d,e,this.params.plotPointWidth,f),this.progressCc&&this.progressCc.fillRect(d,e,this.params.plotPointWidth,f)
}this.params.plotSeparator&&(this.waveCc.fillStyle=this.params.plotSeparatorColor,this.waveCc.fillRect(0,a,this.width,b)),this.params.plotRangeDisplay&&this.displayPlotRange()},displayPlotRange:function(){var a=this.params.plotRangeFontSize*this.params.pixelRatio,b=this.plotMax.toPrecision(this.params.plotRangePrecision)+" "+this.params.plotRangeUnits,c=this.plotMin.toPrecision(this.params.plotRangePrecision)+" "+this.params.plotRangeUnits;this.waveCc.font=a.toString()+"px "+this.params.plotRangeFontType,this.waveCc.fillText(b,3,a),this.waveCc.fillText(c,3,this.height/2)
},calculatePlots:function(){this.plotPoints={},this.calculatePlotTimeEnd();for(var a=[],b=-1,c=0,d=99999999999999,e=0,f=99999999999999,g=this.plotTimeEnd-this.plotTimeStart,h=0;h<this.plotArray.length;h++){var i=this.plotArray[h];if(i.value>c&&(c=i.value),i.value<d&&(d=i.value),i.time>=this.plotTimeStart&&i.time<=this.plotTimeEnd){var j=Math.round(this.width*(i.time-this.plotTimeStart)/g);if(a.push(i.value),j!==b&&a.length>0){var k=this.avg(a);k>e&&(e=k),f>k&&(f=k),this.plotPoints[b]=k,a=[]}b=j}}"whole"==this.params.plotNormalizeTo?(this.plotMin=d,this.plotMax=c):"values"==this.params.plotNormalizeTo?(this.plotMin=this.params.plotMin,this.plotMax=this.params.plotMax):(this.plotMin=f,this.plotMax=e),this.normalizeValues()
},normalizeValues:function(){var a={};if("none"!==this.params.plotNormalizeTo){for(var b in this.plotPoints){var c=(this.plotPoints[b]-this.plotMin)/(this.plotMax-this.plotMin);c>1?this.params.plotRangeIgnoreOutliers||(a[b]=1):0>c?this.params.plotRangeIgnoreOutliers||(a[b]=0):a[b]=c}this.plotPoints=a}},loadPlotArrayFromFile:function(b,c,d){void 0===d&&(d="	");var e=[],f={url:b,responseType:"text"},g=a.util.ajax(f);g.on("load",function(a){if(200==a.currentTarget.status){for(var b=a.currentTarget.responseText.split("\n"),f=0;f<b.length;f++){var g=b[f].split(d);
2==g.length&&e.push({time:parseFloat(g[0]),value:parseFloat(g[1])})}c(e)}})},calculatePlotTimeEnd:function(){this.plotTimeEnd=void 0!==this.params.plotTimeEnd?this.params.plotTimeEnd:this.plotArray[this.plotArray.length-1].time},avg:function(a){var b=a.reduce(function(a,b){return a+b});return b/a.length}}),a.util.extend(a.Drawer.SplitWavePointPlot,a.Observer),a.PeakCache={init:function(){this.clearPeakCache()},clearPeakCache:function(){this.peakCacheRanges=[],this.peakCacheLength=-1},addRangeToPeakCache:function(a,b,c){a!=this.peakCacheLength&&(this.clearPeakCache(),this.peakCacheLength=a);
for(var d=[],e=0;e<this.peakCacheRanges.length&&this.peakCacheRanges[e]<b;)e++;for(e%2==0&&d.push(b);e<this.peakCacheRanges.length&&this.peakCacheRanges[e]<=c;)d.push(this.peakCacheRanges[e]),e++;e%2==0&&d.push(c),d=d.filter(function(a,b,c){return 0==b?a!=c[b+1]:b==c.length-1?a!=c[b-1]:a!=c[b-1]&&a!=c[b+1]}),this.peakCacheRanges=this.peakCacheRanges.concat(d),this.peakCacheRanges=this.peakCacheRanges.sort(function(a,b){return a-b}).filter(function(a,b,c){return 0==b?a!=c[b+1]:b==c.length-1?a!=c[b-1]:a!=c[b-1]&&a!=c[b+1]
});var f=[];for(e=0;e<d.length;e+=2)f.push([d[e],d[e+1]]);return f},getCacheRanges:function(){for(var a=[],b=0;b<this.peakCacheRanges.length;b+=2)a.push([this.peakCacheRanges[b],this.peakCacheRanges[b+1]]);return a}},function(){var b=function(){var b=document.querySelectorAll("wavesurfer");Array.prototype.forEach.call(b,function(b){var c=a.util.extend({container:b,backend:"MediaElement",mediaControls:!0},b.dataset);b.style.display="block";var d=a.create(c);if(b.dataset.peaks)var e=JSON.parse(b.dataset.peaks);
d.load(b.dataset.url,e)})};"complete"===document.readyState?b():window.addEventListener("load",b)}(),a})};c(),b.resolveWith(c)};FD40.module("wavesurfer",a)}()}),FD40.installer("EasySocial","definitions",function(a){a.module(["easysocial/apps/fields/event/description/content","easysocial/apps/fields/event/permalink/content","easysocial/apps/fields/event/permalink/sample_content","easysocial/apps/fields/event/recurring/content","easysocial/apps/fields/event/startend/content","easysocial/apps/fields/event/startend/display","easysocial/apps/fields/group/description/content","easysocial/apps/fields/group/permalink/content","easysocial/apps/fields/group/permalink/sample_content","easysocial/apps/fields/page/description/content","easysocial/apps/fields/page/permalink/content","easysocial/apps/fields/page/permalink/sample_content","easysocial/apps/fields/user/address/content","easysocial/apps/fields/user/address/display_content","easysocial/apps/fields/user/address/maps","easysocial/apps/fields/user/address/osm","easysocial/apps/fields/user/autocomplete/content","easysocial/apps/fields/user/avatar/content","easysocial/apps/fields/user/avatar/sample_content","easysocial/apps/fields/user/checkbox/content","easysocial/apps/fields/user/checkbox/sample_content","easysocial/apps/fields/user/country/content","easysocial/apps/fields/user/country/sample_content","easysocial/apps/fields/user/cover/content","easysocial/apps/fields/user/currency/content","easysocial/apps/fields/user/datetime/content","easysocial/apps/fields/user/datetime/display_content","easysocial/apps/fields/user/datetime/dropdown","easysocial/apps/fields/user/datetime/sample_content","easysocial/apps/fields/user/dropdown/content","easysocial/apps/fields/user/email/content","easysocial/apps/fields/user/file/content","easysocial/apps/fields/user/file/sample_content","easysocial/apps/fields/user/gender/content","easysocial/apps/fields/user/joomla_email/content","easysocial/apps/fields/user/joomla_email/registermini_content","easysocial/apps/fields/user/joomla_email/sample_content","easysocial/apps/fields/user/joomla_fullname/content","easysocial/apps/fields/user/joomla_fullname/sample_content","easysocial/apps/fields/user/joomla_password/content","easysocial/apps/fields/user/joomla_password/registermini_content","easysocial/apps/fields/user/joomla_password/sample_content","easysocial/apps/fields/user/joomla_timezone/content","easysocial/apps/fields/user/joomla_username/content","easysocial/apps/fields/user/joomla_username/registermini_content","easysocial/apps/fields/user/joomla_username/sample_content","easysocial/apps/fields/user/keycaptcha/content","easysocial/apps/fields/user/keycaptcha/registermini_content","easysocial/apps/fields/user/multidropdown/content","easysocial/apps/fields/user/multilist/content","easysocial/apps/fields/user/multitextbox/content","easysocial/apps/fields/user/numeric/content","easysocial/apps/fields/user/password/content","easysocial/apps/fields/user/password/sample_content","easysocial/apps/fields/user/permalink/content","easysocial/apps/fields/user/permalink/sample_content","easysocial/apps/fields/user/relationship/content","easysocial/apps/fields/user/separator/sample","easysocial/apps/fields/user/terms/content","easysocial/apps/fields/user/textarea/content","easysocial/apps/fields/user/textbox/content","easysocial/apps/fields/user/textbox/sample_content","easysocial/apps/fields/user/url/content","easysocial/shared/elements","easysocial/shared/fields/base","easysocial/shared/fields/conditional","easysocial/shared/fields/validate","easysocial/shared/popdown","easysocial/shared/privacy","easysocial/shared/responsive","easysocial/shared/sidebarmenu","easysocial/uploader/item","easysocial/uploader/queue","easysocial/uploader/uploader","easysocial/admin/admin","easysocial/admin/api/tabs","easysocial/admin/api/toolbar","easysocial/admin/apps/store","easysocial/admin/clusters/users","easysocial/admin/discovery/discovery","easysocial/admin/events/approveRecurring","easysocial/admin/events/events","easysocial/admin/events/store","easysocial/admin/events/users","easysocial/admin/grid/grid","easysocial/admin/grid/ordering","easysocial/admin/grid/sort","easysocial/admin/groups/groups","easysocial/admin/header/apps","easysocial/admin/maintenance/maintenance","easysocial/admin/migrators/migrator","easysocial/admin/pages/pages","easysocial/admin/profiles/avatar","easysocial/admin/profiles/form","easysocial/admin/progress/progress","easysocial/admin/regions/form","easysocial/admin/regions/init","easysocial/admin/users/form","easysocial/admin/users/privacy","easysocial/admin/users/users","easysocial/admin/utilities/alias","easysocial/admin/vendors/drag","easysocial/admin/vendors/mousewheel","easysocial/admin/vendors/raty","easysocial/admin/vendors/resize","easysocial/admin/vendors/uniform","easysocial/admin/workflows/choices","easysocial/admin/workflows/form"])
}),FD40.installer("EasySocial","scripts",function(){EasySocial.module("apps/fields/event/description/content",function(a){var b=this;EasySocial.Controller("Field.Event.Description",{defaultOptions:{required:!1,editor:null,"{input}":"[data-field-description]"}},function(b,c){return{init:function(){b.editor=b.options.editor},"{self} onRender":function(){var a=b.input().htmlData();c.error=a.error||{}},"{input} keyup":function(){b.validateInput()},"{input} blur":function(){b.validateInput()},validateInput:function(){b.clearError();
var d=b.editor.getContent();return b.options.required&&a.isEmpty(d)?(b.raiseError(c.error.required),!1):!0},raiseError:function(a){b.trigger("error",[a])},clearError:function(){b.trigger("clear")},"{self} onError":function(a,d,e){"required"===e&&b.raiseError(c.error.required)},"{self} onSubmit":function(c,d,e){var f=b.options.fieldId,g=b.options.editorName;if("tinymce"==g){var h="#"+f;"object"==typeof tinyMCE&&a(h).is(":visible")&&tinyMCE.execCommand("mceToggleEditor",!1,f)}e.push(b.validateInput())}}}),b.resolve()
}),EasySocial.module("apps/fields/event/permalink/content",function(a){var b=this;EasySocial.Controller("Field.Event.Permalink",{defaultOptions:{required:!1,max:0,id:null,clusterid:null,userid:null,"{field}":"[data-field-permalink]","{checkButton}":"[data-permalink-check]","{input}":"[data-permalink-input]","{available}":"[data-permalink-available]"}},function(b,c){return{state:!1,init:function(){c.max=b.field().data("max")},"{self} onRender":function(){var a=b.field().htmlData();c.error=a.error||{}},"{checkButton} click":function(){b.delayedCheck()
},"{input} keyup":function(){b.delayedCheck()},delayedCheck:a.debounce(function(){b.checkPermalink()},250),checkPermalink:function(){b.clearError();var d=b.input().val();if(b.available().hide(),b.options.max>0&&d.length>b.options.max)return b.raiseError(c.error.max),!1;if(!a.isEmpty(d)){b.checkButton().addClass("is-loading");var e=a.Deferred();return EasySocial.ajax("fields/event/permalink/isValid",{id:b.options.id,clusterid:b.options.clusterid,permalink:d}).done(function(){b.clearError(),b.checkButton().removeClass("is-loading"),b.available().show(),e.resolve()
}).fail(function(a){b.raiseError(a),b.checkButton().removeClass("is-loading"),b.available().hide(),e.reject()}),e}return b.options.required&&a.isEmpty(d)?(b.available().hide(),b.raiseError(c.error.required),!1):!0},raiseError:function(a){b.trigger("error",[a])},clearError:function(){b.trigger("clear")},"{self} onSubmit":function(a,c,d){d.push(b.checkPermalink())}}}),b.resolve()}),EasySocial.module("apps/fields/event/permalink/sample_content",function(){var b=this;EasySocial.Controller("Field.Permalink.Sample",{defaultOptions:{"{checkPermalink}":"[data-check-permalink]"}},function(a){return{init:function(){},"{self} onConfigChange":function(b,c,d,e){switch(d){case"check_permalink":a.checkPermalink().toggle(!!e)
}}}}),b.resolve()}),EasySocial.module("apps/fields/event/recurring/content",function(a){var b=this,c=EasySocial.options.momentLang;EasySocial.require().library("datetimepicker","moment/"+c).done(function(){EasySocial.Controller("Field.Event.Recurring",{defaultOptions:{dateFormat:"",id:null,value:{},allday:0,showWarningMessages:0,eventId:null,dow:0,"{type}":"[data-recurring-type]","{endBlock}":"[data-recurring-end-block]","{picker}":"[data-recurring-end-picker]","{toggle}":"[data-recurring-end-toggle]","{result}":"[data-recurring-end-result]","{dailyBlock}":"[data-recurring-daily-block]","{dailyInput}":"[data-recurring-daily-block] input","{summaryBlock}":"[data-recurring-summary-block]","{showSchedules}":"[data-show-schedules]","{scheduleLoadingBlock}":"[data-recurring-schedule-loading-block]","{deleteRecurringButton}":"[data-recurring-delete]"}},function(b){return{init:function(){var d=b.options.dateFormat,e=b.options.dow;
b.picker()._datetimepicker({pickTime:!1,component:"es",useCurrent:!1,format:d,language:c,dow:e});var f=b.result().val();if(!a.isEmpty(f)){var g=a.moment(f);b.datetimepicker("setDate",g)}b.calculateRecurringEvents()},changed:0,"{window} easysocial.fields.allday.change":function(a,c,d){b.options.allday=d,b.calculateRecurringEvents()},"{window} easysocial.fields.startend.start.change":function(){b.calculateRecurringEvents()},"{toggle} click":function(){b.picker().focus()},"{picker} dp.change":function(a,c){b.setDateValue(c.date.toDate()),b.detectChanges(),b.calculateRecurringEvents()
},"{type} change":function(a){var d=a.val();b.endBlock()["none"===d?"hide":"show"](),b.dailyBlock()["daily"===d?"show":"hide"](),b.detectChanges(),b.calculateRecurringEvents()},"{dailyInput} change":function(){b.detectChanges(),b.calculateRecurringEvents()},calculateRecurringEvents:function(){b.summaryBlock().hide(),b.scheduleLoadingBlock().hide(),b.clearError();var c=a("[data-event-start]").find("[data-datetime]").val(),d=a("[data-event-timezone]").val(),e=b.result().val(),f=b.type().val(),g=[];("none"!=f||b.options.showWarningMessages)&&(a.isEmpty(c)||a.isEmpty(e)||a.isEmpty(f)||(a.each(b.dailyBlock().find("input"),function(b,c){el=a(c),el.is(":checked")&&g.push(el.val())
}),b.scheduleLoadingBlock().show(),b.getTotalRecurring({start:c,timezone:d,end:e,type:f,daily:g})))},getTotalRecurring:a.debounce(function(a){b.clearError(),EasySocial.ajax("fields/event/recurring/calculateRecurringEvents",{id:b.options.id,start:a.start,timezone:a.timezone,allday:b.options.allday,end:a.end,type:a.type,daily:a.daily,eventId:b.options.eventId,changed:b.changed,showWarningMessages:b.options.showWarningMessages}).done(function(a){b.summaryBlock().html(a).show()}).fail(function(a){b.raiseError(a)
}).always(function(){b.scheduleLoadingBlock().hide()})},500),detectChanges:function(){var c=b.result().val(),d=b.type().val(),e=[],f=!1;a.each(b.dailyBlock().find("input"),function(b,c){el=a(c),el.is(":checked")&&e.push(el.val())}),(d!=b.options.value.type||c!=b.options.value.end||e.length!=b.options.value.daily.length)&&(f=!0),a.each(e,function(c,d){return-1==a.inArray(d,b.options.value.daily)?(f=!0,!1):void 0}),a.each(b.options.value.daily,function(b,c){return-1==a.inArray(c,e)?(f=!0,!1):void 0}),b.changed=f?1:0,a(window).trigger("easysocial.fields.recurring.changed",[f])
},"{showSchedules} click":function(){var e=a("[data-event-start]").find("[data-datetime]").val(),f=a("[data-event-timezone]").val(),g=b.result().val(),h=b.type().val(),i=[];a.each(b.dailyBlock().find("input"),function(b,c){el=a(c),el.is(":checked")&&i.push(el.val())}),EasySocial.dialog({content:EasySocial.ajax("fields/event/recurring/getScheduledEvents",{id:b.options.id,start:e,timezone:f,allday:b.options.allday,end:g,type:h,daily:i,eventId:b.options.eventId})})},"{deleteRecurringButton} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/events/deleteRecurringDialog",{id:b.options.eventId}),bindings:{"{submitButton} click":function(){b.deleteRecurring().done(function(){EasySocial.dialog().close(),b.calculateRecurringEvents()
})}}})},deleteRecurring:function(){return EasySocial.ajax("site/controllers/events/deleteRecurring",{eventId:b.options.eventId})},datetimepicker:function(a,c){return b.picker().data("DateTimePicker")[a](c)},setDateValue:function(a){b.result().val(a.getFullYear()+"-"+("00"+(a.getMonth()+1)).slice(-2)+"-"+("00"+a.getDate()).slice(-2)+" "+("00"+a.getHours()).slice(-2)+":"+("00"+a.getMinutes()).slice(-2)+":"+("00"+a.getSeconds()).slice(-2))},"{self} onSubmit":function(a,b,c){c.push(!0)},raiseError:function(a){b.trigger("error",[a])
},clearError:function(){b.trigger("clear")}}}),b.resolve()})}),EasySocial.module("apps/fields/event/startend/content",function(){var b=this,c=EasySocial.options.momentLang;EasySocial.require().library("datetimepicker","moment/"+c,"chosen").done(function(a){EasySocial.Controller("Field.Event.Startend",{defaultOptions:{dateFormat:"",allowTime:!0,allowTimezone:!0,disallowPast:!1,minuteStepping:15,yearfrom:"",yearto:"",requiredEnd:!1,allday:!1,calendarLanguage:"english",dow:0,"{field}":"[data-field-startend]","{startForm}":"[data-event-start]","{endForm}":"[data-event-end]","{timezone}":"[data-event-timezone]"}},function(b,c){return{init:function(){var d=b.field().htmlData();
c.error=d.error||{},b.options.yearto=a.isEmpty(b.options.yearto)?(new Date).getFullYear()+100:parseInt(b.options.yearto)+1,b.options.yearfrom=b.options.yearfrom||1930,b.startDatetime=b.startForm().addController("EasySocial.Controller.Field.Event.Startend.Form",{"{parent}":b,type:"start"}),b.endDatetime=b.endForm().addController("EasySocial.Controller.Field.Event.Startend.Form",{"{parent}":b,type:"end"}),b.timezone().length>0&&b.timezone().chosen({allow_single_deselect:!0,search_contains:!0})},"{self} onSubmit":function(a,c,d){d.push(b.validateInput())
},validateInput:function(){return b.clearError(),a.isEmpty(b.startDatetime.datetime().val())?(b.raiseError(c.error.start.required),!1):b.options.requireEnd&&a.isEmpty(b.endDatetime.datetime().val())?(b.raiseError(c.error.end.required),!1):!0},raiseError:function(a){b.trigger("error",[a])},clearError:function(){b.trigger("clear")}}}),EasySocial.Controller("Field.Event.Startend.Form",{defaultOptions:{type:null,"{picker}":"[data-picker]","{toggle}":"[data-picker-toggle]","{datetime}":"[data-datetime]"}},function(b,d){return{init:function(){b.load()
},"{window} easysocial.fields.startend.start.change":function(){"start"==d.type&&b.parent.endDatetime&&(b.parent.endDatetime.datetimepicker("destroy"),b.parent.endDatetime.load())},"{window} easysocial.fields.allday.change":function(a,c,d){b.datetimepicker("destroy"),b.parent.options.allday=1==d?!0:!1,b.load()},load:function(){var e=new a.moment;if(b.parent.options.disallowPast?e.date(e.date()-1):e.year(b.parent.options.yearfrom),"end"==d.type){var f=b.parent.startDatetime.datetime().val();if(f)var e=a.moment(f),e=e.date(e.date()-1)
}var g=b.parent.options.allowTime&&!b.parent.options.allday,h=b.parent.options.dateFormat;g||(h=h.substr(0,10)),b.picker()._datetimepicker({component:"es",useCurrent:!1,format:h,minDate:e,maxDate:new a.moment({y:b.parent.options.yearto}),icons:{time:"far fa-clock",date:"fa fa-calendar",up:"fa fa-chevron-up",down:"fa fa-chevron-down"},sideBySide:!1,pickTime:g,minuteStepping:parseInt(b.parent.options.minuteStepping),language:"english"==b.parent.options.calendarLanguage?"en-gb":c,dow:b.parent.options.dow});var i=b.datetime().val();
if(!a.isEmpty(i)){var j=a.moment(i);b.datetimepicker("setDate",j)}if("end"==d.type){var f=b.parent.startDatetime.datetime().val();if(f){var k=a.moment(f);if(a.isEmpty(i))b.datetimepicker("setDate",k),b.datetimepicker("setDate",""),b.datetime().val("");else{var l=a.moment(i);k.unix()>l.unix()&&b.datetimepicker("setDate",k)}}}},datetimepicker:function(a,c){return b.picker().data("DateTimePicker")[a](c)},"{toggle} click":function(){b.picker().focus()},"{picker} dp.change":function(c,e){b.setDateValue(e.date.toDate()),a(window).trigger("easysocial.fields.startend."+d.type+".change",[e.date])
},"{picker} change":function(c){a.isEmpty(c.val())&&b.datetime().val("")},setDateValue:function(a){b.datetime().val(a.getFullYear()+"-"+("00"+(a.getMonth()+1)).slice(-2)+"-"+("00"+a.getDate()).slice(-2)+" "+("00"+a.getHours()).slice(-2)+":"+("00"+a.getMinutes()).slice(-2)+":"+("00"+a.getSeconds()).slice(-2))}}}),b.resolve()})}),EasySocial.module("apps/fields/event/startend/display",function(){var b=this;EasySocial.require().library("chosen","popbox").done(function(a){EasySocial.Controller("Field.Event.Startend.Display.Box",{defaultOptions:{date:null,timezone:null,local:null,"{toggle}":"[data-popbox]","{content}":"[data-popbox-content]","{date}":"[data-date]","{timezone}":"[data-timezone]","{loading}":"[data-loading]"}},function(b,c){return{init:function(){c.timezone=b.timezone().data("timezone"),c.date=b.date().data("date-utc"),c.local=-(new Date).getTimezoneOffset/60;
var a=b.content().html(),d=b.toggle().data("popbox-position");b.toggle().popbox({content:a,id:"es",component:"ui",type:"timezone",toggle:"click",position:d}).attr("data-popbox","")},"{toggle} popboxActivate":function(a,c,d){d.tooltip.addController("EasySocial.Controller.Field.Event.Startend.Display.Timezone",{"{parent}":b})},datetime:a.memoize(function(a){return EasySocial.ajax("fields/event/startend/getDatetime",{id:c.id,userid:c.userid,tz:a,local:b.options.local,datetime:c.date})})}}),EasySocial.Controller("Field.Event.Startend.Display.Timezone",{defaultOptions:{"{timezones}":"[data-timezone-select]","{reset}":"[data-timezone-reset]","{local}":"[data-timezone-local]"}},function(a){return{init:function(){a.timezones().chosen({search_contains:!0})
},"{timezones} change":function(b){var d=b.find(":selected"),e=d.val(),f=d.text();a.parent.element.addClass("is-loading"),a.parent.timezone().html(f),a.parent.datetime(e).done(function(b){a.parent.date().html(b),a.parent.element.removeClass("is-loading")})},"{reset} click":function(){a.setTimezone(a.parent.options.timezone)},"{local} click":function(){a.setTimezone("local")},setTimezone:function(b){a.timezones().val(b).trigger("liszt:updated").trigger("change")}}}),b.resolve()})}),EasySocial.module("apps/fields/group/description/content",function(a){var b=this;
EasySocial.Controller("Field.Group.Description",{defaultOptions:{required:!1,editor:null,"{input}":"[data-field-description]"}},function(b,c){return{init:function(){b.editor=b.options.editor},"{self} onRender":function(){var a=b.input().htmlData();c.error=a.error||{}},"{input} keyup":function(){b.validateInput()},"{input} blur":function(){b.validateInput()},validateInput:function(){b.clearError();var d=b.editor.getContent();return b.options.required&&a.isEmpty(d)?(b.raiseError(c.error.required),!1):!0},raiseError:function(a){b.trigger("error",[a])
},clearError:function(){b.trigger("clear")},"{self} onError":function(a,d,e){"required"===e&&b.raiseError(c.error.required)},"{self} onSubmit":function(c,d,e){var f=b.options.fieldId,g=b.options.editorName;if("tinymce"==g){var h="#"+f;"object"==typeof tinyMCE&&a(h).is(":visible")&&tinyMCE.execCommand("mceToggleEditor",!1,f)}e.push(b.validateInput())}}}),b.resolve()}),EasySocial.module("apps/fields/group/permalink/content",function(a){var b=this;EasySocial.Controller("Field.Group.Permalink",{defaultOptions:{required:!1,max:0,id:null,groupid:null,userid:null,"{field}":"[data-field-permalink]","{checkButton}":"[data-permalink-check]","{input}":"[data-permalink-input]","{available}":"[data-permalink-available]"}},function(b,c){return{state:!1,init:function(){c.max=b.field().data("max")
},"{self} onRender":function(){var a=b.field().htmlData();c.error=a.error||{}},"{checkButton} click":function(){b.delayedCheck()},"{input} keyup":function(){b.delayedCheck()},delayedCheck:a.debounce(function(){b.checkPermalink()},250),checkPermalink:function(){b.clearError();var d=b.input().val();if(b.available().hide(),b.options.max>0&&d.length>b.options.max)return b.raiseError(c.error.max),!1;if(!a.isEmpty(d)){b.checkButton().addClass("is-loading");var e=a.Deferred();return EasySocial.ajax("fields/group/permalink/isValid",{id:b.options.id,groupid:b.options.groupid,permalink:d}).done(function(){b.clearError(),b.checkButton().removeClass("is-loading"),b.available().show(),e.resolve()
}).fail(function(a){b.raiseError(a),b.checkButton().removeClass("is-loading"),b.available().hide(),e.reject()}),e}return b.options.required&&a.isEmpty(d)?(b.available().hide(),b.raiseError(c.error.required),!1):!0},raiseError:function(a){b.trigger("error",[a])},clearError:function(){b.trigger("clear")},"{self} onSubmit":function(a,c,d){d.push(b.checkPermalink())}}}),b.resolve()}),EasySocial.module("apps/fields/group/permalink/sample_content",function(){var b=this;EasySocial.Controller("Field.Permalink.Sample",{defaultOptions:{"{checkPermalink}":"[data-check-permalink]"}},function(a){return{init:function(){},"{self} onConfigChange":function(b,c,d,e){switch(d){case"check_permalink":a.checkPermalink().toggle(!!e)
}}}}),b.resolve()}),EasySocial.module("apps/fields/page/description/content",function(a){var b=this;EasySocial.Controller("Field.Page.Description",{defaultOptions:{required:!1,editor:null,"{input}":"[data-field-description]"}},function(b,c){return{init:function(){b.editor=b.options.editor},"{self} onRender":function(){var a=b.input().htmlData();c.error=a.error||{}},"{input} keyup":function(){b.validateInput()},"{input} blur":function(){b.validateInput()},validateInput:function(){b.clearError();var d=b.editor.getContent();
return b.options.required&&a.isEmpty(d)?(b.raiseError(c.error.required),!1):!0},raiseError:function(a){b.trigger("error",[a])},clearError:function(){b.trigger("clear")},"{self} onError":function(a,d,e){"required"===e&&b.raiseError(c.error.required)},"{self} onSubmit":function(c,d,e){var f=b.options.fieldId,g=b.options.editorName;if("tinymce"==g){var h="#"+f;"object"==typeof tinyMCE&&a(h).is(":visible")&&tinyMCE.execCommand("mceToggleEditor",!1,f)}e.push(b.validateInput())}}}),b.resolve()}),EasySocial.module("apps/fields/page/permalink/content",function(a){var b=this;
EasySocial.Controller("Field.Page.Permalink",{defaultOptions:{required:!1,max:0,id:null,pageid:null,userid:null,"{field}":"[data-field-permalink]","{checkButton}":"[data-permalink-check]","{input}":"[data-permalink-input]","{available}":"[data-permalink-available]"}},function(b,c){return{state:!1,init:function(){c.max=b.field().data("max")},"{self} onRender":function(){var a=b.field().htmlData();c.error=a.error||{}},"{checkButton} click":function(){b.delayedCheck()},"{input} keyup":function(){b.delayedCheck()
},delayedCheck:a.debounce(function(){b.checkPermalink()},250),checkPermalink:function(){b.clearError();var d=b.input().val();if(b.available().hide(),b.options.max>0&&d.length>b.options.max)return b.raiseError(c.error.max),!1;if(!a.isEmpty(d)){b.checkButton().addClass("is-loading");var e=a.Deferred();return EasySocial.ajax("fields/page/permalink/isValid",{id:b.options.id,pageid:b.options.pageid,permalink:d}).done(function(){b.clearError(),b.checkButton().removeClass("is-loading"),b.available().show(),e.resolve()
}).fail(function(a){b.raiseError(a),b.checkButton().removeClass("is-loading"),b.available().hide(),e.reject()}),e}return b.options.required&&a.isEmpty(d)?(b.available().hide(),b.raiseError(c.error.required),!1):!0},raiseError:function(a){b.trigger("error",[a])},clearError:function(){b.trigger("clear")},"{self} onSubmit":function(a,c,d){d.push(b.checkPermalink())}}}),b.resolve()}),EasySocial.module("apps/fields/page/permalink/sample_content",function(){var b=this;EasySocial.Controller("Field.Permalink.Sample",{defaultOptions:{"{checkPermalink}":"[data-check-permalink]"}},function(a){return{init:function(){},"{self} onConfigChange":function(b,c,d,e){switch(d){case"check_permalink":a.checkPermalink().toggle(!!e)
}}}}),b.resolve()}),EasySocial.module("apps/fields/user/address/content",function(a){var b=this;EasySocial.Controller("Field.Address",{defaultOptions:{required:{},show:{},"{field}":"[data-field-address]","{address1}":"[data-field-address-address1]","{address2}":"[data-field-address-address2]","{city}":"[data-field-address-city]","{state}":"[data-field-address-state]","{country}":"[data-field-address-country]","{zip}":"[data-field-address-zip]","{required}":"[data-required]","{notice}":"[data-check-notice]"}},function(b,c){return{init:function(){},fields:["address1","address2","city","state","zip","country"],"{self} onRender":function(){var e=b.field().htmlData();
c.error=e.error},validateInput:function(){b.clearError();var d=!1;return b.clearError(),a.each(b.fields,function(e,f){var g=b[f]();g.removeClass("has-error");var h=g.val();a.isEmpty(h)&&b.options.required[f]&&b.options.show[f]&&(g.addClass("has-error"),d||(b.raiseError(c.error[f]),d=!0))}),d?!1:!0},"{address1}, {address2}, {zip}, {city}, {state} blur":function(){b.validateInput()},"{country} change":function(c){if(b.validateInput(),b.state().is("select")){if(""==c.val()){b.state().empty();{a("<option></option>").html(b.options.selectCountryText).val("").appendTo(b.state())
}return}EasySocial.ajax("fields/user/address/getStates",{id:b.options.id,country:c.val()}).done(function(c){b.state().empty(),a("<option></option>").html(b.options.selectStateText).val("").appendTo(b.state()),a.each(c,function(c,d){a("<option></option>").html(d).val(d).appendTo(b.state())})})}},raiseError:function(a){b.trigger("error",[a])},clearError:function(){b.trigger("clear")},"{self} onSubmit":function(a,c,d){d.push(b.validateInput())},"{self} onConfigChange":function(c,d,e,f){var g=["address1","address2","city","zip","state","country"];
a.inArray(e,g)>=0&&(b.options.required[e]=!!f),b.required().hide(),a.each(g,function(a,c){return b.options[c]?(b.required().show(),!1):void 0})}}}),b.resolve()}),EasySocial.module("apps/fields/user/address/display_content",function(a){var b=this;EasySocial.require().library("gmaps","leaflet","leaflet-providers").done(function(){EasySocial.Controller("Field.Address.Display",{defaultOptions:{latitude:null,longitude:null,ratio:1,mapElementId:"map","{base}":"[data-location-base]","{map}":"[data-location-map]","{mapImage}":"[data-location-map-image]"}},function(b){return{init:function(){b.options.mapElementId&&(b.mapElementId=b.options.mapElementId);
var a=b.map();b.options.latitude=a.data("latitude"),b.options.longitude=a.data("longitude"),b.options.provider=a.data("location-provider"),b.setLayout()},"{window} resize":a.debounce(function(){b.setLayout()},250),navigate:function(c,d){if(!b.options.staticMap&&"osm"==b.options.provider)return b.navigateDynamic(c,d),b.base().addClass("has-location"),b.base().removeClass("is-loading"),void 0;{var e=b.mapImage();Math.floor(e.width()),Math.floor(e.height())}if("osm"==b.options.provider)var h="//maps.wikimedia.org/img/osm-intl,15,"+c+","+d+",600x300.png";
else var h=a.GMaps.staticMapURL({size:[1280,1280],lat:c,lng:d,sensor:!0,scale:2,markers:[{lat:c,lng:d}]});var h=h.replace(/http\:|https\:/,"");a.Image.get(h).done(function(){e.css({backgroundImage:a.cssUrl(h),backgroundSize:"cover",backgroundPosition:"center center"}),b.base().addClass("has-location")}).always(function(){b.base().removeClass("is-loading")})},navigateDynamic:function(a,c){b.osm=L.map(b.mapElementId,{zoom:12}),b.osm.fitWorld(),L.tileLayer.provider("Wikimedia").addTo(b.osm);var d={lat:parseFloat(a),lng:parseFloat(c)};
b.osm.flyTo(d,13,{duration:3}),marker=L.marker(d).addTo(b.osm)},setLayout:function(){setTimeout(function(){b.options.latitude&&b.options.longitude&&b.navigate(b.options.latitude,b.options.longitude)},1)},"{self} onShow":function(){b.setLayout()}}}),b.resolve()})}),EasySocial.module("apps/fields/user/address/maps",function(a){var b=this;a.template("easysocial/maps.suggestion",'<div class="es-location-suggestion" data-location-suggestion><span class="formatted_address">[%= location.formatted_address %]</span></div>'),EasySocial.require().library("gmaps","placeholder","image").done(function(){var c={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,ENTER:13,ESCAPE:27,LEFT:37,RIGHT:39,SPACE:32,TAB:9,UP:38};
EasySocial.Controller("Field.Address.Maps",{defaultOptions:{zoom:2,latitude:null,longitude:null,address:null,singleLocation:!0,staticMap:!1,required:!1,ratio:3,"{field}":"[data-field-address]","{base}":"[data-location-base]","{map}":"[data-location-map]","{mapImage}":"[data-location-map-image]","{detectButton}":"[data-location-detect]","{removeButton}":"[data-location-remove]","{form}":"[data-location-form]","{textbox}":"[data-location-textbox]","{textField}":"[data-location-textfield]","{autocomplete}":"[data-location-autocomplete]","{suggestions}":"[data-location-suggestions]","{suggestion}":"[data-location-suggestion]","{source}":"[data-location-source]",view:{suggestion:"maps.suggestion"}}},function(b,d){return{init:function(){var c=b.field().htmlData();
if(d.error=c.error||{},navigator.geolocation&&b.base().addClass("is-detectable"),b.textField().placeholder(),b.textField().removeAttr("disabled"),!a.isEmpty(b.source().val())){var c=JSON.parse(b.source().val());c.latitude&&c.longitude&&(d.staticMap?b.navigate(c.latitude,c.longitude):b.navigateDynamic(c.latitude,c.longitude),b.base().addClass("has-location"))}},renderDynamicMap:function(c,d){"undefined"==typeof gmap?gmap=new a.GMaps({div:"#map",lat:c,lng:d,zoom:15,mapTypeId:"roadmap",zoomControl:!0,clickableIcons:!1,streetViewControl:!1,mapTypeControl:!1}):gmap.setCenter(c,d),gmap.addListener("click",function(a){var c=a.latLng;
b.populateMarker(c.lat(),c.lng(),"addmarker")})},populateMarker:function(a,c,d){gmap.removeMarkers();var e=gmap.addMarker({lat:a,lng:c});gmap.setCenter(a,c);var f=gmap.map.zoom;13>f&&(gmap.fitZoom(),gmap.zoomOut(9)),"addmarker"==d&&b.processMarker(e)},processMarker:function(a){markerLat=a.getPosition().lat(),markerLng=a.getPosition().lng();var d={lat:markerLat,lng:markerLng};b.lookupLatLng(d)},updateField:function(a,c){b.textField().val(a.name),b.base().addClass("has-location"),b.result=c;var d=b.getResult("source");
b.source().val(JSON.stringify(d))},"{window} resize":a.debounce(function(){var a=JSON.parse(b.source().val());if(a.latitude&&a.longitude){var c=b.mapImage();c.data("width")!==c.width()&&b.navigate(a.latitude,a.longitude)}},250),"{self} onShow":function(){var a=JSON.parse(b.source().val());if(a.latitude&&a.longitude){var c=b.mapImage();c.data("width")!==c.width()&&b.navigate(a.latitude,a.longitude)}},navigateDynamic:function(a,c){b.renderDynamicMap(a,c),b.populateMarker(a,c)},navigate:function(c,d){b.field().css({"max-width":"none"});
var e=b.mapImage(),f=window.es.gmapsApiKey,i=(Math.floor(e.width()),Math.floor(e.height()),a.GMaps.staticMapURL({key:f,size:[1280,1280],lat:c,lng:d,sensor:!0,scale:2,markers:[{lat:c,lng:d}]}));a.Image.get(i).done(function(){e.css({backgroundImage:a.cssUrl(i),backgroundSize:"cover",backgroundPosition:"center center"}),b.base().addClass("has-location")}).always(function(){b.base().removeClass("is-loading")})},locations:{},lastQueryAddress:null,results:[],result:null,"{textField} keypress":function(d,e){switch(e.keyCode){case c.UP:var f=a(b.suggestion(".active").prev(b.suggestion.selector)[0]||b.suggestion(":last")[0]);
b.suggestion().removeClass("active"),f.addClass("active").trigger("activate"),b.suggestions().scrollTo(f,{offset:-1*f.height()}),e.preventDefault();break;case c.DOWN:var g=a(b.suggestion(".active").next(b.suggestion.selector)[0]||b.suggestion(":first")[0]);b.suggestion().removeClass("active"),g.addClass("active").trigger("activate"),b.suggestions().scrollTo(g,{offset:-1*g.height()}),e.preventDefault();break;case c.ENTER:var h=b.suggestion(".active"),i=h.data("location");b.set(i),b.hideSuggestions();break;case c.ESCAPE:b.hideSuggestions()
}},"{textField} keyup":function(d,e){switch(e.keyCode){case c.UP:case c.DOWN:case c.LEFT:case c.RIGHT:case c.ENTER:case c.ESCAPE:break;default:var f=a.trim(d.val());""===f&&(b.base().removeClass("has-location"),b.hideSuggestions());var g=b.locations[f];g?(b.lastQueryAddress=f,b.suggest(g)):b.lookup(f)}},lookupLatLng:a.debounce(function(c){b.base().addClass("is-loading"),a.GMaps.geocode({lat:c.lat,lng:c.lng,callback:function(a,d){b.base().removeClass("is-loading"),"OK"==d&&(c.name=a[0].formatted_address,b.updateField(c,a[0]))
}})},250),lookup:a.debounce(function(c){b.detectButton().addClass("is-loading"),a.GMaps.geocode({address:c,callback:function(a,d){b.detectButton().removeClass("is-loading"),"OK"==d&&(b.locations[c]=a,b.suggest(a),b.lastQueryAddress=c)}})},250),suggest:function(c){var d=b.suggestions();d.empty(),c.length<0||(b.results=c,a.each(c,function(a,c){b.view.suggestion({location:c}).data("location",c).appendTo(d)}),b.showSuggestions())},showSuggestions:function(){b.focusSuggestion=!0,b.element.find(".es-story-footer").addClass("swap-zindex"),setTimeout(function(){b.autocomplete().addClass("active");
var c=a(document),d="click.es.story.location";c.off(d).on(d,function(e){var f=a(e.target).parents().andSelf();f.filter(b.element).length>0||(c.off(d),b.hideSuggestions())})},500)},hideSuggestions:function(){b.focusSuggestion=!1,b.autocomplete().removeClass("active"),a(document).off("click.es.story.location"),setTimeout(function(){b.focusSuggestion||b.element.find(".es-story-footer").removeClass("swap-zindex")},500)},"{suggestion} activate":function(a){var e=a.data("location"),f=e.geometry.location.lat(),g=e.geometry.location.lng();
d.staticMap?b.navigate(f,g):b.navigateDynamic(f,g)},"{suggestion} mouseover":function(a){b.suggestion().removeClass("active"),a.addClass("active").trigger("activate")},"{suggestion} click":function(a){var d=a.data("location");b.set(d),b.hideSuggestions(),b.validateInput()},set:function(a){b.currentLocation=a;var e=(a.geometry.location.lat(),a.geometry.location.lng(),a.formatted_address);b.textField().val(e),b.lastQueryAddress=e,b.base().addClass("has-location"),b.result=a;var f=b.getResult("source");b.source().val(JSON.stringify(f))
},unset:function(){gmap.removeMarkers(),b.currentLocation=null,b.textField().val(""),b.base().removeClass("has-location"),b.source().val("")},detectTimer:null,"{detectButton} click":function(){b.textbox();b.detectButton().addClass("is-loading"),clearTimeout(b.detectTimer),b.detectTimer=setTimeout(function(){b.detectButton().removeClass("is-loading")},8e3),a.GMaps.geolocate({success:function(c){a.GMaps.geocode({lat:c.coords.latitude,lng:c.coords.longitude,callback:function(a,c){"OK"==c&&(b.suggest(a),b.textField().focus())
}})},error:function(a){var b="";switch(a.code){case 1:b=d.error.map.permission;break;case 2:b=d.error.map.timeout;break;case 3:default:b=d.error.map.unavailable}},always:function(){clearTimeout(b.detectTimer),b.detectButton().removeClass("is-loading")}})},raiseError:function(a){b.trigger("error",[a])},clearError:function(){b.trigger("clear")},validateInput:function(){if(b.clearError(),a.isEmpty(b.source().val())&&d.required)return b.raiseError(d.error.maps),!1;var c=b.source().val();if(c){var e=JSON.parse(c);
if((!e.latitude||!e.longitude)&&d.required)return b.raiseError(d.error.maps),!1}return!0},"{self} onSubmit":function(a,c,d){d.push(b.validateInput())},"{removeButton} click":function(){b.unset(),b.hideSuggestions(),b.validateInput()},getResult:function(c){if(!b.result){if(0===b.results.length)return!1;b.result=b.results[0]}var d=b.result;if(void 0===c)return d;switch(c){case"coords":return{lat:d.geometry.location.lat(),lng:d.geometry.location.lng()};case"lat":case"latitude":return d.geometry.location.lat();case"lng":case"longitude":return d.geometry.location.lng();
case"address":return d.formatted_address;case"viewport":return d.geometry.viewport;case"bounds":return d.geometry.bounds||d.geometry.viewport;case"source":var e={};a.each(d.address_components,function(a,b){b.types[0]&&(e[b.types[0]]=b.long_name)});var f={address1:["street_address","route"],address2:["intersection","colloquial_area","neighborhood","premise","subpremise"],city:["locality","sublocality","sublocality_level_1","sublocality_level_2","sublocality_level_3","sublocality_level_4","sublocality_level_5"],state:["administrative_area_level_1","administrative_area_level_2","administrative_area_level_3"],zip:"postal_code",country:"country"},g={};
a.each(f,function(b,c){return g[b]="",a.isArray(c)?(a.each(c,function(a,c){return void 0!==e[c]?(g[b]=e[c],!1):!0}),!0):(void 0!==e[c]&&(g[b]=e[c]),void 0)});var h=a.extend(g,{components:e,address:d.formatted_address,latitude:d.geometry.location.lat(),longitude:d.geometry.location.lng()});return h}}}}),b.resolve()})}),EasySocial.module("apps/fields/user/address/osm",function(a){var b=this;a.template("easysocial/maps.suggestion",'<div class="es-location-suggestion" data-location-suggestion><span class="formatted_address">[%= location.formatted_address %]</span></div>'),EasySocial.require().library("leaflet","placeholder","image","leaflet-providers").done(function(){var c={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,ENTER:13,ESCAPE:27,LEFT:37,RIGHT:39,SPACE:32,TAB:9,UP:38};
EasySocial.Controller("Field.Address.Osm",{defaultOptions:{required:!1,mapElementId:"map",staticMap:!1,"{field}":"[data-field-address]","{base}":"[data-location-base]","{map}":"[data-location-map]","{mapImage}":"[data-location-map-image]","{detectButton}":"[data-location-detect]","{removeButton}":"[data-location-remove]","{form}":"[data-location-form]","{textbox}":"[data-location-textbox]","{textField}":"[data-location-textfield]","{autocomplete}":"[data-location-autocomplete]","{suggestions}":"[data-location-suggestions]","{suggestion}":"[data-location-suggestion]","{source}":"[data-location-source]",view:{suggestion:"maps.suggestion"},marker:{}}},function(b,d){return{init:function(){b.options.mapElementId&&(b.mapElementId=b.options.mapElementId);
var c=b.field().htmlData();if(d.error=c.error||{},navigator.geolocation&&window.es.isHttps&&(b.base().addClass("is-detectable"),b.detectButton().show()),b.textField().removeAttr("disabled"),!a.isEmpty(b.source().val())){var c=JSON.parse(b.source().val());c.latitude&&c.longitude&&(lat=c.latitude,lng=c.longitude,b.initMap(),b.navigate(lat,lng),b.base().addClass("has-location"))}},initMap:function(){function a(a){var c=a.latlng;b.osm.removeLayer(b.marker),b.marker=L.marker(c).addTo(b.osm),b.osm.setView(c),b.lookupLatLng(c)
}d.staticMap||void 0===b.osm&&(b.osm=L.map(b.mapElementId,{zoom:12}),b.osm.fitWorld(),L.tileLayer.provider("Wikimedia").addTo(b.osm),b.textField().placeholder(),b.textField().removeAttr("disabled"),b.osm.on("click",a))},marker:{},updateField:function(a){b.textField().val(a[0].formatted_address),b.base().addClass("has-location"),b.result=a[0];var c=b.getResult("source");b.source().val(JSON.stringify(c))},"{window} resize":a.debounce(function(){var a=JSON.parse(b.source().val());if(a.latitude&&a.longitude){var c=b.mapImage();
c.data("width")!==c.width()&&b.navigate(a.latitude,a.longitude)}},250),"{self} onShow":function(){var a=JSON.parse(b.source().val());if(a.latitude&&a.longitude){var c=b.mapImage();c.data("width")!==c.width()&&b.navigate(a.latitude,a.longitude)}},navigate:function(a,c){d.staticMap?b.navigateStatic(a,c):b.navigateDynamic(a,c)},navigateStatic:function(c,d){b.field().css({"max-width":"none"});var e="//maps.wikimedia.org/img/osm-intl,13,"+c+","+d+",600x300.png",f=b.mapImage();a.Image.get(e).done(function(){f.css({backgroundImage:a.cssUrl(e),backgroundSize:"cover",backgroundPosition:"center center"}),b.base().addClass("has-location")
}).always(function(){b.base().removeClass("is-loading")})},navigateDynamic:function(a,c){b.detectButton().addClass("t-hidden"),b.field().css({"max-width":"none"});var d={lat:parseFloat(a),lng:parseFloat(c)};b.osm.removeLayer(b.marker),b.osm.flyTo(d,10,{duration:3}),b.marker=L.marker(d).addTo(b.osm)},locations:{},lastQueryAddress:null,results:[],result:null,"{textField} keypress":function(d,e){switch(e.keyCode){case c.UP:var f=a(b.suggestion(".active").prev(b.suggestion.selector)[0]||b.suggestion(":last")[0]);
b.suggestion().removeClass("active"),f.addClass("active").trigger("activate"),b.suggestions().scrollTo(f,{offset:-1*f.height()}),e.preventDefault();break;case c.DOWN:var g=a(b.suggestion(".active").next(b.suggestion.selector)[0]||b.suggestion(":first")[0]);b.suggestion().removeClass("active"),g.addClass("active").trigger("activate"),b.suggestions().scrollTo(g,{offset:-1*g.height()}),e.preventDefault();break;case c.ENTER:var h=b.suggestion(".active"),i=h.data("location");void 0!==i&&b.set(i),b.hideSuggestions();
break;case c.ESCAPE:b.hideSuggestions()}},"{textField} keyup":function(d,e){switch(e.keyCode){case c.UP:case c.DOWN:case c.LEFT:case c.RIGHT:case c.ENTER:case c.ESCAPE:break;default:var f=a.trim(d.val());""===f&&(b.base().removeClass("has-location"),b.hideSuggestions());var g=b.locations[f];g?(b.lastQueryAddress=f,b.suggest(g)):b.lookup(f)}},lookupLatLng:a.debounce(function(a){b.base().addClass("is-loading"),EasySocial.ajax("site/controllers/location/getLocations",{latitude:a.lat,longitude:a.lng}).done(function(a){b.base().removeClass("is-loading"),b.updateField(a)
})},250),lookup:a.debounce(function(a){b.detectButton().addClass("is-loading"),b.base().addClass("is-loading"),EasySocial.ajax("site/controllers/location/getLocations",{query:a}).done(function(c){b.locations[a]=c,b.suggest(c),b.lastQueryAddress=a})},250),suggest:function(c){var d=b.suggestions();d.empty(),c.length<0||(b.results=c,a.each(c,function(a,c){c.formatted_address=c.formatted_address,b.view.suggestion({location:c}).data("location",c).appendTo(d)}),b.showSuggestions(),b.base().removeClass("is-loading"))
},showSuggestions:function(){b.focusSuggestion=!0,b.element.find(".es-story-footer").addClass("swap-zindex"),setTimeout(function(){b.autocomplete().addClass("active");var c=a(document),d="click.es.story.location";c.off(d).on(d,function(e){var f=a(e.target).parents().andSelf();f.filter(b.element).length>0||(c.off(d),b.hideSuggestions())})},500)},hideSuggestions:function(){b.focusSuggestion=!1,b.autocomplete().removeClass("active"),a(document).off("click.es.story.location"),setTimeout(function(){b.focusSuggestion||b.element.find(".es-story-footer").removeClass("swap-zindex")
},500)},"{suggestion} activate":function(a){b.initMap();var d=a.data("location"),e=d.latitude,f=d.longitude;b.navigate(e,f)},"{suggestion} mouseover":function(a){b.suggestion().removeClass("active"),a.addClass("active").trigger("activate")},"{suggestion} click":function(a){b.initMap();var d=a.data("location");b.set(d),b.hideSuggestions(),b.validateInput()},set:function(a){b.currentLocation=a;var e=(a.latitude,a.longitude,a.formatted_address);b.textField().val(e),b.lastQueryAddress=e,b.base().addClass("has-location"),b.result=a;
var f=b.getResult("source");b.source().val(JSON.stringify(f))},unset:function(){b.osm.removeLayer(b.marker),b.currentLocation=null,b.textField().val(""),b.base().removeClass("has-location"),b.source().val("")},detectTimer:null,"{detectButton} click":function(){b.textbox();b.detectButton().addClass("is-loading"),clearTimeout(b.detectTimer),b.detectTimer=setTimeout(function(){b.detectButton().removeClass("is-loading"),navigator.geolocation.getCurrentPosition(function(a){var c=a.coords;lat=c.latitude,lng=c.longitude,b.initMap(),b.navigate(lat,lng),b.lookupLatLng({lat:lat,lng:lng})
})},2e3)},raiseError:function(a){b.trigger("error",[a])},clearError:function(){b.trigger("clear")},validateInput:function(){if(b.clearError(),a.isEmpty(b.source().val())&&d.required)return b.raiseError(d.error.maps),!1;var c=b.source().val();if(c){var e=JSON.parse(c);if((!e.latitude||!e.longitude)&&d.required)return b.raiseError(d.error.maps),!1}return!0},"{self} onSubmit":function(a,c,d){d.push(b.validateInput())},"{removeButton} click":function(){b.unset(),b.hideSuggestions(),b.validateInput()},getResult:function(c){if(!b.result){if(0===b.results.length)return!1;
b.result=b.results[0]}var d=b.result;if(void 0===c)return d;switch(c){case"coords":return{lat:d.latitude,lng:d.longitude};case"lat":case"latitude":return d.latitude;case"lng":case"longitude":return d.longitude;case"address":return d.formatted_address;case"source":var e={};a.each(d.address,function(a,b){e[a]=b});var f={address1:["mall","route","building","public_building"],address2:["road","neighborhood","premise","subpremise"],city:["city","suburb"],state:"state",zip:"postcode",country:"country"},g={};a.each(f,function(b,c){return g[b]="",a.isArray(c)?(a.each(c,function(a,c){return void 0!==e[c]?(g[b]=e[c],!1):!0
}),!0):(void 0!==e[c]&&(g[b]=e[c]),void 0)});var h=a.extend(g,{components:e,address:d.formatted_address,latitude:d.latitude,longitude:d.longitude});return h}}}}),b.resolve()})}),EasySocial.module("apps/fields/user/autocomplete/content",function(){var b=this;EasySocial.require().library("textboxlist").done(function(a){EasySocial.Controller("Field.Autocomplete",{defaultOptions:{required:!1,id:null,types:null,fieldname:null,actor:null,target:null,selectedItems:[],max:null,exclusive:!0,exclusion:[],minLength:1,highlight:!0,name:"uid[]",type:"","{suggest}":"[data-field-suggest]"}},function(b,c){return{init:function(){c.name=c.fieldname+"[]",b.initSuggest()
},initSuggest:function(){b.suggest().textboxlist({component:"es",name:c.name,max:c.max,plugin:{autocomplete:{exclusive:c.exclusive,minLength:c.minLength,highlight:c.highlight,showLoadingHint:!0,showEmptyHint:!0,emptyMessage:c.emptyMessage,query:function(a){var b=EasySocial.ajax("fields/user/autocomplete/suggest",{search:a,id:c.id});return b}}}}).textboxlist("enable")},"{suggest} removeItem":function(b,d,e){var f=a.inArray(e.id.toString(),c.exclusion)>-1;f&&c.exclusion.splice(c.exclusion.indexOf(e.id.toString()),1)
},"{suggest} filterMenu":function(b,d,e,f,g,h){var i=h.getAddedItems(),i=a.pluck(i,"id"),j=i.concat(c.exclusion),k=[];a.each(j,function(a,b){k.push(b.toString())}),f.each(function(){var b=a(this),c=b.data("item"),d=a.inArray(c.id.toString(),k)>-1;b.toggleClass("hidden",d)})}}}),b.resolve()})}),EasySocial.module("apps/fields/user/avatar/content",function(a){var b=this;EasySocial.require().library("image","imgareaselect").done(function(){EasySocial.Controller("Field.Avatar",{defaultOptions:{required:!1,id:0,group:null,origSource:null,defaultAvatar:null,hasAvatar:null,"{field}":"[data-field-avatar]","{gallery}":"[data-field-avatar-gallery]","{galleryList}":"[data-field-avatar-gallery-items]","{galleryItem}":"[data-field-avatar-gallery-item]","{frame}":"[data-field-avatar-frame]","{viewport}":"[data-field-avatar-viewport]","{avatarSource}":"[data-field-avatar-source]","{avatarData}":"[data-field-avatar-data]","{avatarPath}":"[data-field-avatar-path]","{avatarType}":"[data-field-avatar-type]","{avatarName}":"[data-field-avatar-name]","{file}":"[data-field-avatar-file]","{image}":"[data-field-avatar-selected]","{note}":"[data-field-avatar-note]","{error}":"[data-field-avatar-error]","{actions}":"[data-field-avatar-actions]","{cancel}":"[data-field-avatar-actions-cancel]","{crop}":"[data-field-avatar-actions-crop]","{removeFrame}":"[data-field-avatar-remove]","{remove}":"[data-field-avatar-remove-button]","{revertFrame}":"[data-field-avatar-revert]","{revert}":"[data-field-avatar-revert-button]","{browseButton}":"[data-browse-avatar]"}},function(b,c){return{init:function(){b.state=!!b.options.hasAvatar
},initErrorOpts:function(){var a=b.field().htmlData();c.error=a.error||{}},state:!0,hasAdjustedCropImage:!1,"{self} onRender":function(){b.initErrorOpts()},toggleLoader:function(){isLoading=b.browseButton().hasClass("is-loading"),b.browseButton().toggleClass("is-loading",!isLoading)},"{file} change":function(c){if(!a.isEmpty(c.val())){var e=c.val().replace(/\\/g,"/").replace(/.*\//,"");c.parents(".input-group").find(":text").val(e),b.state=!1,b.toggleLoader(),b.frame().hide(),b.file().hide(),b.clearError(),EasySocial.ajax("fields/"+b.options.group+"/avatar/upload",{id:b.options.id,files:c},{type:"iframe"}).done(function(a,c,d){b.avatarName().val(a.name),b.avatarSource().val(c),b.avatarPath().val(d),b.avatarType().val("upload"),b.setLayout(c),b.galleryItem().removeClass("active"),b.removeFrame().hide(),b.revertFrame().hide(),b.state=!0
}).fail(function(a){b.toggleLoader(),b.raiseError(a),b.file().show()})}},setLayout:function(c){var d=a.Image.get(c),e=b.frame();d.done(function(d,f){e.css("background-image",a.cssUrl(c)),e.addClass("avatar-frame-crop"),e.show(),b.toggleLoader(),b.actions().show(),b.note().show(),b.viewport().imgAreaSelect({remove:!0}),b.viewport().show();var g=a.Image.resizeWithin(f.width,f.height,e.width(),e.height()),h=Math.min(g.width,g.height),i=Math.floor((g.width-h)/2),j=Math.floor((g.height-h)/2),k=i+h,l=j+h;b.viewport().css(g).imgAreaSelect({handles:!0,aspectRatio:"1:1",parent:e,x1:i,y1:j,x2:k,y2:l,onSelectEnd:function(a,c){var d=!("0"==c.width&&"0"==c.height);
if(d){var e=JSON.stringify(b.data());b.avatarData().val(e),b.hasAdjustedCropImage=!0}}})})},"{cancel} click":function(){b.actions().hide(),b.note().hide(),b.frame().hide(),b.file().show(),b.file().val(""),b.file().parents(".input-group").find(":text").val(""),b.avatarSource().val(""),b.avatarPath().val(""),b.avatarData().val(""),b.avatarType().val(""),b.viewport().hide().imgAreaSelect({remove:!0}),a.isEmpty(b.options.origSource)||b.frame().css("background-image",a.cssUrl(b.options.origSource)).removeClass("avatar-frame-crop").show(),b.options.hasAvatar&&b.removeFrame().show()
},data:function(){var a=b.viewport(),c=a.width(),d=a.height(),e=a.imgAreaSelect({instance:!0}).getSelection(),f={top:e.y1/d,left:e.x1/c,width:e.width/c,height:e.height/d};return f},"{gallery} click":function(){b.galleryList().toggle()},"{galleryItem} click":function(a){if(!a.hasClass("active")){var d=a.data("id");b.galleryItem().removeClass("active"),a.addClass("active"),b.state=!1,b.toggleLoader(),b.frame().hide(),b.file().hide(),b.file().val(""),b.file().parents(".input-group").find(":text").val(""),b.clearError(),b.avatarType().val("gallery"),b.avatarSource().val(d),EasySocial.ajax("fields/user/avatar/loadDefault",{avatarId:d}).done(function(a){b.frame().css("background-image","url("+a+")"),b.frame().show(),b.frame().removeClass("avatar-frame-crop"),b.toggleLoader(),b.viewport().hide(),b.viewport().imgAreaSelect({remove:!0}),b.actions().hide(),b.note().hide(),b.file().show(),b.revertFrame().show(),b.removeFrame().hide(),b.state=!0
})}},"{remove} click":function(){b.avatarType().val("remove"),b.frame().css("background-image",a.cssUrl(b.options.defaultAvatar)),b.removeFrame().hide(),b.options.hasAvatar&&b.revertFrame().show(),b.state=!1},"{revert} click":function(){b.avatarType().val(""),b.frame().css("background-image",a.cssUrl(b.options.origSource)),b.options.hasAvatar&&b.removeFrame().show(),b.revertFrame().hide(),b.galleryItem().removeClass("active"),b.state=!0},"{self} onSubmit":function(a,d,e){if(b.options.required&&(b.state||(c.error||b.initErrorOpts(),b.raiseError(c.error.empty)),e.push(b.state)),!b.hasAdjustedCropImage){var f=b.data(),g=JSON.stringify(f);
b.avatarData().val(g)}},raiseError:function(a){b.trigger("error",[a])},clearError:function(){b.trigger("clear")}}}),b.resolve()})}),EasySocial.module("apps/fields/user/avatar/sample_content",function(){var b=this;EasySocial.Controller("Field.Avatar.Sample",{defaultOptions:{"{upload}":"[data-avatar-upload]","{gallery}":"[data-avatar-gallery]","{galleryTitle}":"[data-avatar-gallery-title]","{galleryButton}":"[data-avatar-gallery-button]","{gallerySelection}":"[data-avatar-gallery-selection]"}},function(a){return{"{self} onConfigChange":function(b,c,d,e){switch(d){case"upload":a.upload().toggle(e);
break;case"gallery":a.gallery().toggle(e);break;case"use_gallery_button":a.galleryButton().toggle(e),a.gallerySelection().toggle(!e),a.galleryTitle().toggle(!e)}}}}),b.resolve()}),EasySocial.module("apps/fields/user/checkbox/content",function(){var b=this;EasySocial.Controller("Field.Checkbox",{defaultOptions:{required:!1,"{item}":"[data-field-checkbox-item]","{field}":"[data-field-checkbox]"}},function(a,b){return{init:function(){},"{self} onRender":function(){var c=a.field().htmlData();b.error=c.error||{}},validateInput:function(){return a.clearError(),a.options.required&&0==a.item(":checked").length?(a.raiseError(),!1):!0
},raiseError:function(){a.trigger("error",[b.error.empty])},clearError:function(){a.trigger("clear")},"{self} onSubmit":function(b,c,d){d.push(a.validateInput())}}}),b.resolve()}),EasySocial.module("apps/fields/user/checkbox/sample_content",function(){var b=this;EasySocial.Controller("Field.Checkbox.Sample",{defaultOptions:{"{checkboxes}":"[data-checkboxes]","{checkbox}":"[data-checkbox]","{sample}":"[data-sample-checkboxes] > [data-sample-checkbox]","{checkboxInput}":"[data-checkbox-input]","{checkboxTitle}":"[data-checkbox-title]"}},function(a){return{init:function(){},"{self} onChoiceTitleChanged":function(b,c,d,e){a.checkboxTitle().eq(d).text(e)
},"{self} onChoiceValueChanged":function(b,c,d,e){a.checkboxInput().eq(d).val(e)},"{self} onChoiceAdded":function(b,c,d){var f=a.sample().clone();f.removeData("data-sample-checkbox"),f.removeAttr("data-sample-checkbox"),f.attr("data-checkbox",""),f.data("data-checkbox",""),a.checkbox().eq(d).length>0?a.checkbox().eq(d).before(f):a.checkboxes().append(f)},"{self} onChoiceRemoved":function(b,c,d){a.checkbox().eq(d).remove()},"{self} onChoiceToggleDefault":function(b,c,d,e){var f=a.checkboxInput().eq(d);e?f.prop("checked",!0):f.prop("checked",!1)
}}}),b.resolve()}),EasySocial.module("apps/fields/user/country/content",function(a){var b=this;EasySocial.require().library("textboxlist").done(function(){EasySocial.Controller("Field.Country",{defaultOptions:{fieldname:"",required:!1,id:null,min:null,max:null,selecttype:"textboxlist","{field}":"[data-field-country]","{inputTextboxlist}":"[data-country-select-textboxlist]","{inputMultilist}":"[data-country-select-multilist]","{inputCheckbox}":"[data-country-select-checkbox]","{inputCheckboxes}":"[data-country-select-checkbox] input","{inputDropdown}":"[data-country-select-dropdown]"}},function(b,c){return{init:function(){c.max=b.field().data("max"),c.min=b.field().data("min"),c.selecttype=b.field().data("select-type"),"textboxlist"===c.selecttype&&EasySocial.module("field.country/"+b.options.id).done(function(a){b.inputTextboxlist().textboxlist({component:"es",name:b.options.fieldname+"[]",max:b.options.max<1?null:b.options.max,plugin:{autocomplete:{exclusive:!0,query:a}}})
});var a=b.field().htmlData();c.error=a.error},"{inputMultilist} change":function(a){return b.options.max>0&&a.val().length>b.options.max?(a.val(b.lastValidSelection?b.lastValidSelection:""),!1):(b.lastValidSelection=a.val(),b.validateInput(),void 0)},"{inputCheckboxes} change":function(a){var d=b.inputCheckboxes(":checked").length;return b.options.max>0&&d>b.options.max?(a.removeAttr("checked"),!1):(b.validateInput(),void 0)},"{inputDropdown} change":function(){b.validateInput()},"{inputTextboxlist} listChange":function(){console.log("list changed"),b.validateInput()
},validateInput:function(){b.clearError();var d=null;if("textboxlist"===b.options.selecttype&&(d=b.inputTextboxlist().controller("textboxlist").getAddedItems()),"multilist"===b.options.selecttype&&(d=b.inputMultilist().val()),"checkbox"===b.options.selecttype&&(d=b.inputCheckboxes(":checked")),"dropdown"===b.options.selecttype){var e=b.inputDropdown().val();a.isEmpty(e)||(d=[e])}var f=d?d.length:0;return b.options.required||0!==f?b.options.required&&1>f?(b.raiseError(c.error.required),!1):b.options.min>0&&f<b.options.min?(b.raiseError(c.error.min),!1):b.options.max>0&&f>b.options.max?(b.raiseError(c.error.max),!1):!0:!0
},clearError:function(){b.trigger("clear")},raiseError:function(a){b.trigger("error",[a])},"{self} onSubmit":function(a,c,d){d.push(b.validateInput())}}}),b.resolve()})}),EasySocial.module("apps/fields/user/country/sample_content",function(){var b=this;EasySocial.Controller("Field.Country.Sample",{defaultOptions:{"{inputGeneral}":"[data-country-select]","{inputTextboxlist}":"[data-country-select-textboxlist]","{inputMultilist}":"[data-country-select-multilist]","{inputCheckbox}":"[data-country-select-checkbox]","{inputDropdown}":"[data-country-select-dropdown]","{maxMessage}":"[data-country-max-message]","{maxCount}":"[data-country-max-count]"}},function(a){return{init:function(){},"{self} onConfigChange":function(b,c,d,e){switch(d){case"select_type":a.inputGeneral().hide(),"textboxlist"===e&&a.inputTextboxlist().show(),"multilist"===e&&a.inputMultilist().show(),"checkbox"===e&&a.inputCheckbox().show(),"dropdown"===e&&a.inputDropdown().show();
break;case"multilist_size":a.inputMultilist().attr("size",e);break;case"show_max_message":a.maxMessage().toggle(!!e);break;case"max":a.maxCount().text(e)}}}}),b.resolve()}),EasySocial.module("apps/fields/user/cover/content",function(a){var b=this;EasySocial.require().library("image").done(function(){EasySocial.Controller("Field.Cover",{defaultOptions:{id:0,group:null,required:!1,hasCover:!0,defaultCover:null,ratio:3,"{field}":"[data-field-cover]","{image}":"[data-field-cover-image]","{data}":"[data-field-cover-data]","{position}":"[data-field-cover-position]","{file}":"[data-field-cover-file]","{note}":"[data-field-cover-note]","{error}":"[data-field-cover-error]","{removeButton}":"[data-field-cover-remove-button]","{browseButton}":"[data-browse-cover]","{revertFrame}":"[data-field-cover-revert]","{revertButton}":"[data-field-cover-revert-button]"}},function(b,c){return{init:function(){b.setFrame(),b.setLayout(),b.origCover=b.options.hasCover?a.uri(b.image().css("backgroundImage")).extract(0):null,b.origPosition=b.options.hasCover?b.image().css("backgroundPosition"):null,b.state=!!b.options.hasCover
},initErrorOpts:function(){var a=b.field().htmlData();c.error=a.error||{}},state:!0,"{self} onRender":function(){b.initErrorOpts()},"{self} onShow":function(){setTimeout(function(){b.setLayout()},1)},setFrame:function(){var a=b.image().width(),c=a/b.options.ratio;b.image().css("height",c)},"{window} resize":a.debounce(function(){b.setFrame()},250),imageLoaders:{},toggleLoader:function(){isLoading=b.browseButton().hasClass("is-loading"),b.browseButton().toggleClass("is-loading",!isLoading)},"{file} change":function(c){if(!a.isEmpty(c.val())){var e=c.val().replace(/\\/g,"/").replace(/.*\//,"");
c.parents(".input-group").find(":text").val(e),b.state=!1,b.toggleLoader(),b.error().hide(),b.image().hide(),b.note().hide(),b.file().hide(),EasySocial.ajax("fields/"+b.options.group+"/cover/upload",{id:b.options.id,files:c},{type:"iframe"}).done(function(c){var d=JSON.stringify(c);b.data().val(d);var e=JSON.stringify({x:.5,y:.5});b.position().val(e),b.position().val();{var f=c.large.uri,g=b.imageLoaders;(g[f]||(g[f]=a.Image.get(f))).done(function(a){b.setLayout.image=a,b.file().show(),b.image().show(),b.note().show(),b.toggleLoader(),b.revertFrame().hide(),b.removeButton().show(),b.setCover(c.large.uri)
})}b.state=!0}).fail(function(a){b.toggleLoader(),b.file().show(),b.error().show().html(a)})}},setLayout:function(){var c=b.image(),d=b.setLayout.image;if(d){var h=d.data("width"),i=d.data("height"),j=c.width(),k=c.height(),l=a.Image.resizeProportionate(h,i,j,k,"outer");b.availableWidth=j-l.width,b.availableHeight=k-l.height,b.setFrame()}else{var e=a.uri(c.css("backgroundImage")).extract(0);if(!e)return;{var f=b.imageLoaders;(f[e]||(f[e]=a.Image.get(e))).done(function(a){b.setLayout.image=a,b.setLayout()})}}},setCover:function(c,d){d=d||"50% 50%",b.image().css({backgroundImage:a.cssUrl(c),backgroundPosition:d}),b.setLayout(),b.image().addClass("cover-move"),b.note().show()
},x:.5,y:.5,moveCover:function(a,c,d){d||(d=b.image());var e=b.availableWidth,f=b.availableHeight,g=0==e?0:b.x+(a/e||0),h=0==f?0:b.y+(c/f||0);0>g&&(g=0),g>1&&(g=1),0>h&&(h=0),h>1&&(h=1),d.css("backgroundPosition",100*(b.x=g)+"% "+100*(b.y=h)+"% ");var i={x:b.x,y:b.y};b.position().val(JSON.stringify(i))},"{image} mousedown":function(c,d){d.target===b.image()[0]&&d.preventDefault();var e=b.image(),f=e.css("backgroundPosition").split(" ");b.x=parseInt(f[0])/100,b.y=parseInt(f[1])/100;var g=d.pageX,h=d.pageY;a(document).on("mousemove.movingCover mouseup.movingCover",function(a){b.moveCover(-1*(g-(g=a.pageX)),-1*(h-(h=a.pageY)),e)
}).on("mouseup.movingCover",function(){a(document).off("mousemove.movingCover mouseup.movingCover")})},"{removeButton} click":function(c){var d=b.data().val();a.isEmpty(d)?b.options.hasCover&&(b.setCover(b.options.defaultCover),b.data().val("delete"),c.hide(),b.revertFrame().show()):(b.origData=d,b.origPosition=b.position().val(),b.data().val(""),b.position().val(""),b.file().val(""),b.file().parents(".input-group").find(":text").val(""),b.options.hasCover?b.setCover(b.origCover):(b.setCover(b.options.defaultCover),b.data().val("delete"),c.hide())),b.state=!1
},"{revertButton} click":function(){b.setCover(b.origCover,b.origPosition),b.revertFrame().hide(),b.removeButton().show(),b.data().val(""),b.position().val(""),b.file().val(""),b.file().parents(".input-group").find(":text").val(""),b.state=!0},"{self} onSubmit":function(d,e,f){var g=b.data().val(),h=b.options.hasCover;if("delete"==g)var g="",h=!1;b.options.required&&!h&&a.isEmpty(g)&&(b.state||(c.error||b.initErrorOpts(),b.raiseError(c.error.empty)),f.push(b.state))},raiseError:function(a){b.trigger("error",[a])
}}}),b.resolve()})}),EasySocial.module("apps/fields/user/currency/content",function(a){var b=this;EasySocial.Controller("Field.Currency",{defaultOptions:{required:!1,"{field}":"[data-field-currency]","{dollarInput}":"[data-currency-dollar]","{centInput}":"[data-currency-cent]"}},function(b,c){return{init:function(){console.log("init")},"{self} onRender":function(){var a=b.field().htmlData();c.error=a.error||{}},"{dollarInput} keyup":function(){b.validateInput()},"{dollarInput} blur":function(){b.validateInput()
},"{centInput} keyup":function(){b.validateInput()},"{centInput} blur":function(){b.validateInput()},validateInput:function(){b.clearError();var d=b.dollarInput().val(),e=b.centInput().val();return b.options.required&&(a.isEmpty(d)||a.isEmpty(e))?(b.raiseError(c.error.required),!1):!0},raiseError:function(a){b.trigger("error",[a])},clearError:function(){b.trigger("clear")},"{self} onSubmit":function(a,c,d){d.push(b.validateInput())}}}),b.resolve()}),EasySocial.module("apps/fields/user/datetime/content",function(){var b=this;
EasySocial.require().library("datetimepicker","chosen","moment/"+EasySocial.options.momentLang).done(function(a){EasySocial.Controller("Field.Datetime",{defaultOptions:{required:!1,calendarDateFormat:null,yearfrom:null,yearto:null,date:null,lang:null,allowTime:!1,allowTimezone:!1,ageLimit:null,calendarLanguage:"english","{field}":"[data-field-datetime]","{date}":"[data-field-datetime-select]","{dateValue}":"[data-field-datetime-value]","{timezone}":"[data-field-datetime-timezone]","{form}":"[data-field-datetime-form]","{icon}":"[data-field-datetime-icon]","{clearButton}":"[data-clear]"}},function(b,c){return{init:function(){if(b.options.yearfrom=b.options.yearfrom||1930,b.options.yearto=a.isEmpty(b.options.yearto)?(new Date).getFullYear()+100:parseInt(b.options.yearto)+1,b.date()._datetimepicker({component:"es",format:b.options.calendarDateFormat,minDate:b.options.yearfrom+"-01-01",maxDate:b.options.yearto+"-12-31",icons:{time:"far fa-clock",date:"fa fa-calendar",up:"fa fa-chevron-up",down:"fa fa-chevron-down"},sideBySide:!1,pickTime:b.options.allowTime,useCurrent:!1,language:"english"==b.options.calendarLanguage?"en-gb":EasySocial.options.momentLang}),b.options.date=b.dateValue().val(),!a.isEmpty(b.options.date)){var c=a.moment(b.options.date);
b.datetimepicker("setDate",c)}b.options.allowTimezone&&b.timezone().chosen({search_contains:!0})},initErrorData:function(){var a=b.field().htmlData();c.error=a.error||{}},"{self} onRender":function(){b.initErrorData()},"{icon} click":function(){b.datetimepicker("show")},"{date} dp.change":function(a,c){b.setDateValue(c.date.toDate()),b.form().addClass("has-datetime"),b.options.allowTime||b.date().blur(),b.validateCalendar()},datetimepicker:function(a,c){return b.date().data("DateTimePicker")[a](c)},setDateValue:function(a){b.dateValue().val(a.getFullYear()+"-"+("00"+(a.getMonth()+1)).slice(-2)+"-"+("00"+a.getDate()).slice(-2)+" "+("00"+a.getHours()).slice(-2)+":"+("00"+a.getMinutes()).slice(-2)+":"+("00"+a.getSeconds()).slice(-2))
},"{date} blur":function(){b.validateCalendar()},validateCalendar:function(){return b.clearError(),b.options.required&&a.isEmpty(b.dateValue().val())?(c.error||b.initErrorData(),b.raiseError(c.error.empty),!1):b.validateAge().done(function(){b.clearError()}).fail(function(a){b.raiseError(a)})},validateAge:function(){return EasySocial.ajax("fields/user/birthday/isValid",{value:b.dateValue().val(),age_limit:c.ageLimit})},raiseError:function(a){b.trigger("error",[a])},clearError:function(){b.trigger("clear")},"{self} onSubmit":function(a,c,d){d.push(b.validateCalendar())
},"{clearButton} click":function(){b.form().removeClass("has-datetime"),b.datetimepicker("setValue",new a.moment),b.date().val(""),b.dateValue().val("")}}}),b.resolve()})}),EasySocial.module("apps/fields/user/datetime/display_content",function(){var b=this;EasySocial.require().library("popbox","chosen").done(function(a){EasySocial.Controller("Field.Datetime.Display",{defaultOptions:{userid:null,date:null,timezone:null,local:null,"{toggle}":"[data-popbox]","{content}":"[data-popbox-content]","{date}":"[data-date]","{timezone}":"[data-timezone]","{loading}":"[data-loading]"}},function(b,c){return{init:function(){b.options.timezone=b.timezone().data("timezone"),b.options.date=b.date().data("date-utc"),b.datetime(b.options.timezone,b.date().html()),b.options.local=-(new Date).getTimezoneOffset()/60;
var a=b.content().html(),c=b.toggle().data("popbox-position");b.toggle().popbox({content:a,id:"fd",component:"es",type:"timezone",toggle:"click",position:c}).attr("data-popbox","")},"{toggle} popboxActivate":function(c,d,e){a(e.tooltip).addController("EasySocial.Controller.Field.Datetime.Display.Timezone",{"{parent}":b})},data:{},datetime:function(c,d){if(void 0===d){var e=a.Deferred();return void 0===b.data[c]?(b.loading().show(),EasySocial.ajax("fields/user/datetime/getDatetime",{id:b.options.id,userid:b.options.userid,tz:c,local:b.options.local,datetime:b.options.date}).done(function(a){b.loading().hide(),e.resolve(b.datetime(c,a))
})):e.resolve(b.data[c]),e}return b.data[c]=d,d},showDatetime:function(a,d){"local"===a&&(a=c.message.local),b.timezone().html(a),b.date().html(d)}}}),EasySocial.Controller("Field.Datetime.Display.Timezone",{defaultOptions:{"{timezones}":"[data-timezone-select]","{reset}":"[data-timezone-reset]","{local}":"[data-timezone-local]"}},function(a){return{init:function(){a.timezones().chosen({search_contains:!0})},"{timezones} change":function(b){var d=b.val();a.parent.date().hide(),a.parent.timezone().hide(),a.parent.datetime(d).done(function(b){a.parent.showDatetime(d,b),a.parent.date().show(),a.parent.timezone().show()
})},"{reset} click":function(){a.setTimezone(a.parent.options.timezone)},"{local} click":function(){a.setTimezone("local")},setTimezone:function(b){a.timezones().val(b).trigger("liszt:updated").trigger("change")}}}),b.resolve()})}),EasySocial.module("apps/fields/user/datetime/dropdown",function(a){var b=this;EasySocial.Controller("Field.Datetime.Dropdown",{defaultOptions:{required:!1,allowTime:!1,allowTimezone:!1,yearfrom:null,yearto:null,ageLimit:null,"{dateValue}":"[data-field-datetime-value]","{year}":"[data-field-datetime-year]","{month}":"[data-field-datetime-month]","{day}":"[data-field-datetime-day]","{hour}":"[data-field-datetime-hour]","{minute}":"[data-field-datetime-minute]","{ampm}":"[data-field-datetime-ampm]","{dayLabel}":"[data-datetime-day-label]"}},function(b,c){return{init:function(){b.checkDate()
},"{year} change":function(){b.setValue(),b.checkDate(),b.month().trigger("change")},"{month} change":function(){var e=b.year().val(),f=b.month().val(),g=b.dayLabel().text();if(""!==e&&""!==f){var h=new Date(e,f,0).getDate(),j=b.day().val();for(""!==j&&(j=Math.min(j,h)),b.day().empty(),b.day().append('<option value="">'+g+"</option>"),i=1;h>=i;i++)a('<option value="'+i+'">'+i+"</option>").appendTo(b.day());""!==j&&b.day().val(j)}b.setValue(),b.checkDate()},"{day} change":function(){b.setValue(),b.checkDate()
},"{hour} change":function(){b.setValue()},"{minute} change":function(){b.setValue()},"{ampm} change":function(){b.setValue()},checkDate:function(){b.clearError();var a=b.year().val(),d=b.month().val(),e=b.day().val();return""!=a&&""!=d&&""!=e||!c.required?b.validate().done(function(){b.clearError()}).fail(function(a){b.raiseError(a)}):(b.raiseError(),!1)},validate:function(){return EasySocial.ajax("fields/user/birthday/isValid",{value:b.dateValue().val(),age_limit:c.ageLimit})},setValue:function(){var a,c=b.year().val(),d=b.month().val(),e=b.day().val();
if(""!==c&&""!==d&&""!==e){if(a=c+"-"+d+"-"+e,b.options.allowTime){var f=b.hour().val(),g=b.minute().val();""!==f&&b.ampm().length>0&&"pm"==b.ampm().val()&&(f=(parseInt(f)+12).toString(),"24"===f&&(f="0")),""===g&&(g="00"),a+=" "+("00"+f).slice(-2)+":"+("00"+g).slice(-2)+":00"}b.dateValue().val(a)}},"{self} onSubmit":function(a,c,d){d.push(b.checkDate())},clearError:function(){b.trigger("clear")},raiseError:function(a){b.trigger("error",[a])}}}),b.resolve()}),EasySocial.module("apps/fields/user/datetime/sample_content",function(){var b=this;
EasySocial.require().library("ui/datepicker").done(function(){EasySocial.Controller("Field.Datetime.Sample",{defaultOptions:{"{yearPrivacy}":"[data-yearprivacy]","{input}":"[data-field-datetime-select]","{timezone}":"[data-field-datetime-timezone]"}},function(a){return{init:function(){},"{self} onConfigChange":function(b,c,d,e){switch(d){case"year_privacy":a.yearPrivacy().toggle(e);break;case"allow_timezone":a.timezone().toggle(e);break;case"placeholder":a.input().attr("placeholder",e)}}}}),b.resolve()})}),EasySocial.module("apps/fields/user/dropdown/content",function(a){var b=this;
EasySocial.Controller("Field.Dropdown",{defaultOptions:{required:null,"{field}":"[data-field-dropdown]","{item}":"[data-field-dropdown-item]","{option}":"[data-field-dropdown-item] option"}},function(b,c){return{validateInput:function(){return b.clearError(),b.options.required&&a.isEmpty(b.item().val())?(b.raiseError(),!1):!0},"{self} onRender":function(){var a=b.field().htmlData();c.error=a.error||{}},raiseError:function(){b.trigger("error",[c.error.empty])},clearError:function(){b.trigger("clear")},"{self} onSubmit":function(a,c,d){return b.options.required?(d.push(b.validateInput()),void 0):(d.push(!0),void 0)
},"{self} onChoiceAdded":function(c,d,e){b.option().eq(e).length>0?b.option().eq(e).before(a("<option></option>")):b.item().append(a("<option></option>"))},"{self} onChoiceValueChanged":function(a,c,d,e){b.option().eq(d).val(e)},"{self} onChoiceTitleChanged":function(a,c,d,e){b.option().eq(d).text(e)},"{self} onChoiceRemoved":function(a,c,d){b.option().eq(d).remove()},"{self} onChoiceToggleDefault":function(a,c,d,e){b.option().removeAttr("selected"),e&&b.option().eq(d).attr("selected","selected")}}}),b.resolve()
}),EasySocial.module("apps/fields/user/email/content",function(a){var b=this;EasySocial.Controller("Field.Email",{defaultOptions:{required:!1,regex:0,regexFormat:"",regexModifier:"","{field}":"[data-field-email]","{input}":"[data-field-email-input]"}},function(b,c){return{"{self} onRender":function(){var a=b.field().htmlData();c.error=a.error||{}},validateInput:function(){var d=b.input().val();if(b.options.required&&a.isEmpty(d))return b.raiseError(c.error.required),!1;if(!a.isEmpty(d)&&b.options.regex){var e=new RegExp(b.options.regexFormat,b.options.regexModifier);
if(!e.test(d))return b.raiseError(c.error.invalid),!1}return!0},raiseError:function(a){b.trigger("error",[a])},clearError:function(){b.trigger("clear")},"{self} onSubmit":function(a,c,d){d.push(b.validateInput())}}}),b.resolve()}),EasySocial.module("apps/fields/user/file/content",function(){var b=this;EasySocial.require().library("ui/sortable").done(function(a){EasySocial.Controller("Field.File",{defaultOptions:{required:!1,id:null,inputName:"",maxFile:0,"{field}":"[data-field-file]","{list}":"[data-field-file-list]","{item}":"[data-field-file-item]","{add}":"[data-field-file-add]","{dragPlaceholder}":".data-field-file-item-drag","{moveHandle}":"[data-field-file-move]"}},function(b,c){return{init:function(){var a=b.field().htmlData();
c.error=a.error||{},c.message=a.message||{},c.maxFile=b.field().data("maxfile"),b.item().addController("EasySocial.Controller.Field.File.Item",{parent:b,message:c.message,error:c.error}),b.initSortable()},initSortable:function(){b.list().sortable({items:b.item.selector,placeholder:"data-field-file-item-drag",handle:b.moveHandle.selector,forcePlaceholderSize:!0,start:function(a,c){b.dragPlaceholder().width(c.item.find(".file-wrap").width())}})},"{add} click":function(d){if(b.options.maxFile<1||b.item().length<b.options.maxFile){var f=b.item().length,g=a('<div class="data-field-file-item" data-field-file-item></div>');
g.data("key",f),g.html(c.message.working),g.addController("EasySocial.Controller.Field.File.Item",{parent:b,message:c.message,error:c.error}),b.list().append(g),EasySocial.ajax("fields/user/file/getUploadHtml",{id:b.options.id,key:f}).done(function(a){g.html(a)}),b.options.maxFile>1&&b.item().length>=b.options.maxFile&&d.hide()}},"{item} uploadDone":function(){b.add().click()}}}),EasySocial.Controller("Field.File.Item",{defaultOptions:{required:!1,key:null,"{upload}":"[data-field-file-upload]","{progress}":"[data-field-file-progress]","{delete}":"[data-field-file-delete]","{clear}":"[data-field-file-clear]","{id}":"[data-field-file-id]","{tmp}":"[data-field-file-tmp]"}},function(b,c){return{init:function(){c.key=b.element.data("key")
},"{upload} change":function(a){b.element.html(c.message.working),EasySocial.ajax("fields/user/file/upload",{id:c.parent.options.id,files:a,key:b.options.key},{type:"iframe"}).done(function(a){b.element.html(a),b.trigger("uploadDone")}).fail(function(a){b.element.html(a||b.getErrorMsg())})},"{delete} click":function(){var e=b.tmp().val(),f=b.id().val();b.element.html(c.message.working),EasySocial.ajax("fields/user/file/delete",{id:c.parent.options.id,key:b.options.key,tmp:e,fileid:f}).done(function(a){b.element.html(a),b.trigger("fileDeleted")
}).fail(function(a){b.element.html(a||b.getErrorMsg())})},"{clear} click":function(){b.element.html(c.message.working),EasySocial.ajax("fields/user/file/getUploadHtml",{id:c.parent.options.id,key:b.options.key}).done(function(a){b.element.html(a)})},getErrorMsg:function(){return msg=a('<span class="alert field-file-error">'+c.error.unknown+'<button class="close" type="button" data-field-file-clear>\xd7</button></span>')}}}),b.resolve()})}),EasySocial.module("apps/fields/user/file/sample_content",function(){var b=this;
EasySocial.Controller("Field.File",{defaultOptions:{"{sizeText}":"[data-field-file-size-text]","{size}":"[data-field-file-size]","{add}":"[data-field-file-add]"}},function(a){return{init:function(){},"{self} onConfigChange":function(b,c,d,e){switch(d){case"size_limit":a.size().text(e);break;case"show_size_limit":a.sizeText().toggle(!!e);break;case"file_limit":a.add().toggle(1>e||e>1)}}}}),b.resolve()}),EasySocial.module("apps/fields/user/gender/content",function(a){var b=this;EasySocial.Controller("Field.Gender",{defaultOptions:{required:!1,"{field}":"[data-field-gender]","{selection}":"[data-field-gender-select]"}},function(b,c){return{"{self} onRender":function(){var a=b.field().htmlData();
c.error=a.error||{}},validateInput:function(){if(!b.options.required)return!0;b.clearError();var c=b.selection(":checked").val();return a.isEmpty(c)?(b.raiseError(),!1):!0},raiseError:function(){b.trigger("error",[c.error.required])},clearError:function(){b.trigger("clear")},"{self} onSubmit":function(a,c,d){d.push(b.validateInput())},"{selection} click":function(){b.validateInput()}}}),b.resolve()}),EasySocial.module("apps/fields/user/joomla_email/content",function(a){var b=this;EasySocial.Controller("Field.Joomla_email",{defaultOptions:{required:!0,id:null,userid:null,reconfirm:!1,event:null,registration:null,"{field}":"[data-field-joomla_email]","{input}":"[data-field-email-input]","{confirm}":"[data-field-email-reconfirm-input]","{confirmFrame}":"[data-field-email-reconfirm-frame]"}},function(b,c){return{init:function(){b.origEmail=b.input().val(),value=b.input().val(),c.reconfirm&&!c.registration&&value&&b.confirmFrame().hide()
},"{self} onRender":function(){var a=b.field().htmlData();c.error=a.error||{}},"{input} blur":function(){var e=b.input().val();c.reconfirm&&e!==b.origEmail&&b.confirmFrame().show(),!c.reconfirm||e!==b.origEmail||"onEdit"!==c.event&&"onAdminEdit"!==c.event||b.confirmFrame().hide(),b.validateInput()},"{confirm} blur":function(){b.validateInput()},validateInput:function(){b.clearError();var d=b.input().val();if(a.isEmpty(d))return b.options.required?(b.raiseError(c.error.required),!1):!0;if(b.options.reconfirm){var e=b.confirm().val();
if(d!==b.origEmail&&a.isEmpty(e))return b.raiseError(c.error.reconfirmrequired),!1;if(!a.isEmpty(e)&&d!==e)return b.raiseError(c.error.mismatch),!1}return b.checkInput().done(function(){b.clearError()}).fail(function(a){b.raiseError(a)})},checkInput:function(){return EasySocial.ajax("fields/user/joomla_email/isValid",{id:b.options.id,userid:b.options.userid,email:b.input().val()})},raiseError:function(a){b.trigger("error",[a])},clearError:function(){b.trigger("clear")},"{self} onSubmit":function(a,c,d,e){"onRegisterMini"!==e&&d.push(b.validateInput())
}}}),b.resolve()}),EasySocial.module("apps/fields/user/joomla_email/registermini_content",function(a){var b=this;EasySocial.Controller("Field.Joomla_email.Mini",{defaultOptions:{require:!0,id:null,"{field}":"[data-field-joomla_email]","{input}":"#email","{confirm}":"[data-field-email-reconfirm-input]"}},function(b,c){return{init:function(){b.origEmail=b.input().val();var a=b.field().htmlData();c.error=a.error||{}},"{self} onRender":function(){var a=b.field().htmlData();c.error=a.error||{}},"{input} keyup":function(a){a.val().length>0&&b.delayedCheck()
},"{confirm} blur":function(){b.checkEmail()},state:!1,delayedCheck:a.debounce(function(){b.checkEmail()},250),checkEmail:function(){b.clearError();var d=b.input().val();if(b.options.required&&0==d.length)return b.raiseError(c.error.required),!1;if(!a.isEmpty(d)&&b.options.regex){var e=new RegExp(b.options.regexFormat,b.options.regexModifier);if(!e.test(d))return b.raiseError(c.error.format),!1}if(c.reconfirm){var f=b.confirm().val();if(d!==b.origEmail&&a.isEmpty(f))return b.raiseError(c.error.reconfirmrequired),!1;
if(!a.isEmpty(f)&&d!==f)return b.raiseError(c.error.mismatch),!1}if(d.length>0){var g=a.Deferred();b.input().addClass("is-loading");var d=b.input().val();return EasySocial.ajax("fields/user/joomla_email/isValid",{id:b.options.id,userid:0,email:d}).done(function(){g.resolve()}).fail(function(a){b.raiseError(a),g.reject()}).always(function(){b.input().removeClass("is-loading")}),g}return!0},raiseError:function(a){b.trigger("error",[a])},clearError:function(){b.trigger("clear")},"{self} onSubmit":function(a,c,d,e){"onRegisterMini"===e&&(b.options.required||b.input().val().length>0)&&d.push(b.checkEmail())
},setLoaded:function(){b.trigger("loaded")}}}),b.resolve()}),EasySocial.module("apps/fields/user/joomla_email/sample_content",function(){var b=this;EasySocial.Controller("Field.Joomla_email.Sample",{defaultOptions:{"{confirmEmail}":"[data-field-email-reconfirm-frame]"}},function(a){return{init:function(){},"{self} onConfigChange":function(b,c,d,e){switch(d){case"reconfirm_email":a.confirmEmail().toggle(e)}}}}),b.resolve()}),EasySocial.module("apps/fields/user/joomla_fullname/content",function(a){var b=this;EasySocial.Controller("Field.Joomla_fullname",{defaultOptions:{nameFormat:1,max:0,required:!0,"{field}":"[data-field-joomla_fullname]","{firstName}":"[data-field-jname-first]","{middleName}":"[data-field-jname-middle]","{lastName}":"[data-field-jname-last]","{name}":"[data-field-jname-name]"}},function(b,c){return{init:function(){c.nameFormat=b.field().data("name-format"),c.max=b.field().data("max");
var a=b.field().htmlData();c.error=a.error||{}},"{self} onRender":function(){var a=b.field().htmlData();c.error=a.error||{}},validateInput:function(){return b.clearError(),c.required?3==c.nameFormat?a.isEmpty(b.name().val())?(b.raiseError(c.error.empty),!1):!0:a.isEmpty(b.firstName().val())?(b.raiseError(c.error.empty),!1):!0:!0},raiseError:function(a){b.trigger("error",[a])},clearError:function(){b.trigger("clear")},"{firstName} blur":function(){b.validateInput()},"{name} blur":function(){b.validateInput()},"{self} onError":function(){b.raiseError()
},"{self} onSubmit":function(a,c,d){d.push(b.validateInput())}}}),b.resolve()}),EasySocial.module("apps/fields/user/joomla_fullname/sample_content",function(){var b=this;EasySocial.Controller("Field.Joomla_fullname.Sample",{defaultOptions:{"{fullnameFormat}":"[data-fullname-format]"}},function(a){return{init:function(){},"{self} onConfigChange":function(b,c,d,e){switch(d){case"format":a.switchFormat(e)}},switchFormat:function(b){a.fullnameFormat().hide(),a.fullnameFormat().eq(b-1).show()}}}),b.resolve()}),EasySocial.module("apps/fields/user/joomla_password/content",function(a){var b=this;
EasySocial.require().library("passwordstrength").done(function(){EasySocial.Controller("Field.Joomla_password",{defaultOptions:{event:null,triggerError:!0,required:!1,passwordStrength:!1,reconfirmPassword:!1,requireOriginal:!1,min:4,max:0,minInteger:0,minSymbol:0,minUpperCase:0,"{field}":"[data-field-joomla_password]","{original}":"[data-field-password-orig]","{input}":"[data-field-password-input]","{reconfirm}":"[data-field-password-confirm]","{pwResetSubmitButton}":"[data-password-reset-submit]","{warning}":"[data-field-password-warning]","{reconfirmNotice}":"[data-reconfirmPassword-failed]","{strength}":"[data-password-strength]"}},function(b,c){return{init:function(){c.passwordStrength&&b.initPasswordStrength()
},"{self} onRender":function(){var a=b.field().htmlData();c.error=a.error},initPasswordStrength:function(){b.input().password_strength({container:b.strength.selector,minLength:c.min,texts:{1:b.strength().data("message-1"),2:b.strength().data("message-2"),3:b.strength().data("message-3"),4:b.strength().data("message-4"),5:b.strength().data("message-5")},onCheck:function(a){1>=a&&b.strength().removeClass("t-text--warning").removeClass("t-text--success").addClass("t-text--danger t-fs--sm"),a>1&&3>=a&&b.strength().removeClass("t-text--danger").removeClass("t-text--success").addClass("t-text--warning t-fs--sm"),a>=4&&b.strength().removeClass("t-text--danger").removeClass("t-text--warning").addClass("t-text--success t-fs--sm")
}})},"{input} keyup":function(){b.validatePassword()},"{input} blur":function(){b.validatePassword()},"{reconfirm} keyup":function(){b.validatePassword()},"{reconfirm} blur":function(){b.validatePassword()},validatePassword:function(){b.clearError();b.input().val(),b.reconfirm().val();return"onRegister"!==b.options.event||b.validatePasswordInput()?"onEdit"!==b.options.event||b.validatePasswordEdit()?b.options.reconfirmPassword&&!b.validatePasswordConfirm()?!1:!0:!1:!1},validatePasswordInput:function(){var d=b.input().val();
if(!c.error){var e=b.field().htmlData();c.error=e.error}if(a.isEmpty(d))return b.raiseError(c.error.empty),!1;if(b.options.min>0&&d.length<b.options.min)return b.raiseError(c.error.min),!1;if(b.options.max>0&&d.length>b.options.max)return b.raiseError(c.error.max),!1;if(b.options.minInteger>0){var f=d.match(/[0-9]/g);if(!f||f.length<b.options.minInteger)return b.raiseError(c.error.mininteger),!1}if(b.options.minSymbol>0){var f=d.match(/[\W]/g);if(!f||f.length<b.options.minSymbol)return b.raiseError(c.error.minsymbols),!1
}if(b.options.minUpperCase>0){var f=d.match(/[A-Z]/g);if(!f||f.length<b.options.minUpperCase)return b.raiseError(c.error.minupper),!1}return!0},validatePasswordEdit:function(){var d=b.original().val(),e=b.input().val();return a.isEmpty(e)&&a.isEmpty(d)?!0:a.isEmpty(d)&&b.options.requireOriginal?(b.raiseError(c.error.emptyoriginal),!1):b.validatePasswordInput()},validatePasswordConfirm:function(){var d=b.input().val(),e=b.reconfirm().val();if(!a.isEmpty(d)||!a.isEmpty(e)){if(a.isEmpty(d))return b.raiseError(c.error.empty),!1;
if(a.isEmpty(e))return b.raiseError(c.error.emptyconfirm),!1;if(d!==e)return b.raiseError(c.error.mismatch),!1}return!0},raiseError:function(a){b.options.triggerError?b.trigger("error",[a]):(b.warning().show(),b.warning().text(a))},clearError:function(){b.options.triggerError?b.trigger("clear"):(b.warning().hide(),b.warning().text(""))},"{pwResetSubmitButton} click":function(){return b.validatePassword()},"{self} onSubmit":function(a,c,d,e){"onRegisterMini"!==e&&d.push(b.validatePassword())}}}),b.resolve()})
}),EasySocial.module("apps/fields/user/joomla_password/registermini_content",function(a){var b=this;EasySocial.Controller("Field.Joomla_password.Mini",{defaultOptions:{required:!1,reconfirmPassword:!1,min:4,max:0,"{field}":"[data-field-joomla_password]","{input}":"[data-password]","{reconfirm}":"[data-field-password-confirm]","{reconfirmNotice}":"[data-reconfirmPassword-failed]"}},function(b,c){return{init:function(){var a=b.field().htmlData();c.error=a.error||{}},"{self} onRender":function(){var a=b.field().htmlData();
c.error=a.error},"{input} keyup":function(){b.checkPassword()},"{reconfirm} keyup":function(){b.validatePassword()},"{reconfirm} blur":function(){b.validatePassword()},checkPassword:function(){b.clearError();var a=b.input().val();if(b.options.required&&0==a.length)return b.raiseError(c.error.empty),!1;if(b.options.min>0&&a.length<b.options.min)return b.raiseError(c.error.min),!1;if(b.options.max>0&&a.length>b.options.max)return b.raiseError(c.error.long),!1;if(b.options.minInteger>0){var d=a.match(/[0-9]/g);
if(!d||d.length<b.options.minInteger)return b.raiseError(c.error.min),!1}if(b.options.minSymbol>0){var d=a.match(/[\W]/g);if(!d||d.length<b.options.minSymbol)return b.raiseError(c.error.minsymbols),!1}if(b.options.minUpperCase>0){var d=a.match(/[A-Z]/g);if(!d||d.length<b.options.minUpperCase)return b.raiseError(c.error.minupper),!1}return!0},validatePassword:function(){b.clearError();b.input().val(),b.reconfirm().val();return b.options.reconfirmPassword&&!b.validatePasswordConfirm()?!1:!0},validatePasswordConfirm:function(){var d=b.input().val(),e=b.reconfirm().val();
if(!a.isEmpty(d)||!a.isEmpty(e)){if(a.isEmpty(d))return b.raiseError(c.error.empty),!1;if(a.isEmpty(e))return b.raiseError(c.error.emptyconfirm),!1;if(d!==e)return b.raiseError(c.error.mismatch),!1}return!0},"{self} onSubmit":function(a,c,d,e){"onRegisterMini"===e&&d.push(b.checkPassword())},clearError:function(){b.trigger("clear")},raiseError:function(a){b.trigger("error",[a])}}}),b.resolve()}),EasySocial.module("apps/fields/user/joomla_password/sample_content",function(){var b=this;EasySocial.Controller("Field.Joomla_password.Sample",{defaultOptions:{"{confirmPassword}":"[data-password-confirm]"}},function(a){return{init:function(){},"{self} onConfigChange":function(b,c,d,e){switch(d){case"reconfirm_password":a.confirmPassword().toggle(e)
}}}}),b.resolve()}),EasySocial.module("apps/fields/user/joomla_timezone/content",function(){var b=this;EasySocial.require().library("chosen").done(function(a){EasySocial.Controller("Field.Joomla_timezone",{defaultOptions:{required:!1,"{field}":"[data-field-joomla_timezone]","{input}":"[data-field-joomla_timezone-input]"}},function(b,c){return{init:function(){c.message=b.element.find("[data-error]").data("error"),b.input().chosen({width:"100%",allow_single_deselect:!0,search_contains:!0})},validateInput:function(){if(!b.options.required)return!0;
b.clearError();var c=b.input().val();return"null"===c||a.isEmpty(c)?(b.raiseError(),!1):!0},raiseError:function(){b.trigger("error",c.message)},clearError:function(){b.trigger("clear")},"{input} change":function(){b.validateInput()},"{self} onSubmit":function(a,c,d){d.push(b.validateInput())}}}),b.resolve()})}),EasySocial.module("apps/fields/user/joomla_username/content",function(a){var b=this;EasySocial.Controller("Field.Joomla_username",{defaultOptions:{event:null,id:null,userid:null,"{button}":"[data-username-check]","{input}":"[data-username-input]","{available}":"[data-username-available]","{error}":"[data-username-error]","{errorMessage}":"[data-username-error] > [data-message]"}},function(b,c){return{state:!1,init:function(){},"{button} click":function(){b.delayedCheck()
},"{input} keyup":function(){b.delayedCheck()},delayedCheck:a.debounce(function(){b.checkUsername()},250),checkUsername:function(){b.clearError();var d=a.Deferred(),e=b.button();e.addClass("is-loading");var f=b.input().val();return EasySocial.ajax("fields/user/joomla_username/isValid",{id:c.id,userid:c.userid,username:f,event:c.event}).done(function(){b.available().removeClass("t-hidden"),b.error().addClass("t-hidden"),d.resolve()}).fail(function(a){b.available().addClass("t-hidden"),b.error().removeClass("t-hidden"),b.errorMessage().html(a),b.raiseError(a),d.reject()
}).always(function(){e.removeClass("is-loading")}),d},raiseError:function(a){b.trigger("error",[a])},clearError:function(){b.trigger("clear")},"{self} onSubmit":function(a,c,d,e){"onRegisterMini"!==e&&d.push(b.checkUsername())}}}),b.resolve()}),EasySocial.module("apps/fields/user/joomla_username/registermini_content",function(a){var b=this;EasySocial.Controller("Field.Joomla_username.Mini",{defaultOptions:{id:null,required:!1,"{field}":"[data-field-joomla_username]","{input}":"#joomla_username"}},function(b,c){return{init:function(){var a=b.field().htmlData();
c.error=a.error||{}},"{self} onRender":function(){var a=b.field().htmlData();c.error=a.error||{}},"{input} keyup":function(a){a.val().length>0&&b.delayedCheck()},state:!1,delayedCheck:a.debounce(function(){b.checkUsername()},250),checkUsername:function(){var d=b.input().val();if(b.options.required&&0==d.length)return b.raiseError(c.error.empty),!1;if(d.length>0){var e=a.Deferred();return b.clearError(),b.input().addClass("is-loading"),EasySocial.ajax("fields/user/joomla_username/isValid",{id:b.options.id,userid:0,username:d}).done(function(){b.setLoaded(),e.resolve()
}).fail(function(a){b.raiseError(a),e.reject()}).always(function(){b.input().removeClass("is-loading")}),e}return!0},raiseError:function(a){b.trigger("error",[a])},clearError:function(){b.trigger("clear")},"{self} onSubmit":function(a,c,d,e){"onRegisterMini"===e&&(b.options.required||b.input().val().length>0)&&d.push(b.checkUsername())},setLoading:function(a){b.trigger("loading",[a])},setLoaded:function(){b.trigger("loaded")}}}),b.resolve()}),EasySocial.module("apps/fields/user/joomla_username/sample_content",function(){var b=this;
EasySocial.Controller("Field.Joomla_username.Sample",{defaultOptions:{"{checkUsername}":"[data-check-username]"}},function(a){return{init:function(){},"{self} onConfigChange":function(b,c,d,e){switch(d){case"check_username":a.checkUsername().toggle(!!e)}}}}),b.resolve()}),EasySocial.module("apps/fields/user/keycaptcha/content",function(){var b=this;EasySocial.Controller("Field.Keycaptcha",{defaultOptions:{required:!0,"{input}":"[data-field-keycaptcha]"}},function(a,b){return{"{self} onRender":function(){var c=a.input().htmlData();
b.error=c.error||{}},validateInput:function(){a.clearError();var b=a.input().val();return b.length>100?!0:(a.raiseError(),!1)},raiseError:function(){a.trigger("error",b.error.required)},clearError:function(){a.trigger("clear")},"{self} onSubmit":function(b,c,d){d.push(a.validateInput())}}}),b.resolve()}),EasySocial.module("apps/fields/user/keycaptcha/registermini_content",function(a){var b=this;EasySocial.require(),EasySocial.Controller("Field.keycaptcha.Mini",{defaultOptions:{id:null,required:!1,"{input}":"[data-field-keycaptcha]"}},function(b){return{init:function(){},validateInput:function(){b.clearError();
var c=a.Deferred(),d=b.input().val(),e=d.split("|");return 1==e[4]?(c.resolve(),!0):(b.raiseError(msg),c.reject(),c)},raiseError:function(a){b.trigger("error",[a])},clearError:function(){b.trigger("clear")},"{self} onSubmit":function(a,b,c,d){}}}),b.resolve()}),EasySocial.module("apps/fields/user/multidropdown/content",function(a){var b=this;EasySocial.require().library("ui/sortable").done(function(){EasySocial.Controller("Field.Multidropdown",{defaultOptions:{required:!1,id:null,inputName:"",max:0,"{field}":"[data-field-multidropdown]","{list}":"[data-field-multidropdown-list]","{item}":"[data-field-multidropdown-item]","{input}":"[data-field-multidropdown-input]","{add}":"[data-field-multidropdown-add]","{delete}":"[data-field-multidropdown-delete]","{move}":"[data-field-multidropdown-move]"}},function(b,c){return{init:function(){c.message=b.element.find("[data-error]").data("error"),c.max=b.field().data("max"),b.initSortable()
},initSortable:function(){b.list().sortable({items:b.item.selector,handle:b.move.selector})},"{add} click":function(a){if(b.options.max<1||b.item().length<b.options.max){var c=b.item().eq(0).clone();c.find(b.input.selector).attr("value","").val(""),b.list().append(c)}b.options.max>0&&b.item().length>=b.options.max&&a.hide()},"{delete} click":function(a){var e=a.parents(b.item.selector);b.item().length>1?e.remove():e.find(b.input.selector).val(""),c.max>0&&b.item().length<b.options.max&&b.add().show()},"{self} onConfigChange":function(a,c,d,e){switch(d){case"add_button_text":b.add().text(e)
}},raiseError:function(){b.trigger("error",[c.message])},"{self} onSubmit":function(c,d,e){if(!b.options.required)return e.push(!0),void 0;var f=!1;a.each(b.input(),function(b,c){return a.isEmpty(a(c).val())?void 0:(f=!0,!1)}),f||b.raiseError(),e.push(f)}}}),b.resolve()})}),EasySocial.module("apps/fields/user/multilist/content",function(a){var b=this;EasySocial.Controller("Field.Multilist",{defaultOptions:{required:null,multiple:null,"{field}":"[data-field-multilist]","{item}":"[data-field-multilist-item]","{option}":"[data-field-multilist-item] option"}},function(b,c){return{"{self} onRender":function(){var a=b.field().htmlData();
c.error=a.error||{}},validateInput:function(){return b.clearError(),b.options.multiple&&b.item().children(":selected").length<=0?(b.raiseError(),!1):""==b.item().children(":selected").val()?(b.raiseError(),!1):!0},raiseError:function(){b.trigger("error",[c.error.empty])},clearError:function(){b.trigger("clear")},"{self} onSubmit":function(a,c,d){return b.options.required?(d.push(b.validateInput()),void 0):(d.push(!0),void 0)},"{self} onChoiceAdded":function(c,d,e){b.option().eq(e).length>0?b.option().eq(e).before(a("<option></option>")):b.item().append(a("<option></option>"))
},"{self} onChoiceValueChanged":function(a,c,d,e){b.option().eq(d).val(e)},"{self} onChoiceTitleChanged":function(a,c,d,e){b.option().eq(d).text(e)},"{self} onChoiceRemoved":function(a,c,d){b.option().eq(d).remove()},"{self} onChoiceToggleDefault":function(a,c,d,e){e?b.option().eq(d).attr("selected","selected"):b.option().eq(d).removeAttr("selected")}}}),b.resolve()}),EasySocial.module("apps/fields/user/multitextbox/content",function(a){var b=this;EasySocial.require().library("ui/sortable").done(function(){EasySocial.Controller("Field.Multitextbox",{defaultOptions:{required:!1,id:null,inputName:"",max:0,"{field}":"[data-field-multitextbox]","{list}":"[data-field-multitextbox-list]","{item}":"[data-field-multitextbox-item]","{input}":"[data-field-multitextbox-input]","{add}":"[data-field-multitextbox-add]","{delete}":"[data-field-multitextbox-delete]","{move}":"[data-field-multitextbox-move]"}},function(b,c){return{init:function(){var a=b.field().htmlData();
c.error=a.error||{},c.max=b.field().data("max"),b.initSortable()},initSortable:function(){b.list().sortable({items:b.item.selector,handle:b.move.selector})},"{add} click":function(a){if(b.options.max<1||b.item().length<b.options.max){var c=b.item().eq(0).clone();c.find(b.input.selector).attr("value","").val(""),b.list().append(c)}b.options.max>0&&b.item().length>=b.options.max&&a.hide()},"{delete} click":function(a){var c=a.parents(b.item.selector);b.item().length>1?c.remove():c.find(b.input.selector).val(""),b.options.max>0&&b.item().length<b.options.max&&b.add().show()
},"{self} onConfigChange":function(a,c,d,e){switch(d){case"add_button_text":b.add().text(e)}},raiseError:function(){b.trigger("error",[c.error.required])},"{self} onSubmit":function(c,d,e){if(!b.options.required)return e.push(!0),void 0;var f=!1;a.each(b.input(),function(b,c){return a.isEmpty(a(c).val())?void 0:(f=!0,!1)}),f||b.raiseError(),e.push(f)}}}),b.resolve()})}),EasySocial.module("apps/fields/user/numeric/content",function(a){var b=this;EasySocial.Controller("Field.Numeric",{defaultOptions:{required:!1,min:0,max:0,"{field}":"[data-field-numeric]","{input}":"[data-field-numeric-input]","{notice}":"[data-check-notice]"}},function(b,c){return{init:function(){c.min=b.input().data("min"),c.max=b.input().data("max")
},"{self} onRender":function(){var a=b.field().htmlData();c.error=a.error||{}},"{input} mouseup":function(){b.validateInput()},"{input} keyup":function(){b.validateInput()},"{input} blur":function(){b.validateInput()},validateInput:function(){b.clearError();var d=b.input().val();return c.required&&a.isEmpty(d)?(b.raiseError(c.error.required),!1):!a.isEmpty(d)&&c.min>0&&d<c.min?(b.raiseError(c.error.short),!1):c.max>0&&d>c.max?(b.raiseError(c.error.long),!1):!0},raiseError:function(a){b.trigger("error",[a])},clearError:function(){b.trigger("clear")
},"{self} onError":function(a,d,e){"required"===e&&b.raiseError(c.error.required),"validate"===e&&b.raiseError(c.error.invalid)},"{self} onSubmit":function(a,c,d){d.push(b.validateInput())}}}),b.resolve()}),EasySocial.module("apps/fields/user/password/content",function(a){var b=this;EasySocial.Controller("Field.Password",{defaultOptions:{required:!1,min:0,max:0,"{field}":"[data-field-password]","{input}":"[data-field-password-input]","{notice}":"[data-check-notice]"}},function(b,c){return{init:function(){var a=b.field().htmlData();
c.error=a.error||{},c.min=b.field().data("min"),c.max=b.field().data("max")},"{input} keyup":function(){b.validateInput()},"{input} blur":function(){b.validateInput()},validateInput:function(){b.clearError();var d=b.input().val();return b.options.required&&a.isEmpty(d)?(b.raiseError(c.error.required),!1):!a.isEmpty(d)&&b.options.min>0&&d.length<b.options.min?(b.raiseError(c.error.short),!1):b.options.max>0&&d.length>b.options.max?(b.raiseError(c.error.long),!1):!0},raiseError:function(a){b.trigger("error",[a])
},clearError:function(){b.trigger("clear")},"{self} onError":function(a,d,e){"required"===e&&b.raiseError(c.error.required)},"{self} onSubmit":function(a,c,d){d.push(b.validateInput())}}}),b.resolve()}),EasySocial.module("apps/fields/user/password/sample_content",function(){var b=this;EasySocial.Controller("Field.Password.Sample",{defaultOptions:{"{input}":"[data-input]",min:"",max:""}},function(a){return{init:function(){},"{self} onConfigChange":function(b,c,d,e){switch(d){case"placeholder":a.input().attr("placeholder",e);
break;case"default":a.input().val(e)}}}}),b.resolve()}),EasySocial.module("apps/fields/user/permalink/content",function(a){var b=this;EasySocial.Controller("Field.Permalink",{defaultOptions:{required:!1,max:0,id:null,userid:null,"{field}":"[data-field-permalink]","{checkButton}":"[data-permalink-check]","{input}":"[data-permalink-input]","{available}":"[data-permalink-available]"}},function(b,c,d){return{state:!1,init:function(){c.message={length:d.find("[data-error-length]").data("error-length"),required:d.find("[data-error-required]").data("error-required")},c.max=b.field().data("max")
},"{checkButton} click":function(){b.delayedCheck()},"{input} keyup":function(){b.delayedCheck()},delayedCheck:a.debounce(function(){b.checkPermalink()},250),checkPermalink:function(){b.clearError();var d=b.input().val();if(b.available().hide(),b.options.max>0&&d.length>b.options.max)return b.raiseError(c.message.length),!1;if(!a.isEmpty(d)){b.checkButton().addClass("is-loading");var e=a.Deferred();return EasySocial.ajax("fields/user/permalink/isValid",{id:b.options.id,userid:b.options.userid,permalink:d}).done(function(){b.checkButton().removeClass("is-loading"),b.available().show(),e.resolve()
}).fail(function(a){b.raiseError(a),b.checkButton().removeClass("is-loading"),b.available().hide(),e.reject()}),e}return b.options.required&&a.isEmpty(d)?(b.available().hide(),b.raiseError(c.message.required),!1):!0},raiseError:function(a){b.trigger("error",[a])},clearError:function(){b.trigger("clear")},"{self} onSubmit":function(a,c,d){d.push(b.checkPermalink())}}}),b.resolve()}),EasySocial.module("apps/fields/user/permalink/sample_content",function(){var b=this;EasySocial.Controller("Field.Permalink.Sample",{defaultOptions:{"{checkPermalink}":"[data-check-permalink]"}},function(a){return{init:function(){},"{self} onConfigChange":function(b,c,d,e){switch(d){case"check_permalink":a.checkPermalink().toggle(!!e)
}}}}),b.resolve()}),EasySocial.module("apps/fields/user/relationship/content",function(){var b=this;EasySocial.require().script("site/friends/suggest").done(function(a){EasySocial.Controller("Field.Relationship",{defaultOptions:{required:!1,id:null,types:null,fieldname:null,actor:null,target:null,userid:null,"{type}":"[data-rs-type]","{request}":"[data-rs-request]","{field}":"[data-field-relationship]","{pendingTitle}":"[data-rs-pending-title]","{relations}":"[data-rs-relations]","{delete}":"[data-rs-delete]","{rejectRequest}":"[data-rs-reject]","{approveRequest}":"[data-rs-approve]"}},function(b,c){return{init:function(){EasySocial.module("field.relationship/"+c.id).done(function(a){b.options.types=a
}),b.addPlugin("form")},getRequestId:function(){return b.request().data("id")},getRequestWrapper:function(b){return wrapper=a('[data-rs-request][data-id="'+b+'"]')},showTypeSelection:function(){b.type().val(b.type().children(":first").val()),b.type().removeClass("t-hidden").show(),b.type().removeAttr("disabled")},"{self} relationshipDeleted":function(){b.showTypeSelection()},"{delete} click":function(a,d){d.stopPropagation(),d.preventDefault(),a.addClass("is-loading"),EasySocial.ajax("fields/user/relationship/delete",{id:c.id,userid:c.userid,relid:b.getRequestId()}).done(function(){a.removeClass("is-loading"),b.relations().remove(),b.showTypeSelection()
})},"{approveRequest} click":function(d){var f=d.data("id");d.addClass("is-loading"),EasySocial.ajax("fields/user/relationship/approve",{id:c.id,relid:f,inputName:c.fieldname}).done(function(c){a("[data-rs-request-hidden]").remove(),wrapper=b.getRequestWrapper(f),d.removeClass("is-loading"),b.request().not(wrapper).remove(),wrapper.replaceWith(c)})},"{rejectRequest} click":function(a,d){d.preventDefault(),d.stopPropagation();var e=a.data("id");EasySocial.ajax("fields/user/relationship/reject",{id:c.id,relid:e}).done(function(){wrapper=b.getRequestWrapper(e),wrapper.remove(),b.trigger("relationshipDeleted")
})}}}),EasySocial.Controller("Field.Relationship.Form",{defaultOptions:{"{field}":"[data-field-relationship]","{type}":"[data-rs-type]","{input}":"[data-rs-input]","{target}":"[data-rs-target]","{targetAvatar}":"[data-rs-target-avatar]","{targetName}":"[data-rs-target-name]","{targetDelete}":"[data-rs-form-delete]","{textboxlistDelete}":"[data-textboxlist-itemRemoveButton]",target:!1}},function(b,c){return{init:function(){b.input().addController(EasySocial.Controller.Friends.Suggest,{max:1,name:b.parent.options.fieldname+"[target][]"});
var a=b.field().htmlData();a&&a.error&&(c.error=a.error),c.target=!0},"{self} onRender":function(){var a=b.field().htmlData();c.error=a.error},"{type} change":function(a){var f=(a.val(),a.find(":selected")),g=f.data("connection")?!0:!1;return c.target=!1,g?(b.input().controller("Textboxlist").clearItems(),b.target().hide(),b.input().show(),b.validateInput(c.error.target),void 0):(c.target=!0,b.clearError(),b.input().hide(),b.target().hide(),void 0)},"{input} addItem":function(d,e,f){var f=a("<div/>").html(f.html),g=f.find("[data-suggest-avatar]").attr("src"),h=f.find("[data-suggest-title]").val(),i=f.find("[data-suggest-id]").val();
g&&b.targetAvatar().attr("src",g),h&&b.targetName().text(h),i&&b.targetDelete().data("id",i),b.input().hide(),b.target().show(),c.target=!0,b.clearError()},"{input} blur":function(){b.validateInput(c.error.target)},"{targetDelete} click":function(a){var e=a.data("id");b.input().controller("Textboxlist").removeItem(e),b.type().removeAttr("disabled"),b.input().show(),b.target().hide(),c.target=!1,b.validateInput(c.error.target)},"{self} onSubmit":function(a,d,e){e.push(b.validateInput(c.error.target))},validateInput:function(){var e=b.parent.options.required,f=b.type().val(),g=["na","single","widowed","separated","divorced","relationshipnotarget","engagednotarget","marriednotarget","complicatednotarget"];
return e&&"na"==f?(b.raiseError(c.error.required),!1):e||-1===a.inArray(f,g)?-1!==a.inArray(f,g)||c.target?(b.clearError(),!0):(b.raiseError(c.error.target),!1):(b.clearError(),!0)},raiseError:function(a){a||(a=c.error.required),b.trigger("error",[a])},clearError:function(){b.trigger("clear")}}}),b.resolve()})}),EasySocial.module("apps/fields/user/separator/sample",function(a){var b=this;EasySocial.Controller("Field.Separator.Sample",{defaultOptions:{"{items}":"[data-separator-type]"}},function(b){return{"{self} onConfigChange":function(c,d,e,f){if("type"==e){var g=a("[data-separator-"+f+"]");
b.items().hide(),g.show()}}}}),b.resolve()}),EasySocial.module("apps/fields/user/terms/content",function(){var b=this;EasySocial.Controller("Field.Terms",{defaultOptions:{event:null,required:!1,"{textbox}":"[data-field-terms-textbox]","{checkbox}":"[data-field-terms-checkbox]"}},function(a,b){return{"{self} onRender":function(){var c=a.element.htmlData();b.error=c.error||{}},validateInput:function(){return a.clearError(),"onAdminEdit"==b.event?!0:b.required&&!a.checkbox().is(":checked")?(a.raiseError(b.error.required),!1):!0
},"{checkbox} change":function(){a.validateInput()},raiseError:function(){a.trigger("error",[b.error.required])},clearError:function(){a.trigger("clear")},"{self} onSubmit":function(b,c,d){d.push(a.validateInput())}}}),b.resolve()}),EasySocial.module("apps/fields/user/textarea/content",function(a){var b=this;EasySocial.Controller("Field.Textarea",{defaultOptions:{required:!1,min:0,max:0,"{field}":"[data-field-textarea]","{input}":"[data-field-textarea-input]"}},function(b,c){return{init:function(){c.min=b.field().data("min"),c.max=b.field().data("max")
},"{self} onRender":function(){var a=b.field().htmlData();c.error=a.error||{}},validateInput:function(){b.clearError();var d=b.input().val();return b.options.required&&a.isEmpty(d)?(b.raiseError(c.error.required),!1):!a.isEmpty(d)&&b.options.min>0&&d.length<b.options.min?(b.raiseError(c.error.short),!1):b.options.max>0&&d.length>b.options.max?(b.raiseError(c.error.long),!1):!0},raiseError:function(a){b.trigger("error",[a])},clearError:function(){b.trigger("clear")},"{self} onSubmit":function(a,c,d){d.push(b.validateInput())
},"{self} onError":function(a,d,e){"required"===e&&b.raiseError(c.error.required)},"{input} keyup":function(){b.validateInput()},"{self} onConfigChange":function(a,c,d,e){switch(d){case"default":b.input().val(e);break;case"placeholder":b.input().attr("placeholder",e);break;case"readonly":e?b.input().attr("readonly","readonly"):b.input().removeAttr("readonly")}}}}),b.resolve()}),EasySocial.module("apps/fields/user/textbox/content",function(a){var b=this;EasySocial.Controller("Field.Textbox",{defaultOptions:{required:!1,min:0,max:0,"{field}":"[data-field-textbox]","{input}":"[data-field-textbox-input]","{notice}":"[data-check-notice]"}},function(b,c){return{init:function(){c.min=b.field().data("min"),c.max=b.field().data("max")
},"{self} onRender":function(){var a=b.field().htmlData();c.error=a.error||{}},"{input} keyup":function(){b.validateInput()},"{input} blur":function(){b.validateInput()},validateInput:function(){b.clearError();var d=b.input().val();return b.options.required&&a.isEmpty(d)?(b.raiseError(c.error.required),!1):!a.isEmpty(d)&&b.options.min>0&&d.length<b.options.min?(b.raiseError(c.error.short),!1):b.options.max>0&&d.length>b.options.max?(b.raiseError(c.error.long),!1):!0},raiseError:function(a){b.trigger("error",[a])
},clearError:function(){b.trigger("clear")},"{self} onError":function(a,d,e){"required"===e&&b.raiseError(c.error.required),"validate"===e&&b.raiseError(c.error.invalid)},"{self} onSubmit":function(a,c,d){d.push(b.validateInput())}}}),b.resolve()}),EasySocial.module("apps/fields/user/textbox/sample_content",function(){var b=this;EasySocial.Controller("Field.Textbox.Sample",{defaultOptions:{"{input}":"[data-input]",min:"",max:"",regex_validate:!1,regex_format:"",regex_modifier:""}},function(a){return{init:function(){},"{self} onConfigChange":function(b,c,d,e){switch(d){case"placeholder":a.input().attr("placeholder",e);
break;case"default":a.input().val(e);break;case"readonly":e?a.input().attr("disabled","disabled"):a.input().removeAttr("disabled")}}}}),b.resolve()}),EasySocial.module("apps/fields/user/url/content",function(a){var b=this;EasySocial.Controller("Field.Url",{defaultOptions:{required:!1,"{field}":"[data-field-url]","{input}":"[data-field-url-input]"}},function(b,c){return{init:function(){},"{self} onRender":function(){var a=b.field().htmlData();c.error=a.error||{}},"{input} blur":function(){b.validateInput()},"{input} keyup":function(){b.validateInput()
},validateInput:function(){b.clearError();var d=b.input().val();return b.options.required&&a.isEmpty(d)?(b.raiseError(c.error.empty),!1):!0},raiseError:function(a){b.trigger("error",[a])},clearError:function(){b.trigger("clear")},"{self} onError":function(){b.raiseError(c.error.empty)},"{self} onSubmit":function(a,c,d){d.push(b.validateInput())}}}),b.resolve()}),EasySocial.module("shared/elements",function(a){var b=this,c=!1;a(document).on("click.button.data-bs-api","[data-bs-toggle-value]",function(){var b=a(this),c=b.siblings("[data-bs-toggle-value]"),d=b.parents('[data-bs-toggle="radio-buttons"]');
if(!d.hasClass("disabled")&&d.length>0){var e=a(this).data("bs-toggle-value");return b.addClass("active"),c.removeClass("active"),d.find("input[type=hidden]").val(e).trigger("change"),void 0}}),a(document).on("change.form.toggler","[data-toggler-checkbox]",function(){var b=a(this),c=b.is(":checked"),d=b.parents("[data-bs-toggler]");if(d.length>0){var e=d.find("input[type=hidden]");e.val(c?1:0).trigger("change")}}),EasySocial.isMobile=function(){try{return document.createEvent("TouchEvent"),!0}catch(a){return!1
}};var d="[data-es-truncater] > [data-readmore]";a(document).on("click.es.strings.truncater",d,function(){var b=a(this).parent(),c=b.find("[data-original]"),d=b.find("[data-text]");a(this).addClass("t-hidden"),d.addClass("t-hidden"),c.removeClass("t-hidden")});var e=0;window.onmousemove=function(){e++,f()};var f=a.debounce(function(){!c&&e>10?(c=!0,e=0,a(document).on("mouseover.tooltip.data-es-api","[data-es-provide=tooltip]",function(){a(this).tooltip({delay:{show:200,hide:100},animation:!1,template:'<div id="es" class="tooltip tooltip-es"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',container:"body"}).tooltip("show")
})):e=0},500);EasySocial.isMobile()||a(document).on("mouseover.tooltip.data-es-api","[data-es-provide=tooltip]",function(){a(this).tooltip({delay:{show:200,hide:100},animation:!1,template:'<div id="es" class="tooltip tooltip-es"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',container:"body"}).tooltip("show")}),a(document).on("mouseover.popover.data-es-api","[data-es-provide=popover]",function(){a(this).popoverES({delay:{show:200,hide:100},animation:!1,trigger:"hover",container:"body"}).popoverES("show")
});var g=function(a){return a%400?a%100?a%4?!1:!0:!1:!0};a(document).on("keyup","[data-date-form] [data-date-day]",function(){if(a.trim(a(this).val())){var b=parseInt(a(this).siblings("[data-date-year]").val()||a(this).siblings("[data-date-year]").data("dateDefault")),c=parseInt(a(this).siblings("[data-date-month]").val()||a(this).siblings("[data-date-month]").data("dateDefault")),d=parseInt(a(this).val()||a(this).data("dateDefault")),e=/1|3|5|7|8|10|12/.test(c)?31:30;2==c&&(e=g(b)?29:28),1>d&&(d=1),d>e&&(d=e),a.isNumeric(d)?a(this).val(d):a(this).val("")
}}),a(document).on("keyup","[data-date-form] [data-date-year]",function(){if(a.trim(a(this).val())){var b=parseInt(a(this).val());1>b&&(b=1),a.isNumeric(b)?a(this).val(b):a(this).val("")}}),b.resolve()}),EasySocial.module("shared/fields/base",function(a){var b=this;EasySocial.Controller("Field.Base",{defaultOptions:{regPrefix:"easysocial/",modPrefix:"field.",ctrlPrefix:"EasySocial.Controller.Field.",id:null,name:null,element:null,required:!1,mode:"edit","{field}":"[data-field]","{content}":"[data-content]","{notice}":"[data-check-notice]"}},function(b,c,d){return{init:function(){c.name=d.data("name"),c.element=c.element||d.data("field-item"),c.id=d.data("id"),c.required=d.data("required")?!0:!1,b.triggerFields(),b.initializeErrorMessages()
},initializeErrorMessages:function(){var a=b.notice(),c=a.text().trim();c.length<=0||b.showError(c)},showError:function(a){var c=b.content();c.find("[data-field-error]").html(a)},triggerFields:function(){var a=b.field(),d="onEdit";"registermini"==c.mode&&(d="onRegisterMini"),"register"==c.mode&&(d="onRegister"),"edit"==c.mode&&(d="onEdit"),"adminedit"==c.mode&&(d="onAdminEdit"),"sample"==c.mode&&(d="onSample"),"display"==c.mode&&(d="onDisplay"),a.trigger("onRender"),a.trigger(d)},"{field} error":function(c,d,e,f){var e=void 0!==e?e:!0;
a.isString(e)&&(f=e,e=!0),a.isBoolean(e)&&b.field().toggleClass("has-error",e),void 0!==f&&b.showError(f)},"{field} clear":function(){b.field().removeClass("has-error"),b.field().removeClass("is-loading");var d=b.field().find("[data-field-error]");d.length>0&&d.html(""),b.content().popoverES("destroy")},"{self} show":function(){b.field().trigger("onShow")},"{field} loading":function(a,c,d){b.field().addClass("is-loading"),b.notice().html(d)},"{field} loaded":function(){b.field().removeClass("is-loading")}}}),b.resolve()
}),EasySocial.module("shared/fields/conditional",function(a){var b=this,c=a.isController("EasySocial.Controller.Field.Conditional");c||(EasySocial.Controller("Field.Conditional",{defaultOptions:{id:null,fieldTargeted:[],operator:[],conditionValue:[],result:[]}},function(b,c,d){return{init:function(){c.id=d.data("id");var a=d.data("isconditional");a&&b.bindTargetedFields()},bindTargetedFields:function(){var e=d.data("conditions");e&&a.each(e,function(a,d){c.fieldTargeted.push(d.fieldId),c.operator.push(d.operator),c.conditionValue.push(d.value),b.formatConditionsValue(a),b.bindFields(a)
})},bindFields:function(a){var c=b.getTargetedField(a);b.isAutocomplete(a)?b.bindAutocompleteFields(a):(c.on("change",function(){b.fieldChanged(a)}),c.on("keyup",function(){b.fieldChanged(a)}),c.on("onFieldShow",function(){b.fieldChanged(a)}),c.hasClass("t-hidden")||b.fieldChanged(a)),c.on("onFieldHide",function(){b.hideSelf(a)})},bindAutocompleteFields:function(c){var d=b.getTargetedField(c),e=d.find("[data-field-suggest]"),f=[],g=d.data("name"),h=d.find(':input[name="'+g+'[]"]');h.length>0&&a.each(h,function(b,c){var d=a(c).val();
f.push(d)}),e.on("addItem",function(a,d){f.push(d.value),b.fieldChanged(c,f)}),e.on("removeItem",function(d,e){f.splice(a.inArray(e.value,f),1),b.fieldChanged(c,f)}),d.hasClass("t-hidden")||b.fieldChanged(c,f),d.on("onFieldShow",function(){b.fieldChanged(c,f)})},getRequiredChecking:function(){var b=a("[data-conditional-check]").val();return b?JSON.parse(b):!1},fieldChanged:function(e,f){if(!f)var f=b.getTargetedFieldValue(e);c.result[e]=b.checkCondition(f,e);var g=d.data("conditionsLogic");if(c.result){var h=!0;
a.each(c.result,function(a,b){return"or"==g&&1==b?(h=!0,!1):(0==b&&(h=!1),void 0)}),h?b.showSelf():b.hideSelf()}},checkCondition:function(d,e){var f=c.conditionValue[e],g=!1;switch(d=b.formatValue(d,e),c.operator[e]){case"equal":b.isAutocomplete(e)?a.each(d,function(a,b){return b==f?(g=!0,!0):void 0}):d==f&&(g=!0);break;case"not equal":b.isAutocomplete(e)?d.length>0&&(g=!0,a.each(d,function(a,b){return b==f?(g=!1,!0):void 0})):d!=f&&(g=!0);break;case"contain":b.isAutocomplete(e)?a.each(d,function(a,b){g=new RegExp("\\b"+f+"\\b","i").test(b)
}):g=new RegExp("\\b"+f+"\\b","i").test(d)}return g},getTargetedFieldValue:function(c){var d=b.getTargetedField(c),f=(b.getTargetedFieldElement(c),d.find(":input")),g=[],h=!1;return f.length>0&&a.each(f,function(){var b=a(this),c=b.attr("type");if("hidden"!=c)switch(c){case"radio":radio=b.is(":checked")?1:0,radio&&(g=b.val());break;case"checkbox":checkbox=b.is(":checked"),checkbox&&g.push(b.val());break;case"button":var d=b.parent(),e=d.find("input");"hidden"==e.attr("type")&&(g=e.val());break;default:b.val()&&(g=b.val())
}}),a.isArray(g)?a.each(g,function(a,b){h=h?h+" "+b:b}):h=g,h},showSelf:function(){d.removeClass("t-hidden"),d.trigger("onFieldShow"),b.updateRequiredChecking(!0)},hideSelf:function(){d.addClass("t-hidden"),d.trigger("onFieldHide"),b.updateRequiredChecking(!1)},updateRequiredChecking:function(d){var e=b.getRequiredChecking();e&&(e[c.id]=d,e=JSON.stringify(e),a("[data-conditional-check]").val(e))},isAutocomplete:function(a){return"autocomplete"==b.getTargetedFieldElement(a)?!0:!1},getTargetedField:function(b){var d=a('[data-field-item][data-id="'+c.fieldTargeted[b]+'"]');
return d},getTargetedFieldElement:function(a){var c=b.getTargetedField(a);return c.data("fieldItem")},formatValue:function(c,d){var e=b.getTargetedFieldElement(d),f=["1","2","3"];return"gender"==e&&c&&a.inArray(c,f)>=0&&(c="1"==c?"male":"3"==c?"other":"female"),c},formatConditionsValue:function(a){var d=b.getTargetedFieldElement(a);"gender"==d&&("1"==c.conditionValue[a]&&(c.conditionValue[a]="male"),"2"==c.conditionValue[a]&&(c.conditionValue[a]="female"),"3"==c.conditionValue[a]&&(c.conditionValue[a]="other"))
}}}),b.resolve())}),EasySocial.module("shared/fields/validate",function(a){var b=this,c=a.isController("EasySocial.Controller.Validator");c||(EasySocial.Controller("Validator",{defaultOptions:{mode:null,checks:["required","validate"],typeAttr:"data-check-type",formatAttr:"data-check-format",modifierAttr:"data-check-modifier",errorTrigger:"onError",submitTrigger:"onSubmit",fieldSelector:"","{container}":"[data-check]","{notice}":"[data-check-notice]","{required}":"[data-check-required]","{validate}":"[data-check-validate]"}},function(b,c){return{vars:{},parents:{},register:[],deferreds:[],errors:[],state:a.Deferred(),init:function(){},reset:function(){b.vars={},b.parents={},b.register=[],b.deferreds=[],b.errors=[],b.state=a.Deferred(),b.container().removeClass("error")
},start:function(){return b.reset(),a.each(b.container(),function(d,e){return b.vars.container=e=a(e),b.parents.container=b.vars.container.parents(c.fieldSelector),"1"==b.parents.container.data("isconditional")&&b.parents.container.hasClass("t-hidden")?!0:(e.trigger(b.options.submitTrigger,[b.register,b.options.mode]),a.each(b.getFields(),function(c,d){b.vars.field=d=a(d),a.each(b.options.checks,function(a,c){b.vars.check=c,b[c+"Check"]()})}),void 0)}),a.each(b.register,function(c,d){if(a.isDeferred(d))b.deferreds.push(d);
else if(a.isPlainObject(d))a.each(d,function(a,d){return d===!1?(b.errors.push(c),!0):void 0});else if(d===!1)return b.errors.push(c),!0}),b.errors.length>0?b.state.reject():b.deferreds.length>0?a.when.apply(null,b.deferreds).done(function(){b.state.resolve()}).fail(function(){b.state.reject()}):b.state.resolve(),b.state},getFields:function(){return a.merge(b.vars.container.find(b.required.selector),b.vars.container.find(b.validate.selector))},requiredCheck:function(){if(b.vars.field.is(b.required.selector)){var c=b.vars.field.attr(b.options.typeAttr)||b.vars.field.attr("type")||"text";
"text"===c&&""==a.trim(b.vars.field.val())&&b.raiseError(),"checkbox"===c&&b.vars.field.find('input[type="checkbox"]').filter(":checked").length<1&&b.raiseError()}},validateCheck:function(){if(void 0!==b.vars.field.attr(b.options.formatAttr)){var c=b.vars.field.val();if(a.isEmpty(c))return;var d=b.vars.field.attr(b.options.formatAttr)||"",e=b.vars.field.attr(b.options.modifierAttr)||"",f=new RegExp(d,e);f.test(c)||b.raiseError()}},raiseError:function(){b.vars.container.addClass("has-error"),b.vars.container.trigger(b.options.errorTrigger,[b.vars.check,b.vars.field]),b.register.push(!1)
}}}),a.fn.validate=function(a){var b=this;if(b.length>0){var c=this.addController("EasySocial.Controller.Validator",a);return c.start()}return!1},b.resolve())}),EasySocial.module("shared/popdown",function(a){var b=this;a(document).on("click.data.popdown","[data-popdown-option]",function(b){b.preventDefault();var c=a(this),d=c.find(">a").html(),e=a(d).clone(),f=c.parents("[data-popdown]"),g=c.data("popdown-option"),h=f.find("[data-popdown-active]"),i=f.find("input[type=hidden]");f.find("[data-popdown-option]").removeClass("active"),c.addClass("active"),h.html(e),i.val(g)
}),b.resolve()}),EasySocial.module("shared/privacy",function(){var b=this;EasySocial.require().library("textboxlist").done(function(a){a(document).on("click.es.privacy","[data-es-privacy-form]",function(){var b=a(this),c="EasySocial.Controller.Privacy.Form";b.hasController(c)||b.addController(c).toggle()}),EasySocial.Controller("Privacy.Form",{defaultOptions:{"{button}":"[data-privacy-toggle]","{menu}":"[data-privacy-menu]","{item}":"[data-privacy-menu] > [data-item]","{icon}":"[data-privacy-toggle] > [data-privacy-icon]","{label}":"[data-privacy-toggle] > [data-label]","{tooltip}":"[data-original-title]","{key}":"[data-privacy-hidden]"}},function(b,c){return{init:function(){c.mode=b.element.data("mode"),b.instanceId=a.uid(),b.addPlugin("custom"),b.addPlugin("field")
},getData:function(b){var c=a._.pick(b.data(),"uid","type","value","pid","streamid","pitemid","userid");return c.icon=b.data("privacy-icon"),c.label=b.find("[data-label]").text(),c},toggle:function(){var a=b.element.hasClass("active");b[a?"deactivate":"activate"]()},activate:function(){b.element.addClass("active"),b.trigger("activate",[b]),a(window).trigger("activatePrivacy",[b]);var c="click.privacy."+b.instanceId;a(document).on(c,function(d){var e=a(d.target);e.parents().andSelf().filter(b.element).length>0||e.parents("[data-textboxlist-autocomplete]").length>0||e.parents("[data-textboxlist-item]").length>0||(a(document).off(c),b.deactivate())
})},deactivate:function(){b.element.removeClass("active"),b.trigger("deactivateAllPrivacy",[b]),a(window).trigger("deactivatePrivacy",[b])},save:function(a){b.key().val(a.value),b.icon().attr("class",a.icon),b.label().html(a.label),b.trigger("privacySave",[a]),"ajax"==c.mode&&EasySocial.ajax("site/controllers/privacy/update",{uid:a.uid,utype:a.type,value:a.value,pid:a.pid,custom:a.custom,field:a.field,streamid:a.streamid,userid:a.userid,pitemid:a.pitemid}).done(function(a){a&&(b.element.attr("data-original-title",a),b.element.tooltip())
})},"{self} click":function(c,d){var e=a(d.target),f=b.button();e.parents().andSelf().filter(f).length>0&&b.toggle()},"{item} click":function(a){var c=b.getData(a);b.trigger("privacyChange",[c]),c.preventSave||(b.save(c),b.deactivate())},"{self} privacyChange":function(a,c,d){b.item().removeClass("active"),b.item("[data-value="+d.value+"]").addClass("active")},"{window} activatePrivacy":function(a,c,d){d!==b&&b.deactivate()}}}),EasySocial.Controller("Privacy.Form.Custom",{defaultOptions:{"{textField}":"[data-textfield]","{saveButton}":"[data-save-button]","{cancelButton}":"[data-cancel-button]","{customItem}":"[data-item][data-value=custom]","{customKey}":"[data-privacy-custom-hidden]","{notice}":"[data-privacy-custom-notice]"}},function(b){return{init:function(){b.textField().textboxlist({component:"es",unique:!0,plugin:{autocomplete:{exclusive:!0,minLength:1,cache:!1,query:function(a){var c=b.getIds(),d=EasySocial.ajax("site/views/privacy/getfriends",{q:a,exclude:c});
return d}}}}),b.textboxlist=b.textField().controller("TextboxList")},getIds:function(){var c=b.textField().textboxlist("controller").getAddedItems();return a.map(c,function(a){return a.id})},updateIds:function(){b.notice().hasClass("t-hidden")||b.notice().addClass("t-hidden");var a=b.getIds();b.customKey().val(a.join(","))},"{parent} privacyChange":function(a,c,d){var e="custom"==d.value;b.element.toggleClass("custom-privacy",e),e?d.preventSave=!0:b.textField().textboxlist("controller").clearItems()},"{parent} privacySave":function(){},"{parent} deactivateAllPrivacy":function(){b.textboxlist.autocomplete.hide()
},"{cancelButton} click":function(){b.element.removeClass("custom-privacy"),b.textboxlist.autocomplete.hide()},"{saveButton} click":function(){var a=b.parent,c=b.customItem(),d=a.getData(c),e=b.customKey().val().trim();return""==e?(b.notice().removeClass("t-hidden"),!1):(d.custom=e,b.parent.save(d),b.parent.deactivate(),void 0)},"{textField} addItem":function(){b.updateIds()},"{textField} removeItem":function(){b.updateIds()}}}),EasySocial.Controller("Privacy.Form.Field",{defaultOptions:{"{saveButton}":"[data-save-button]","{cancelButton}":"[data-cancel-button]","{fieldItem}":"[data-item][data-value=field]","{fieldKey}":"[data-privacy-field-hidden]","{inputs}":"[data-privacy-field-inputs]","{notice}":"[data-privacy-field-notice]"}},function(b){return{init:function(){},updateIds:function(){var a=b.getIds();
b.customKey().val(a.join(","))},"{parent} privacyChange":function(a,c,d){var e="field"==d.value;b.element.toggleClass("field-privacy",e),e&&(d.preventSave=!0)},"{parent} privacySave":function(){},"{parent} deactivateAllPrivacy":function(){},"{cancelButton} click":function(){b.notice().addClass("t-hidden"),b.element.removeClass("field-privacy")},"{saveButton} click":function(){var c=b.parent,d=b.fieldItem(),e=c.getData(d),f=!1,g=[];if(b.inputs().each(function(b,c){var d=a(c),e=d.attr("name"),h=d.val();h&&(f=!0,e=e+"|"+h.join(","),g.push(e))
}),!f)return b.notice().removeClass("t-hidden"),!1;var h=g.join(";");e.field=h,b.parent.save(e),b.parent.deactivate()}}}),b.resolve()})}),EasySocial.module("shared/responsive",function(a){var b=this;a(document).on("click.es.sidebar.toggle","[data-es-sidebar-toggle]",function(){var b=a(this),c=b.siblings("[data-es-container]");c.length<=0||c.toggleClass("sidebar-open")}),a(document).on("click.es.sidebar","[data-sidebar-toggle]",function(){var b=a(this),c="[data-sidebar]",d=b.siblings(c);d.length<1&&(d=b.closest(c)),d.length<1&&(d=a(c)),d.toggleClass("sidebar-open").trigger("sidebarToggle")
}),a(document).on("onEasySocialFilterClick",function(){var b=a("[data-es-mobile-wrapper]");if(!(b.length>0)){var c=a("[data-es-sidebar-toggle]").siblings("[data-es-container]");c.length<=0||c.hasClass("sidebar-open")&&c.removeClass("sidebar-open")}}),b.resolve()}),EasySocial.module("shared/sidebarmenu",function(a){var b=this,c=a.isController("EasySocial.Controller.Sidebarmenu");c||(EasySocial.Controller("Sidebarmenu",{defaultOptions:{mainmenu:null,viewOpenClass:"dl-subviewopen",subViewClass:"dl-subview",animate:!0,"{subMenuLink}":"[data-submenu-link]","{subMenuBack}":"[data-submenu-back]"}},function(b,c,d){return{init:function(){},open:function(a){var e=a.parent("li"),f=e.children("ul");
b.animate("open",f).done(function(){d.find(".dl-subviewopen").addClass(c.subViewClass).removeClass(c.viewOpenClass),e.removeClass(c.subViewClass).addClass(c.viewOpenClass)})},close:function(a){var d=a.parent("li");d.removeClass(c.viewOpenClass);var e=d.parent("ul");e.parent("li").removeClass(c.subViewClass).addClass(c.viewOpenClass),b.animate("close",a,e).done(function(){void 0!==e.attr("data-sidebar-menu")&&e.removeClass(c.subViewClass)})},animate:function(b,e,f){if(void 0!==f&&void 0!==f.attr("data-sidebar-menu")&&d.removeClass(c.subViewClass),c.animate){var g=a.Deferred(),h=a.Deferred();
operation1="open"==b?"out":"in",operation2="open"==b?"in":"out";var i=e.clone();return i.find("ul").remove(),d.after(i),d.addClass("dl-animate-"+operation1+"-1"),setTimeout(function(){d.addClass(c.subViewClass).removeClass("dl-animate-"+operation1+"-1"),g.resolve()},300),i.addClass("dl-animate-"+operation2+"-1"),"in"==operation2&&i.css("opacity","0"),setTimeout(function(){i.removeClass("dl-animate-"+operation2+"-1"),i.remove(),h.resolve()},300),a.when(g,h).done(function(){}).promise()}var j=a.Deferred();return d.addClass(c.subViewClass),j.resolve(),j
},"{subMenuLink} click":function(a,c){c.preventDefault(),c.stopPropagation(),b.open(a)},"{subMenuBack} click":function(a,c){c.preventDefault(),c.stopPropagation();var d=a.parent("ul");b.close(d)}}}),b.resolve())}),EasySocial.module("uploader/item",function(){var b=this;EasySocial.require().view("site/uploader/preview").done(function(a){EasySocial.Controller("Uploader.Item",{defaults:{"{uploadItem}":".uploadItem","{uploadItemPreview}":".uploadItem.preview a.itemLink","{itemLink}":".itemLink","{itemDelete}":".itemDelete",view:{preview:"site/uploader/preview"}}},function(){return{init:function(){},"{itemDelete} click":function(b){var c=a(b).data("id");
EasySocial.ajax("site:/controllers/uploader/delete",{id:c},function(){a(b).parents("li.uploadItem").remove()})},"{uploadItemPreview} click":function(b){var c=a(b).data("uri"),d=a(b).data("title");a.dialog({title:d,content:a.Image.get(c)})}}})}),b.resolve()}),EasySocial.module("uploader/queue",function(){var b=this;EasySocial.require().done(function(a){EasySocial.Controller("Uploader.Queue",{defaults:{"{item}":"[data-uploaderQueue-item]"}},function(a){return{init:function(){a.item().implement(EasySocial.Controller.Uploader.Queue.Item)
}}}),EasySocial.Controller("Uploader.Queue.Item",{defaultOptions:{"{delete}":"[data-uploaderQueue-remove]","{progress}":"[data-uploaderQueue-progress]","{progressBar}":"[data-uploaderQueue-progressBar]","{status}":"[data-uploaderQueue-status]","{id}":"[data-uploaderQueue-id]"}},function(b){return{init:function(){b.uploader.options.temporaryUpload&&(b.idTemplate=b.id().toHTML(),b.id().remove())},"{delete} click":function(){b.uploader.removeItem(b.element.attr("id"))},"{self} FileUploaded":function(c,d,e,f){b.uploader.options.temporaryUpload&&a.buildHTML(b.idTemplate).val(f.id).appendTo(b.element),5==e.status&&b.element.removeClass("is-queue").addClass("is-done")
},"{self} UploadProgress":function(a,c,d){b.status().html(d.percent+"%"),b.progressBar().css("width",d.percent+"%")},"{self} FileError":function(){b.element.removeClass("is-done is-queue").addClass("is-error"),b.progress().removeClass("progress-danger progress-success progress-info progress-warning").addClass("progress-danger"),b.status().html("Error")}}}),b.resolve()})}),EasySocial.module("uploader/uploader",function(a){var b=this;EasySocial.require().library("plupload").script("uploader/queue").done(function(){EasySocial.Controller("Uploader",{defaults:{url:a.indexUrl+"?option=com_easysocial&controller=uploader&task=uploadTemporary&format=json&tmpl=component&"+EasySocial.token()+"=1",uploaded:[],query:"",plupload:"",dropArea:"uploaderDragDrop",extensionsAllowed:"jpg,jpeg,png,gif",temporaryUpload:!1,files:[],"{uploaderForm}":"[data-uploader-form]","{uploadButton}":"[data-uploader-browse]","{uploadArea}":".uploadArea","{queue}":"[data-uploaderQueue]","{queueItem}":"[data-uploaderQueue-item]","{emptyFiles}":"[data-uploader-empty]","{removeFile}":"[data-uploaderQueue-remove]","{uploadCounter}":".uploadCounter"}},function(b,c){return{init:function(){b.queue().implement(EasySocial.Controller.Uploader.Queue),c.temporaryUpload&&(c.url=a.indexUrl+"?option=com_easysocial&controller=uploader&task=uploadTemporary&format=json&tmpl=component&"+EasySocial.token()+"=1"),""!=c.query&&(c.url=c.url+"&"+c.query),b.uploaderForm().implement("plupload",{settings:{url:c.url,drop_element:c.dropArea,filters:[{title:"Allowed File Type",extensions:c.extensionsAllowed}]},"{uploader}":"[data-uploader-form]","{uploadButton}":"[data-uploader-browse]"},function(){c.plupload=this.plupload
})},createFileItem:function(d){a.each(d,function(d,e){if(!b.getItem(e)){e.size=b.formatSize(e.size);var f=a("[data-uploaderQueue-item-template]"),g=f.clone();g.removeClass("t-hidden"),g.removeAttr("data-uploaderQueue-item-template"),g.attr("id",e.id),g.find("[data-filename]").text(e.name),g.find("[data-filesize]").text(e.size),a(g).implement(EasySocial.Controller.Uploader.Queue.Item,{"{uploader}":b}),b.items[e.id]=g,c.files.push(e),b.emptyFiles().hide(),b.queue().append(g)}})},formatSize:function(a){var b=parseInt(a/1024);
return b},reset:function(){a("[data-uploaderQueue-item].is-done").remove()},removeItem:function(c){var d=a("#"+c),e=a(d).find("input[name=upload-id\\[\\]]").val();return d.remove(),e?(EasySocial.ajax("site/controllers/uploader/delete",{id:e}).done(function(){b.options.plupload.removeFile(b.options.plupload.getFile(c))}),delete b.items[c],void 0):(b.options.plupload.removeFile(b.options.plupload.getFile(c)),void 0)},startUpload:function(){b.upload()},upload:function(){b.options.plupload.files.length>0&&(b.options.uploading=!0,b.options.plupload.start())
},hasFiles:function(){return b.options.files.length>0},"{uploaderForm} FilesAdded":function(a,d,e,f){b.createFileItem(f),c.temporaryUpload&&b.startUpload()},items:{},getItem:function(c){var d;return a.isString(c)&&(d=c),c&&c.id&&(d=c.id),b.items[d]},"{uploaderForm} UploadProgress":function(a,c,d,e){e&&b.queueItem("#"+e.id).trigger("UploadProgress",e)},"{uploaderForm} FileUploaded":function(a,c,d,e,f){b.queueItem("#"+e.id).trigger("FileUploaded",[e,f])},"{uploaderForm} UploadComplete":function(){b.options.uploading=!1
},"{uploaderForm} Error":function(a,c,d,e){b.clearMessage();var f={message:e.message,type:"error"};b.setMessage(f)},"{uploaderForm} FileError":function(a,c,d,e,f){var g={message:f.message,type:"error"};b.setMessage(g),b.queueItem("#"+e.id).trigger("FileError",[e,f])}}}),b.resolve()})}),EasySocial.require().script("admin/api/tabs","admin/vendors/uniform","admin/grid/grid","shared/responsive","shared/elements","shared/popdown","shared/privacy").library("dialog","select2").done(function(a){a(".uniform, input:file[data-uniform], .usergroups :checkbox").uniform(),a("[data-es-app-side-toogle]").on("click",function(){a("[data-es-app]").toggleClass("is-sidebar-close")
}),a("[data-sidebar-menu-toggle]").on("click",function(){var b=a(this).parent("li"),c=b.find("ul"),d=a(this).parent("li").hasClass("active");d?(b.removeClass("active"),c.removeClass("in")):(b.addClass("active"),c.addClass("in"))}),a("[data-table-grid-filter]").select2({theme:"backend",width:"resolve",minimumResultsForSearch:1/0}),a("[data-table-grid-filter]").on("select2:open",function(){a("body").addClass("has-select2-dropdown")}),a("[data-table-grid-filter]").on("select2:close",function(){a("body").removeClass("has-select2-dropdown")
}),EasySocial.compareVersion=function(a,b){for(var c=0,d=a.split("."),e=b.split("."),f=Math.max(d.length,e.length),g=0;f>g;g++){var h=g<d.length?parseInt(d[g],10):0,i=g<e.length?parseInt(e[g],10):0;if(isNaN(h)&&(h=0),isNaN(i)&&(i=0),h!=i){c=h>i?1:-1;break}}return c};var b=a("[data-table-grid]");b.length>0&&b.implement(EasySocial.Controller.Grid)}),EasySocial.module("admin/api/tabs",function(a){var b=this;a(document).on("click.tabs.active","[data-es-form-tabs] [data-item]",function(){var b=a("[data-tab-active]");
if(!(b.length<=0)){var c=a(this).data("item");b.val(c)}}),b.resolve()}),EasySocial.module("admin/api/toolbar",function(a){var b=this,c=a("#toolbar"),d=a("[data-toolbar-actions]");d.length>0&&d.each(function(){var b=a(this),d=b.data("position")||"append";b.removeClass("t-hidden"),"append"==d?b.appendTo(c):b.prependTo(c),b.find("[data-action]").each(function(){var b=a(this),c=b.data("action");b.on("click",function(){Joomla.submitbutton(c)})})}),b.resolve()}),EasySocial.module("admin/apps/store",function(){var b=this;
EasySocial.Controller("Apps.Store",{defaultOptions:{"{item}":"[data-app-item]","{install}":"[data-app-install]"}},function(a){return{init:function(){},getItem:function(b){return b.closest(a.item.selector)},"{install} click":function(b){{var d=a.getItem(b);1==b.data("payment"),"external"==b.data("app-install")}EasySocial.dialog({content:EasySocial.ajax("admin/views/store/confirmation",{id:d.data("id")})})}}}),b.resolve()}),EasySocial.module("admin/clusters/users",function(a){var b=this;EasySocial.Controller("Clusters.Users",{defaultOptions:{clusterid:null,clustertype:"","{addMember}":"[data-cluster-add-member]","{removeMember}":"[data-cluster-remove-member]","{approveMember}":"[data-cluster-approve-member]","{promoteMember}":"[data-cluster-promote-member]","{demoteMember}":"[data-cluster-demote-member]"}},function(b,c){return{"{addMember} click":function(){var e={};
window.addMembers=function(a){a.state?e[a.id]=a:delete e[a.id]},EasySocial.dialog({content:EasySocial.ajax("admin/views/"+c.clustertype+"/addMembers",{id:c.clusterid}),bindings:{"{submitButton} click":function(){var b=a("[data-form-add-members]"),c=b.find("[data-ids]"),d=[];a.each(e,function(a,b){d.push(b.id)}),c.val(JSON.stringify(d)),a("[data-form-add-members]").submit()}}})},"{removeMember} click":function(){0==document.adminForm.boxchecked.value?alert(c.error.empty):a.Joomla("submitform",["removeMembers"])
},"{approveMember} click":function(){0==document.adminForm.boxchecked.value?alert(c.error.empty):a.Joomla("submitform",["publishUser"])},"{promoteMember} click":function(){0==document.adminForm.boxchecked.value?alert(c.error.empty):a.Joomla("submitform",["promoteMembers"])},"{demoteMember} click":function(){0==document.adminForm.boxchecked.value?alert(c.error.empty):a.Joomla("submitform",["demoteMembers"])}}}),b.resolve()}),EasySocial.module("admin/discovery/discovery",function(){var b=this;EasySocial.require().script("admin/progress/progress").done(function(a){EasySocial.Controller("Admin.Discovery",{defaultOptions:{files:[],namespace:"",progressController:null,"{progress}":"[data-progress]","{result}":"[data-discovery-result]"}},function(b,c){return{init:function(){c.progressController=b.progress().addController(EasySocial.Controller.Progress),a.Joomla("submitbutton",function(a){"discover"==a&&b.start()
})},start:function(){b.reset(),EasySocial.ajax(c.namespaces.discover,{}).done(function(a,d){c.files=a,c.files.length>0?(c.progressController.begin(c.files.length),b.log(d),b.startIterating()):(c.progressController.begin(1),c.progressController.completed("Discover Completed"),b.log(c.messages.completed))})},reset:function(){b.result().empty(),b.options.progressController.reset()},log:function(c){a("<tr>").append(a("<td>").html(c)).appendTo(b.result())},startIterating:function(){var a=c.files.shift();EasySocial.ajax(c.namespaces.install,{file:a}).done(function(a){c.progressController.touch("..."),b.log(a),c.files.length>0?b.startIterating():b.log(c.messages.completed)
})}}}),b.resolve()})}),EasySocial.module("admin/events/approveRecurring",function(a){var b=this;EasySocial.Controller("Events.ApproveRecurring",{defaultOptions:{postdatas:{},schedules:{},eventids:[],"{progress}":"[data-progress-bar]","{form}":"[data-form]"}},function(b){return{init:function(){var c=0;a.each(b.options.schedules,function(a,b){c+=b.length}),b.total=c,b.startCreate()},total:0,doneCounter:0,eventCounter:0,createCounter:0,updateProgressBar:function(){var a=Math.ceil(b.doneCounter/b.total*100);b.progress().css({width:a+"%"})
},startCreate:function(){return void 0===b.options.eventids[b.eventCounter]?b.completed():(b.create().done(function(){b.doneCounter++,b.createCounter++,void 0===b.options.schedules[b.options.eventids[b.eventCounter]][b.createCounter]&&(b.eventCounter++,b.createCounter=0),b.updateProgressBar(),b.startCreate()}).fail(function(a,b){console.log(a,b)}),void 0)},create:function(){var a=b.options.eventids[b.eventCounter],c=b.options.schedules[a][b.createCounter],d=b.options.postdatas[a];return EasySocial.ajax("admin/controllers/events/createRecurring",{eventId:a,datetime:c,postdata:d})
},completed:function(){b.progress().parent().removeClass("progress-info").addClass("progress-success"),b.form().submit()}}}),b.resolve()}),EasySocial.module("admin/events/events",function(){var b=this;EasySocial.require().library("expanding").done(function(){EasySocial.Controller("Events.Pending.Item",{defaultOptions:{"{approve}":"[data-pending-approve]","{reject}":"[data-pending-reject]"}},function(a){return{init:function(){a.options.id=a.element.data("id")},"{approve} click":function(){EasySocial.dialog({content:EasySocial.ajax("admin/views/events/approveEvent",{ids:a.options.id})})
},"{reject} click":function(){EasySocial.dialog({content:EasySocial.ajax("admin/views/events/rejectEvent",{ids:a.options.id})})}}}),b.resolve()})}),EasySocial.module("admin/events/store",function(a){var b=this;EasySocial.Controller("Events.Update",{defaultOptions:{postdata:{},updateids:[],schedule:[],eventId:null,totalRecurringEvents:0,isNew:0,"{progress}":"[data-progress-bar]","{form}":"[data-form]"}},function(b){return{init:function(){b.startUpdate()},updateCounter:0,createCounter:0,isNewEvent:0,updateProgressBar:function(){var a=Math.ceil((b.updateCounter+b.createCounter)/(b.options.updateids.length+b.options.schedule.length)*100);
b.progress().css({width:a+"%"})},startUpdate:function(){return void 0===b.options.updateids[b.updateCounter]?b.startCreate():(b.update(b.options.updateids[b.updateCounter]).done(function(){b.updateCounter++,b.updateProgressBar(),b.startUpdate()}).fail(function(a,b){console.log(a,b)}),void 0)},update:function(c){var d=0,e=b.updateCounter+1;if(e==b.options.updateids.length)var d=1;b.isNewEvent=b.options.isNew;var f=a.extend({},b.options.postdata,{id:c,applyRecurring:1,isLastRecurringEvent:d,isNew:b.isNewEvent});
return EasySocial.ajax("admin/controllers/events/store",f)},startCreate:function(){return void 0===b.options.schedule[b.createCounter]?b.completed():(b.create(b.options.schedule[b.createCounter]).done(function(){b.createCounter++,b.updateProgressBar(),b.startCreate()}).fail(function(a,b){console.log(a,b)}),void 0)},create:function(a){var c=0,d=b.createCounter+1;if(d==b.options.totalRecurringEvents)var c=1;return b.isNewEvent=b.options.isNew,EasySocial.ajax("admin/controllers/events/createRecurring",{eventId:b.options.eventId,datetime:a,postdata:b.options.postdata,isLastRecurringEvent:c,isNew:b.isNewEvent})
},completed:function(){b.progress().parent().removeClass("progress-info").addClass("progress-success"),b.form().submit()}}}),b.resolve()}),EasySocial.module("admin/events/users",function(a){var b=this;EasySocial.Controller("Events.Users",{defaultOptions:{eventid:null,"{inviteGuest}":"[data-event-invite-guest]","{removeGuest}":"[data-event-remove-guest]","{approveGuest}":"[data-event-approve-guest]","{promoteGuest}":"[data-event-promote-guest]","{demoteGuest}":"[data-event-demote-guest]"}},function(b,c){return{"{inviteGuest} click":function(){var e={};
window.inviteGuests=function(a){a.state?e[a.id]=a:delete e[a.id]},EasySocial.dialog({content:EasySocial.ajax("admin/views/events/inviteGuests",{id:c.eventid}),bindings:{"{submitButton} click":function(){var b=a("[data-form-add-members]"),c=b.find("[data-ids]"),d=[];a.each(e,function(a,b){d.push(b.id)}),c.val(JSON.stringify(d)),a("[data-form-add-members]").submit()}}})},"{removeGuest} click":function(){0==document.adminForm.boxchecked.value?alert(c.error.empty):a.Joomla("submitform",["removeGuests"])},"{approveGuest} click":function(){0==document.adminForm.boxchecked.value?alert(c.error.empty):a.Joomla("submitform",["approveGuests"])
},"{promoteGuest} click":function(){0==document.adminForm.boxchecked.value?alert(c.error.empty):a.Joomla("submitform",["promoteGuests"])},"{demoteGuest} click":function(){0==document.adminForm.boxchecked.value?alert(c.error.empty):a.Joomla("submitform",["demoteGuests"])}}}),b.resolve()}),EasySocial.module("admin/grid/grid",function(){var b=this;EasySocial.require().script("admin/grid/sort").done(function(a){EasySocial.Controller("Grid",{defaultOptions:{"{sortColumns}":"[data-table-grid-sort]","{ordering}":"[data-table-grid-ordering]","{saveorder}":"[data-table-grid-saveorder]","{direction}":"[data-table-grid-direction]","{task}":"[data-table-grid-task]","{searchInput}":"[data-table-grid-search-input]","{search}":"[data-table-grid-search]","{resetSearch}":"[data-table-grid-search-reset]","{checkAll}":"[data-table-grid-checkall]","{checkboxes}":"input[type=checkbox][data-table-grid-id]","{publishItems}":"[data-table-grid-publishing]","{itemRow}":"tr","{boxChecked}":"[data-table-grid-box-checked]","{filters}":"[data-table-grid-filter]"}},function(b){return{init:function(){b.implementSortable()
},"{filters} change":function(){b.setTask(""),b.submitForm()},"{search} click":function(){b.submitForm()},"{saveorder} click":function(){b.setTask("saveorder"),b.checkAll().click(),b.submitForm()},"{resetSearch} click":function(){b.searchInput().val(""),b.submitForm()},submitForm:function(){b.trigger("beforeSubmitForm",[b.task().val()]),b.element.submit()},setTask:function(a){b.task().val(a)},setOrdering:function(a){b.ordering().val(a)},setDirection:function(a){b.direction().val(a)},updateBoxChecked:function(){var a=b.checkboxes(":checked").length;
b.boxChecked().val(a)},toggleSelectRow:function(b){var c=a(b.find("input[name=cid\\[\\]]")),d=1==c.prop("checked");return d?(c.prop("checked",!1),void 0):(c.prop("checked",!0),void 0)},selectRow:function(b){var c=b.find("input[name=cid\\[\\]]");a(c).prop("checked",!0)},implementSortable:function(){b.sortColumns().implement(EasySocial.Controller.Grid.Sort,{"{parent}":b})},"{checkboxes} click":function(a,b){b.stopPropagation()},"{itemRow} click":function(a){var d=a.find(b.checkboxes.selector);d.prop("checked",!d.is(":checked")).trigger("change")
},"{checkboxes} change":function(a){{var d=a.is(":checked"),e=a.closest(b.itemRow.selector);b.checkboxes().is(":checked").length}b.updateBoxChecked(),e.toggleClass("is-checked",d)},"{checkAll} change":function(a){b.checkboxes().prop("checked",a.is(":checked")).trigger("change");a.is(":checked")?b.checkboxes().length:0;b.updateBoxChecked()},"{publishItems} click":function(a){var d=a.parents(b.itemRow.selector),e=a.data("task");b.selectRow(d),b.setTask(e),b.submitForm()}}}),b.resolve()})}),EasySocial.module("admin/grid/ordering",function(a){var b=this;
EasySocial.Controller("Grid.Ordering",{defaultOptions:{"{moveUp}":"[data-grid-order-up]","{moveDown}":"[data-grid-order-down]",row:null}},function(b){return{init:function(){b.options.row=b.element.parents("tr")},selectRow:function(){var c=b.options.row.find("input[name=cid\\[\\]]");a(c).prop("checked",!0)},"{moveUp} click":function(){b.selectRow(),a.Joomla("submitform",["moveUp"])},"{moveDown} click":function(){b.selectRow(),a.Joomla("submitform",["moveDown"])}}}),b.resolve()}),EasySocial.module("admin/grid/sort",function(){var b=this;
EasySocial.Controller("Grid.Sort",{defaultOptions:{items:"[data-grid-sort-item]"}},function(a){return{init:function(){},"{self} click":function(){var b=a.element.data("direction"),c=a.element.data("sort");a.parent.setOrdering(c),a.parent.setDirection(b),a.parent.setTask(""),a.parent.submitForm()}}}),b.resolve()}),EasySocial.module("admin/groups/groups",function(){var b=this;EasySocial.require().library("expanding").done(function(){EasySocial.Controller("Groups.Pending.Item",{defaultOptions:{"{approve}":"[data-pending-approve]","{reject}":"[data-pending-reject]"}},function(a){return{init:function(){a.options.id=a.element.data("id")
},"{approve} click":function(){EasySocial.dialog({content:EasySocial.ajax("admin/views/groups/approveGroup",{ids:a.options.id})})},"{reject} click":function(){EasySocial.dialog({content:EasySocial.ajax("admin/views/groups/rejectGroup",{ids:a.options.id})})}}}),b.resolve()})}),EasySocial.module("admin/header/apps",function(){var b=this;EasySocial.require().library("ui/sortable","scrollTo").done(function(a){EasySocial.Controller("Header.Apps",{defaultOptions:{"{appsWrapper}":"[data-apps-wrapper]","{apps}":"[data-apps]","{appItem}":"[data-app-item]"}},function(b){return{init:function(){b.initAppsSortable(),b.updateOrdering(b.appItem())
},initAppsSortable:function(){b.apps().sortable({items:b.appItem.selector,cursor:"move",forceHelperSize:!0,axis:"y",cancel:".do-not-move",start:function(a,b){b.helper.addClass("is-new")},stop:function(a,b){setTimeout(function(){b.item.removeClass("is-new")},150)},update:function(){b.updateOrdering(b.appItem())}})},updateOrdering:function(b){var c=[];a.each(b,function(){var b=a(this),d=b.data("element"),e=b.index();b.attr("data-ordering",e),c.push(d)}),c=JSON.stringify(c),a("[data-app-ordering-value]").val(c)
}}}),b.resolve()})}),EasySocial.module("admin/maintenance/maintenance",function(){var b=this;EasySocial.Controller("Maintenance.Execute",{defaultOptions:{"{row}":"[data-row]"}},function(a){return{init:function(){a.runscript()},counter:0,success:0,fail:0,runscript:function(){var b=a.row().eq(a.counter);if(0===b.length)return a.completed();var c=b.data("key");EasySocial.ajax("admin/controllers/maintenance/runscript",{key:c}).done(function(){a.setStatus(b,1),a.success++}).fail(function(){a.setStatus(b,0),a.fail++
}).always(function(){a.counter++,a.runscript()})},completed:function(){a.fail<1&&(window.location="index.php?option=com_easysocial&view=maintenance&success="+a.success)},setStatus:function(a,b){var c=a.find("[data-status]"),d=a.find("[data-icon]"),e=["label-danger","label-success","label-warning"],f=["fa-exclamation-triangle","fa-check","fa-wrench"];for(i=0;3>i;i++)c.toggleClass(e[i],b==i),d.toggleClass(f[i],b==i)}}}),b.resolve()}),EasySocial.module("admin/migrators/migrator",function(){var b=this;EasySocial.require().script("admin/progress/progress").done(function(a){EasySocial.Controller("Migrators.Migrator",{defaultOptions:{component:null,processState:0,progressController:null,mapping:null,updateconfig:0,"{initiateButton}":"[data-initiate-migration]","{progressBar}":"[data-progress]","{results}":".scannedResult","{viewLog}":".viewLog","{customFieldsMap}":"[data-custom-fields-map]","{resultForm}":"[data-migration-result]","{startWidget}":"[data-start-widget]","{fieldItem}":"[data-field-item]","{startMigrationButton}":"[data-start-migration]","{rows}":"[data-row-item]","{selection}":"[data-field-item]","{jomsocialBackButton}":"[data-jomsocial-back-button]"}},function(b){return{init:function(){b.initProgressBar(),b.initLogging()
},showCustomFields:function(){b.startWidget().slideUp(),b.customFieldsMap().slideDown()},showResultForm:function(){b.customFieldsMap().slideUp(),"com_community"!=b.options.component&&b.startWidget().slideUp(),b.resultForm().slideDown()},startMigration:function(){b.showResultForm(),1!=b.options.processState&&(b.options.processState=1,b.reset(),EasySocial.ajax("admin/controllers/migrators/check",{component:b.options.component}).done(function(a){a.isvalid?(b.options.progressController.begin(a.count),b.startIterating("")):(b.results().show(),b.addLog("Error: "+a.message),b.options.processState=0)
}))},reset:function(){b.results().empty(),b.initLogging(),b.options.progressController.reset()},initLogging:function(){b.viewLog().hide()},initProgressBar:function(){b.progressBar().implement(EasySocial.Controller.Progress),b.options.progressController=b.progressBar().controller()},addLog:function(c){a("<li>").html(c).appendTo(b.results())},startIterating:function(c){null==b.options.mapping&&b.selection().length>0&&(b.options.mapping=a("#adminForm").serializeArray()),EasySocial.ajax("admin/controllers/migrators/process",{component:b.options.component,item:c,mapping:b.options.mapping,updateconfig:b.options.updateconfig}).always(function(a,c){b.options.updateconfig=c,a["continue"]?(b.options.progressController.touch("Discovering..."),b.addLog(a.message),b.startIterating(a.item)):(b.options.progressController.touch("Discover Completed"),b.addLog(a.message),b.addLog("migration process completed."),b.viewLog().show(),b.jomsocialBackButton().show(),b.options.processState=0)
})},"{fieldItem} change":function(b){var c=a(b).val();""==c?a(b).parents("[data-row-item]").removeClass("success").addClass("error"):a(b).parents("[data-row-item]").removeClass("error").addClass("success")},"{startMigrationButton} click":function(){b.selection().length>0&&b.selection().each(function(b,c){""==a(c).val()?a(c).parents("[data-row-item]").removeClass("success").addClass("error"):a(c).parents("[data-row-item]").removeClass("error").addClass("success")});var c=b.rows().hasClass("error");c?EasySocial.dialog({content:EasySocial.ajax("admin/views/migrators/confirmMigration"),bindings:{"{submitButton} click":function(){b.startMigration(),EasySocial.dialog().close()
}}}):b.startMigration()},"{initiateButton} click":function(){b.showCustomFields()},"{viewLog} click":function(){b.results().toggle()}}}),b.resolve()})}),EasySocial.module("admin/pages/pages",function(){var b=this;EasySocial.require().library("expanding").done(function(){EasySocial.Controller("Pages.Pending.Item",{defaultOptions:{"{approve}":"[data-pending-approve]","{reject}":"[data-pending-reject]"}},function(a){return{init:function(){a.options.id=a.element.data("id")},"{approve} click":function(){EasySocial.dialog({content:EasySocial.ajax("admin/views/pages/approvePage",{ids:a.options.id})})
},"{reject} click":function(){EasySocial.dialog({content:EasySocial.ajax("admin/views/pages/rejectPage",{ids:a.options.id})})}}}),b.resolve()})}),EasySocial.module("admin/profiles/avatar",function(a){var b=this;EasySocial.require().script("uploader/uploader").done(function(){EasySocial.Controller("Profiles.Avatar",{defaultOptions:{token:null,"{fileUploader}":"[data-profile-avatars-uploader]","{startUploadButton}":"[data-profile-avatars-startupload]","{avatarList}":"[data-profile-avatars-list]","{avatarEmpty}":"[data-profile-avatars-empty]","{avatarItem}":"[data-profile-avatars-item]","{messagePlaceholder}":"[data-profile-avatars-message]","{removeFile}":".removeFile","{clearUploadedItems}":"[data-uploader-clear]"}},function(b,c){return{init:function(){c.id=b.element.data("id"),b.initUploader(),b.initAvatar()
},initUploader:function(){b.fileUploader().implement(EasySocial.Controller.Uploader,{url:window.es.rootUrl+"/administrator/index.php?option=com_easysocial&namespace=admin/controllers/profiles/uploadDefaultAvatars&"+window.es.token+"=1&tmpl=component&format=ajax&uid="+c.id})},initAvatar:function(){b.avatarItem().implement("EasySocial.Controller.Profiles.Avatar.Item",{"{parent}":b,items:b.avatarItem})},addMessage:function(a){b.clearMessage(),b.setMessage(a)},"{removeFile} click":function(a){var d=a.parents("li").attr("id");
b.fileUploader().controller().removeItem(d)},"{startUploadButton} click":function(){var a=b.fileUploader().controller();a.startUpload()},"{fileUploader} UploadProgress":function(b,c,d){var e=d.percent,f="#"+d.id,g=a(f).find(".progressBar");g.show(),g.find(".bar").css("width",e+"%")},"{fileUploader} FileUploaded":function(a,c,d,e){if(void 0!=e[0]){var f=e[0].data[0];b.avatarEmpty().hide(),b.avatarList().prepend(f),b.clearUploadedItems().show(),b.initAvatar()}},"{clearUploadedItems} click":function(){var a=b.fileUploader().controller();
a.reset(),b.clearUploadedItems().hide()}}}),EasySocial.Controller("Profiles.Avatar.Item",{defaultOptions:{id:null,"{deleteLink}":"[data-avatar-delete]","{setDefaultAvatar}":"[data-avatar-default]"}},function(b,c){return{init:function(){c.id=b.element.data("id")},"{setDefaultAvatar} click":function(){EasySocial.ajax("admin/controllers/avatars/setDefault",{id:c.id}).done(function(a){b.parent.avatarItem().removeClass("default"),b.element.addClass("default"),b.parent.addMessage(a)})},"{deleteLink} click":function(){EasySocial.dialog({content:EasySocial.ajax("admin/views/profiles/confirmDeleteAvatar"),bindings:{"{deleteButton} click":function(d){a(d).addClass("btn-loading"),EasySocial.ajax("admin/controllers/avatars/delete",{id:c.id}).done(function(a){b.element.remove(),0==b.parent.avatarList().children().length&&b.parent.avatarEmpty().show(),b.parent.addMessage(a),EasySocial.dialog().close()
})}}})}}}),b.resolve()})}),EasySocial.module("admin/profiles/form",function(){var b=this;EasySocial.require().script("admin/utilities/alias").done(function(a){EasySocial.Controller("Profiles.Profile",{defaultOptions:{id:null,hasAvatar:!1,defaultAvatar:null,"{profileAvatar}":"[data-profile-avatar]","{profileAvatarImage}":"[data-profile-avatar-image]","{profileAvatarRemoveWrap}":"[data-profile-avatar-remove-wrap]","{profileAvatarRemoveButton}":"[data-profile-avatar-remove-button]","{profileAvatarUpload}":"[data-profile-avatar-upload]"}},function(b){return{init:function(){b.element.addController("EasySocial.Controller.Utilities.Alias",{"{source}":"#title","{target}":"#alias"}),b.options.hasAvatar=b.profileAvatar().data("hasavatar"),b.options.defaultAvatar=b.profileAvatar().data("defaultavatar")
},"{profileAvatarUpload} change":function(c){var d=c.val();a.isEmpty(d)?b.options.hasAvatar||b.profileAvatarRemoveWrap().hide():b.profileAvatarRemoveWrap().show()},"{profileAvatarRemoveButton} click":function(){return b.options.hasAvatar?(EasySocial.dialog({content:EasySocial.ajax("admin/views/profiles/confirmRemoveProfileAvatar"),bindings:{"{deleteButton} click":function(){EasySocial.ajax("admin/controllers/profiles/deleteProfileAvatar",{id:b.options.id}).done(function(){b.profileAvatarImage().attr("src",b.options.defaultAvatar),b.profileAvatarRemoveWrap().hide(),b.options.hasAvatar=!1,EasySocial.dialog().close()
})}}}),void 0):(b.profileAvatarUpload().val("").trigger("change"),void 0)}}}),b.resolve()})}),EasySocial.module("admin/progress/progress",function(){var b=this;EasySocial.Controller("Progress",{defaultOptions:{current:0,eachWidth:null,total:null,"{progressBar}":".progress-bar","{progressResult}":".progress-result"}},function(a){return{reset:function(){a.options.current=0,a.eachWidth=null,a.total=null,a.progressBar().css("width","0%").html("")},begin:function(b){a.options.total=b,a.options.eachWidth=100/b,b>0&&a.element.removeClass("t-hidden")
},touch:function(){a.options.current+=a.options.eachWidth,a.options.current>100&&(a.options.current=100),a.progressBar().css("width",a.options.current+"%"),a.progressResult().html(Math.round(a.options.current)+"%")},completed:function(){a.options.current=100,a.progressBar().css("width",a.options.current+"%"),a.progressResult().html(Math.round(a.options.current)+"%")}}}),b.resolve()}),EasySocial.module("admin/regions/form",function(a){var b=this;EasySocial.Controller("Regions.Form",{defaultOptions:{"{type}":"[data-type]","{parentBase}":"[data-parent-base]","{parentContent}":"[data-parent-content]","{parentUid}":"[data-parent-uid]","{parentType}":"[data-parent-type]"}},function(b){return{init:function(){b.element.find('input[type="text"]').prop("disabled",!b.type().val()),b.element.find('[data-bs-toggle="radio-buttons"]').toggleClass("disabled",!b.type().val())
},"{type} change":function(a){var c=a.find(":selected").data("parent");b.parentType().val(c),b.element.find('input[type="text"]').prop("disabled",!a.val()),b.element.find('[data-bs-toggle="radio-buttons"]').toggleClass("disabled",!a.val()),c?(b.parentBase().show(),!b.parentContent().data("loaded")&&b.getParents(c).done(function(a){b.parentContent().html(a)})):b.parentBase().hide()},getParents:a.memoize(function(a){return EasySocial.ajax("admin/controllers/regions/getParents",{type:a})}),validate:function(){return b.type().val()&&b.element.find('input[name="name"]').val()&&b.element.find('input[name="code"]').val()
}}}),b.resolve()}),EasySocial.module("admin/regions/init",function(a){var b=this;EasySocial.Controller("Region.Init",{defaultOptions:{callback:function(){},"{startButton}":"[data-start]","{table}":"[data-table]","{tableBody}":"[data-table-body]","{row}":"[data-table-row]"}},function(b){return{init:function(){b.row().addController("EasySocial.Controller.Region.Init.Row")},"{startButton} click":function(c){c.hide(),b.table().show(),b.counter=0,b.progress=a.Deferred().done(function(){b.options.callback()}),b.process()
},process:function(){var a=b.row().eq(b.counter);return 0===a.length?b.progress.resolve():(a.show(),EasySocial.ajax("admin/controllers/regions/initialise",{key:a.data("key")}).done(function(){a.trigger("updateStatus",[1]),b.counter++,b.process()}),void 0)}}}),EasySocial.Controller("Region.Init.Row",{defaultOptions:{"{title}":"[data-row-title]","{status}":"[data-row-status]","{icon}":"[data-row-icon]"}},function(a){return{init:function(){},statuses:["label-danger","label-success","label-warning"],icons:["fa-exclamation-triangle","fa-check","fa-wrench"],"{self} updateStatus":function(b,c,d){var e=a.status(),f=a.icon();
for(i=0;3>i;i++)e.toggleClass(a.statuses[i],d==i),f.toggleClass(a.icons[i],d==i)}}}),b.resolve()}),EasySocial.module("admin/users/form",function(){var b=this;EasySocial.require().script("shared/fields/base","shared/fields/conditional").done(function(a){EasySocial.Controller("Users.Form",{defaultOptions:{userid:null,mode:"adminedit","{selectProfile}":"[data-user-select-profile]","{content}":"[data-user-new-content]","{profileTitle}":"[data-profile-title]","{fieldItem}":"[data-field-item]","{tabnav}":"[data-tabnav]","{tabcontent}":"[data-tabcontent]","{stepnav}":"[data-stepnav]","{stepcontent}":"[data-stepcontent]",view:{loading:"site/loading/large"}}},function(b){return{init:function(){window.selectedProfile=b.selectedProfile,b.fieldItem().addController("EasySocial.Controller.Field.Base",{userid:b.options.userid,mode:b.options.mode}),b.fieldItem().addController("EasySocial.Controller.Field.Conditional")
},selectedProfile:function(a){EasySocial.dialog().close(),window.location.href="index.php?option=com_easysocial&view=users&layout=form&profileId="+a},"{selectProfile} click":function(){EasySocial.dialog({content:EasySocial.ajax("admin/views/profiles/browse")})},errorFields:[],"{fieldItem} error":function(c){var e=c.data("id");a.inArray(e,b.errorFields)<0&&b.errorFields.push(e);var f=c.parents(b.stepcontent.selector).data("for");b.stepnav().filterBy("for",f).trigger("error");var g=c.parents(b.tabcontent.selector).data("for");
b.tabnav().filterBy("for",g).trigger("error")},"{fieldItem} clear":function(c){var e=c.data("id");b.errorFields=a.without(b.errorFields,e);var f=c.parents(b.stepcontent.selector).data("for");b.stepnav().filterBy("for",f).trigger("clear");var g=c.parents(b.tabcontent.selector).data("for");b.tabnav().filterBy("for",g).trigger("clear")},"{stepnav} error":function(a){a.addClass("error")},"{tabnav} error":function(a){a.addClass("error")},"{stepnav} clear":function(a){b.errorFields.length<1&&a.removeClass("error")
},"{tabnav} clear":function(a){b.errorFields.length<1&&a.removeClass("error")},"{stepnav} click":function(a){var c=a.data("for");b.stepcontent().filterBy("for",c).find(b.fieldItem.selector).trigger("show")}}}),b.resolve()})}),EasySocial.module("admin/users/privacy",function(){var b=this;EasySocial.require().library("textboxlist").done(function(a){EasySocial.Controller("Profile.Privacy",{defaultOptions:{userId:"","{privacyItem}":"[data-privacy-item]","{privacyForm}":"[data-profile-privacy-form]","{defaultFieldInput}":"[data-default-privacy-field]","{defaultFieldEdit}":"[data-default-field-edit]"}},function(a){return{init:function(){a.privacyItem().implement(EasySocial.Controller.Profile.Privacy.Item,{"{parent}":a})
},"{defaultFieldEdit} click":function(){var b=a.defaultFieldInput().val(),c=a.privacyItem().controller();c.editField(b,!0,a.defaultFieldInput())}}}),EasySocial.Controller("Profile.Privacy.Item",{defaultOptions:{"{selection}":"[data-privacy-select]","{hiddenCustom}":"[data-hidden-custom]","{hiddenField}":"[data-hidden-field]","{customForm}":"[data-privacy-custom-form]","{customTextInput}":"[data-textfield]","{customItems}":"input[]","{customHideBtn}":"[data-privacy-custom-hide-button]","{customInputItem}":"[data-textboxlist-item]","{customEditBtn}":"[data-privacy-custom-edit-button]","{fieldEdit}":"[data-privacy-field]"}},function(b){return{init:function(){b.customTextInput().length>0&&(b.customTextInput().textboxlist({component:"es",unique:!0,plugin:{autocomplete:{exclusive:!0,minLength:2,cache:!1,query:function(a){var c=b.getTaggedUsers(),d=EasySocial.ajax("site/views/privacy/getfriends",{q:a,userid:b.parent.options.userId,exclude:c});
return d}}}}),b.textboxlistLib=b.customTextInput().textboxlist("controller"))},getTaggedUsers:function(){var c=[],d=b.customInputItem();return d.length>0&&a.each(d,function(b,d){c.push(a(d).data("id"))}),c},"{customTextInput} addItem":function(a,c,d){var e=b.hiddenCustom().val(),f="";if(""==e)f=d.id;else{var g=e.split(",");g.push(d.id),f=g.join(",")}b.hiddenCustom().val(f)},"{customTextInput} removeItem":function(a,c,d){for(var e=b.hiddenCustom().val(),f="",g=[],h=e.split(","),i=0;i<h.length;i++)h[i]!=d.id&&g.push(h[i]);
f=g.length<=0?"":g.join(","),b.hiddenCustom().val(f)},"{customEditBtn} click":function(){b.customForm().toggle()},"{selection} change":function(a){var c=a.val();"custom"==c?(b.customForm().show(),b.customEditBtn().show()):(b.customForm().hide(),b.customEditBtn().hide())},"{customHideBtn} click":function(){b.customForm().hide(),b.customEditBtn().show(),b.textboxlistLib.autocomplete.hide()},"{fieldEdit} click":function(){var a=b.hiddenField().val();b.editField(a,!0,b.hiddenField())},editField:function(b,c,d){var e=[],f=!1,g=[];
if(void 0==c&&(c=!1),b)var g=b.split(",");EasySocial.dialog({content:EasySocial.ajax("admin/views/privacy/fields",{selected:b,isDefault:c?1:0}),selectors:{"{addFieldButton}":"[data-field-add]","{removeFieldButton}":"[data-field-remove]","{fieldTemplate}":"[data-field-template]","{fieldWrapper}":"[data-field-wrapper]","{fieldSelect}":"[data-field-item] [data-field-select]","{tmplFieldSelect}":"[data-field-template] [data-field-select]","{fieldItem}":"[data-field-item]"},bindings:{"{addFieldButton} click":function(){var a=this.fieldTemplate().clone();
a.removeAttr("data-field-template").removeClass("t-hidden").attr("data-field-item","").appendTo(this.fieldWrapper())},"{removeFieldButton} click":function(b){if(this.fieldItem().length>1){var c=a(b).closest("[data-field-item]").find("[data-field-select]").val();if(a.inArray(c,g)>=0){var d=[];a.each(g,function(a,b){b!=c&&d.push(b)}),g=d}a(b).closest("[data-field-item]").remove()}},"{fieldSelect} change":function(b){var c=a(b).val();a(b).closest("[data-field-item]").find("[data-field-notice]").addClass("t-hidden"),a.inArray(c,g)>=0?(a(b).closest("[data-field-item]").find("[data-field-notice]").removeClass("t-hidden"),a(b).val("")):g.push(c)
},"{saveButton} click":function(){f=!0;var b=this.fieldSelect();a.each(b,function(b,c){var d=a(c).val();""!=d&&-1==a.inArray(d,e)&&e.push(d)}),EasySocial.dialog().close();var c="";e.length>0&&(c=e.join(","),d.val(c))}}})}}}),b.resolve()})}),EasySocial.module("admin/users/users",function(){var b=this;EasySocial.require().script("admin/api/toolbar").library("expanding").done(function(a){EasySocial.Controller("Users",{defaultOptions:{"{item}":"[data-user-item]"}},function(a){return{init:function(){a.item().implement(EasySocial.Controller.Users.Item)
}}}),EasySocial.Controller("Users.Item",{defaultOptions:{"{insertLink}":"[data-user-item-insertLink]"}},function(a){return{init:function(){a.options.name=a.element.data("name"),a.options.avatar=a.element.data("avatar"),a.options.email=a.element.data("email"),a.options.id=a.element.data("id")},"{insertLink} click":function(){a.trigger("userSelected",[a.options.id,a.options.name,a.options.avatar,a.options.email])}}}),EasySocial.Controller("Users.Pending",{defaultOptions:{"{item}":"[data-pending-item]"}},function(a){return{init:function(){a.item().implement(EasySocial.Controller.Users.Pending.Item)
}}}),EasySocial.Controller("Users.Pending.Item",{defaultOptions:{"{approve}":"[data-pending-approve]","{reject}":"[data-pending-reject]"}},function(b){return{init:function(){b.options.id=b.element.data("id")},"{approve} click":function(){EasySocial.dialog({content:EasySocial.ajax("admin/views/users/confirmApprove",{id:b.options.id}),bindings:{"{approveButton} click":function(){a("[data-users-approve-form]").submit()}}})},"{reject} click":function(){EasySocial.dialog({content:EasySocial.ajax("admin/views/users/confirmReject",{id:b.options.id})})
}}}),b.resolve()})}),EasySocial.module("admin/utilities/alias",function(){var b=this;EasySocial.Controller("Utilities.Alias",{defaultOptions:{"{target}":"","{source}":""}},function(a){return{init:function(){},convertToPermalink:function(a){return a.replace(/\s/g,"-").replace(/[^\w\/-]/g,"").toLowerCase()},"{source} keyup":function(){var d=a.convertToPermalink(a.source().val());a.target().val(d)},"{target} keyup":function(){var d=a.convertToPermalink(a.target().val());a.target().val(d)}}}),b.resolve()}),EasySocial.module("admin/vendors/drag",function(a){var b=this,c=a;
!function(a){a.fn.drag=function(b,c,d){var e="string"==typeof b?b:"",f=a.isFunction(b)?b:a.isFunction(c)?c:null;return 0!==e.indexOf("drag")&&(e="drag"+e),d=(b==f?c:d)||{},f?this.bind(e,d,f):this.trigger(e)};var b=a.event,c=b.special,d=c.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:!1,drop:!0,click:!1},datakey:"dragdata",noBubble:!0,add:function(b){var c=a.data(this,d.datakey),e=b.data||{};c.related+=1,a.each(d.defaults,function(a){void 0!==e[a]&&(c[a]=e[a])})},remove:function(){a.data(this,d.datakey).related-=1
},setup:function(){if(!a.data(this,d.datakey)){var c=a.extend({related:0},d.defaults);a.data(this,d.datakey,c),b.add(this,"touchstart mousedown",d.init,c),this.attachEvent&&this.attachEvent("ondragstart",d.dontstart)}},teardown:function(){var c=a.data(this,d.datakey)||{};c.related||(a.removeData(this,d.datakey),b.remove(this,"touchstart mousedown",d.init),d.textselect(!0),this.detachEvent&&this.detachEvent("ondragstart",d.dontstart))},init:function(e){if(!d.touched){var g,f=e.data;if(!(0!=e.which&&f.which>0&&e.which!=f.which||a(e.target).is(f.not)||f.handle&&!a(e.target).closest(f.handle,e.currentTarget).length||(d.touched="touchstart"==e.type?this:null,f.propagates=1,f.mousedown=this,f.interactions=[d.interaction(this,f)],f.target=e.target,f.pageX=e.pageX,f.pageY=e.pageY,f.dragging=null,g=d.hijack(e,"draginit",f),!f.propagates)))return g=d.flatten(g),g&&g.length&&(f.interactions=[],a.each(g,function(){f.interactions.push(d.interaction(this,f))
})),f.propagates=f.interactions.length,f.drop!==!1&&c.drop&&c.drop.handler(e,f),d.textselect(!1),d.touched?b.add(d.touched,"touchmove touchend",d.handler,f):b.add(document,"mousemove mouseup",d.handler,f),!d.touched||f.live?!1:void 0}},interaction:function(b,c){var e=a(b)[c.relative?"position":"offset"]()||{top:0,left:0};return{drag:b,callback:new d.callback,droppable:[],offset:e}},handler:function(e){var f=e.data;switch(e.type){case!f.dragging&&"touchmove":e.preventDefault();case!f.dragging&&"mousemove":if(Math.pow(e.pageX-f.pageX,2)+Math.pow(e.pageY-f.pageY,2)<Math.pow(f.distance,2))break;
e.target=f.target,d.hijack(e,"dragstart",f),f.propagates&&(f.dragging=!0);case"touchmove":e.preventDefault();case"mousemove":if(f.dragging){if(d.hijack(e,"drag",f),f.propagates){f.drop!==!1&&c.drop&&c.drop.handler(e,f);break}e.type="mouseup"}case"touchend":case"mouseup":default:d.touched?b.remove(d.touched,"touchmove touchend",d.handler):b.remove(document,"mousemove mouseup",d.handler),f.dragging&&(f.drop!==!1&&c.drop&&c.drop.handler(e,f),d.hijack(e,"dragend",f)),d.textselect(!0),f.click===!1&&f.dragging&&a.data(f.mousedown,"suppress.click",(new Date).getTime()+5),f.dragging=d.touched=!1
}},hijack:function(c,e,f,g,h){if(f){var k,m,o,i={event:c.originalEvent,type:c.type},j=e.indexOf("drop")?"drag":"drop",l=g||0,p=isNaN(g)?f.interactions.length:g;c.type=e,c.originalEvent=null,f.results=[];do if(m=f.interactions[l]){if("dragend"!==e&&m.cancelled)continue;o=d.properties(c,f,m),m.results=[],a(h||m[j]||f.droppable).each(function(g,h){return o.target=h,c.isPropagationStopped=function(){return!1},k=h?b.dispatch.call(h,c,o):null,k===!1?("drag"==j&&(m.cancelled=!0,f.propagates-=1),"drop"==e&&(m[j][g]=null)):"dropinit"==e&&m.droppable.push(d.element(k)||h),"dragstart"==e&&(m.proxy=a(d.element(k)||m.drag)[0]),m.results.push(k),delete c.result,"dropinit"!==e?k:void 0
}),f.results[l]=d.flatten(m.results),"dropinit"==e&&(m.droppable=d.flatten(m.droppable)),"dragstart"!=e||m.cancelled||o.update()}while(++l<p);return c.type=i.type,c.originalEvent=i.event,d.flatten(f.results)}},properties:function(a,b,c){var e=c.callback;return e.drag=c.drag,e.proxy=c.proxy||c.drag,e.startX=b.pageX,e.startY=b.pageY,e.deltaX=a.pageX-b.pageX,e.deltaY=a.pageY-b.pageY,e.originalX=c.offset.left,e.originalY=c.offset.top,e.offsetX=e.originalX+e.deltaX,e.offsetY=e.originalY+e.deltaY,e.drop=d.flatten((c.drop||[]).slice()),e.available=d.flatten((c.droppable||[]).slice()),e
},element:function(a){return a&&(a.jquery||1==a.nodeType)?a:void 0},flatten:function(b){return a.map(b,function(b){return b&&b.jquery?a.makeArray(b):b&&b.length?d.flatten(b):b})},textselect:function(b){a(document)[b?"unbind":"bind"]("selectstart",d.dontstart).css("MozUserSelect",b?"":"none"),document.unselectable=b?"off":"on"},dontstart:function(){return!1},callback:function(){}};d.callback.prototype={update:function(){c.drop&&this.available.length&&a.each(this.available,function(a){c.drop.locate(this,a)})}};
var e=b.dispatch;b.dispatch=function(b){return a.data(this,"suppress."+b.type)-(new Date).getTime()>0?(a.removeData(this,"suppress."+b.type),void 0):e.apply(this,arguments)};var f=b.fixHooks.touchstart=b.fixHooks.touchmove=b.fixHooks.touchend=b.fixHooks.touchcancel={props:"clientX clientY pageX pageY screenX screenY".split(" "),filter:function(b,c){if(c){var d=c.touches&&c.touches[0]||c.changedTouches&&c.changedTouches[0]||null;d&&a.each(f.props,function(a,c){b[c]=d[c]})}return b}};c.draginit=c.dragstart=c.dragend=d
}(c),b.resolve()}),EasySocial.module("admin/vendors/mousewheel",function(a){function j(b){var c=b||window.event,d=e.call(arguments,1),h=0,j=0,m=0,n=0,o=0,p=0;if(b=a.event.fix(c),b.type="mousewheel","detail"in c&&(m=-1*c.detail),"wheelDelta"in c&&(m=c.wheelDelta),"wheelDeltaY"in c&&(m=c.wheelDeltaY),"wheelDeltaX"in c&&(j=-1*c.wheelDeltaX),"axis"in c&&c.axis===c.HORIZONTAL_AXIS&&(j=-1*m,m=0),h=0===m?j:m,"deltaY"in c&&(m=-1*c.deltaY,h=m),"deltaX"in c&&(j=c.deltaX,0===m&&(h=-1*j)),0!==m||0!==j){if(1===c.deltaMode){var q=a.data(this,"mousewheel-line-height");
h*=q,m*=q,j*=q}else if(2===c.deltaMode){var r=a.data(this,"mousewheel-page-height");h*=r,m*=r,j*=r}if(n=Math.max(Math.abs(m),Math.abs(j)),(!g||g>n)&&(g=n,l(c,n)&&(g/=40)),l(c,n)&&(h/=40,j/=40,m/=40),h=Math[h>=1?"floor":"ceil"](h/g),j=Math[j>=1?"floor":"ceil"](j/g),m=Math[m>=1?"floor":"ceil"](m/g),i.settings.normalizeOffset&&this.getBoundingClientRect){var s=this.getBoundingClientRect();o=b.clientX-s.left,p=b.clientY-s.top}return b.deltaX=j,b.deltaY=m,b.deltaFactor=g,b.offsetX=o,b.offsetY=p,b.deltaMode=0,d.unshift(b,h,j,m),f&&clearTimeout(f),f=setTimeout(k,200),(a.event.dispatch||a.event.handle).apply(this,d)
}}function k(){g=null}function l(a,b){return i.settings.adjustOldDeltas&&"mousewheel"===a.type&&b%120===0}var f,g,b=this,c=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],d="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],e=Array.prototype.slice;if(a.event.fixHooks)for(var h=c.length;h;)a.event.fixHooks[c[--h]]=a.event.mouseHooks;var i=a.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var b=d.length;b;)this.addEventListener(d[--b],j,!1);
else this.onmousewheel=j;a.data(this,"mousewheel-line-height",i.getLineHeight(this)),a.data(this,"mousewheel-page-height",i.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var b=d.length;b;)this.removeEventListener(d[--b],j,!1);else this.onmousewheel=null;a.removeData(this,"mousewheel-line-height"),a.removeData(this,"mousewheel-page-height")},getLineHeight:function(b){var c=a(b),d=c["offsetParent"in a.fn?"offsetParent":"parent"]();return d.length||(d=a("body")),parseInt(d.css("fontSize"),10)||parseInt(c.css("fontSize"),10)||16
},getPageHeight:function(b){return a(b).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}}),b.resolve()}),EasySocial.module("admin/vendors/raty",function(a){var b=a,c=this;!function(a){var b={init:function(c){return this.each(function(){b.destroy.call(this),this.opt=a.extend(!0,{},a.fn.raty.defaults,c);var d=a(this),e=["number","readOnly","score","scoreName"];
b._callback.call(this,e),this.opt.precision&&b._adjustPrecision.call(this),this.opt.number=b._between(this.opt.number,0,this.opt.numberMax),this.stars=b._createStars.call(this),this.score=b._createScore.call(this),b._apply.call(this,this.opt.score),this.opt.cancel&&(this.cancel=b._createCancel.call(this)),this.opt.width&&d.css("width",this.opt.width),this.opt.readOnly?b._lock.call(this):(d.css("cursor","pointer"),b._binds.call(this)),b._target.call(this,this.opt.score),d.data({settings:this.opt,raty:!0})})},_adjustPrecision:function(){this.opt.targetType="score",this.opt.half=!0
},_apply:function(a){a&&a>0&&(a=b._between(a,0,this.opt.number),this.score.val(a)),b._fill.call(this,a),a&&b._roundStars.call(this,a)},_between:function(a,b,c){return Math.min(Math.max(parseFloat(a),b),c)},_binds:function(){this.cancel&&b._bindCancel.call(this),b._bindClick.call(this),b._bindOut.call(this),b._bindOver.call(this)},_bindCancel:function(){b._bindClickCancel.call(this),b._bindOutCancel.call(this),b._bindOverCancel.call(this)},_bindClick:function(){var b=this,c=a(b);b.stars.on("click.raty",function(d){b.score.val(b.opt.half||b.opt.precision?c.data("score"):a(this).data("score")),b.opt.click&&b.opt.click.call(b,parseFloat(b.score.val()),d)
})},_bindClickCancel:function(){var a=this;a.cancel.on("click.raty",function(b){a.score.removeAttr("value"),a.opt.click&&a.opt.click.call(a,null,b)})},_bindOut:function(){var c=this;a(this).on("mouseleave.raty",function(a){var d=parseFloat(c.score.val())||void 0;b._apply.call(c,d),b._target.call(c,d,a),c.opt.mouseout&&c.opt.mouseout.call(c,d,a)})},_bindOutCancel:function(){var b=this;b.cancel.on("mouseleave.raty",function(c){a(this).attr("class",b.opt.cancelOff),b.opt.mouseout&&b.opt.mouseout.call(b,b.score.val()||null,c)
})},_bindOverCancel:function(){var c=this;c.cancel.on("mouseover.raty",function(d){a(this).attr("class",c.opt.cancelOn),c.stars.attr("class",c.opt.starOff),b._target.call(c,null,d),c.opt.mouseover&&c.opt.mouseover.call(c,null)})},_bindOver:function(){var c=this,d=a(c),e=c.opt.half?"mousemove.raty":"mouseover.raty";c.stars.on(e,function(e){var f=parseInt(a(this).data("score"),10);if(c.opt.half){var g=parseFloat((e.pageX-a(this).offset().left)/(c.opt.size?c.opt.size:parseInt(d.css("font-size")))),h=g>.5?1:.5;f=f-1+h,b._fill.call(c,f),c.opt.precision&&(f=f-h+g),b._roundStars.call(c,f),d.data("score",f)
}else b._fill.call(c,f);b._target.call(c,f,e),c.opt.mouseover&&c.opt.mouseover.call(c,f,e)})},_callback:function(a){for(var b in a)"function"==typeof this.opt[a[b]]&&(this.opt[a[b]]=this.opt[a[b]].call(this))},_createCancel:function(){var b=a(this),c=this.opt.cancelOff,d=a("<i />",{"class":c,title:this.opt.cancelHint});return"left"==this.opt.cancelPlace?b.prepend("&#160;").prepend(d):b.append("&#160;").append(d),d},_createScore:function(){return a("<input />",{type:"hidden",name:this.opt.scoreName}).appendTo(this)
},_createStars:function(){for(var c=a(this),d=1;d<=this.opt.number;d++){var e=b._getHint.call(this,d),f=this.opt.score&&this.opt.score>=d?"starOn":"starOff";f=this.opt[f],a("<i />",{"class":f,title:e,"data-score":d}).appendTo(this),this.opt.space&&c.append(d<this.opt.number?"&#160;":"")}return c.children("i")},_error:function(b){a(this).html(b),a.error(b)},_fill:function(a){for(var b=this,c=0,d=1;d<=b.stars.length;d++){var e=b.stars.eq(d-1),f=b.opt.single?d==a:a>=d;if(b.opt.iconRange&&b.opt.iconRange.length>c){var g=b.opt.iconRange[c],h=g.on||b.opt.starOn,i=g.off||b.opt.starOff,j=f?h:i;
d<=g.range&&e.attr("class",j),d==g.range&&c++}else{var j=f?"starOn":"starOff";e.attr("class",this.opt[j])}}},_getHint:function(a){var b=this.opt.hints[a-1];return""===b?"":b||a},_lock:function(){var c=parseInt(this.score.val(),10),d=c?b._getHint.call(this,c):this.opt.noRatedMsg;a(this).data("readonly",!0).css("cursor","").attr("title",d),this.score.attr("readonly","readonly"),this.stars.attr("title",d),this.cancel&&this.cancel.hide()},_roundStars:function(a){var b=(a-Math.floor(a)).toFixed(2);if(b>this.opt.round.down){var c="starOn";
this.opt.halfShow&&b<this.opt.round.up?c="starHalf":b<this.opt.round.full&&(c="starOff"),this.stars.eq(Math.ceil(a)-1).attr("class",this.opt[c])}},_target:function(c,d){if(this.opt.target){var e=a(this.opt.target);0===e.length&&b._error.call(this,"Target selector invalid or missing!"),this.opt.targetFormat.indexOf("{score}")<0&&b._error.call(this,'Template "{score}" missing!');var f=d&&"mouseover"==d.type;void 0===c?c=this.opt.targetText:null===c?c=f?this.opt.cancelHint:this.opt.targetText:("hint"==this.opt.targetType?c=b._getHint.call(this,Math.ceil(c)):this.opt.precision&&(c=parseFloat(c).toFixed(1)),f||this.opt.targetKeep||(c=this.opt.targetText)),c&&(c=this.opt.targetFormat.toString().replace("{score}",c)),e.is(":input")?e.val(c):e.html(c)
}},_unlock:function(){a(this).data("readonly",!1).css("cursor","pointer").removeAttr("title"),this.score.removeAttr("readonly","readonly");for(var c=0;c<this.opt.number;c++)this.stars.eq(c).attr("title",b._getHint.call(this,c+1));this.cancel&&this.cancel.css("display","")},cancel:function(c){return this.each(function(){a(this).data("readonly")!==!0&&(b[c?"click":"score"].call(this,null),this.score.removeAttr("value"))})},click:function(c){return a(this).each(function(){a(this).data("readonly")!==!0&&(b._apply.call(this,c),this.opt.click||b._error.call(this,'You must add the "click: function(score, evt) { }" callback.'),this.opt.click.call(this,c,a.Event("click")),b._target.call(this,c))
})},destroy:function(){return a(this).each(function(){var b=a(this),c=b.data("raw");c?b.off(".raty").empty().css({cursor:c.style.cursor,width:c.style.width}).removeData("readonly"):b.data("raw",b.clone()[0])})},getScore:function(){var c,b=[];return a(this).each(function(){c=this.score.val(),b.push(c?parseFloat(c):void 0)}),b.length>1?b:b[0]},readOnly:function(c){return this.each(function(){var d=a(this);d.data("readonly")!==c&&(c?(d.off(".raty").children("i").off(".raty"),b._lock.call(this)):(b._binds.call(this),b._unlock.call(this)),d.data("readonly",c))
})},reload:function(){return b.set.call(this,{})},score:function(){return arguments.length?b.setScore.apply(this,arguments):b.getScore.call(this)},set:function(b){return this.each(function(){var c=a(this),d=c.data("settings"),e=a.extend({},d,b);c.raty(e)})},setScore:function(c){return a(this).each(function(){a(this).data("readonly")!==!0&&(b._apply.call(this,c),b._target.call(this,c))})}};a.fn.raty=function(c){return b[c]?b[c].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof c&&c?(a.error("Method "+c+" does not exist!"),void 0):b.init.apply(this,arguments)
},a.fn.raty.defaults={cancel:!1,cancelHint:"Cancel this rating!",cancelOff:"fa fa-fw fa-minus-square",cancelOn:"fa fa-fw fa-check-square",cancelPlace:"left",click:void 0,half:!1,halfShow:!0,hints:["bad","poor","regular","good","gorgeous"],iconRange:void 0,mouseout:void 0,mouseover:void 0,noRatedMsg:"Not rated yet!",number:5,numberMax:20,precision:!1,readOnly:!1,round:{down:.25,full:.6,up:.76},score:void 0,scoreName:"score",single:!1,size:null,space:!0,starHalf:"fa fa-fw fa-star-half-o",starOff:"fa fa-fw fa-star-o",starOn:"fa fa-fw fa-star",target:void 0,targetFormat:"{score}",targetKeep:!1,targetText:"",targetType:"hint",width:!1}
}(b),c.resolve()}),EasySocial.module("admin/vendors/resize",function(a){function k(){e=window[f](function(){c.each(function(){var b=a(this),c=b.width(),d=b.height(),e=a.data(this,h);(c!==e.w||d!==e.h)&&b.trigger(g,[e.w=c,e.h=d])}),k()},d[i])}var e,b=this,c=a([]),d=a.resize=a.extend(a.resize,{}),f="setTimeout",g="resize",h=g+"-special-event",i="delay",j="throttleWindow";d[i]=250,d[j]=!0,a.event.special[g]={setup:function(){if(!d[j]&&this[f])return!1;var b=a(this);c=c.add(b),a.data(this,h,{w:b.width(),h:b.height()}),1===c.length&&k()
},teardown:function(){if(!d[j]&&this[f])return!1;var b=a(this);c=c.not(b),b.removeData(h),c.length||clearTimeout(e)},add:function(b){function e(b,d,e){var f=a(this),g=a.data(this,h);null==g&&(g={w:null,h:null}),g.w=void 0!==d?d:f.width(),g.h=void 0!==e?e:f.height(),c.apply(this,arguments)}if(!d[j]&&this[f])return!1;var c;return a.isFunction(b)?(c=b,e):(c=b.handler,b.handler=e,void 0)}},b.resolve()}),EasySocial.module("admin/vendors/uniform",function(a){var b=this;!function(a){a.uniform={options:{selectClass:"selector",radioClass:"radio",checkboxClass:"checker",fileClass:"uploader",filenameClass:"filename",fileBtnClass:"action",fileDefaultText:"No file selected",fileBtnText:"Choose File",checkedClass:"checked",focusClass:"focus",disabledClass:"disabled",buttonClass:"button",activeClass:"active",hoverClass:"hover",useID:!0,idPrefix:"uniform",resetSelector:!1,autoHide:!0},elements:[]},a.support.selectOpacity=a.browser.msie&&a.browser.version<7?!1:!0,a.fn.uniform=function(b){function d(b){$el=a(b),$el.addClass($el.attr("type")),k(b)
}function e(b){a(b).addClass("uniform"),k(b)}function f(c){var d=a(c),e=a("<div>"),f=a("<span>");e.addClass(b.buttonClass),b.useID&&""!=d.attr("id")&&e.attr("id",b.idPrefix+"-"+d.attr("id"));var g;d.is("a")||d.is("button")?g=d.text():(d.is(":submit")||d.is(":reset")||d.is("input[type=button]"))&&(g=d.attr("value")),g=""==g?d.is(":reset")?"Reset":"Submit":g,f.html(g),d.css("opacity",0),d.wrap(e),d.wrap(f),e=d.closest("div"),f=d.closest("span"),d.is(":disabled")&&e.addClass(b.disabledClass),e.bind({"mouseenter.uniform":function(){e.addClass(b.hoverClass)
},"mouseleave.uniform":function(){e.removeClass(b.hoverClass),e.removeClass(b.activeClass)},"mousedown.uniform touchbegin.uniform":function(){e.addClass(b.activeClass)},"mouseup.uniform touchend.uniform":function(){e.removeClass(b.activeClass)},"click.uniform touchend.uniform":function(b){if(a(b.target).is("span")||a(b.target).is("div"))if(c[0].dispatchEvent){var d=document.createEvent("MouseEvents");d.initEvent("click",!0,!0),c[0].dispatchEvent(d)}else c[0].click()}}),c.bind({"focus.uniform":function(){e.addClass(b.focusClass)
},"blur.uniform":function(){e.removeClass(b.focusClass)}}),a.uniform.noSelect(e),k(c)}function g(c){var d=a(c),e=a("<div />"),f=a("<span />");"none"==!d.css("display")&&b.autoHide&&e.hide(),e.addClass(b.selectClass),b.useID&&""!=c.attr("id")&&e.attr("id",b.idPrefix+"-"+c.attr("id"));var g=c.find(":selected:first");0==g.length&&(g=c.find("option:first")),f.html(g.html()),c.css("opacity",0),c.wrap(e),c.before(f),e=c.parent("div"),f=c.siblings("span"),c.bind({"change.uniform":function(){f.text(c.find(":selected").html()),e.removeClass(b.activeClass)
},"focus.uniform":function(){e.addClass(b.focusClass)},"blur.uniform":function(){e.removeClass(b.focusClass),e.removeClass(b.activeClass)},"mousedown.uniform touchbegin.uniform":function(){e.addClass(b.activeClass)},"mouseup.uniform touchend.uniform":function(){e.removeClass(b.activeClass)},"click.uniform touchend.uniform":function(){e.removeClass(b.activeClass)},"mouseenter.uniform":function(){e.addClass(b.hoverClass)},"mouseleave.uniform":function(){e.removeClass(b.hoverClass),e.removeClass(b.activeClass)},"keyup.uniform":function(){f.text(c.find(":selected").html())
}}),a(c).prop("disabled")&&e.addClass(b.disabledClass),a.uniform.noSelect(f),k(c)}function h(c){var d=a(c),e=a("<div />"),f=a("<span />");"none"==!d.css("display")&&b.autoHide&&e.hide(),e.addClass(b.checkboxClass),b.useID&&""!=c.attr("id")&&e.attr("id",b.idPrefix+"-"+c.attr("id")),a(c).wrap(e),a(c).wrap(f),f=c.parent(),e=f.parent(),a(c).css("opacity",0).bind({"focus.uniform":function(){e.addClass(b.focusClass)},"blur.uniform":function(){e.removeClass(b.focusClass)},"click.uniform touchend.uniform":function(){a(c).prop("checked")?f.addClass(b.checkedClass):f.removeClass(b.checkedClass)
},"mousedown.uniform touchbegin.uniform":function(){e.addClass(b.activeClass)},"mouseup.uniform touchend.uniform":function(){e.removeClass(b.activeClass)},"mouseenter.uniform":function(){e.addClass(b.hoverClass)},"mouseleave.uniform":function(){e.removeClass(b.hoverClass),e.removeClass(b.activeClass)}}),a(c).prop("checked")&&f.addClass(b.checkedClass),a(c).prop("disabled")&&e.addClass(b.disabledClass),k(c)}function i(c){var d=a(c),e=a("<div />"),f=a("<span />");"none"==!d.css("display")&&b.autoHide&&e.hide(),e.addClass(b.radioClass),b.useID&&""!=c.attr("id")&&e.attr("id",b.idPrefix+"-"+c.attr("id")),a(c).wrap(e),a(c).wrap(f),f=c.parent(),e=f.parent(),a(c).css("opacity",0).bind({"focus.uniform":function(){e.addClass(b.focusClass)
},"blur.uniform":function(){e.removeClass(b.focusClass)},"click.uniform touchend.uniform":function(){if(a(c).prop("checked")){var d=b.radioClass.split(" ")[0];a("."+d+" span."+b.checkedClass+":has([name='"+a(c).attr("name")+"'])").removeClass(b.checkedClass),f.addClass(b.checkedClass)}else f.removeClass(b.checkedClass)},"mousedown.uniform touchend.uniform":function(){a(c).is(":disabled")||e.addClass(b.activeClass)},"mouseup.uniform touchbegin.uniform":function(){e.removeClass(b.activeClass)},"mouseenter.uniform touchend.uniform":function(){e.addClass(b.hoverClass)
},"mouseleave.uniform":function(){e.removeClass(b.hoverClass),e.removeClass(b.activeClass)}}),a(c).prop("checked")&&f.addClass(b.checkedClass),a(c).prop("disabled")&&e.addClass(b.disabledClass),k(c)}function j(c){var d=a(c),e=a("<div />"),f=a("<span>"+b.fileDefaultText+"</span>"),g=a("<span>"+b.fileBtnText+"</span>");if("none"==!d.css("display")&&b.autoHide&&e.hide(),e.addClass(b.fileClass),f.addClass(b.filenameClass),g.addClass(b.fileBtnClass),b.useID&&""!=d.attr("id")&&e.attr("id",b.idPrefix+"-"+d.attr("id")),d.wrap(e),d.after(g),d.after(f),e=d.closest("div"),f=d.siblings("."+b.filenameClass),g=d.siblings("."+b.fileBtnClass),!d.attr("size")){var h=e.width();
d.attr("size",h/10)}var i=function(){var a=d.val();""===a?a=b.fileDefaultText:(a=a.split(/[\/\\]+/),a=a[a.length-1]),f.text(a)};i(),d.css("opacity",0).bind({"focus.uniform":function(){e.addClass(b.focusClass)},"blur.uniform":function(){e.removeClass(b.focusClass)},"mousedown.uniform":function(){a(c).is(":disabled")||e.addClass(b.activeClass)},"mouseup.uniform":function(){e.removeClass(b.activeClass)},"mouseenter.uniform":function(){e.addClass(b.hoverClass)},"mouseleave.uniform":function(){e.removeClass(b.hoverClass),e.removeClass(b.activeClass)
}}),a.browser.msie?d.bind("click.uniform.ie7",function(){setTimeout(i,0)}):d.bind("change.uniform",i),d.prop("disabled")&&e.addClass(b.disabledClass),a.uniform.noSelect(f),a.uniform.noSelect(g),k(c)}function k(b){b=a(b).get(),b.length>1?a.each(b,function(b,c){a.uniform.elements.push(c)}):a.uniform.elements.push(b)}b=a.extend(a.uniform.options,b);var c=this;return 0!=b.resetSelector&&a(b.resetSelector).mouseup(function(){function b(){a.uniform.update(c)}setTimeout(b,10)}),a.uniform.restore=function(b){void 0==b&&(b=a(a.uniform.elements)),a(b).each(function(){a(this).is(":checkbox")?a(this).unwrap().unwrap():a(this).is("select")?(a(this).siblings("span").remove(),a(this).unwrap()):a(this).is(":radio")?a(this).unwrap().unwrap():a(this).is(":file")?(a(this).siblings("span").remove(),a(this).unwrap()):a(this).is("button, :submit, :reset, a, input[type='button']")&&a(this).unwrap().unwrap(),a(this).unbind(".uniform"),a(this).css("opacity","1");
var c=a.inArray(a(b),a.uniform.elements);a.uniform.elements.splice(c,1)})},a.uniform.noSelect=function(b){function c(){return!1}a(b).each(function(){this.onselectstart=this.ondragstart=c,a(this).mousedown(c).css({MozUserSelect:"none"})})},a.uniform.update=function(c){void 0==c&&(c=a(a.uniform.elements)),c=a(c),c.each(function(){var d=a(this);if(d.is("select")){var e=d.siblings("span"),f=d.parent("div");f.removeClass(b.hoverClass+" "+b.focusClass+" "+b.activeClass),e.html(d.find(":selected").html()),d.is(":disabled")?f.addClass(b.disabledClass):f.removeClass(b.disabledClass)
}else if(d.is(":checkbox")){var e=d.closest("span"),f=d.closest("div");f.removeClass(b.hoverClass+" "+b.focusClass+" "+b.activeClass),e.removeClass(b.checkedClass),d.is(":checked")&&e.addClass(b.checkedClass),d.is(":disabled")?f.addClass(b.disabledClass):f.removeClass(b.disabledClass)}else if(d.is(":radio")){var e=d.closest("span"),f=d.closest("div");f.removeClass(b.hoverClass+" "+b.focusClass+" "+b.activeClass),e.removeClass(b.checkedClass),d.is(":checked")&&e.addClass(b.checkedClass),d.is(":disabled")?f.addClass(b.disabledClass):f.removeClass(b.disabledClass)
}else if(d.is(":file")){var f=d.parent("div"),g=d.siblings(b.filenameClass);btnTag=d.siblings(b.fileBtnClass),f.removeClass(b.hoverClass+" "+b.focusClass+" "+b.activeClass),g.text(d.val()),d.is(":disabled")?f.addClass(b.disabledClass):f.removeClass(b.disabledClass)}else if(d.is(":submit")||d.is(":reset")||d.is("button")||d.is("a")||c.is("input[type=button]")){var f=d.closest("div");f.removeClass(b.hoverClass+" "+b.focusClass+" "+b.activeClass),d.is(":disabled")?f.addClass(b.disabledClass):f.removeClass(b.disabledClass)
}})},this.each(function(){if(a.support.selectOpacity){var b=a(this);b.is("select")?1!=b.attr("multiple")&&(void 0==b.attr("size")||b.attr("size")<=1)&&g(b):b.is(":checkbox")?h(b):b.is(":radio")?i(b):b.is(":file")?j(b):b.is(":text, :password, input[type='email']")?d(b):b.is("textarea")?e(b):(b.is("a")||b.is(":submit")||b.is(":reset")||b.is("button")||b.is("input[type=button]"))&&f(b)}})}}(a),b.resolve()}),EasySocial.module("admin/workflows/choices",function(a){var b=this;EasySocial.Controller("Config.Choices",{defaultOptions:{"{choiceItems}":"[data-fields-config-param-choice]",unique:1}},function(b){return{init:function(){b.options.unique=void 0!==b.element.data("unique")?b.element.data("unique"):1,b.choiceItems().implement(EasySocial.Controller.Config.Choices.Choice,{controller:{choices:b}}),b.initSortable()
},initSortable:function(){b.element.sortable({items:b.choiceItems.selector,placeholder:"ui-state-highlight",cursor:"move",forceHelperSize:!0,handle:"[data-fields-config-param-choice-drag]",stop:function(){a(".tooltip-es").remove(),a("[data-fields-config-param]").trigger("change")}})}}}),EasySocial.Controller("Config.Choices.Choice",{defaultOptions:{"{choiceValue}":"[data-fields-config-param-choice-value]","{choiceTitle}":"[data-fields-config-param-choice-title]","{choiceDefault}":"[data-fields-config-param-choice-default]","{addChoice}":"[data-fields-config-param-choice-add]","{removeChoice}":"[data-fields-config-param-choice-remove]","{setDefault}":"[data-fields-config-param-choice-setdefault]","{defaultIcon}":"[data-fields-config-param-choice-defaulticon]"}},function(b){return{init:function(){},"{addChoice} click":function(){var a=b.element.clone(),c=a.find('input[type="text"]');
c.attr("value",""),c.val("");var d=a.find('input[type="hidden"]');d.attr("value",0),d.val(0),a.attr("data-id",0),a.data("id",0),a.implement(EasySocial.Controller.Config.Choices.Choice,{controller:{choices:b.choices}}),b.element.after(a)},"{removeChoice} click":function(){var c=b.choices.choiceItems().length-1;c>=1&&(b.element.remove(),a(".tooltip-es").remove(),a("[data-fields-conditional-param]").trigger("change"),a("[data-fields-config-param]").trigger("change"))},"{setDefault} click":function(){{var a=b.element.index();
b.choiceTitle().val(),b.choiceValue().val()}b.choices.choiceItems().trigger("toggleDefault",[a])},"{self} toggleDefault":function(c,d,e){var f=b.element.index(),g=parseInt(b.choiceDefault().val());f===e?g?(b.defaultIcon().removeClass("es-state-featured").addClass("es-state-default"),b.choiceDefault().val(0)):(b.defaultIcon().removeClass("es-state-default").addClass("es-state-featured"),b.choiceDefault().val(1)):b.choices.options.unique&&(b.defaultIcon().removeClass("es-state-featured").addClass("es-state-default"),b.choiceDefault().val(0)),a("[data-fields-config-param]").trigger("change")
}}}),b.resolve()}),EasySocial.module("admin/workflows/form",function(){var b=this;EasySocial.require().library("ui/sortable","scrollTo").script("admin/workflows/choices").done(function(a){EasySocial.Controller("Workflows",{defaultOptions:{id:null,tmpSteps:null,tpls:{},fieldsValue:{},fieldsData:{},fieldsChoices:{},fieldsConditions:{},stepsValue:{},stepsHtml:{},fieldsConfigValue:{},deletedFields:{},deletedSteps:{},hiddenClass:"t-hidden","{templates}":"[data-workflow-templates]","{content}":"[data-content]","{titleInput}":"[data-input-workflow-title]","{descInput}":"[data-input-workflow-description]","{workflowConfigSave}":"[data-workflow-config-save-button]","{steps}":"[data-steps]","{step}":"[data-step-item]","{newStep}":"[data-step-new]","{stepTitle}":"[data-step-title]","{editStep}":"[data-step-edit]","{deleteStepButton}":"[data-step-delete]","{fields}":"[data-fields]","{field}":"[data-field-item]","{newField}":"[data-field-new]","{moveField}":"[data-field-item-move]","{deleteField}":"[data-field-item-delete]","{editField}":"[data-field-item-edit]","{conditionalField}":"[data-field-item-conditional]","{conditionalParam}":"[data-fields-conditional-param]","{fieldRequiredSymbol}":"[data-field-item-required]","{saveFieldsInput}":"[data-fields-saved-value]","{fieldSettings}":"[data-field-settings]","{fieldParam}":"[data-fields-config-param]","{fieldBrowser}":"[data-field-browser]","{fieldBrowserClose}":"[data-field-browser-close]","{fieldsTypeTab}":"[data-field-type-tab]","{fieldTypeContent}":"[data-field-type-content]","{fieldBrowserItems}":"[data-field-browser-items]","{fieldBrowserItem}":"[data-field-browser-item]","{dialogFieldSave}":"[data-field-save-button]","{dialogFieldCancel}":"[data-field-cancel-button]","{dialogFieldTab}":"[data-field-tab]","{dialogFieldContent}":"[data-field-content]","{dialogStepSave}":"[data-field-step-save-button]","{dialogError}":"[data-dialog-error]","{dialogErrorClose}":"[data-dialog-error-close]"}},function(b,c,d){return{init:function(){c.id=b.element.data("id"),this.initTemplates(),this.initSortable(),this.initDefaultData(),this.initBindEvent(),b._setMessage=b.setMessage,b.setMessage=function(a,c,e){if(void 0==e){if(d.hasClass("is-resizing"))return;
this.element.find("[data-message-group]").remove(),b._setMessage.apply(this,[a,c])}else{var f=b.getTemplate("alert"),g="o-alert--"+c,h=e.find("[data-message-group]");f.addClass(g),a||(a=h.data("message")),f.find("[data-message]").html(a),e.find("[data-message-group]").html(f)}}},initDefaultData:function(){if(!c.id||""==c.id){var d=JSON.parse(c.tmpSteps);a.each(d,function(c,d){var e=[{name:"title",value:d.title},{name:"description",value:d.description}];b.storeSteps(d.id,e),d.fields&&a.each(d.fields,function(c,d){var e=[];
a.each(d,function(a,b){var c={name:a,value:b};e.push(c)}),b.storeFieldsData(d.id,e)})})}},initTemplates:function(){var d=b.templates().children();a.each(d,function(){var b=a(this),d=b.data("template");c.tpls[d]=b.html()})},initSortable:function(){this.initStepsSortable(),this.initFieldsSortable()},initStepsSortable:function(){b.steps().sortable({items:b.step.selector,cursor:"move",forceHelperSize:!0,axis:"x",update:function(){b.updateOrdering(b.step())}})},initFieldsSortable:function(){b.fields().sortable({items:b.field.selector,cursor:"move",forceHelperSize:!0,axis:"y",start:function(a,b){b.helper.addClass("is-new"),b.helper.hasClass("has-condition")&&b.helper.removeClass("has-condition").addClass("has-condition-tmp")
},stop:function(a,b){setTimeout(function(){b.item.removeClass("is-new"),b.item.hasClass("has-condition-tmp")&&b.item.removeClass("has-condition-tmp").addClass("has-condition")},150)},update:function(){b.updateOrdering(b.field())}})},initBindEvent:function(){a(document).on("keyup",function(a){27==a.keyCode&&b.closeDialog()})},getTemplate:function(b){var d=a(c.tpls[b]).clone();return d},updateOrdering:function(b){a.each(b,function(){var b=a(this),c=b.index();b.attr("data-ordering",c)})},changed:!1,isChanged:function(){b.changed=!0
},mandatoryCheck:function(){return b.fieldsTypeTab().filter('[id="core"]').hasClass(c.hiddenClass)},hasEmptySteps:function(){var c=b.step(),d=!1;return a.each(c,function(c,e){var e=a(e),f=e.data("id");return f?b.isStepEmpty(f)?(d=!0,!1):void 0:void 0}),d},hasDuplicateUniqueField:function(){var c=[],d=a(b.content),e=d.find(b.field);a.each(e,function(b,d){var d=a(d),e=d.data("unique");if(e){var f=d.data("element");c.push(f)}});var f=c.length;return uniqueElements=a.unique(c),f!==uniqueElements.length?!0:!1},isStepEmpty:function(c){var d=a(b.content.selector+'[data-id="'+c+'"]'),e=d.find(b.field.selector);
return e.length>0?!1:!0},validate:function(){return b.mandatoryCheck()?b.hasEmptySteps()?(b.showDialogError("empty-step"),!1):b.hasDuplicateUniqueField()?(b.showDialogError("has-duplicate-unique"),!1):!0:(b.showDialogError("mandatory"),!1)},save:function(){var c=a.Deferred();if(!b.validate())return c.reject(),c;var d=b.fetchWorkflowData();return b.injectSaveData(d),c.resolve(),c},getAvailableFields:function(){return b.fetchWorkflowData(!0,!0)},fetchWorkflowData:function(d,e){var f=[],g=0,h=b.step();d&&(h=b.getCurrentStep()),a.each(h,function(d,h){var h=a(h),i=a(b.content.selector+'[data-id="'+h.data("id")+'"]'),j=[],k=[],l=i.find(b.field.selector);
if(l.length>0){var m=0;if(a.each(l,function(b,d){var d=a(d);if(e)var f={fieldTitle:d.find("[data-field-item-title]").html(),fieldId:d.data("id"),fieldElement:d.data("element"),appId:d.data("appid")};else var f={fieldTitle:d.find("[data-field-item-title]").html(),fieldId:d.data("id"),fieldElement:d.data("element"),appId:d.data("appid"),ordering:m,isNew:d.data("isnew"),params:c.fieldsValue[d.data("id")]};k.push(f),m++}),e)var j={stepId:h.data("id"),fields:k};else var j={stepId:h.data("id"),ordering:g,isNew:h.data("isnew"),params:c.stepsValue[h.data("id")],fields:k};
f.push(j),g++}else h.data("id")&&(void 0===b.deletedSteps&&(b.deletedSteps=[]),b.deletedSteps.push(h.data("id")))});var i={steps:b.deletedSteps,field:b.deletedFields},j={steps:f,deleted:i};return j},openWorkflowConfig:function(){var c=a(b.getTemplate("workflow-config"));c.find("[data-workflow-config-title]").val(b.titleInput().val()),c.find("[data-workflow-config-description]").val(b.descInput().val()),b.fieldSettings().html(c.wrap("<p/>").parent().html()),c.unwrap()},"{workflowConfigSave} click":function(c){var e=c.parents("[data-config-dialog]"),f=e.find("[data-workflow-config-title]").val(),g=e.find("[data-workflow-config-description]").val();
b.titleInput().val(f),b.descInput().val(g),a("[data-structure-heading]").html(f),a("[data-structure-description]").html(g),b.closeDialog()},"{newStep} click":function(){b.addStep()},"{step} click":function(a){var d=a.data("id");b.switchTab(d)},showFieldBrowser:function(){b.fieldBrowser().removeClass(c.hiddenClass),b.fieldBrowser().find("[data-message-group]").html("")},closeDialog:function(){b.fieldBrowser().addClass(c.hiddenClass),b.dialogError().addClass(c.hiddenClass),b.dialogFieldCancel().trigger("click")
},showDialogError:function(d){var e=a(b.getTemplate("dialog-error")),f=e.find('[data-error-type="'+d+'"]');f.length>0?f.removeClass(c.hiddenClass):e.find('[data-error-type="default"]').removeClass(c.hiddenClass),b.fieldSettings().html(e.wrap("<p/>").parent().html()),e.unwrap()},getNewFieldButton:function(){var b=a("[data-field-new]").first().clone();return b},getField:function(c){var d=a(b.field.selector+'[data-id="'+c+'"]');return d},updateFieldBrowser:function(a,d){var f=b.fieldBrowserItem().filter('[data-id="'+a+'"]'),g=f.parents(b.fieldTypeContent.selector);
if("standard"!=g.attr("id")){f[d+"Class"](c.hiddenClass);var h=g.find(b.fieldBrowserItems.selector).children(),i=b.fieldsTypeTab().filter('[id="'+g.attr("id")+'"]');h.not("."+c.hiddenClass).length<1?(i.addClass(c.hiddenClass),b.fieldsTypeTab().not("."+c.hiddenClass).eq(0).trigger("click")):i.removeClass(c.hiddenClass)}},switchTab:function(a){var d=b.getStepTab(a),e=b.getStepContent(a);b.step().removeClass("is-active"),d.addClass("is-active"),b.content().addClass(c.hiddenClass),e.removeClass(c.hiddenClass)},addStep:function(){var d=a.uid(),e=b.getTemplate("step");
e.attr("data-id",d),e.insertBefore(b.newStep());var f=b.getTemplate("editor");f.attr("data-id",d),f.insertBefore(b.templates()),b.updateOrdering(b.step()),b.deleteStepButton().removeClass(c.hiddenClass),e.trigger("click")},addField:function(c,d,e){var f=!1;if(void 0==d){var d=b.getTemplate("field"),g=c.data("fieldElement");"header"==g&&d.addClass("es-wf-field--header"),d.attr("data-id",a.uid()),d.attr("data-appid",c.data("id")),d.attr("data-element",g),d.attr("data-unique",c.data("unique")),d.find("[data-field-item-title]").html(c.data("fieldTitle")),d.find("[data-field-item-element]").html(g.toUpperCase()),f=!0
}if(void 0==e)var e=b.getCurrentStep();var h=e.find("[data-fields-wrapper]"),i=h.find("[data-fields]");if(i.children().length>0){var j=i.find(b.currentNewField),k=j.data("action");j[k](d)}else b.currentNewField=b.getNewFieldButton().attr("data-action","after"),i.append(b.currentNewField),i.append(d),i.append(b.getNewFieldButton().attr("data-action","before"));h.removeClass("is-empty"),b.updateOrdering(i.children()),b.initFieldsSortable(),f&&(b.setMessage(!1,"info",b.fieldBrowser()),b.updateFieldBrowser(c.data("id"),"add")),a.scrollTo(d.offset().top-250,200),d.addClass("is-new"),setTimeout(function(){d.removeClass("is-new")
},1500)},"{fieldBrowserItem} click":function(a){b.addField(a)},"{fieldBrowser} click":function(a,c){c.target==a[0]&&(c.preventDefault(),c.stopPropagation(),b.closeDialog())},"{dialogError} click":function(a,c){c.target==a[0]&&(c.preventDefault(),c.stopPropagation(),b.closeDialog())},"{dialogErrorClose} click":function(a,c){c.preventDefault(),c.stopPropagation(),b.closeDialog()},"{newField} click":function(a){b.currentNewField=a,b.showFieldBrowser()},"{fieldBrowserClose} click":function(a,c){c.preventDefault(),c.stopPropagation(),b.closeDialog()
},"{fieldsTypeTab} click":function(d){b.fieldsTypeTab().removeClass("active"),d.addClass("active");var f=d.attr("id"),g=b.fieldTypeContent();g.addClass(c.hiddenClass),g.each(function(){a(this).attr("id")==f&&a(this).removeClass(c.hiddenClass)})},"{editStep} click":function(c){b.fieldSettings().html(b.getTemplate("dialog-loader"));var e=c.parents(b.content.selector).data("id");b.fieldsData=[],EasySocial.ajax("admin/views/fields/loadStepConfiguration",{id:e}).done(function(c,d,f){b.stepsHtml&&a.each(b.stepsHtml,function(a,b){return b.stepId==e?(c=b.html,!1):void 0
}),b.fieldSettings().html(c),b.fieldSettings().find("[data-fields-config-param-choices]").addController("EasySocial.Controller.Config.Choices"),a(b.fieldParam.selector).on("change",function(){b.paramChanged(a(this),f)}),a(b.fieldParam.selector).on("keyup",function(){b.paramChanged(a(this),f)})})},"{dialogFieldCancel} click":function(a,c){c.preventDefault(),c.stopPropagation(),b.fieldSettings().html("")},storeFields:function(a,c,d){b.storeFieldsData(a,d)},storeSteps:function(a,c){b.storeStepsData(a,c)},deleteFields:function(a){c.fieldsValue[a]&&b.storeFieldsData(a)
},deleteStep:function(d){var e=a(b.step.selector+"[data-id="+d+"]");if(e.prev().length>0)var f=e.prev();else var f=e.next();var g=b.getStepContent(d);a.each(g.find(b.field.selector),function(c,d){b.updateFieldBrowser(a(d).data("appid"),"remove")}),void 0===b.deletedSteps&&(b.deletedSteps=[]),e.data("isnew")===!1&&b.deletedSteps.push(d),g.remove(),e.remove(),b.steps().children(b.step.selector).length<2&&b.deleteStepButton().addClass(c.hiddenClass),delete c.stepsValue[d],f.trigger("click"),b.isChanged()},storeFieldsData:function(a,b){c.fieldsValue[a]=b
},storeStepsData:function(a,b){c.stepsValue[a]=b},getCurrentStep:function(){return b.content().not("."+c.hiddenClass)},getStepTab:function(c){return a(b.step.selector+'[data-id="'+c+'"]')},getStepContent:function(b){return a("[data-content][data-id="+b+"]")},injectSaveData:function(a){b.saveFieldsInput().val(""),a&&(a=JSON.stringify(a),b.saveFieldsInput().val(a))},updateFieldTitle:function(a,c){if(c){var d=b.getField(a);d.find("[data-field-item-title]").html(c)}},updateFieldRequired:function(a,d){var e=b.getField(a),f=e.find(b.fieldRequiredSymbol.selector);
e.attr("data-required",d),"1"==d?f.removeClass(c.hiddenClass):f.addClass(c.hiddenClass)},updateConditionsUI:function(d,e){var f=a(b.field.selector+'[data-id="'+d+'"]');return e&&void 0!=e?(f.find("[data-field-item-conditional]").removeClass(c.hiddenClass),f.addClass("has-condition"),void 0):(f.find("[data-field-item-conditional]").addClass(c.hiddenClass),f.removeClass("has-condition"),void 0)},updateStepHeader:function(c,d,e){if(d||e){var f=a(b.step.selector+'[data-id="'+c+'"]'),g=a(b.content.selector+'[data-id="'+c+'"]');
d&&(f.find("[data-step-title]").html(d),g.find("[data-step-title]").html(d)),e&&g.find("[data-step-description]").html(e)}},"{dialogStepSave} click":function(c){var e=c.parents("[data-field-dialog]"),f=e.data("id"),g=[],h=!1,i=!1;b.fieldsData&&a.each(b.fieldsData,function(a,b){var c={name:b.name,value:b.value};"title"==b.name&&(h=b.value),"description"==b.name&&(i=b.value),g.push(c)});var j={stepId:f,html:e.wrap("<p/>").parent().html()},k=b.stepsHtml;b.stepsHtml=[],k&&a.each(k,function(a,c){c.stepId!=f&&b.stepsHtml.push({stepId:c.stepId,html:c.html})
}),b.storeSteps(f,g),b.stepsHtml.push(j),b.updateStepHeader(f,h,i),b.closeDialog(),b.isChanged()},"{dialogFieldSave} click":function(d){var f=d.parents("[data-field-dialog]"),g=f.data("id"),i=(f.data("appid"),b.getCurrentStep().data("id")),j=f.find("[data-field-is-conditional]").is(":checked"),l=[],m=!1,n=[],o=b.getField(g).data("required");b.fieldsData&&a.each(b.fieldsData,function(a,b){var c={name:b.name,value:b.value};"title"==b.name&&(b.value?m=b.value:c=!1),"required"==b.name&&(o=b.value),c&&(l.push(c),n[b.name]=!0)
});({fieldId:g,html:f.wrap("<p/>").parent().html()});if(b.fieldsChoices){var q=[];a.each(b.fieldsChoices,function(a,b){var c={value:b.value};q.push({items:c})}),l.push({choices:q}),n.choices=!0}if(j||(b.fieldsConditions=[],l.push({conditions:!1})),b.fieldsConditions){a.each(b.fieldsConditions,function(a,b){var c={value:b.value};l.push({conditions:c}),n.conditions=!0})}c.fieldsValue[g]&&a.each(c.fieldsValue[g],function(a,b){void 0===b.name||n[b.name]||l.push({name:b.name,value:b.value}),b.choices&&!n.choices&&l.push({choices:b.choices}),b.conditions&&!n.conditions&&l.push({conditions:b.conditions})
}),b.storeFields(g,i,l),b.updateFieldTitle(g,m),b.updateFieldRequired(g,o),b.updateConditionsUI(g,j),b.closeDialog(),b.isChanged()},"{dialogFieldTab} click":function(a){var e=a.data("id");b.dialogFieldTab().removeClass("active"),a.addClass("active"),b.dialogFieldContent().addClass(c.hiddenClass),b.dialogFieldContent().filter('[data-id="'+e+'"]').removeClass(c.hiddenClass)},"{deleteStepButton} click":function(a){var d=a.parents(b.content.selector),e=d.data("id");if(b.isStepEmpty(e))return b.deleteStep(e),!0;var f=b.getTemplate("dialog-delete-step");
b.fieldSettings().html(f.wrap("<p/>").parent().html()),f.unwrap();var g=b.fieldSettings().find("[data-dialog-confirm]");g.on("click",function(){b.deleteStep(e),b.closeDialog()})},"{editField} click":function(d){var f=d.parents(b.field.selector),g=f.data("appid"),h=f.data("id"),i=c.fieldsValue[h],j=b.getAvailableFields(),k=[];b.fieldsData=[],b.fieldsConditions=[],b.fieldsChoices=[],b.fieldSettings().html(b.getTemplate("dialog-loader")),EasySocial.ajax("admin/views/fields/loadFieldConfiguration",{appId:g,fieldId:h,previousData:i,availableFields:j}).done(function(c,d,e){a.each(e,function(b,c){a.each(c.fields,function(b,c){c.subfields?a.each(c.subfields,function(a,c){k[b+"_"+a]=c
}):k[b]=c})}),b.fieldSettings().html(c),b.fieldSettings().find("[data-fields-config-param-choices]").addController("EasySocial.Controller.Config.Choices"),a(b.fieldParam.selector).on("change",function(){b.paramChanged(a(this),k)}),a(b.fieldParam.selector).on("keyup",function(){b.paramChanged(a(this),k)}),b.fieldSettings().find("[data-field-is-conditional]").on("change",function(){b.toggleConditional(a(this))}),a(b.conditionalParam.selector).on("keyup",function(){b.conditionalChanged(a(this),k)}),a(b.conditionalParam.selector).on("change",function(){b.conditionalChanged(a(this),k)
}),a(b.fieldParam.selector).trigger("change")})},toggleConditional:function(a){var d=a.is(":checked"),e=b.fieldSettings().find('[data-field-tab][data-id="conditional-rule"]'),f=b.fieldSettings().find('[data-field-content][data-id="conditional-rule"]');d?e.removeClass(c.hiddenClass):(e.addClass(c.hiddenClass),f.addClass(c.hiddenClass),b.fieldSettings().find("[data-field-tab]").first().trigger("click"))},conditionalChanged:function(c){var d=c.data("name"),e=c.parents("[data-field-dialog]"),f=b.getConditionsValue(d,e),g={name:d,value:f},h=b.fieldsConditions;
b.fieldsConditions=[],h&&a.each(h,function(a,c){return c.name==d?!0:(b.fieldsConditions.push({name:c.name,value:c.value}),void 0)}),b.fieldsConditions.push(g)},paramChanged:function(c,d){var e=c.data("name"),f=c.parents("[data-field-dialog]"),g=b.getConfigValue(e,d,f),h=d[e];if("boolean"===h.type&&(g=c.is(":checked")?"1":"0"),"choices"==h.type)return b.onChoicesChanged(c,d);var i={name:e,value:g},j=b.fieldsData;b.fieldsData=[],j&&a.each(j,function(a,c){return c.name==e?!0:(b.fieldsData.push({name:c.name,value:c.value}),void 0)
}),b.fieldsData.push(i)},getConditionsValue:function(c,d){var e=d.find(b.conditionalParam.selector).filterBy("name",c);return 0===e.length?void 0:(values=[],a.each(e.find("li"),function(b,c){c=a(c);var d=c.find("[data-fields-condition-param-choice-field]"),e=c.find("[data-fields-condition-param-choice-operator]"),f=c.find("[data-fields-condition-param-choice-value]");values.push({id:c.data("id"),field:d.val(),operator:e.val(),value:f.val()}),d.attr("value",d.val()),e.attr("value",e.val()),f.attr("value",f.val())
}),values)},getConfigValue:function(c,d,e){var f=d[c],g=e.find(b.fieldParam.selector).filterBy("name",c);if(0===g.length)return void 0;var h="";switch(f.type){case"choices":h=[],a.each(g.find("li"),function(b,c){c=a(c);var d=c.find("[data-fields-config-param-choice-title]"),e=c.find("[data-fields-config-param-choice-value]"),f=c.find("[data-fields-config-param-choice-default]");h.push({id:c.data("id"),title:d.val(),value:e.val(),"default":f.val()}),d.attr("value",d.val()),e.attr("value",e.val()),f.attr("value",f.val())
});break;case"boolean":h=g.is(":checked")?1:0,g.attr("value",h);break;case"checkbox":h=[],a.each(f.option,function(a,b){var c=g.filter("[data-fields-config-param-option-"+b.value+"]");c.length>0&&c.is(":checked")?(h.push(b.value),c.attr("checked","checked")):c.removeAttr("checked")});break;case"list":case"select":case"dropdown":h=g.length>0?g.val():f["default"]||"",g.find("option").prop("selected",!1),g.find('option[value="'+h+'"]').prop("selected",!0);break;case"input":case"text":default:h=g.length>0?g.val():f["default"]||"",g.attr("value",h)
}return h},onChoicesChanged:function(c,d){var e=c.data("name"),f=c.parents("[data-field-dialog]"),g=b.getConfigValue(e,d,f),i=(d[e],{name:e,value:g}),j=b.fieldsChoices;b.fieldsChoices=[],j&&a.each(j,function(a,c){return c.name==e?!0:(b.fieldsChoices.push({name:c.name,value:c.value}),void 0)}),b.fieldsChoices.push(i)},"{moveField} click":function(d){var f=d.parents(b.field.selector),g=b.getTemplate("dialog-move-field"),h=b.step(),i=g.find("[data-move-selection]");h.length>1?(a.each(h,function(){var d=a(this).data("id");
if(d){var e='<option value="'+d+'">'+a(this).find("[data-step-title]").html()+"</option>";i.append(e)}}),g.find("[data-field-available]").removeClass(c.hiddenClass)):g.find("[data-field-unavailable]").removeClass(c.hiddenClass),b.fieldSettings().html(g.wrap("<p/>").parent().html()),g.unwrap();var j=b.fieldSettings().find("[data-dialog-move]");j.on("click",function(){var c=a(this).parents("[data-dialog-move-field]"),d=c.find("[data-move-selection]").val(),e=b.getStepContent(d),g=f.clone();b.removeField(f.data("id"),!0),b.currentNewField='[data-field-new][data-action="before"]',b.addField(!1,g,e),b.getStepTab(d).trigger("click"),b.closeDialog()
})},"{deleteField} click":function(a){var d=a.parents(b.field.selector),e=d.data("id");b.removeField(e)},removeField:function(a,c){var d=b.getField(a),e=d.parent(),f=e.parent();d.remove(),e.children().length<3?(f.addClass("is-empty"),e.html("")):b.updateOrdering(e.children()),c&&void 0!=c||(void 0===b.deletedFields&&(b.deletedFields=[]),d.data("isnew")===!1&&b.deletedFields.push(a),b.deleteFields(a,b.getCurrentStep().data("id")),b.updateFieldBrowser(d.data("appid"),"remove"))}}}),b.resolve()})})});